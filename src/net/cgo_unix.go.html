<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: cgo_unix.go in package net</title>
<link href="../../css/lightLiterate-v0.3.2-preview.css" rel="stylesheet">
<script src="../../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	cgo_unix.go

<span class="title">Belonging Package</span>
	<a href="../../pkg/net.html">net</a>
</code></pre>
<style>input[type=radio] {display: none;}
{background: #226; color: #ff8;}
input[id=i0]:checked ~pre .i0,
input[id=i1]:checked ~pre .i1,
input[id=i2]:checked ~pre .i2,
input[id=i3]:checked ~pre .i3
{background: brown; color: #eed;}
</style><input id="i0" type="radio" name="i"/>
<input id="i1" type="radio" name="i"/>
<input id="i2" type="radio" name="i"/>
<input id="i3" type="radio" name="i"/>
<div id="container"><div class="section">
<div class="doc">
<span class="comment"> Code generated by cmd/cgo; DO NOT EDIT.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">line /usr/local/Cellar/go/1.16.3/libexec/src/net/cgo_unix.go:1:1</span><span class="comment"> Copyright 2011 The Go Authors. All rights reserved.</span><span class="comment"> Use of this source code is governed by a BSD-style</span><span class="comment"> license that can be found in the LICENSE file.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> +build cgo,!netgo</span><span class="comment"> +build aix darwin dragonfly freebsd linux netbsd openbsd solaris</span></div>
<div class="code"><pre><code>
<span class="keyword">package</span> net
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"></span><span class="comment">#include &lt;sys/types.h&gt;</span><span class="comment">#include &lt;sys/socket.h&gt;</span><span class="comment">#include &lt;netinet/in.h&gt;</span><span class="comment">#include &lt;netdb.h&gt;</span><span class="comment">#include &lt;unistd.h&gt;</span><span class="comment">#include &lt;string.h&gt;</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> If nothing else defined EAI_OVERFLOW, make sure it has a value.</span><span class="comment">#ifndef EAI_OVERFLOW</span><span class="comment">#define EAI_OVERFLOW -12</span><span class="comment">#endif</span><span class="comment"></span></div>
<div class="code"><pre><code><span class="keyword">import</span> <a href="../../pkg/unsafe.html" class="ident i0">_</a> <label for="i0"><span class="lit-string i0">"unsafe"</span></label>

<span class="keyword">import</span> (
	<label for="i1"><span class="lit-string i1">"context"</span></label>
	<label for="i2"><span class="lit-string i2">"syscall"</span></label>
	<label for="i3"><span class="lit-string i3">"unsafe"</span></label>
)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> An addrinfoErrno represents a getaddrinfo, getnameinfo-specific</span><span class="comment"> error number. It's a signed number and a zero value is a non-error</span><span class="comment"> by convention.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/net.html#name-addrinfoErrno" class="ident">addrinfoErrno</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>

<span class="keyword">func</span> (eai <a href="#line-37" class="ident">addrinfoErrno</a>) Error() <a href="../../pkg/builtin.html#name-string" class="ident">string</a>   { <span class="keyword">return</span> ( <span class="comment">/*line :36:52*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-131" class="ident">_Cfunc_GoString</a> <span class="comment">/*line :36:61*/</span>)(( <span class="comment">/*line :36:63*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-153" class="ident">_Cfunc_gai_strerror</a> <span class="comment">/*line :36:76*/</span>)( <span class="comment">/*line :36:78*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-30" class="ident">_Ctype_int</a> <span class="comment">/*line :36:83*/</span>(<a href="#line-39" class="ident">eai</a>))) }
<span class="keyword">func</span> (eai <a href="#line-37" class="ident">addrinfoErrno</a>) Temporary() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> { <span class="keyword">return</span> <a href="#line-40" class="ident">eai</a> == ( <span class="comment">/*line :37:59*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-80" class="ident">_Ciconst_EAI_AGAIN</a> <span class="comment">/*line :37:69*/</span>) }
<span class="keyword">func</span> (eai <a href="#line-37" class="ident">addrinfoErrno</a>) Timeout() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>   { <span class="keyword">return</span> <a href="../../pkg/builtin.html#name-false" class="ident">false</a> }

<span class="keyword">type</span> <a href="../../pkg/net.html#name-portLookupResult" class="ident">portLookupResult</a> <span class="keyword">struct</span> {
	<a href="../../use/net..portLookupResult*7e062.port*f8d39.html" class="ident">port</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>
	<a href="../../use/net..portLookupResult*7e062.err*d9eb2.html" class="ident">err</a>  <a href="../../pkg/builtin.html#name-error" class="ident">error</a>
}

<span class="keyword">type</span> <a href="../../pkg/net.html#name-ipLookupResult" class="ident">ipLookupResult</a> <span class="keyword">struct</span> {
	<a href="../../use/net..ipLookupResult*1bd3f.addrs*c4f38.html" class="ident">addrs</a> []<a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>
	<a href="../../use/net..ipLookupResult*1bd3f.cname*6a283.html" class="ident">cname</a> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../use/net..ipLookupResult*1bd3f.err*d9eb2.html" class="ident">err</a>   <a href="../../pkg/builtin.html#name-error" class="ident">error</a>
}

<span class="keyword">type</span> <a href="../../pkg/net.html#name-reverseLookupResult" class="ident">reverseLookupResult</a> <span class="keyword">struct</span> {
	<a href="../../use/net..reverseLookupResult*d283e.names*aeb24.html" class="ident">names</a> []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../use/net..reverseLookupResult*d283e.err*d9eb2.html" class="ident">err</a>   <a href="../../pkg/builtin.html#name-error" class="ident">error</a>
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupHost" class="ident">cgoLookupHost</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (hosts []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {
	addrs, <a href="#line-59" class="ident">err</a>, <a href="#line-59" class="ident">completed</a> := <a href="#line-225" class="ident">cgoLookupIP</a>(<a href="#line-59" class="ident">ctx</a>, <span class="lit-string">"ip"</span>, <a href="#line-59" class="ident">name</a>)
	<span class="keyword">for</span> _, addr := <span class="keyword">range</span> <a href="#line-60" class="ident">addrs</a> {
		<a href="#line-59" class="ident">hosts</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<a href="#line-59" class="ident">hosts</a>, <a href="#line-61" class="ident">addr</a>.<a href="iprawsock.go.html#line-39" class="ident">String</a>())
	}
	<span class="keyword">return</span>
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupPort" class="ident">cgoLookupPort</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, network, service <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (port <a href="../../pkg/builtin.html#name-int" class="ident">int</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {
	<span class="keyword">var</span> hints  <span class="comment">/*line :65:12*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-42" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :65:29*/</span>
	<span class="keyword">switch</span> <a href="#line-67" class="ident">network</a> {
	<span class="keyword">case</span> <span class="lit-string">""</span>: <span class="comment">// no hints</span>
	<span class="keyword">case</span> <span class="lit-string">"tcp"</span>, <span class="lit-string">"tcp4"</span>, <span class="lit-string">"tcp6"</span>:
		<a href="#line-68" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-45" class="ident">ai_socktype</a> = ( <span class="comment">/*line :69:23*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-88" class="ident">_Ciconst_SOCK_STREAM</a> <span class="comment">/*line :69:35*/</span>)
		<a href="#line-68" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-46" class="ident">ai_protocol</a> = ( <span class="comment">/*line :70:23*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-84" class="ident">_Ciconst_IPPROTO_TCP</a> <span class="comment">/*line :70:35*/</span>)
	<span class="keyword">case</span> <span class="lit-string">"udp"</span>, <span class="lit-string">"udp4"</span>, <span class="lit-string">"udp6"</span>:
		<a href="#line-68" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-45" class="ident">ai_socktype</a> = ( <span class="comment">/*line :72:23*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-87" class="ident">_Ciconst_SOCK_DGRAM</a> <span class="comment">/*line :72:34*/</span>)
		<a href="#line-68" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-46" class="ident">ai_protocol</a> = ( <span class="comment">/*line :73:23*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-85" class="ident">_Ciconst_IPPROTO_UDP</a> <span class="comment">/*line :73:35*/</span>)
	<span class="keyword">default</span>:
		<span class="keyword">return</span> <span class="lit-number">0</span>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <span class="lit-string">"unknown network"</span>, <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-67" class="ident">network</a> + <span class="lit-string">"/"</span> + <a href="#line-67" class="ident">service</a>}, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	}
	<span class="keyword">switch</span> <a href="lookup.go.html#line-101" class="ident">ipVersion</a>(<a href="#line-67" class="ident">network</a>) {
	<span class="keyword">case</span> <span class="lit-number">'4'</span>:
		<a href="#line-68" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-44" class="ident">ai_family</a> = ( <span class="comment">/*line :79:21*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-73" class="ident">_Ciconst_AF_INET</a> <span class="comment">/*line :79:29*/</span>)
	<span class="keyword">case</span> <span class="lit-number">'6'</span>:
		<a href="#line-68" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-44" class="ident">ai_family</a> = ( <span class="comment">/*line :81:21*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-74" class="ident">_Ciconst_AF_INET6</a> <span class="comment">/*line :81:30*/</span>)
	}
	<span class="keyword">if</span> <a href="#line-67" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>() == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		port, err := <a href="#line-102" class="ident">cgoLookupServicePort</a>(&amp;<a href="#line-68" class="ident">hints</a>, <a href="#line-67" class="ident">network</a>, <a href="#line-67" class="ident">service</a>)
		<span class="keyword">return</span> <a href="#line-87" class="ident">port</a>, <a href="#line-87" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	}
	result := <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="#line-43" class="ident">portLookupResult</a>, <span class="lit-number">1</span>)
	<span class="keyword">go</span> <a href="#line-141" class="ident">cgoPortLookup</a>(<a href="#line-90" class="ident">result</a>, &amp;<a href="#line-68" class="ident">hints</a>, <a href="#line-67" class="ident">network</a>, <a href="#line-67" class="ident">service</a>)
	<a href="../runtime/select.go.html#line-121"><span class="keyword">select</span></a> {
	<span class="keyword">case</span> r := <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-90" class="ident">result</a>:
		<span class="keyword">return</span> <a href="#line-93" class="ident">r</a>.<a href="#line-44" class="ident">port</a>, <a href="#line-93" class="ident">r</a>.<a href="#line-45" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Since there isn't a portable way to cancel the lookup,</span><span class="comment">		 we just let it finish and write to the buffered channel.</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <span class="lit-number">0</span>, <a href="net.go.html#line-421" class="ident">mapErr</a>(<a href="#line-67" class="ident">ctx</a>.<a href="../context/context.go.html#line-106" class="ident">Err</a>()), <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
	}
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupServicePort" class="ident">cgoLookupServicePort</a>(hints * <span class="comment">/*line :99:34*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-42" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :99:51*/</span>, network, service <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (port <a href="../../pkg/builtin.html#name-int" class="ident">int</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>) {
	cservice := <a href="../../pkg/builtin.html#name-make" class="ident">make</a>([]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>, <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-102" class="ident">service</a>)+<span class="lit-number">1</span>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Lowercase the C service name.</span></div>
<div class="code"><pre><code>	<span class="keyword">for</span> i, b := <span class="keyword">range</span> <a href="#line-103" class="ident">cservice</a>[:<a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-102" class="ident">service</a>)] {
		<a href="#line-103" class="ident">cservice</a>[<a href="#line-106" class="ident">i</a>] = <a href="parse.go.html#line-247" class="ident">lowerASCII</a>(<a href="#line-106" class="ident">b</a>)
	}
	<span class="keyword">var</span> res * <span class="comment">/*line :106:11*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-42" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :106:28*/</span>
	gerrno, <a href="#line-102" class="ident">err</a> := <span class="keyword">func</span>() (<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-30" class="ident">_Ctype_int</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>){ <span class="keyword">var</span> _cgo0 *<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-28" class="ident">_Ctype_char</a> = <span class="comment">/*line :107:31*/</span><a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; <span class="keyword">var</span> _cgo1 *<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-28" class="ident">_Ctype_char</a> = <span class="comment">/*line :107:36*/</span>(*<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-28" class="ident">_Ctype_char</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-103" class="ident">cservice</a>[<span class="lit-number">0</span>])); _cgo2 := <span class="comment">/*line :107:77*/</span><a href="#line-102" class="ident">hints</a>; _cgoBase3 := <span class="comment">/*line :107:84*/</span>&amp;<a href="#line-109" class="ident">res</a>; _cgo3 := <a href="#line-110" class="ident">_cgoBase3</a>; <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-69" class="ident">_cgoCheckPointer</a>(<a href="#line-110" class="ident">_cgo2</a>, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>); <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-69" class="ident">_cgoCheckPointer</a>(<a href="#line-110" class="ident">_cgoBase3</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <span class="keyword">return</span> <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-96" class="ident">_C2func_getaddrinfo</a>(<a href="#line-110" class="ident">_cgo0</a>, <a href="#line-110" class="ident">_cgo1</a>, <a href="#line-110" class="ident">_cgo2</a>, <a href="#line-110" class="ident">_cgo3</a>); }()
	<span class="keyword">if</span> <a href="#line-110" class="ident">gerrno</a> != <span class="lit-number">0</span> {
		isTemporary := <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
		<span class="keyword">switch</span> <a href="#line-110" class="ident">gerrno</a> {
		<span class="keyword">case</span> ( <span class="comment">/*line :111:8*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-83" class="ident">_Ciconst_EAI_SYSTEM</a> <span class="comment">/*line :111:19*/</span>):
			<span class="keyword">if</span> <a href="#line-102" class="ident">err</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> { <span class="comment">// see golang.org/issue/6232</span>
				<a href="#line-102" class="ident">err</a> = <a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/zerrors_darwin_amd64.go.html#line-1177" class="ident">EMFILE</a>
			}
		<span class="keyword">default</span>:
			<a href="#line-102" class="ident">err</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-110" class="ident">gerrno</a>)
			<a href="#line-112" class="ident">isTemporary</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-110" class="ident">gerrno</a>).<a href="#line-40" class="ident">Temporary</a>()
		}
		<span class="keyword">return</span> <span class="lit-number">0</span>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <a href="#line-102" class="ident">err</a>.Error(), <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-102" class="ident">network</a> + <span class="lit-string">"/"</span> + <a href="#line-102" class="ident">service</a>, <a href="net.go.html#line-610" class="ident">IsTemporary</a>: <a href="#line-112" class="ident">isTemporary</a>}
	}
	<span class="keyword">defer</span> <span class="keyword">func</span>() <span class="keyword">func</span>() { _cgo0 := <span class="comment">/*line :121:23*/</span><a href="#line-109" class="ident">res</a>; <span class="keyword">return</span> <span class="keyword">func</span>() { <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-69" class="ident">_cgoCheckPointer</a>(<a href="#line-124" class="ident">_cgo0</a>, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>); <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-140" class="ident">_Cfunc_freeaddrinfo</a>(<a href="#line-124" class="ident">_cgo0</a>); }}()()

	<span class="keyword">for</span> r := <a href="#line-109" class="ident">res</a>; <a href="#line-126" class="ident">r</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; <a href="#line-126" class="ident">r</a> = <a href="#line-126" class="ident">r</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-50" class="ident">ai_next</a> {
		<span class="keyword">switch</span> <a href="#line-126" class="ident">r</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-44" class="ident">ai_family</a> {
		<span class="keyword">case</span> ( <span class="comment">/*line :125:8*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-73" class="ident">_Ciconst_AF_INET</a> <span class="comment">/*line :125:16*/</span>):
			sa := (*<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-158" class="ident">RawSockaddrInet4</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(<a href="#line-126" class="ident">r</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-49" class="ident">ai_addr</a>))
			p := (*[<span class="lit-number">2</span>]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-129" class="ident">sa</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-161" class="ident">Port</a>))
			<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-130" class="ident">p</a>[<span class="lit-number">0</span>])&lt;&lt;<span class="lit-number">8</span> | <a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-130" class="ident">p</a>[<span class="lit-number">1</span>]), <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>
		<span class="keyword">case</span> ( <span class="comment">/*line :129:8*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-74" class="ident">_Ciconst_AF_INET6</a> <span class="comment">/*line :129:17*/</span>):
			sa := (*<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-166" class="ident">RawSockaddrInet6</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(<a href="#line-126" class="ident">r</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-49" class="ident">ai_addr</a>))
			p := (*[<span class="lit-number">2</span>]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-133" class="ident">sa</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-169" class="ident">Port</a>))
			<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-134" class="ident">p</a>[<span class="lit-number">0</span>])&lt;&lt;<span class="lit-number">8</span> | <a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-134" class="ident">p</a>[<span class="lit-number">1</span>]), <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>
		}
	}
	<span class="keyword">return</span> <span class="lit-number">0</span>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <span class="lit-string">"unknown port"</span>, <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-102" class="ident">network</a> + <span class="lit-string">"/"</span> + <a href="#line-102" class="ident">service</a>}
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoPortLookup" class="ident">cgoPortLookup</a>(result <span class="keyword">chan</span>&lt;- <a href="#line-43" class="ident">portLookupResult</a>, hints * <span class="comment">/*line :138:59*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-42" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :138:76*/</span>, network, service <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) {
	port, err := <a href="#line-102" class="ident">cgoLookupServicePort</a>(<a href="#line-141" class="ident">hints</a>, <a href="#line-141" class="ident">network</a>, <a href="#line-141" class="ident">service</a>)
	<a href="#line-141" class="ident">result</a> &lt;- <a href="#line-43" class="ident">portLookupResult</a>{<a href="#line-142" class="ident">port</a>, <a href="#line-142" class="ident">err</a>}
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupIPCNAME" class="ident">cgoLookupIPCNAME</a>(network, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (addrs []<a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>, cname <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>) {
	<a href="net.go.html#line-668" class="ident">acquireThread</a>()
	<span class="keyword">defer</span> <a href="net.go.html#line-675" class="ident">releaseThread</a>()

	<span class="keyword">var</span> hints  <span class="comment">/*line :147:12*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-42" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :147:29*/</span>
	<a href="#line-150" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-43" class="ident">ai_flags</a> = <a href="cgo_bsd.go.html#line-18" class="ident">cgoAddrInfoFlags</a>
	<a href="#line-150" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-45" class="ident">ai_socktype</a> = ( <span class="comment">/*line :149:22*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-88" class="ident">_Ciconst_SOCK_STREAM</a> <span class="comment">/*line :149:34*/</span>)
	<a href="#line-150" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-44" class="ident">ai_family</a> = ( <span class="comment">/*line :150:20*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-75" class="ident">_Ciconst_AF_UNSPEC</a> <span class="comment">/*line :150:30*/</span>)
	<span class="keyword">switch</span> <a href="lookup.go.html#line-101" class="ident">ipVersion</a>(<a href="#line-146" class="ident">network</a>) {
	<span class="keyword">case</span> <span class="lit-number">'4'</span>:
		<a href="#line-150" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-44" class="ident">ai_family</a> = ( <span class="comment">/*line :153:21*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-73" class="ident">_Ciconst_AF_INET</a> <span class="comment">/*line :153:29*/</span>)
	<span class="keyword">case</span> <span class="lit-number">'6'</span>:
		<a href="#line-150" class="ident">hints</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-44" class="ident">ai_family</a> = ( <span class="comment">/*line :155:21*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-74" class="ident">_Ciconst_AF_INET6</a> <span class="comment">/*line :155:30*/</span>)
	}

	h := <a href="../../pkg/builtin.html#name-make" class="ident">make</a>([]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>, <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-146" class="ident">name</a>)+<span class="lit-number">1</span>)
	<a href="../../pkg/builtin.html#name-copy" class="ident">copy</a>(<a href="#line-161" class="ident">h</a>, <a href="#line-146" class="ident">name</a>)
	<span class="keyword">var</span> res * <span class="comment">/*line :160:11*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-42" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :160:28*/</span>
	gerrno, <a href="#line-146" class="ident">err</a> := <span class="keyword">func</span>() (<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-30" class="ident">_Ctype_int</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>){ <span class="keyword">var</span> _cgo0 *<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-28" class="ident">_Ctype_char</a> = <span class="comment">/*line :161:31*/</span>(*<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-28" class="ident">_Ctype_char</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-161" class="ident">h</a>[<span class="lit-number">0</span>])); <span class="keyword">var</span> _cgo1 *<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-28" class="ident">_Ctype_char</a> = <span class="comment">/*line :161:65*/</span><a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; _cgoBase2 := <span class="comment">/*line :161:70*/</span>&amp;<a href="#line-150" class="ident">hints</a>; _cgo2 := <a href="#line-164" class="ident">_cgoBase2</a>; _cgoBase3 := <span class="comment">/*line :161:78*/</span>&amp;<a href="#line-163" class="ident">res</a>; _cgo3 := <a href="#line-164" class="ident">_cgoBase3</a>; <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-69" class="ident">_cgoCheckPointer</a>(<a href="#line-164" class="ident">_cgoBase2</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-69" class="ident">_cgoCheckPointer</a>(<a href="#line-164" class="ident">_cgoBase3</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <span class="keyword">return</span> <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-96" class="ident">_C2func_getaddrinfo</a>(<a href="#line-164" class="ident">_cgo0</a>, <a href="#line-164" class="ident">_cgo1</a>, <a href="#line-164" class="ident">_cgo2</a>, <a href="#line-164" class="ident">_cgo3</a>); }()
	<span class="keyword">if</span> <a href="#line-164" class="ident">gerrno</a> != <span class="lit-number">0</span> {
		isErrorNoSuchHost := <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
		isTemporary := <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
		<span class="keyword">switch</span> <a href="#line-164" class="ident">gerrno</a> {
		<span class="keyword">case</span> ( <span class="comment">/*line :166:8*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-83" class="ident">_Ciconst_EAI_SYSTEM</a> <span class="comment">/*line :166:19*/</span>):
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> err should not be nil, but sometimes getaddrinfo returns</span><span class="comment">				 gerrno == C.EAI_SYSTEM with err == nil on Linux.</span><span class="comment">				 The report claims that it happens when we have too many</span><span class="comment">				 open files, so use syscall.EMFILE (too many open files in system).</span><span class="comment">				 Most system calls would return ENFILE (too many open files),</span><span class="comment">				 so at the least EMFILE should be easy to recognize if this</span><span class="comment">				 comes up again. golang.org/issue/6232.</span></div>
<div class="code"><pre><code>				<a href="#line-146" class="ident">err</a> = <a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/zerrors_darwin_amd64.go.html#line-1177" class="ident">EMFILE</a>
			}
		<span class="keyword">case</span> ( <span class="comment">/*line :177:8*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-81" class="ident">_Ciconst_EAI_NONAME</a> <span class="comment">/*line :177:19*/</span>):
			<a href="#line-146" class="ident">err</a> = <a href="net.go.html#line-601" class="ident">errNoSuchHost</a>
			<a href="#line-166" class="ident">isErrorNoSuchHost</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
		<span class="keyword">default</span>:
			<a href="#line-146" class="ident">err</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-164" class="ident">gerrno</a>)
			<a href="#line-167" class="ident">isTemporary</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-164" class="ident">gerrno</a>).<a href="#line-40" class="ident">Temporary</a>()
		}

		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, <span class="lit-string">""</span>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <a href="#line-146" class="ident">err</a>.Error(), <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-146" class="ident">name</a>, <a href="net.go.html#line-611" class="ident">IsNotFound</a>: <a href="#line-166" class="ident">isErrorNoSuchHost</a>, <a href="net.go.html#line-610" class="ident">IsTemporary</a>: <a href="#line-167" class="ident">isTemporary</a>}
	}
	<span class="keyword">defer</span> <span class="keyword">func</span>() <span class="keyword">func</span>() { _cgo0 := <span class="comment">/*line :187:23*/</span><a href="#line-163" class="ident">res</a>; <span class="keyword">return</span> <span class="keyword">func</span>() { <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-69" class="ident">_cgoCheckPointer</a>(<a href="#line-190" class="ident">_cgo0</a>, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>); <a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-140" class="ident">_Cfunc_freeaddrinfo</a>(<a href="#line-190" class="ident">_cgo0</a>); }}()()

	<span class="keyword">if</span> <a href="#line-163" class="ident">res</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<a href="#line-146" class="ident">cname</a> = ( <span class="comment">/*line :190:11*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-131" class="ident">_Cfunc_GoString</a> <span class="comment">/*line :190:20*/</span>)(<a href="#line-163" class="ident">res</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-48" class="ident">ai_canonname</a>)
		<span class="keyword">if</span> <a href="#line-146" class="ident">cname</a> == <span class="lit-string">""</span> {
			<a href="#line-146" class="ident">cname</a> = <a href="#line-146" class="ident">name</a>
		}
		<span class="keyword">if</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-146" class="ident">cname</a>) &gt; <span class="lit-number">0</span> &amp;&amp; <a href="#line-146" class="ident">cname</a>[<a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-146" class="ident">cname</a>)-<span class="lit-number">1</span>] != <span class="lit-number">'.'</span> {
			<a href="#line-146" class="ident">cname</a> += <span class="lit-string">"."</span>
		}
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> We only asked for SOCK_STREAM, but check anyhow.</span></div>
<div class="code"><pre><code>		<span class="keyword">if</span> <a href="#line-201" class="ident">r</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-45" class="ident">ai_socktype</a> != ( <span class="comment">/*line :200:23*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-88" class="ident">_Ciconst_SOCK_STREAM</a> <span class="comment">/*line :200:35*/</span>) {
			<span class="keyword">continue</span>
		}
		<span class="keyword">switch</span> <a href="#line-201" class="ident">r</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-44" class="ident">ai_family</a> {
		<span class="keyword">case</span> ( <span class="comment">/*line :204:8*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-73" class="ident">_Ciconst_AF_INET</a> <span class="comment">/*line :204:16*/</span>):
			sa := (*<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-158" class="ident">RawSockaddrInet4</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(<a href="#line-201" class="ident">r</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-49" class="ident">ai_addr</a>))
			addr := <a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>{<a href="iprawsock.go.html#line-32" class="ident">IP</a>: <a href="#line-345" class="ident">copyIP</a>(<a href="#line-208" class="ident">sa</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-162" class="ident">Addr</a>[:])}
			<a href="#line-146" class="ident">addrs</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<a href="#line-146" class="ident">addrs</a>, <a href="#line-209" class="ident">addr</a>)
		<span class="keyword">case</span> ( <span class="comment">/*line :208:8*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-74" class="ident">_Ciconst_AF_INET6</a> <span class="comment">/*line :208:17*/</span>):
			sa := (*<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-166" class="ident">RawSockaddrInet6</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(<a href="#line-201" class="ident">r</a>.<a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-49" class="ident">ai_addr</a>))
			addr := <a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>{<a href="iprawsock.go.html#line-32" class="ident">IP</a>: <a href="#line-345" class="ident">copyIP</a>(<a href="#line-212" class="ident">sa</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-171" class="ident">Addr</a>[:]), <a href="iprawsock.go.html#line-33" class="ident">Zone</a>: <a href="interface.go.html#line-185" class="ident">zoneCache</a>.<a href="interface.go.html#line-218" class="ident">name</a>(<a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-212" class="ident">sa</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-172" class="ident">Scope_id</a>))}
			<a href="#line-146" class="ident">addrs</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<a href="#line-146" class="ident">addrs</a>, <a href="#line-213" class="ident">addr</a>)
		}
	}
	<span class="keyword">return</span> <a href="#line-146" class="ident">addrs</a>, <a href="#line-146" class="ident">cname</a>, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoIPLookup" class="ident">cgoIPLookup</a>(result <span class="keyword">chan</span>&lt;- <a href="#line-48" class="ident">ipLookupResult</a>, network, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) {
	addrs, cname, err := <a href="#line-146" class="ident">cgoLookupIPCNAME</a>(<a href="#line-220" class="ident">network</a>, <a href="#line-220" class="ident">name</a>)
	<a href="#line-220" class="ident">result</a> &lt;- <a href="#line-48" class="ident">ipLookupResult</a>{<a href="#line-221" class="ident">addrs</a>, <a href="#line-221" class="ident">cname</a>, <a href="#line-221" class="ident">err</a>}
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupIP" class="ident">cgoLookupIP</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, network, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (addrs []<a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {
	<span class="keyword">if</span> <a href="#line-225" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>() == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<a href="#line-225" class="ident">addrs</a>, _, <a href="#line-225" class="ident">err</a> = <a href="#line-146" class="ident">cgoLookupIPCNAME</a>(<a href="#line-225" class="ident">network</a>, <a href="#line-225" class="ident">name</a>)
		<span class="keyword">return</span> <a href="#line-225" class="ident">addrs</a>, <a href="#line-225" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	}
	result := <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="#line-48" class="ident">ipLookupResult</a>, <span class="lit-number">1</span>)
	<span class="keyword">go</span> <a href="#line-220" class="ident">cgoIPLookup</a>(<a href="#line-230" class="ident">result</a>, <a href="#line-225" class="ident">network</a>, <a href="#line-225" class="ident">name</a>)
	<a href="../runtime/select.go.html#line-121"><span class="keyword">select</span></a> {
	<span class="keyword">case</span> r := <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-230" class="ident">result</a>:
		<span class="keyword">return</span> <a href="#line-233" class="ident">r</a>.<a href="#line-49" class="ident">addrs</a>, <a href="#line-233" class="ident">r</a>.<a href="#line-51" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	<span class="keyword">case</span> <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-225" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>():
		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="net.go.html#line-421" class="ident">mapErr</a>(<a href="#line-225" class="ident">ctx</a>.<a href="../context/context.go.html#line-106" class="ident">Err</a>()), <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
	}
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupCNAME" class="ident">cgoLookupCNAME</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (cname <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {
	<span class="keyword">if</span> <a href="#line-240" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>() == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		_, <a href="#line-240" class="ident">cname</a>, <a href="#line-240" class="ident">err</a> = <a href="#line-146" class="ident">cgoLookupIPCNAME</a>(<span class="lit-string">"ip"</span>, <a href="#line-240" class="ident">name</a>)
		<span class="keyword">return</span> <a href="#line-240" class="ident">cname</a>, <a href="#line-240" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	}
	result := <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="#line-48" class="ident">ipLookupResult</a>, <span class="lit-number">1</span>)
	<span class="keyword">go</span> <a href="#line-220" class="ident">cgoIPLookup</a>(<a href="#line-245" class="ident">result</a>, <span class="lit-string">"ip"</span>, <a href="#line-240" class="ident">name</a>)
	<a href="../runtime/select.go.html#line-121"><span class="keyword">select</span></a> {
	<span class="keyword">case</span> r := <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-245" class="ident">result</a>:
		<span class="keyword">return</span> <a href="#line-248" class="ident">r</a>.<a href="#line-50" class="ident">cname</a>, <a href="#line-248" class="ident">r</a>.<a href="#line-51" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	<span class="keyword">case</span> <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-240" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>():
		<span class="keyword">return</span> <span class="lit-string">""</span>, <a href="net.go.html#line-421" class="ident">mapErr</a>(<a href="#line-240" class="ident">ctx</a>.<a href="../context/context.go.html#line-106" class="ident">Err</a>()), <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> These are roughly enough for the following:</span><span class="comment"></span><span class="comment"> Source		Encoding			Maximum length of single name entry</span><span class="comment"> Unicast DNS		ASCII or			&lt;=253 + a NUL terminator</span><span class="comment">			Unicode in RFC 5892		252 * total number of labels + delimiters + a NUL terminator</span><span class="comment"> Multicast DNS	UTF-8 in RFC 5198 or		&lt;=253 + a NUL terminator</span><span class="comment">			the same as unicast DNS ASCII	&lt;=253 + a NUL terminator</span><span class="comment"> Local database	various				depends on implementation</span></div>
<div class="code"><pre><code><span class="keyword">const</span> (
	<a href="../../pkg/net.html#name-nameinfoLen" class="ident">nameinfoLen</a>    = <span class="lit-number">64</span>
	<a href="../../pkg/net.html#name-maxNameinfoLen" class="ident">maxNameinfoLen</a> = <span class="lit-number">4096</span>
)

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupPTR" class="ident">cgoLookupPTR</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, addr <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (names []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {
	<span class="keyword">var</span> zone <a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	ip := <a href="ip.go.html#line-538" class="ident">parseIPv4</a>(<a href="#line-268" class="ident">addr</a>)
	<span class="keyword">if</span> <a href="#line-270" class="ident">ip</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<a href="#line-270" class="ident">ip</a>, <a href="#line-269" class="ident">zone</a> = <a href="ip.go.html#line-566" class="ident">parseIPv6Zone</a>(<a href="#line-268" class="ident">addr</a>)
	}
	<span class="keyword">if</span> <a href="#line-270" class="ident">ip</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <span class="lit-string">"invalid address"</span>, <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-268" class="ident">addr</a>}, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	}
	sa, salen := <a href="#line-335" class="ident">cgoSockaddr</a>(<a href="#line-270" class="ident">ip</a>, <a href="#line-269" class="ident">zone</a>)
	<span class="keyword">if</span> <a href="#line-277" class="ident">sa</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <span class="lit-string">"invalid address "</span> + <a href="#line-270" class="ident">ip</a>.<a href="ip.go.html#line-291" class="ident">String</a>(), <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-268" class="ident">addr</a>}, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	}
	<span class="keyword">if</span> <a href="#line-268" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>() == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		names, err := <a href="#line-295" class="ident">cgoLookupAddrPTR</a>(<a href="#line-268" class="ident">addr</a>, <a href="#line-277" class="ident">sa</a>, <a href="#line-277" class="ident">salen</a>)
		<span class="keyword">return</span> <a href="#line-282" class="ident">names</a>, <a href="#line-282" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	}
	result := <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="#line-54" class="ident">reverseLookupResult</a>, <span class="lit-number">1</span>)
	<span class="keyword">go</span> <a href="#line-330" class="ident">cgoReverseLookup</a>(<a href="#line-285" class="ident">result</a>, <a href="#line-268" class="ident">addr</a>, <a href="#line-277" class="ident">sa</a>, <a href="#line-277" class="ident">salen</a>)
	<a href="../runtime/select.go.html#line-121"><span class="keyword">select</span></a> {
	<span class="keyword">case</span> r := <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-285" class="ident">result</a>:
		<span class="keyword">return</span> <a href="#line-288" class="ident">r</a>.<a href="#line-55" class="ident">names</a>, <a href="#line-288" class="ident">r</a>.<a href="#line-56" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	<span class="keyword">case</span> <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-268" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>():
		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="net.go.html#line-421" class="ident">mapErr</a>(<a href="#line-268" class="ident">ctx</a>.<a href="../context/context.go.html#line-106" class="ident">Err</a>()), <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
	}
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupAddrPTR" class="ident">cgoLookupAddrPTR</a>(addr <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, sa * <span class="comment">/*line :292:40*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-53" class="ident">_Ctype_struct_sockaddr</a> <span class="comment">/*line :292:57*/</span>, salen  <span class="comment">/*line :292:65*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-40" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :292:76*/</span>) (names []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>) {
	<a href="net.go.html#line-668" class="ident">acquireThread</a>()
	<span class="keyword">defer</span> <a href="net.go.html#line-675" class="ident">releaseThread</a>()

	<span class="keyword">var</span> gerrno <a href="../../pkg/builtin.html#name-int" class="ident">int</a>
	<span class="keyword">var</span> b []<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>
	<span class="keyword">for</span> l := <a href="#line-264" class="ident">nameinfoLen</a>; <a href="#line-301" class="ident">l</a> &lt;= <a href="#line-265" class="ident">maxNameinfoLen</a>; <a href="#line-301" class="ident">l</a> *= <span class="lit-number">2</span> {
		<a href="#line-300" class="ident">b</a> = <a href="../../pkg/builtin.html#name-make" class="ident">make</a>([]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>, <a href="#line-301" class="ident">l</a>)
		<a href="#line-299" class="ident">gerrno</a>, <a href="#line-295" class="ident">err</a> = <a href="cgo_resnew.go.html#line-23" class="ident">cgoNameinfoPTR</a>(<a href="#line-300" class="ident">b</a>, <a href="#line-295" class="ident">sa</a>, <a href="#line-295" class="ident">salen</a>)
		<span class="keyword">if</span> <a href="#line-299" class="ident">gerrno</a> == <span class="lit-number">0</span> || <a href="#line-299" class="ident">gerrno</a> != ( <span class="comment">/*line :301:31*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-82" class="ident">_Ciconst_EAI_OVERFLOW</a> <span class="comment">/*line :301:44*/</span>) {
			<span class="keyword">break</span>
		}
	}
	<span class="keyword">if</span> <a href="#line-299" class="ident">gerrno</a> != <span class="lit-number">0</span> {
		isTemporary := <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
		<span class="keyword">switch</span> <a href="#line-299" class="ident">gerrno</a> {
		<span class="keyword">case</span> ( <span class="comment">/*line :308:8*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-83" class="ident">_Ciconst_EAI_SYSTEM</a> <span class="comment">/*line :308:19*/</span>):
			<span class="keyword">if</span> <a href="#line-295" class="ident">err</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> { <span class="comment">// see golang.org/issue/6232</span>
				<a href="#line-295" class="ident">err</a> = <a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/zerrors_darwin_amd64.go.html#line-1177" class="ident">EMFILE</a>
			}
		<span class="keyword">default</span>:
			<a href="#line-295" class="ident">err</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-299" class="ident">gerrno</a>)
			<a href="#line-309" class="ident">isTemporary</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-299" class="ident">gerrno</a>).<a href="#line-40" class="ident">Temporary</a>()
		}
		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <a href="#line-295" class="ident">err</a>.Error(), <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-295" class="ident">addr</a>, <a href="net.go.html#line-610" class="ident">IsTemporary</a>: <a href="#line-309" class="ident">isTemporary</a>}
	}
	<span class="keyword">for</span> i := <span class="lit-number">0</span>; <a href="#line-321" class="ident">i</a> &lt; <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-300" class="ident">b</a>); <a href="#line-321" class="ident">i</a>++ {
		<span class="keyword">if</span> <a href="#line-300" class="ident">b</a>[<a href="#line-321" class="ident">i</a>] == <span class="lit-number">0</span> {
			<a href="#line-300" class="ident">b</a> = <a href="#line-300" class="ident">b</a>[:<a href="#line-321" class="ident">i</a>]
			<span class="keyword">break</span>
		}
	}
	<span class="keyword">return</span> []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>{<a href="dnsclient.go.html#line-138" class="ident">absDomainName</a>(<a href="#line-300" class="ident">b</a>)}, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoReverseLookup" class="ident">cgoReverseLookup</a>(result <span class="keyword">chan</span>&lt;- <a href="#line-54" class="ident">reverseLookupResult</a>, addr <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, sa * <span class="comment">/*line :327:75*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-53" class="ident">_Ctype_struct_sockaddr</a> <span class="comment">/*line :327:92*/</span>, salen  <span class="comment">/*line :327:100*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-40" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :327:111*/</span>) {
	names, err := <a href="#line-295" class="ident">cgoLookupAddrPTR</a>(<a href="#line-330" class="ident">addr</a>, <a href="#line-330" class="ident">sa</a>, <a href="#line-330" class="ident">salen</a>)
	<a href="#line-330" class="ident">result</a> &lt;- <a href="#line-54" class="ident">reverseLookupResult</a>{<a href="#line-331" class="ident">names</a>, <a href="#line-331" class="ident">err</a>}
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoSockaddr" class="ident">cgoSockaddr</a>(ip <a href="ip.go.html#line-32" class="ident">IP</a>, zone <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (* <span class="comment">/*line :332:40*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-53" class="ident">_Ctype_struct_sockaddr</a> <span class="comment">/*line :332:57*/</span>,  <span class="comment">/*line :332:59*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-40" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :332:70*/</span>) {
	<span class="keyword">if</span> ip4 := <a href="#line-335" class="ident">ip</a>.<a href="ip.go.html#line-189" class="ident">To4</a>(); <a href="#line-336" class="ident">ip4</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="cgo_sockold.go.html#line-26" class="ident">cgoSockaddrInet4</a>(<a href="#line-336" class="ident">ip4</a>),  <span class="comment">/*line :334:33*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-40" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :334:44*/</span>(<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-264" class="ident">SizeofSockaddrInet4</a>)
	}
	<span class="keyword">if</span> ip6 := <a href="#line-335" class="ident">ip</a>.<a href="ip.go.html#line-204" class="ident">To16</a>(); <a href="#line-339" class="ident">ip6</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="cgo_sockold.go.html#line-32" class="ident">cgoSockaddrInet6</a>(<a href="#line-339" class="ident">ip6</a>, <a href="interface.go.html#line-185" class="ident">zoneCache</a>.<a href="interface.go.html#line-238" class="ident">index</a>(<a href="#line-335" class="ident">zone</a>)),  <span class="comment">/*line :337:56*/</span><a href="d2bd86cebde3e0fc58c0894535c79a607aa00c5e131cf2d9a8cd9652c62ae01e-d.html#line-40" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :337:67*/</span>(<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_darwin_amd64.go.html#line-265" class="ident">SizeofSockaddrInet6</a>)
	}
	<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, <span class="lit-number">0</span>
}

<span class="keyword">func</span> <a href="../../pkg/net.html#name-copyIP" class="ident">copyIP</a>(x <a href="ip.go.html#line-32" class="ident">IP</a>) <a href="ip.go.html#line-32" class="ident">IP</a> {
	<span class="keyword">if</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-345" class="ident">x</a>) &lt; <span class="lit-number">16</span> {
		<span class="keyword">return</span> <a href="#line-345" class="ident">x</a>.<a href="ip.go.html#line-204" class="ident">To16</a>()
	}
	y := <a href="../../pkg/builtin.html#name-make" class="ident">make</a>(<a href="ip.go.html#line-32" class="ident">IP</a>, <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-345" class="ident">x</a>))
	<a href="../../pkg/builtin.html#name-copy" class="ident">copy</a>(<a href="#line-349" class="ident">y</a>, <a href="#line-345" class="ident">x</a>)
	<span class="keyword">return</span> <a href="#line-349" class="ident">y</a>
</code></pre></div></div>

</div><pre id="footer">
<table><tr><td><img src="../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>