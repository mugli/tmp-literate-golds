<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: doc.go in package cloud.google.com/go/logging</title>
<link href="../../../../css/lightLiterate-v0.3.2-preview.css" rel="stylesheet">
<script src="../../../../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	doc.go

<span class="title">Belonging Package</span>
	<a href="../../../../pkg/cloud.google.com/go/logging.html">cloud.google.com/go/logging</a>
</code></pre>
<div id="container"><div class="section">
<div class="doc">
<span class="comment"> Copyright 2016 Google LLC</span><span class="comment"></span><span class="comment"> Licensed under the Apache License, Version 2.0 (the "License");</span><span class="comment"> you may not use this file except in compliance with the License.</span><span class="comment"> You may obtain a copy of the License at</span><span class="comment"></span><span class="comment">      http://www.apache.org/licenses/LICENSE-2.0</span><span class="comment"></span><span class="comment"> Unless required by applicable law or agreed to in writing, software</span><span class="comment"> distributed under the License is distributed on an "AS IS" BASIS,</span><span class="comment"> WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><span class="comment"> See the License for the specific language governing permissions and</span><span class="comment"> limitations under the License.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"></span><span class="comment">Package logging contains a Stackdriver Logging client suitable for writing logs.</span><span class="comment">For reading logs, and working with sinks, metrics and monitored resources,</span><span class="comment">see package cloud.google.com/go/logging/logadmin.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">This client uses Logging API v2.</span><span class="comment">See https:cloud.google.com/logging/docs/api/v2/ for an introduction to the API.</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Creating a Client</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Use a Client to interact with the Stackdriver Logging API.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	 Create a Client</span><span class="comment">	ctx := context.Background()</span><span class="comment">	client, err := logging.NewClient(ctx, "my-project")</span><span class="comment">	if err != nil {</span><span class="comment">		 TODO: Handle error.</span><span class="comment">	}</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Basic Usage</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">For most use cases, you'll want to add log entries to a buffer to be periodically</span><span class="comment">flushed (automatically and asynchronously) to the Stackdriver Logging service.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	 Initialize a logger</span><span class="comment">	lg := client.Logger("my-log")</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	 Add entry to log buffer</span><span class="comment">	lg.Log(logging.Entry{Payload: "something happened!"})</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Closing your Client</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">You should call Client.Close before your program exits to flush any buffered log entries to the Stackdriver Logging service.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	 Close the client when finished.</span><span class="comment">	err = client.Close()</span><span class="comment">	if err != nil {</span><span class="comment">		 TODO: Handle error.</span><span class="comment">	}</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Synchronous Logging</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">For critical errors, you may want to send your log entries immediately.</span><span class="comment">LogSync is slow and will block until the log entry has been sent, so it is</span><span class="comment">not recommended for normal use.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	err = lg.LogSync(ctx, logging.Entry{Payload: "ALERT! Something critical happened!"})</span><span class="comment">	if err != nil {</span><span class="comment">		 TODO: Handle error.</span><span class="comment">	}</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Payloads</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">An entry payload can be a string, as in the examples above. It can also be any value</span><span class="comment">that can be marshaled to a JSON object, like a map[string]interface{} or a struct:</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	type MyEntry struct {</span><span class="comment">		Name  string</span><span class="comment">		Count int</span><span class="comment">	}</span><span class="comment">	lg.Log(logging.Entry{Payload: MyEntry{Name: "Bob", Count: 3}})</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">If you have a []byte of JSON, wrap it in json.RawMessage:</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	j := []byte(`{"Name": "Bob", "Count": 3}`)</span><span class="comment">	lg.Log(logging.Entry{Payload: json.RawMessage(j)})</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">The Standard Logger</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">You may want use a standard log.Logger in your program.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	 stdlg is an instance of *log.Logger.</span><span class="comment">	stdlg := lg.StandardLogger(logging.Info)</span><span class="comment">	stdlg.Println("some info")</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Log Levels</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">An Entry may have one of a number of severity levels associated with it.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">	logging.Entry{</span><span class="comment">		Payload: "something terrible happened!",</span><span class="comment">		Severity: logging.Critical,</span><span class="comment">	}</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Viewing Logs</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">You can view Stackdriver logs for projects at</span><span class="comment">https:console.cloud.google.com/logs/viewer. Use the dropdown at the top left. When</span><span class="comment">running from a Google Cloud Platform VM, select "GCE VM Instance". Otherwise, select</span><span class="comment">"Google Project" and then the project ID. Logs for organizations, folders and billing</span><span class="comment">accounts can be viewed on the command line with the "gcloud logging read" command.</span></div>
<div class="code"><pre><code>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">Grouping Logs by Request</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">To group all the log entries written during a single HTTP request, create two</span><span class="comment">Loggers, a "parent" and a "child," with different log IDs. Both should be in the same</span><span class="comment">project, and have the same MonitoredResouce type and labels.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">- Parent entries must have HTTPRequest.Request populated. (Strictly speaking, only the URL is necessary.)</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">- A child entry's timestamp must be within the time interval covered by the parent request (i.e., older</span><span class="comment">than parent.Timestamp, and newer than parent.Timestamp - parent.HTTPRequest.Latency, assuming the</span><span class="comment">parent timestamp marks the end of the request.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">- The trace field must be populated in all of the entries and match exactly.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">You should observe the child log entries grouped under the parent on the console. The</span><span class="comment">parent entry will not inherit the severity of its children; you must update the</span><span class="comment">parent severity yourself.</span><span class="comment"></span></div>
<div class="code"><pre><code></code></pre></div></div>

</div><pre id="footer">
<table><tr><td><img src="../../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>