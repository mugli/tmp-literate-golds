<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: cgo_lookup_unix.go in package os/user</title>
<link href="../../../css/lightLiterate-v0.3.2-preview.css" rel="stylesheet">
<script src="../../../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	cgo_lookup_unix.go

<span class="title">Belonging Package</span>
	<a href="../../../pkg/os/user.html">os/user</a>
</code></pre>
<style>input[type=radio] {display: none;}
{background: #226; color: #ff8;}
input[id=i0]:checked ~pre .i0,
input[id=i1]:checked ~pre .i1,
input[id=i2]:checked ~pre .i2,
input[id=i3]:checked ~pre .i3,
input[id=i4]:checked ~pre .i4,
input[id=i5]:checked ~pre .i5,
input[id=i6]:checked ~pre .i6
{background: brown; color: #eed;}
</style><input id="i0" type="radio" name="i"/>
<input id="i1" type="radio" name="i"/>
<input id="i2" type="radio" name="i"/>
<input id="i3" type="radio" name="i"/>
<input id="i4" type="radio" name="i"/>
<input id="i5" type="radio" name="i"/>
<input id="i6" type="radio" name="i"/>
<div id="container"><div class="section">
<div class="doc">
<span class="comment"> Code generated by cmd/cgo; DO NOT EDIT.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">line /usr/local/Cellar/go/1.16.3/libexec/src/os/user/cgo_lookup_unix.go:1:1</span><span class="comment"> Copyright 2011 The Go Authors. All rights reserved.</span><span class="comment"> Use of this source code is governed by a BSD-style</span><span class="comment"> license that can be found in the LICENSE file.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> +build aix darwin dragonfly freebsd !android,linux netbsd openbsd solaris</span><span class="comment"> +build cgo,!osusergo</span></div>
<div class="code"><pre><code>
<span class="keyword">package</span> user; <span class="keyword">import</span> <a href="../../../pkg/unsafe.html" class="ident i0">_cgo_unsafe</a> <label for="i0"><span class="lit-string i0">"unsafe"</span></label>

<span class="keyword">import</span> (
	<label for="i1"><span class="lit-string i1">"fmt"</span></label>
	<label for="i2"><span class="lit-string i2">"strconv"</span></label>
	<label for="i3"><span class="lit-string i3">"strings"</span></label>
	<label for="i4"><span class="lit-string i4">"syscall"</span></label>
	<label for="i5"><span class="lit-string i5">"unsafe"</span></label>
)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"></span><span class="comment">#cgo solaris CFLAGS: -D_POSIX_PTHREAD_SEMANTICS</span><span class="comment">#include &lt;unistd.h&gt;</span><span class="comment">#include &lt;sys/types.h&gt;</span><span class="comment">#include &lt;pwd.h&gt;</span><span class="comment">#include &lt;grp.h&gt;</span><span class="comment">#include &lt;stdlib.h&gt;</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">static int mygetpwuid_r(int uid, struct passwd *pwd,</span><span class="comment">	char *buf, size_t buflen, struct passwd **result) {</span><span class="comment">	return getpwuid_r(uid, pwd, buf, buflen, result);</span><span class="comment">}</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">static int mygetpwnam_r(const char *name, struct passwd *pwd,</span><span class="comment">	char *buf, size_t buflen, struct passwd **result) {</span><span class="comment">	return getpwnam_r(name, pwd, buf, buflen, result);</span><span class="comment">}</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">static int mygetgrgid_r(int gid, struct group *grp,</span><span class="comment">	char *buf, size_t buflen, struct group **result) {</span><span class="comment"> return getgrgid_r(gid, grp, buf, buflen, result);</span><span class="comment">}</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">static int mygetgrnam_r(const char *name, struct group *grp,</span><span class="comment">	char *buf, size_t buflen, struct group **result) {</span><span class="comment"> return getgrnam_r(name, grp, buf, buflen, result);</span><span class="comment">}</span><span class="comment"></span></div>
<div class="code"><pre><code><span class="keyword">import</span> <a href="../../../pkg/unsafe.html" class="ident i6">_</a> <label for="i6"><span class="lit-string i6">"unsafe"</span></label>

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-current" class="ident">current</a>() (*<a href="user.go.html#line-29" class="ident">User</a>, <a href="../../../pkg/builtin.html#name-error" class="ident">error</a>) {
	<span class="keyword">return</span> <a href="#line-88" class="ident">lookupUnixUid</a>(<a href="../../../pkg/syscall.html" class="ident i4">syscall</a>.<a href="../../syscall/zsyscall_darwin_amd64.go.html#line-894" class="ident">Getuid</a>())
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-lookupUser" class="ident">lookupUser</a>(username <a href="../../../pkg/builtin.html#name-string" class="ident">string</a>) (*<a href="user.go.html#line-29" class="ident">User</a>, <a href="../../../pkg/builtin.html#name-error" class="ident">error</a>) {
	<span class="keyword">var</span> pwd  <span class="comment">/*line :53:10*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-51" class="ident">_Ctype_struct_passwd</a> <span class="comment">/*line :53:25*/</span>
	<span class="keyword">var</span> result * <span class="comment">/*line :54:14*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-51" class="ident">_Ctype_struct_passwd</a> <span class="comment">/*line :54:29*/</span>
	nameC := <a href="../../../pkg/builtin.html#name-make" class="ident">make</a>([]<a href="../../../pkg/builtin.html#name-byte" class="ident">byte</a>, <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-55" class="ident">username</a>)+<span class="lit-number">1</span>)
	<a href="../../../pkg/builtin.html#name-copy" class="ident">copy</a>(<a href="#line-58" class="ident">nameC</a>, <a href="#line-55" class="ident">username</a>)

	buf := <a href="#line-212" class="ident">alloc</a>(<a href="#line-188" class="ident">userBuffer</a>)
	<span class="keyword">defer</span> <a href="#line-61" class="ident">buf</a>.<a href="#line-225" class="ident">free</a>()

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> mygetpwnam_r is a wrapper around getpwnam_r to avoid</span><span class="comment">		 passing a size_t to getpwnam_r, because for unknown</span><span class="comment">		 reasons passing a size_t to getpwnam_r doesn't work on</span><span class="comment">		 Solaris.</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <a href="../../../pkg/syscall.html" class="ident i4">syscall</a>.<a href="../../syscall/syscall_unix.go.html#line-114" class="ident">Errno</a>(<span class="keyword">func</span>() <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a>{ <span class="keyword">var</span> _cgo0 *<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a> = <span class="comment">/*line :66:39*/</span>(*<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a>)(<a href="../../../pkg/unsafe.html" class="ident i6">unsafe</a>.<a href="../../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-58" class="ident">nameC</a>[<span class="lit-number">0</span>])); _cgoBase1 := <span class="comment">/*line :67:4*/</span>&amp;<a href="#line-56" class="ident">pwd</a>; _cgo1 := <a href="#line-69" class="ident">_cgoBase1</a>; <span class="keyword">var</span> _cgo2 *<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a> = <span class="comment">/*line :68:4*/</span>(*<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a>)(<a href="#line-61" class="ident">buf</a>.<a href="#line-208" class="ident">ptr</a>); <span class="keyword">var</span> _cgo3 <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> = <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a>(<a href="#line-61" class="ident">buf</a>.<a href="#line-209" class="ident">size</a>); _cgoBase4 := <span class="comment">/*line :70:4*/</span>&amp;<a href="#line-57" class="ident">result</a>; _cgo4 := <a href="#line-69" class="ident">_cgoBase4</a>; <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-69" class="ident">_cgoBase1</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-69" class="ident">_cgoBase4</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <span class="keyword">return</span> <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-163" class="ident">_Cfunc_mygetpwnam_r</a>(<a href="#line-69" class="ident">_cgo0</a>, <a href="#line-69" class="ident">_cgo1</a>, <a href="#line-69" class="ident">_cgo2</a>, <a href="#line-69" class="ident">_cgo3</a>, <a href="#line-69" class="ident">_cgo4</a>); }())
	})
	<span class="keyword">if</span> <a href="#line-64" class="ident">err</a> != <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="../../../pkg/fmt.html" class="ident i1">fmt</a>.<a href="../../fmt/errors.go.html#line-17" class="ident">Errorf</a>(<span class="lit-string">"user: lookup username %s: %v"</span>, <a href="#line-55" class="ident">username</a>, <a href="#line-64" class="ident">err</a>)
	}
	<span class="keyword">if</span> <a href="#line-57" class="ident">result</a> == <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="user.go.html#line-70" class="ident">UnknownUserError</a>(<a href="#line-55" class="ident">username</a>)
	}
	<span class="keyword">return</span> <a href="#line-109" class="ident">buildUser</a>(&amp;<a href="#line-56" class="ident">pwd</a>), <a href="#line-64" class="ident">err</a>
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-lookupUserId" class="ident">lookupUserId</a>(uid <a href="../../../pkg/builtin.html#name-string" class="ident">string</a>) (*<a href="user.go.html#line-29" class="ident">User</a>, <a href="../../../pkg/builtin.html#name-error" class="ident">error</a>) {
	i, e := <a href="../../../pkg/strconv.html" class="ident i2">strconv</a>.<a href="../../strconv/atoi.go.html#line-224" class="ident">Atoi</a>(<a href="#line-80" class="ident">uid</a>)
	<span class="keyword">if</span> <a href="#line-81" class="ident">e</a> != <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="#line-81" class="ident">e</a>
	}
	<span class="keyword">return</span> <a href="#line-88" class="ident">lookupUnixUid</a>(<a href="#line-81" class="ident">i</a>)
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-lookupUnixUid" class="ident">lookupUnixUid</a>(uid <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>) (*<a href="user.go.html#line-29" class="ident">User</a>, <a href="../../../pkg/builtin.html#name-error" class="ident">error</a>) {
	<span class="keyword">var</span> pwd  <span class="comment">/*line :90:10*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-51" class="ident">_Ctype_struct_passwd</a> <span class="comment">/*line :90:25*/</span>
	<span class="keyword">var</span> result * <span class="comment">/*line :91:14*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-51" class="ident">_Ctype_struct_passwd</a> <span class="comment">/*line :91:29*/</span>

	buf := <a href="#line-212" class="ident">alloc</a>(<a href="#line-188" class="ident">userBuffer</a>)
	<span class="keyword">defer</span> <a href="#line-92" class="ident">buf</a>.<a href="#line-225" class="ident">free</a>()

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> mygetpwuid_r is a wrapper around getpwuid_r to avoid using uid_t</span><span class="comment">		 because C.uid_t(uid) for unknown reasons doesn't work on linux.</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <a href="../../../pkg/syscall.html" class="ident i4">syscall</a>.<a href="../../syscall/syscall_unix.go.html#line-114" class="ident">Errno</a>(<span class="keyword">func</span>() <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a>{ <span class="keyword">var</span> _cgo0 <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a> = <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a>(<a href="#line-88" class="ident">uid</a>); _cgoBase1 := <span class="comment">/*line :100:4*/</span>&amp;<a href="#line-89" class="ident">pwd</a>; _cgo1 := <a href="#line-98" class="ident">_cgoBase1</a>; <span class="keyword">var</span> _cgo2 *<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a> = <span class="comment">/*line :101:4*/</span>(*<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a>)(<a href="#line-92" class="ident">buf</a>.<a href="#line-208" class="ident">ptr</a>); <span class="keyword">var</span> _cgo3 <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> = <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a>(<a href="#line-92" class="ident">buf</a>.<a href="#line-209" class="ident">size</a>); _cgoBase4 := <span class="comment">/*line :103:4*/</span>&amp;<a href="#line-90" class="ident">result</a>; _cgo4 := <a href="#line-98" class="ident">_cgoBase4</a>; <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-98" class="ident">_cgoBase1</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-98" class="ident">_cgoBase4</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <span class="keyword">return</span> <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-180" class="ident">_Cfunc_mygetpwuid_r</a>(<a href="#line-98" class="ident">_cgo0</a>, <a href="#line-98" class="ident">_cgo1</a>, <a href="#line-98" class="ident">_cgo2</a>, <a href="#line-98" class="ident">_cgo3</a>, <a href="#line-98" class="ident">_cgo4</a>); }())
	})
	<span class="keyword">if</span> <a href="#line-95" class="ident">err</a> != <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="../../../pkg/fmt.html" class="ident i1">fmt</a>.<a href="../../fmt/errors.go.html#line-17" class="ident">Errorf</a>(<span class="lit-string">"user: lookup userid %d: %v"</span>, <a href="#line-88" class="ident">uid</a>, <a href="#line-95" class="ident">err</a>)
	}
	<span class="keyword">if</span> <a href="#line-90" class="ident">result</a> == <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="user.go.html#line-62" class="ident">UnknownUserIdError</a>(<a href="#line-88" class="ident">uid</a>)
	}
	<span class="keyword">return</span> <a href="#line-109" class="ident">buildUser</a>(&amp;<a href="#line-89" class="ident">pwd</a>), <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-buildUser" class="ident">buildUser</a>(pwd * <span class="comment">/*line :114:21*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-51" class="ident">_Ctype_struct_passwd</a> <span class="comment">/*line :114:36*/</span>) *<a href="user.go.html#line-29" class="ident">User</a> {
	u := &amp;<a href="user.go.html#line-29" class="ident">User</a>{
		<a href="user.go.html#line-34" class="ident">Uid</a>:      <a href="../../../pkg/strconv.html" class="ident i2">strconv</a>.<a href="../../strconv/itoa.go.html#line-14" class="ident">FormatUint</a>(<a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>(<a href="#line-109" class="ident">pwd</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-54" class="ident">pw_uid</a>), <span class="lit-number">10</span>),
		<a href="user.go.html#line-39" class="ident">Gid</a>:      <a href="../../../pkg/strconv.html" class="ident i2">strconv</a>.<a href="../../strconv/itoa.go.html#line-14" class="ident">FormatUint</a>(<a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>(<a href="#line-109" class="ident">pwd</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-55" class="ident">pw_gid</a>), <span class="lit-number">10</span>),
		<a href="user.go.html#line-41" class="ident">Username</a>: ( <span class="comment">/*line :118:13*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-87" class="ident">_Cfunc_GoString</a> <span class="comment">/*line :118:22*/</span>)(<a href="#line-109" class="ident">pwd</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-52" class="ident">pw_name</a>),
		<a href="user.go.html#line-48" class="ident">Name</a>:     ( <span class="comment">/*line :119:13*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-87" class="ident">_Cfunc_GoString</a> <span class="comment">/*line :119:22*/</span>)(<a href="#line-109" class="ident">pwd</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-58" class="ident">pw_gecos</a>),
		<a href="user.go.html#line-50" class="ident">HomeDir</a>:  ( <span class="comment">/*line :120:13*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-87" class="ident">_Cfunc_GoString</a> <span class="comment">/*line :120:22*/</span>)(<a href="#line-109" class="ident">pwd</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-59" class="ident">pw_dir</a>),
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> The pw_gecos field isn't quite standardized. Some docs</span><span class="comment">	 say: "It is expected to be a comma separated list of</span><span class="comment">	 personal data where the first item is the full name of the</span><span class="comment">	 user."</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> i := <a href="../../../pkg/strings.html" class="ident i3">strings</a>.<a href="../../strings/strings.go.html#line-1024" class="ident">Index</a>(<a href="#line-110" class="ident">u</a>.<a href="user.go.html#line-48" class="ident">Name</a>, <span class="lit-string">","</span>); <a href="#line-121" class="ident">i</a> &gt;= <span class="lit-number">0</span> {
		<a href="#line-110" class="ident">u</a>.<a href="user.go.html#line-48" class="ident">Name</a> = <a href="#line-110" class="ident">u</a>.<a href="user.go.html#line-48" class="ident">Name</a>[:<a href="#line-121" class="ident">i</a>]
	}
	<span class="keyword">return</span> <a href="#line-110" class="ident">u</a>
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-lookupGroup" class="ident">lookupGroup</a>(groupname <a href="../../../pkg/builtin.html#name-string" class="ident">string</a>) (*<a href="user.go.html#line-56" class="ident">Group</a>, <a href="../../../pkg/builtin.html#name-error" class="ident">error</a>) {
	<span class="keyword">var</span> grp  <span class="comment">/*line :133:10*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-44" class="ident">_Ctype_struct_group</a> <span class="comment">/*line :133:24*/</span>
	<span class="keyword">var</span> result * <span class="comment">/*line :134:14*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-44" class="ident">_Ctype_struct_group</a> <span class="comment">/*line :134:28*/</span>

	buf := <a href="#line-212" class="ident">alloc</a>(<a href="#line-189" class="ident">groupBuffer</a>)
	<span class="keyword">defer</span> <a href="#line-131" class="ident">buf</a>.<a href="#line-225" class="ident">free</a>()
	cname := <a href="../../../pkg/builtin.html#name-make" class="ident">make</a>([]<a href="../../../pkg/builtin.html#name-byte" class="ident">byte</a>, <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-127" class="ident">groupname</a>)+<span class="lit-number">1</span>)
	<a href="../../../pkg/builtin.html#name-copy" class="ident">copy</a>(<a href="#line-133" class="ident">cname</a>, <a href="#line-127" class="ident">groupname</a>)

	err := <a href="#line-232" class="ident">retryWithBuffer</a>(<a href="#line-131" class="ident">buf</a>, <span class="keyword">func</span>() <a href="../../../pkg/syscall.html" class="ident i4">syscall</a>.<a href="../../syscall/syscall_unix.go.html#line-114" class="ident">Errno</a> {
		<span class="keyword">return</span> <a href="../../../pkg/syscall.html" class="ident i4">syscall</a>.<a href="../../syscall/syscall_unix.go.html#line-114" class="ident">Errno</a>(<span class="keyword">func</span>() <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a>{ <span class="keyword">var</span> _cgo0 *<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a> = <span class="comment">/*line :142:39*/</span>(*<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a>)(<a href="../../../pkg/unsafe.html" class="ident i6">unsafe</a>.<a href="../../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-133" class="ident">cname</a>[<span class="lit-number">0</span>])); _cgoBase1 := <span class="comment">/*line :143:4*/</span>&amp;<a href="#line-128" class="ident">grp</a>; _cgo1 := <a href="#line-137" class="ident">_cgoBase1</a>; <span class="keyword">var</span> _cgo2 *<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a> = <span class="comment">/*line :144:4*/</span>(*<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a>)(<a href="#line-131" class="ident">buf</a>.<a href="#line-208" class="ident">ptr</a>); <span class="keyword">var</span> _cgo3 <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> = <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a>(<a href="#line-131" class="ident">buf</a>.<a href="#line-209" class="ident">size</a>); _cgoBase4 := <span class="comment">/*line :146:4*/</span>&amp;<a href="#line-129" class="ident">result</a>; _cgo4 := <a href="#line-137" class="ident">_cgoBase4</a>; <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-137" class="ident">_cgoBase1</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-137" class="ident">_cgoBase4</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <span class="keyword">return</span> <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-130" class="ident">_Cfunc_mygetgrnam_r</a>(<a href="#line-137" class="ident">_cgo0</a>, <a href="#line-137" class="ident">_cgo1</a>, <a href="#line-137" class="ident">_cgo2</a>, <a href="#line-137" class="ident">_cgo3</a>, <a href="#line-137" class="ident">_cgo4</a>); }())
	})
	<span class="keyword">if</span> <a href="#line-136" class="ident">err</a> != <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="../../../pkg/fmt.html" class="ident i1">fmt</a>.<a href="../../fmt/errors.go.html#line-17" class="ident">Errorf</a>(<span class="lit-string">"user: lookup groupname %s: %v"</span>, <a href="#line-127" class="ident">groupname</a>, <a href="#line-136" class="ident">err</a>)
	}
	<span class="keyword">if</span> <a href="#line-129" class="ident">result</a> == <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="user.go.html#line-86" class="ident">UnknownGroupError</a>(<a href="#line-127" class="ident">groupname</a>)
	}
	<span class="keyword">return</span> <a href="#line-177" class="ident">buildGroup</a>(&amp;<a href="#line-128" class="ident">grp</a>), <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-lookupGroupId" class="ident">lookupGroupId</a>(gid <a href="../../../pkg/builtin.html#name-string" class="ident">string</a>) (*<a href="user.go.html#line-56" class="ident">Group</a>, <a href="../../../pkg/builtin.html#name-error" class="ident">error</a>) {
	i, e := <a href="../../../pkg/strconv.html" class="ident i2">strconv</a>.<a href="../../strconv/atoi.go.html#line-224" class="ident">Atoi</a>(<a href="#line-148" class="ident">gid</a>)
	<span class="keyword">if</span> <a href="#line-149" class="ident">e</a> != <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="#line-149" class="ident">e</a>
	}
	<span class="keyword">return</span> <a href="#line-156" class="ident">lookupUnixGid</a>(<a href="#line-149" class="ident">i</a>)
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-lookupUnixGid" class="ident">lookupUnixGid</a>(gid <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>) (*<a href="user.go.html#line-56" class="ident">Group</a>, <a href="../../../pkg/builtin.html#name-error" class="ident">error</a>) {
	<span class="keyword">var</span> grp  <span class="comment">/*line :166:10*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-44" class="ident">_Ctype_struct_group</a> <span class="comment">/*line :166:24*/</span>
	<span class="keyword">var</span> result * <span class="comment">/*line :167:14*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-44" class="ident">_Ctype_struct_group</a> <span class="comment">/*line :167:28*/</span>

	buf := <a href="#line-212" class="ident">alloc</a>(<a href="#line-189" class="ident">groupBuffer</a>)
	<span class="keyword">defer</span> <a href="#line-160" class="ident">buf</a>.<a href="#line-225" class="ident">free</a>()

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> mygetgrgid_r is a wrapper around getgrgid_r to avoid using gid_t</span><span class="comment">		 because C.gid_t(gid) for unknown reasons doesn't work on linux.</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <a href="../../../pkg/syscall.html" class="ident i4">syscall</a>.<a href="../../syscall/syscall_unix.go.html#line-114" class="ident">Errno</a>(<span class="keyword">func</span>() <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a>{ <span class="keyword">var</span> _cgo0 <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a> = <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a>(<a href="#line-156" class="ident">gid</a>); _cgoBase1 := <span class="comment">/*line :176:4*/</span>&amp;<a href="#line-157" class="ident">grp</a>; _cgo1 := <a href="#line-166" class="ident">_cgoBase1</a>; <span class="keyword">var</span> _cgo2 *<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a> = <span class="comment">/*line :177:4*/</span>(*<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-30" class="ident">_Ctype_char</a>)(<a href="#line-160" class="ident">buf</a>.<a href="#line-208" class="ident">ptr</a>); <span class="keyword">var</span> _cgo3 <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> = <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a>(<a href="#line-160" class="ident">buf</a>.<a href="#line-209" class="ident">size</a>); _cgoBase4 := <span class="comment">/*line :179:4*/</span>&amp;<a href="#line-158" class="ident">result</a>; _cgo4 := <a href="#line-166" class="ident">_cgoBase4</a>; <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-166" class="ident">_cgoBase1</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-166" class="ident">_cgoBase4</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <span class="keyword">return</span> <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-113" class="ident">_Cfunc_mygetgrgid_r</a>(<a href="#line-166" class="ident">_cgo0</a>, <a href="#line-166" class="ident">_cgo1</a>, <a href="#line-166" class="ident">_cgo2</a>, <a href="#line-166" class="ident">_cgo3</a>, <a href="#line-166" class="ident">_cgo4</a>); }())
	})
	<span class="keyword">if</span> <a href="#line-163" class="ident">err</a> != <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="../../../pkg/fmt.html" class="ident i1">fmt</a>.<a href="../../fmt/errors.go.html#line-17" class="ident">Errorf</a>(<span class="lit-string">"user: lookup groupid %d: %v"</span>, <a href="#line-156" class="ident">gid</a>, <a href="#line-163" class="ident">err</a>)
	}
	<span class="keyword">if</span> <a href="#line-158" class="ident">result</a> == <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="user.go.html#line-78" class="ident">UnknownGroupIdError</a>(<a href="../../../pkg/strconv.html" class="ident i2">strconv</a>.<a href="../../strconv/itoa.go.html#line-34" class="ident">Itoa</a>(<a href="#line-156" class="ident">gid</a>))
	}
	<span class="keyword">return</span> <a href="#line-177" class="ident">buildGroup</a>(&amp;<a href="#line-157" class="ident">grp</a>), <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-buildGroup" class="ident">buildGroup</a>(grp * <span class="comment">/*line :190:22*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-44" class="ident">_Ctype_struct_group</a> <span class="comment">/*line :190:36*/</span>) *<a href="user.go.html#line-56" class="ident">Group</a> {
	g := &amp;<a href="user.go.html#line-56" class="ident">Group</a>{
		<a href="user.go.html#line-57" class="ident">Gid</a>:  <a href="../../../pkg/strconv.html" class="ident i2">strconv</a>.<a href="../../strconv/itoa.go.html#line-34" class="ident">Itoa</a>(<a href="../../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-177" class="ident">grp</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-47" class="ident">gr_gid</a>)),
		<a href="user.go.html#line-58" class="ident">Name</a>: ( <span class="comment">/*line :193:9*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-87" class="ident">_Cfunc_GoString</a> <span class="comment">/*line :193:18*/</span>)(<a href="#line-177" class="ident">grp</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-45" class="ident">gr_name</a>),
	}
	<span class="keyword">return</span> <a href="#line-178" class="ident">g</a>
}

<span class="keyword">type</span> <a href="../../../pkg/os/user.html#name-bufferKind" class="ident">bufferKind</a>  <span class="comment">/*line :198:17*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a> <span class="comment">/*line :198:22*/</span>

<span class="keyword">const</span> (
	<a href="../../../pkg/os/user.html#name-userBuffer" class="ident">userBuffer</a>  = <a href="#line-185" class="ident">bufferKind</a>(( <span class="comment">/*line :201:27*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-81" class="ident">_Ciconst__SC_GETPW_R_SIZE_MAX</a> <span class="comment">/*line :201:48*/</span>))
	<a href="../../../pkg/os/user.html#name-groupBuffer" class="ident">groupBuffer</a> = <a href="#line-185" class="ident">bufferKind</a>(( <span class="comment">/*line :202:27*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-80" class="ident">_Ciconst__SC_GETGR_R_SIZE_MAX</a> <span class="comment">/*line :202:48*/</span>))
)

<span class="keyword">func</span> (k <a href="#line-185" class="ident">bufferKind</a>) initialSize()  <span class="comment">/*line :205:35*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> <span class="comment">/*line :205:43*/</span> {
	sz := ( <span class="comment">/*line :206:8*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-211" class="ident">_Cfunc_sysconf</a> <span class="comment">/*line :206:16*/</span>)( <span class="comment">/*line :206:18*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-34" class="ident">_Ctype_int</a> <span class="comment">/*line :206:23*/</span>(<a href="#line-192" class="ident">k</a>))
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> DragonFly and FreeBSD do not have _SC_GETPW_R_SIZE_MAX.</span><span class="comment">		 Additionally, not all Linux systems have it, either. For</span><span class="comment">		 example, the musl libc returns -1.</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <span class="lit-number">1024</span>
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Truncate.  If this truly isn't enough, retryWithBuffer will error on the first run.</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <a href="#line-248" class="ident">maxBufferSize</a>
	}
	<span class="keyword">return</span>  <span class="comment">/*line :217:9*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> <span class="comment">/*line :217:17*/</span>(<a href="#line-193" class="ident">sz</a>)
}

<span class="keyword">type</span> <a href="../../../pkg/os/user.html#name-memBuffer" class="ident">memBuffer</a> <span class="keyword">struct</span> {
	<a href="../../../use/os/user..memBuffer*f448a.ptr*83dbe.html" class="ident">ptr</a>  <a href="../../../pkg/unsafe.html" class="ident i6">unsafe</a>.<a href="../../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>
	<a href="../../../use/os/user..memBuffer*f448a.size*ccdcb.html" class="ident">size</a>  <span class="comment">/*line :222:7*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> <span class="comment">/*line :222:15*/</span>
}

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-alloc" class="ident">alloc</a>(kind <a href="#line-185" class="ident">bufferKind</a>) *<a href="#line-207" class="ident">memBuffer</a> {
	sz := <a href="#line-212" class="ident">kind</a>.<a href="#line-192" class="ident">initialSize</a>()
	<span class="keyword">return</span> &amp;<a href="#line-207" class="ident">memBuffer</a>{
		<a href="#line-208" class="ident">ptr</a>:  ( <span class="comment">/*line :228:9*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-91" class="ident">_Cfunc__CMalloc</a> <span class="comment">/*line :228:16*/</span>)(<a href="#line-213" class="ident">sz</a>),
		<a href="#line-209" class="ident">size</a>: <a href="#line-213" class="ident">sz</a>,
	}
}

<span class="keyword">func</span> (mb *<a href="#line-207" class="ident">memBuffer</a>) resize(newSize  <span class="comment">/*line :233:37*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> <span class="comment">/*line :233:45*/</span>) {
	<a href="#line-220" class="ident">mb</a>.<a href="#line-208" class="ident">ptr</a> = <span class="keyword">func</span>() <a href="../../../pkg/unsafe.html" class="ident i6">_cgo_unsafe</a>.<a href="../../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>{ _cgo0 := <span class="comment">/*line :234:21*/</span><a href="#line-220" class="ident">mb</a>.<a href="#line-208" class="ident">ptr</a>; <span class="keyword">var</span> _cgo1 <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-42" class="ident">_Ctype_size_t</a> = <span class="comment">/*line :234:29*/</span><a href="#line-220" class="ident">newSize</a>; <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-221" class="ident">_cgo0</a>, <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>); <span class="keyword">return</span> <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-197" class="ident">_Cfunc_realloc</a>(<a href="#line-221" class="ident">_cgo0</a>, <a href="#line-221" class="ident">_cgo1</a>); }()
	<a href="#line-220" class="ident">mb</a>.<a href="#line-209" class="ident">size</a> = <a href="#line-220" class="ident">newSize</a>
}

<span class="keyword">func</span> (mb *<a href="#line-207" class="ident">memBuffer</a>) free() {
	<span class="keyword">func</span>() { _cgo0 := <span class="comment">/*line :239:9*/</span><a href="#line-225" class="ident">mb</a>.<a href="#line-208" class="ident">ptr</a>; <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-76" class="ident">_cgoCheckPointer</a>(<a href="#line-226" class="ident">_cgo0</a>, <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>); <a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-100" class="ident">_Cfunc_free</a>(<a href="#line-226" class="ident">_cgo0</a>); }()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> retryWithBuffer repeatedly calls f(), increasing the size of the</span><span class="comment"> buffer each time, until f succeeds, fails with a non-ERANGE error,</span><span class="comment"> or the buffer exceeds a reasonable limit.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-retryWithBuffer" class="ident">retryWithBuffer</a>(buf *<a href="#line-207" class="ident">memBuffer</a>, f <span class="keyword">func</span>() <a href="../../../pkg/syscall.html" class="ident i4">syscall</a>.<a href="../../syscall/syscall_unix.go.html#line-114" class="ident">Errno</a>) <a href="../../../pkg/builtin.html#name-error" class="ident">error</a> {
	<span class="keyword">for</span> {
		errno := <a href="#line-232" class="ident">f</a>()
		<span class="keyword">if</span> <a href="#line-234" class="ident">errno</a> == <span class="lit-number">0</span> {
			<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>
		} <span class="keyword">else</span> <span class="keyword">if</span> <a href="#line-234" class="ident">errno</a> != <a href="../../../pkg/syscall.html" class="ident i4">syscall</a>.<a href="../../syscall/zerrors_darwin_amd64.go.html#line-1226" class="ident">ERANGE</a> {
			<span class="keyword">return</span> <a href="#line-234" class="ident">errno</a>
		}
		newSize := <a href="#line-232" class="ident">buf</a>.<a href="#line-209" class="ident">size</a> * <span class="lit-number">2</span>
		<span class="keyword">if</span> !<a href="#line-250" class="ident">isSizeReasonable</a>(<a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<a href="#line-240" class="ident">newSize</a>)) {
			<span class="keyword">return</span> <a href="../../../pkg/fmt.html" class="ident i1">fmt</a>.<a href="../../fmt/errors.go.html#line-17" class="ident">Errorf</a>(<span class="lit-string">"internal buffer exceeds %d bytes"</span>, <a href="#line-248" class="ident">maxBufferSize</a>)
		}
		<a href="#line-232" class="ident">buf</a>.<a href="#line-220" class="ident">resize</a>(<a href="#line-240" class="ident">newSize</a>)
	}
}

<span class="keyword">const</span> <a href="../../../pkg/os/user.html#name-maxBufferSize" class="ident">maxBufferSize</a> = <span class="lit-number">1</span> &lt;&lt; <span class="lit-number">20</span>

<span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-isSizeReasonable" class="ident">isSizeReasonable</a>(sz <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>) <a href="../../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<span class="keyword">return</span> <a href="#line-250" class="ident">sz</a> &gt; <span class="lit-number">0</span> &amp;&amp; <a href="#line-250" class="ident">sz</a> &lt;= <a href="#line-248" class="ident">maxBufferSize</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Because we can't use cgo in tests:</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <a href="../../../pkg/os/user.html#name-structPasswdForNegativeTest" class="ident">structPasswdForNegativeTest</a>()  <span class="comment">/*line :268:36*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-51" class="ident">_Ctype_struct_passwd</a> <span class="comment">/*line :268:51*/</span> {
	sp :=  <span class="comment">/*line :269:8*/</span><a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-51" class="ident">_Ctype_struct_passwd</a> <span class="comment">/*line :269:23*/</span>{}
	<a href="#line-256" class="ident">sp</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-54" class="ident">pw_uid</a> = <span class="lit-number">1</span>&lt;&lt;<span class="lit-number">32</span> - <span class="lit-number">2</span>
	<a href="#line-256" class="ident">sp</a>.<a href="f944835971175ae02f5a15dd71fd940ec4b08d0430844caacc17edcfd010b48b-d.html#line-55" class="ident">pw_gid</a> = <span class="lit-number">1</span>&lt;&lt;<span class="lit-number">32</span> - <span class="lit-number">3</span>
	<span class="keyword">return</span> <a href="#line-256" class="ident">sp</a>
</code></pre></div></div>

</div><pre id="footer">
<table><tr><td><img src="../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>