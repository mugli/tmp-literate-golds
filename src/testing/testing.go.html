<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: testing.go in package testing</title>
<link href="../../css/lightLiterate-v0.3.2-preview.css" rel="stylesheet">
<script src="../../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	testing.go

<span class="title">Belonging Package</span>
	<a href="../../pkg/testing.html">testing</a>
</code></pre>
<style>input[type=radio] {display: none;}
input[id=r0]:checked ~pre label[for=r0],
input[id=r1]:checked ~pre label[for=r1],
input[id=r2]:checked ~pre label[for=r2],
input[id=r3]:checked ~pre label[for=r3],
input[id=r4]:checked ~pre label[for=r4],
input[id=r5]:checked ~pre label[for=r5],
input[id=r6]:checked ~pre label[for=r6],
input[id=r7]:checked ~pre label[for=r7],
input[id=r8]:checked ~pre label[for=r8],
input[id=r9]:checked ~pre label[for=r9],
input[id=r10]:checked ~pre label[for=r10],
input[id=r11]:checked ~pre label[for=r11],
input[id=r12]:checked ~pre label[for=r12],
input[id=r13]:checked ~pre label[for=r13],
input[id=r14]:checked ~pre label[for=r14],
input[id=r15]:checked ~pre label[for=r15],
input[id=r16]:checked ~pre label[for=r16],
input[id=r17]:checked ~pre label[for=r17],
input[id=r18]:checked ~pre label[for=r18],
input[id=r19]:checked ~pre label[for=r19],
input[id=r20]:checked ~pre label[for=r20],
input[id=r21]:checked ~pre label[for=r21],
input[id=r22]:checked ~pre label[for=r22],
input[id=r23]:checked ~pre label[for=r23],
input[id=r24]:checked ~pre label[for=r24],
input[id=r25]:checked ~pre label[for=r25],
input[id=r26]:checked ~pre label[for=r26],
input[id=r27]:checked ~pre label[for=r27],
input[id=r28]:checked ~pre label[for=r28],
input[id=r29]:checked ~pre label[for=r29],
input[id=r30]:checked ~pre label[for=r30],
input[id=r31]:checked ~pre label[for=r31],
input[id=r32]:checked ~pre label[for=r32],
input[id=r33]:checked ~pre label[for=r33],
input[id=r34]:checked ~pre label[for=r34],
input[id=r35]:checked ~pre label[for=r35],
input[id=r36]:checked ~pre label[for=r36],
input[id=r37]:checked ~pre label[for=r37],
input[id=r38]:checked ~pre label[for=r38],
input[id=r39]:checked ~pre label[for=r39],
input[id=r40]:checked ~pre label[for=r40],
input[id=r41]:checked ~pre label[for=r41],
input[id=r42]:checked ~pre label[for=r42],
input[id=r43]:checked ~pre label[for=r43],
input[id=r44]:checked ~pre label[for=r44],
input[id=r45]:checked ~pre label[for=r45],
input[id=r46]:checked ~pre label[for=r46],
input[id=r47]:checked ~pre label[for=r47],
input[id=r48]:checked ~pre label[for=r48],
input[id=r49]:checked ~pre label[for=r49],
input[id=r50]:checked ~pre label[for=r50],
input[id=r51]:checked ~pre label[for=r51],
input[id=r52]:checked ~pre label[for=r52],
input[id=r53]:checked ~pre label[for=r53],
input[id=r54]:checked ~pre label[for=r54],
input[id=r55]:checked ~pre label[for=r55],
input[id=r56]:checked ~pre label[for=r56],
input[id=r57]:checked ~pre label[for=r57],
input[id=r58]:checked ~pre label[for=r58],
input[id=r59]:checked ~pre label[for=r59],
input[id=r60]:checked ~pre label[for=r60],
input[id=r61]:checked ~pre label[for=r61],
input[id=r62]:checked ~pre label[for=r62],
input[id=r63]:checked ~pre label[for=r63],
input[id=r64]:checked ~pre label[for=r64],
input[id=r65]:checked ~pre label[for=r65],
input[id=r66]:checked ~pre label[for=r66],
input[id=r67]:checked ~pre label[for=r67],
input[id=r68]:checked ~pre label[for=r68],
input[id=r69]:checked ~pre label[for=r69],
input[id=r70]:checked ~pre label[for=r70],
input[id=r71]:checked ~pre label[for=r71],
input[id=r72]:checked ~pre label[for=r72],
input[id=r73]:checked ~pre label[for=r73],
input[id=r74]:checked ~pre label[for=r74],
input[id=r75]:checked ~pre label[for=r75],
input[id=r76]:checked ~pre label[for=r76],
input[id=r77]:checked ~pre label[for=r77],
input[id=r78]:checked ~pre label[for=r78],
input[id=r79]:checked ~pre label[for=r79],
input[id=r80]:checked ~pre label[for=r80],
input[id=r81]:checked ~pre label[for=r81],
input[id=r82]:checked ~pre label[for=r82],
input[id=r83]:checked ~pre label[for=r83],
input[id=r84]:checked ~pre label[for=r84],
input[id=r85]:checked ~pre label[for=r85],
input[id=r86]:checked ~pre label[for=r86],
input[id=r87]:checked ~pre label[for=r87],
input[id=r88]:checked ~pre label[for=r88],
input[id=r89]:checked ~pre label[for=r89],
input[id=r90]:checked ~pre label[for=r90],
input[id=r91]:checked ~pre label[for=r91],
input[id=r92]:checked ~pre label[for=r92],
input[id=r93]:checked ~pre label[for=r93],
input[id=r94]:checked ~pre label[for=r94],
input[id=r95]:checked ~pre label[for=r95],
input[id=r96]:checked ~pre label[for=r96],
input[id=r97]:checked ~pre label[for=r97],
input[id=r98]:checked ~pre label[for=r98],
input[id=r99]:checked ~pre label[for=r99],
input[id=r100]:checked ~pre label[for=r100],
input[id=r101]:checked ~pre label[for=r101],
input[id=r102]:checked ~pre label[for=r102],
input[id=r103]:checked ~pre label[for=r103],
input[id=r104]:checked ~pre label[for=r104],
input[id=r105]:checked ~pre label[for=r105],
input[id=r106]:checked ~pre label[for=r106],
input[id=r107]:checked ~pre label[for=r107],
input[id=r108]:checked ~pre label[for=r108],
input[id=r109]:checked ~pre label[for=r109],
input[id=r110]:checked ~pre label[for=r110],
input[id=r111]:checked ~pre label[for=r111],
input[id=r112]:checked ~pre label[for=r112],
input[id=r113]:checked ~pre label[for=r113],
input[id=r114]:checked ~pre label[for=r114],
input[id=r115]:checked ~pre label[for=r115],
input[id=r116]:checked ~pre label[for=r116],
input[id=r117]:checked ~pre label[for=r117],
input[id=r118]:checked ~pre label[for=r118],
input[id=r119]:checked ~pre label[for=r119],
input[id=r120]:checked ~pre label[for=r120],
input[id=r121]:checked ~pre label[for=r121],
input[id=r122]:checked ~pre label[for=r122],
input[id=r123]:checked ~pre label[for=r123],
input[id=r124]:checked ~pre label[for=r124],
input[id=r125]:checked ~pre label[for=r125],
input[id=r126]:checked ~pre label[for=r126],
input[id=r127]:checked ~pre label[for=r127],
input[id=r128]:checked ~pre label[for=r128],
input[id=r129]:checked ~pre label[for=r129],
input[id=r130]:checked ~pre label[for=r130],
input[id=r131]:checked ~pre label[for=r131],
input[id=r132]:checked ~pre label[for=r132],
input[id=r133]:checked ~pre label[for=r133],
input[id=r134]:checked ~pre label[for=r134],
input[id=r135]:checked ~pre label[for=r135],
input[id=r136]:checked ~pre label[for=r136],
input[id=r137]:checked ~pre label[for=r137],
input[id=r138]:checked ~pre label[for=r138],
input[id=r139]:checked ~pre label[for=r139],
input[id=r140]:checked ~pre label[for=r140],
input[id=r141]:checked ~pre label[for=r141],
input[id=r142]:checked ~pre label[for=r142],
input[id=r143]:checked ~pre label[for=r143],
input[id=r144]:checked ~pre label[for=r144],
input[id=r145]:checked ~pre label[for=r145],
input[id=r146]:checked ~pre label[for=r146],
input[id=r147]:checked ~pre label[for=r147],
input[id=r148]:checked ~pre label[for=r148],
input[id=r149]:checked ~pre label[for=r149],
input[id=r150]:checked ~pre label[for=r150],
input[id=r151]:checked ~pre label[for=r151],
input[id=r152]:checked ~pre label[for=r152],
input[id=r153]:checked ~pre label[for=r153],
input[id=r154]:checked ~pre label[for=r154],
input[id=r155]:checked ~pre label[for=r155],
input[id=r156]:checked ~pre label[for=r156],
input[id=r157]:checked ~pre label[for=r157],
input[id=r158]:checked ~pre label[for=r158],
input[id=r159]:checked ~pre label[for=r159],
input[id=r160]:checked ~pre label[for=r160],
input[id=r161]:checked ~pre label[for=r161],
input[id=r162]:checked ~pre label[for=r162],
input[id=r163]:checked ~pre label[for=r163],
input[id=r164]:checked ~pre label[for=r164],
input[id=r165]:checked ~pre label[for=r165],
input[id=r166]:checked ~pre label[for=r166],
input[id=r167]:checked ~pre label[for=r167],
input[id=r168]:checked ~pre label[for=r168],
input[id=r169]:checked ~pre label[for=r169],
input[id=r170]:checked ~pre label[for=r170],
input[id=r171]:checked ~pre label[for=r171],
input[id=r172]:checked ~pre label[for=r172],
input[id=r173]:checked ~pre label[for=r173],
input[id=r174]:checked ~pre label[for=r174],
input[id=r175]:checked ~pre label[for=r175],
input[id=r176]:checked ~pre label[for=r176],
input[id=r177]:checked ~pre label[for=r177],
input[id=r178]:checked ~pre label[for=r178],
input[id=r179]:checked ~pre label[for=r179],
input[id=r180]:checked ~pre label[for=r180],
input[id=r181]:checked ~pre label[for=r181],
input[id=r182]:checked ~pre label[for=r182],
input[id=r183]:checked ~pre label[for=r183],
input[id=r184]:checked ~pre label[for=r184],
input[id=r185]:checked ~pre label[for=r185],
input[id=r186]:checked ~pre label[for=r186],
input[id=r187]:checked ~pre label[for=r187],
input[id=r188]:checked ~pre label[for=r188],
input[id=r189]:checked ~pre label[for=r189],
input[id=r190]:checked ~pre label[for=r190],
input[id=r191]:checked ~pre label[for=r191],
input[id=r192]:checked ~pre label[for=r192],
input[id=r193]:checked ~pre label[for=r193],
input[id=r194]:checked ~pre label[for=r194],
input[id=r195]:checked ~pre label[for=r195],
input[id=r196]:checked ~pre label[for=r196],
input[id=r197]:checked ~pre label[for=r197],
input[id=r198]:checked ~pre label[for=r198],
input[id=r199]:checked ~pre label[for=r199],
input[id=r200]:checked ~pre label[for=r200],
input[id=r201]:checked ~pre label[for=r201],
input[id=r202]:checked ~pre label[for=r202],
input[id=r203]:checked ~pre label[for=r203],
input[id=r204]:checked ~pre label[for=r204],
input[id=r205]:checked ~pre label[for=r205],
input[id=r206]:checked ~pre label[for=r206],
input[id=r207]:checked ~pre label[for=r207],
input[id=r208]:checked ~pre label[for=r208],
input[id=r209]:checked ~pre label[for=r209],
input[id=r210]:checked ~pre label[for=r210],
input[id=r211]:checked ~pre label[for=r211],
input[id=r212]:checked ~pre label[for=r212],
input[id=r213]:checked ~pre label[for=r213],
input[id=r214]:checked ~pre label[for=r214],
input[id=r215]:checked ~pre label[for=r215],
input[id=r216]:checked ~pre label[for=r216],
input[id=r217]:checked ~pre label[for=r217],
input[id=r218]:checked ~pre label[for=r218],
input[id=r219]:checked ~pre label[for=r219],
input[id=r220]:checked ~pre label[for=r220],
input[id=r221]:checked ~pre label[for=r221],
input[id=r222]:checked ~pre label[for=r222],
input[id=r223]:checked ~pre label[for=r223],
input[id=r224]:checked ~pre label[for=r224],
input[id=r225]:checked ~pre label[for=r225],
input[id=r226]:checked ~pre label[for=r226],
input[id=r227]:checked ~pre label[for=r227],
input[id=r228]:checked ~pre label[for=r228],
input[id=r229]:checked ~pre label[for=r229],
input[id=r230]:checked ~pre label[for=r230],
input[id=r231]:checked ~pre label[for=r231],
input[id=r232]:checked ~pre label[for=r232],
input[id=r233]:checked ~pre label[for=r233],
input[id=r234]:checked ~pre label[for=r234],
input[id=r235]:checked ~pre label[for=r235],
input[id=r236]:checked ~pre label[for=r236],
input[id=r237]:checked ~pre label[for=r237],
input[id=r238]:checked ~pre label[for=r238],
input[id=r239]:checked ~pre label[for=r239],
input[id=r240]:checked ~pre label[for=r240],
input[id=r241]:checked ~pre label[for=r241],
input[id=r242]:checked ~pre label[for=r242],
input[id=r243]:checked ~pre label[for=r243],
input[id=r244]:checked ~pre label[for=r244],
input[id=r245]:checked ~pre label[for=r245],
input[id=r246]:checked ~pre label[for=r246],
input[id=r247]:checked ~pre label[for=r247],
input[id=r248]:checked ~pre label[for=r248],
input[id=r249]:checked ~pre label[for=r249],
input[id=r250]:checked ~pre label[for=r250],
input[id=r251]:checked ~pre label[for=r251],
input[id=r252]:checked ~pre label[for=r252],
input[id=r253]:checked ~pre label[for=r253],
input[id=r254]:checked ~pre label[for=r254],
input[id=r255]:checked ~pre label[for=r255],
input[id=r256]:checked ~pre label[for=r256],
input[id=r257]:checked ~pre label[for=r257],
input[id=r258]:checked ~pre label[for=r258],
input[id=r259]:checked ~pre label[for=r259],
input[id=r260]:checked ~pre label[for=r260],
input[id=r261]:checked ~pre label[for=r261],
input[id=r262]:checked ~pre label[for=r262],
input[id=r263]:checked ~pre label[for=r263],
input[id=r264]:checked ~pre label[for=r264],
input[id=r265]:checked ~pre label[for=r265],
input[id=r266]:checked ~pre label[for=r266],
input[id=r267]:checked ~pre label[for=r267],
input[id=r268]:checked ~pre label[for=r268],
input[id=r269]:checked ~pre label[for=r269],
input[id=r270]:checked ~pre label[for=r270],
input[id=r271]:checked ~pre label[for=r271],
input[id=r272]:checked ~pre label[for=r272],
input[id=r273]:checked ~pre label[for=r273],
input[id=r274]:checked ~pre label[for=r274],
input[id=r275]:checked ~pre label[for=r275],
input[id=r276]:checked ~pre label[for=r276],
input[id=r277]:checked ~pre label[for=r277],
input[id=r278]:checked ~pre label[for=r278],
input[id=r279]:checked ~pre label[for=r279],
input[id=r280]:checked ~pre label[for=r280],
input[id=r281]:checked ~pre label[for=r281],
input[id=r282]:checked ~pre label[for=r282],
input[id=r283]:checked ~pre label[for=r283],
input[id=r284]:checked ~pre label[for=r284],
input[id=r285]:checked ~pre label[for=r285],
input[id=r286]:checked ~pre label[for=r286],
input[id=r287]:checked ~pre label[for=r287],
input[id=r288]:checked ~pre label[for=r288],
input[id=r289]:checked ~pre label[for=r289],
input[id=r290]:checked ~pre label[for=r290],
input[id=r291]:checked ~pre label[for=r291],
input[id=r292]:checked ~pre label[for=r292],
input[id=r293]:checked ~pre label[for=r293],
input[id=r294]:checked ~pre label[for=r294],
input[id=r295]:checked ~pre label[for=r295],
input[id=r296]:checked ~pre label[for=r296],
input[id=r297]:checked ~pre label[for=r297],
input[id=r298]:checked ~pre label[for=r298],
input[id=r299]:checked ~pre label[for=r299],
input[id=r300]:checked ~pre label[for=r300],
input[id=r301]:checked ~pre label[for=r301],
input[id=r302]:checked ~pre label[for=r302],
input[id=r303]:checked ~pre label[for=r303],
input[id=r304]:checked ~pre label[for=r304],
input[id=r305]:checked ~pre label[for=r305],
input[id=r306]:checked ~pre label[for=r306],
input[id=r307]:checked ~pre label[for=r307],
input[id=r308]:checked ~pre label[for=r308],
input[id=r309]:checked ~pre label[for=r309],
input[id=r310]:checked ~pre label[for=r310],
input[id=r311]:checked ~pre label[for=r311],
input[id=r312]:checked ~pre label[for=r312],
input[id=r313]:checked ~pre label[for=r313],
input[id=r314]:checked ~pre label[for=r314],
input[id=r315]:checked ~pre label[for=r315],
input[id=r316]:checked ~pre label[for=r316],
input[id=r317]:checked ~pre label[for=r317],
input[id=r318]:checked ~pre label[for=r318],
input[id=r319]:checked ~pre label[for=r319],
input[id=r320]:checked ~pre label[for=r320]
{background: #226; color: #ff8;}
input[id=i0]:checked ~pre .i0,
input[id=i1]:checked ~pre .i1,
input[id=i2]:checked ~pre .i2,
input[id=i3]:checked ~pre .i3,
input[id=i4]:checked ~pre .i4,
input[id=i5]:checked ~pre .i5,
input[id=i6]:checked ~pre .i6,
input[id=i7]:checked ~pre .i7,
input[id=i8]:checked ~pre .i8,
input[id=i9]:checked ~pre .i9,
input[id=i10]:checked ~pre .i10,
input[id=i11]:checked ~pre .i11,
input[id=i12]:checked ~pre .i12,
input[id=i13]:checked ~pre .i13,
input[id=i14]:checked ~pre .i14
{background: brown; color: #eed;}
</style><input id="r0" type="radio" name="g"/>
<input id="r1" type="radio" name="g"/>
<input id="r2" type="radio" name="g"/>
<input id="r3" type="radio" name="g"/>
<input id="r4" type="radio" name="g"/>
<input id="r5" type="radio" name="g"/>
<input id="r6" type="radio" name="g"/>
<input id="r7" type="radio" name="g"/>
<input id="r8" type="radio" name="g"/>
<input id="r9" type="radio" name="g"/>
<input id="r10" type="radio" name="g"/>
<input id="r11" type="radio" name="g"/>
<input id="r12" type="radio" name="g"/>
<input id="r13" type="radio" name="g"/>
<input id="r14" type="radio" name="g"/>
<input id="r15" type="radio" name="g"/>
<input id="r16" type="radio" name="g"/>
<input id="r17" type="radio" name="g"/>
<input id="r18" type="radio" name="g"/>
<input id="r19" type="radio" name="g"/>
<input id="r20" type="radio" name="g"/>
<input id="r21" type="radio" name="g"/>
<input id="r22" type="radio" name="g"/>
<input id="r23" type="radio" name="g"/>
<input id="r24" type="radio" name="g"/>
<input id="r25" type="radio" name="g"/>
<input id="r26" type="radio" name="g"/>
<input id="r27" type="radio" name="g"/>
<input id="r28" type="radio" name="g"/>
<input id="r29" type="radio" name="g"/>
<input id="r30" type="radio" name="g"/>
<input id="r31" type="radio" name="g"/>
<input id="r32" type="radio" name="g"/>
<input id="r33" type="radio" name="g"/>
<input id="r34" type="radio" name="g"/>
<input id="r35" type="radio" name="g"/>
<input id="r36" type="radio" name="g"/>
<input id="r37" type="radio" name="g"/>
<input id="r38" type="radio" name="g"/>
<input id="r39" type="radio" name="g"/>
<input id="r40" type="radio" name="g"/>
<input id="r41" type="radio" name="g"/>
<input id="r42" type="radio" name="g"/>
<input id="r43" type="radio" name="g"/>
<input id="r44" type="radio" name="g"/>
<input id="r45" type="radio" name="g"/>
<input id="r46" type="radio" name="g"/>
<input id="r47" type="radio" name="g"/>
<input id="r48" type="radio" name="g"/>
<input id="r49" type="radio" name="g"/>
<input id="r50" type="radio" name="g"/>
<input id="r51" type="radio" name="g"/>
<input id="r52" type="radio" name="g"/>
<input id="r53" type="radio" name="g"/>
<input id="r54" type="radio" name="g"/>
<input id="r55" type="radio" name="g"/>
<input id="r56" type="radio" name="g"/>
<input id="r57" type="radio" name="g"/>
<input id="r58" type="radio" name="g"/>
<input id="r59" type="radio" name="g"/>
<input id="r60" type="radio" name="g"/>
<input id="r61" type="radio" name="g"/>
<input id="r62" type="radio" name="g"/>
<input id="r63" type="radio" name="g"/>
<input id="r64" type="radio" name="g"/>
<input id="r65" type="radio" name="g"/>
<input id="r66" type="radio" name="g"/>
<input id="r67" type="radio" name="g"/>
<input id="r68" type="radio" name="g"/>
<input id="r69" type="radio" name="g"/>
<input id="r70" type="radio" name="g"/>
<input id="r71" type="radio" name="g"/>
<input id="r72" type="radio" name="g"/>
<input id="r73" type="radio" name="g"/>
<input id="r74" type="radio" name="g"/>
<input id="r75" type="radio" name="g"/>
<input id="r76" type="radio" name="g"/>
<input id="r77" type="radio" name="g"/>
<input id="r78" type="radio" name="g"/>
<input id="r79" type="radio" name="g"/>
<input id="r80" type="radio" name="g"/>
<input id="r81" type="radio" name="g"/>
<input id="r82" type="radio" name="g"/>
<input id="r83" type="radio" name="g"/>
<input id="r84" type="radio" name="g"/>
<input id="r85" type="radio" name="g"/>
<input id="r86" type="radio" name="g"/>
<input id="r87" type="radio" name="g"/>
<input id="r88" type="radio" name="g"/>
<input id="r89" type="radio" name="g"/>
<input id="r90" type="radio" name="g"/>
<input id="r91" type="radio" name="g"/>
<input id="r92" type="radio" name="g"/>
<input id="r93" type="radio" name="g"/>
<input id="r94" type="radio" name="g"/>
<input id="r95" type="radio" name="g"/>
<input id="r96" type="radio" name="g"/>
<input id="r97" type="radio" name="g"/>
<input id="r98" type="radio" name="g"/>
<input id="r99" type="radio" name="g"/>
<input id="r100" type="radio" name="g"/>
<input id="r101" type="radio" name="g"/>
<input id="r102" type="radio" name="g"/>
<input id="r103" type="radio" name="g"/>
<input id="r104" type="radio" name="g"/>
<input id="r105" type="radio" name="g"/>
<input id="r106" type="radio" name="g"/>
<input id="r107" type="radio" name="g"/>
<input id="r108" type="radio" name="g"/>
<input id="r109" type="radio" name="g"/>
<input id="r110" type="radio" name="g"/>
<input id="r111" type="radio" name="g"/>
<input id="r112" type="radio" name="g"/>
<input id="r113" type="radio" name="g"/>
<input id="r114" type="radio" name="g"/>
<input id="r115" type="radio" name="g"/>
<input id="r116" type="radio" name="g"/>
<input id="r117" type="radio" name="g"/>
<input id="r118" type="radio" name="g"/>
<input id="r119" type="radio" name="g"/>
<input id="r120" type="radio" name="g"/>
<input id="r121" type="radio" name="g"/>
<input id="r122" type="radio" name="g"/>
<input id="r123" type="radio" name="g"/>
<input id="r124" type="radio" name="g"/>
<input id="r125" type="radio" name="g"/>
<input id="r126" type="radio" name="g"/>
<input id="r127" type="radio" name="g"/>
<input id="r128" type="radio" name="g"/>
<input id="r129" type="radio" name="g"/>
<input id="r130" type="radio" name="g"/>
<input id="r131" type="radio" name="g"/>
<input id="r132" type="radio" name="g"/>
<input id="r133" type="radio" name="g"/>
<input id="r134" type="radio" name="g"/>
<input id="r135" type="radio" name="g"/>
<input id="r136" type="radio" name="g"/>
<input id="r137" type="radio" name="g"/>
<input id="r138" type="radio" name="g"/>
<input id="r139" type="radio" name="g"/>
<input id="r140" type="radio" name="g"/>
<input id="r141" type="radio" name="g"/>
<input id="r142" type="radio" name="g"/>
<input id="r143" type="radio" name="g"/>
<input id="r144" type="radio" name="g"/>
<input id="r145" type="radio" name="g"/>
<input id="r146" type="radio" name="g"/>
<input id="r147" type="radio" name="g"/>
<input id="r148" type="radio" name="g"/>
<input id="r149" type="radio" name="g"/>
<input id="r150" type="radio" name="g"/>
<input id="r151" type="radio" name="g"/>
<input id="r152" type="radio" name="g"/>
<input id="r153" type="radio" name="g"/>
<input id="r154" type="radio" name="g"/>
<input id="r155" type="radio" name="g"/>
<input id="r156" type="radio" name="g"/>
<input id="r157" type="radio" name="g"/>
<input id="r158" type="radio" name="g"/>
<input id="r159" type="radio" name="g"/>
<input id="r160" type="radio" name="g"/>
<input id="r161" type="radio" name="g"/>
<input id="r162" type="radio" name="g"/>
<input id="r163" type="radio" name="g"/>
<input id="r164" type="radio" name="g"/>
<input id="r165" type="radio" name="g"/>
<input id="r166" type="radio" name="g"/>
<input id="r167" type="radio" name="g"/>
<input id="r168" type="radio" name="g"/>
<input id="r169" type="radio" name="g"/>
<input id="r170" type="radio" name="g"/>
<input id="r171" type="radio" name="g"/>
<input id="r172" type="radio" name="g"/>
<input id="r173" type="radio" name="g"/>
<input id="r174" type="radio" name="g"/>
<input id="r175" type="radio" name="g"/>
<input id="r176" type="radio" name="g"/>
<input id="r177" type="radio" name="g"/>
<input id="r178" type="radio" name="g"/>
<input id="r179" type="radio" name="g"/>
<input id="r180" type="radio" name="g"/>
<input id="r181" type="radio" name="g"/>
<input id="r182" type="radio" name="g"/>
<input id="r183" type="radio" name="g"/>
<input id="r184" type="radio" name="g"/>
<input id="r185" type="radio" name="g"/>
<input id="r186" type="radio" name="g"/>
<input id="r187" type="radio" name="g"/>
<input id="r188" type="radio" name="g"/>
<input id="r189" type="radio" name="g"/>
<input id="r190" type="radio" name="g"/>
<input id="r191" type="radio" name="g"/>
<input id="r192" type="radio" name="g"/>
<input id="r193" type="radio" name="g"/>
<input id="r194" type="radio" name="g"/>
<input id="r195" type="radio" name="g"/>
<input id="r196" type="radio" name="g"/>
<input id="r197" type="radio" name="g"/>
<input id="r198" type="radio" name="g"/>
<input id="r199" type="radio" name="g"/>
<input id="r200" type="radio" name="g"/>
<input id="r201" type="radio" name="g"/>
<input id="r202" type="radio" name="g"/>
<input id="r203" type="radio" name="g"/>
<input id="r204" type="radio" name="g"/>
<input id="r205" type="radio" name="g"/>
<input id="r206" type="radio" name="g"/>
<input id="r207" type="radio" name="g"/>
<input id="r208" type="radio" name="g"/>
<input id="r209" type="radio" name="g"/>
<input id="r210" type="radio" name="g"/>
<input id="r211" type="radio" name="g"/>
<input id="r212" type="radio" name="g"/>
<input id="r213" type="radio" name="g"/>
<input id="r214" type="radio" name="g"/>
<input id="r215" type="radio" name="g"/>
<input id="r216" type="radio" name="g"/>
<input id="r217" type="radio" name="g"/>
<input id="r218" type="radio" name="g"/>
<input id="r219" type="radio" name="g"/>
<input id="r220" type="radio" name="g"/>
<input id="r221" type="radio" name="g"/>
<input id="r222" type="radio" name="g"/>
<input id="r223" type="radio" name="g"/>
<input id="r224" type="radio" name="g"/>
<input id="r225" type="radio" name="g"/>
<input id="r226" type="radio" name="g"/>
<input id="r227" type="radio" name="g"/>
<input id="r228" type="radio" name="g"/>
<input id="r229" type="radio" name="g"/>
<input id="r230" type="radio" name="g"/>
<input id="r231" type="radio" name="g"/>
<input id="r232" type="radio" name="g"/>
<input id="r233" type="radio" name="g"/>
<input id="r234" type="radio" name="g"/>
<input id="r235" type="radio" name="g"/>
<input id="r236" type="radio" name="g"/>
<input id="r237" type="radio" name="g"/>
<input id="r238" type="radio" name="g"/>
<input id="r239" type="radio" name="g"/>
<input id="r240" type="radio" name="g"/>
<input id="r241" type="radio" name="g"/>
<input id="r242" type="radio" name="g"/>
<input id="r243" type="radio" name="g"/>
<input id="r244" type="radio" name="g"/>
<input id="r245" type="radio" name="g"/>
<input id="r246" type="radio" name="g"/>
<input id="r247" type="radio" name="g"/>
<input id="r248" type="radio" name="g"/>
<input id="r249" type="radio" name="g"/>
<input id="r250" type="radio" name="g"/>
<input id="r251" type="radio" name="g"/>
<input id="r252" type="radio" name="g"/>
<input id="r253" type="radio" name="g"/>
<input id="r254" type="radio" name="g"/>
<input id="r255" type="radio" name="g"/>
<input id="r256" type="radio" name="g"/>
<input id="r257" type="radio" name="g"/>
<input id="r258" type="radio" name="g"/>
<input id="r259" type="radio" name="g"/>
<input id="r260" type="radio" name="g"/>
<input id="r261" type="radio" name="g"/>
<input id="r262" type="radio" name="g"/>
<input id="r263" type="radio" name="g"/>
<input id="r264" type="radio" name="g"/>
<input id="r265" type="radio" name="g"/>
<input id="r266" type="radio" name="g"/>
<input id="r267" type="radio" name="g"/>
<input id="r268" type="radio" name="g"/>
<input id="r269" type="radio" name="g"/>
<input id="r270" type="radio" name="g"/>
<input id="r271" type="radio" name="g"/>
<input id="r272" type="radio" name="g"/>
<input id="r273" type="radio" name="g"/>
<input id="r274" type="radio" name="g"/>
<input id="r275" type="radio" name="g"/>
<input id="r276" type="radio" name="g"/>
<input id="r277" type="radio" name="g"/>
<input id="r278" type="radio" name="g"/>
<input id="r279" type="radio" name="g"/>
<input id="r280" type="radio" name="g"/>
<input id="r281" type="radio" name="g"/>
<input id="r282" type="radio" name="g"/>
<input id="r283" type="radio" name="g"/>
<input id="r284" type="radio" name="g"/>
<input id="r285" type="radio" name="g"/>
<input id="r286" type="radio" name="g"/>
<input id="r287" type="radio" name="g"/>
<input id="r288" type="radio" name="g"/>
<input id="r289" type="radio" name="g"/>
<input id="r290" type="radio" name="g"/>
<input id="r291" type="radio" name="g"/>
<input id="r292" type="radio" name="g"/>
<input id="r293" type="radio" name="g"/>
<input id="r294" type="radio" name="g"/>
<input id="r295" type="radio" name="g"/>
<input id="r296" type="radio" name="g"/>
<input id="r297" type="radio" name="g"/>
<input id="r298" type="radio" name="g"/>
<input id="r299" type="radio" name="g"/>
<input id="r300" type="radio" name="g"/>
<input id="r301" type="radio" name="g"/>
<input id="r302" type="radio" name="g"/>
<input id="r303" type="radio" name="g"/>
<input id="r304" type="radio" name="g"/>
<input id="r305" type="radio" name="g"/>
<input id="r306" type="radio" name="g"/>
<input id="r307" type="radio" name="g"/>
<input id="r308" type="radio" name="g"/>
<input id="r309" type="radio" name="g"/>
<input id="r310" type="radio" name="g"/>
<input id="r311" type="radio" name="g"/>
<input id="r312" type="radio" name="g"/>
<input id="r313" type="radio" name="g"/>
<input id="r314" type="radio" name="g"/>
<input id="r315" type="radio" name="g"/>
<input id="r316" type="radio" name="g"/>
<input id="r317" type="radio" name="g"/>
<input id="r318" type="radio" name="g"/>
<input id="r319" type="radio" name="g"/>
<input id="r320" type="radio" name="g"/>
<input id="i0" type="radio" name="i"/>
<input id="i1" type="radio" name="i"/>
<input id="i2" type="radio" name="i"/>
<input id="i3" type="radio" name="i"/>
<input id="i4" type="radio" name="i"/>
<input id="i5" type="radio" name="i"/>
<input id="i6" type="radio" name="i"/>
<input id="i7" type="radio" name="i"/>
<input id="i8" type="radio" name="i"/>
<input id="i9" type="radio" name="i"/>
<input id="i10" type="radio" name="i"/>
<input id="i11" type="radio" name="i"/>
<input id="i12" type="radio" name="i"/>
<input id="i13" type="radio" name="i"/>
<input id="i14" type="radio" name="i"/>
<div id="container"><div class="section">
<div class="doc">
<span class="comment"> Copyright 2009 The Go Authors. All rights reserved.</span><span class="comment"> Use of this source code is governed by a BSD-style</span><span class="comment"> license that can be found in the LICENSE file.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Package testing provides support for automated testing of Go packages.</span><span class="comment"> It is intended to be used in concert with the "go test" command, which automates</span><span class="comment"> execution of any function of the form</span><span class="comment">     func TestXxx(*testing.T)</span><span class="comment"> where Xxx does not start with a lowercase letter. The function name</span><span class="comment"> serves to identify the test routine.</span><span class="comment"></span><span class="comment"> Within these functions, use the Error, Fail or related methods to signal failure.</span><span class="comment"></span><span class="comment"> To write a new test suite, create a file whose name ends _test.go that</span><span class="comment"> contains the TestXxx functions as described here. Put the file in the same</span><span class="comment"> package as the one being tested. The file will be excluded from regular</span><span class="comment"> package builds but will be included when the "go test" command is run.</span><span class="comment"> For more detail, run "go help test" and "go help testflag".</span><span class="comment"></span><span class="comment"> A simple test function looks like this:</span><span class="comment"></span><span class="comment">     func TestAbs(t *testing.T) {</span><span class="comment">         got := Abs(-1)</span><span class="comment">         if got != 1 {</span><span class="comment">             t.Errorf("Abs(-1) = %d; want 1", got)</span><span class="comment">         }</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> Benchmarks</span><span class="comment"></span><span class="comment"> Functions of the form</span><span class="comment">     func BenchmarkXxx(*testing.B)</span><span class="comment"> are considered benchmarks, and are executed by the "go test" command when</span><span class="comment"> its -bench flag is provided. Benchmarks are run sequentially.</span><span class="comment"></span><span class="comment"> For a description of the testing flags, see</span><span class="comment"> https://golang.org/cmd/go/#hdr-Testing_flags</span><span class="comment"></span><span class="comment"> A sample benchmark function looks like this:</span><span class="comment">     func BenchmarkRandInt(b *testing.B) {</span><span class="comment">         for i := 0; i &lt; b.N; i++ {</span><span class="comment">             rand.Int()</span><span class="comment">         }</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> The benchmark function must run the target code b.N times.</span><span class="comment"> During benchmark execution, b.N is adjusted until the benchmark function lasts</span><span class="comment"> long enough to be timed reliably. The output</span><span class="comment">     BenchmarkRandInt-8   	68453040	        17.8 ns/op</span><span class="comment"> means that the loop ran 68453040 times at a speed of 17.8 ns per loop.</span><span class="comment"></span><span class="comment"> If a benchmark needs some expensive setup before running, the timer</span><span class="comment"> may be reset:</span><span class="comment"></span><span class="comment">     func BenchmarkBigLen(b *testing.B) {</span><span class="comment">         big := NewBig()</span><span class="comment">         b.ResetTimer()</span><span class="comment">         for i := 0; i &lt; b.N; i++ {</span><span class="comment">             big.Len()</span><span class="comment">         }</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> If a benchmark needs to test performance in a parallel setting, it may use</span><span class="comment"> the RunParallel helper function; such benchmarks are intended to be used with</span><span class="comment"> the go test -cpu flag:</span><span class="comment"></span><span class="comment">     func BenchmarkTemplateParallel(b *testing.B) {</span><span class="comment">         templ := template.Must(template.New("test").Parse("Hello, {{.}}!"))</span><span class="comment">         b.RunParallel(func(pb *testing.PB) {</span><span class="comment">             var buf bytes.Buffer</span><span class="comment">             for pb.Next() {</span><span class="comment">                 buf.Reset()</span><span class="comment">                 templ.Execute(&amp;buf, "World")</span><span class="comment">             }</span><span class="comment">         })</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> Examples</span><span class="comment"></span><span class="comment"> The package also runs and verifies example code. Example functions may</span><span class="comment"> include a concluding line comment that begins with "Output:" and is compared with</span><span class="comment"> the standard output of the function when the tests are run. (The comparison</span><span class="comment"> ignores leading and trailing space.) These are examples of an example:</span><span class="comment"></span><span class="comment">     func ExampleHello() {</span><span class="comment">         fmt.Println("hello")</span><span class="comment">         // Output: hello</span><span class="comment">     }</span><span class="comment"></span><span class="comment">     func ExampleSalutations() {</span><span class="comment">         fmt.Println("hello, and")</span><span class="comment">         fmt.Println("goodbye")</span><span class="comment">         // Output:</span><span class="comment">         // hello, and</span><span class="comment">         // goodbye</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> The comment prefix "Unordered output:" is like "Output:", but matches any</span><span class="comment"> line order:</span><span class="comment"></span><span class="comment">     func ExamplePerm() {</span><span class="comment">         for _, value := range Perm(5) {</span><span class="comment">             fmt.Println(value)</span><span class="comment">         }</span><span class="comment">         // Unordered output: 4</span><span class="comment">         // 2</span><span class="comment">         // 1</span><span class="comment">         // 3</span><span class="comment">         // 0</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> Example functions without output comments are compiled but not executed.</span><span class="comment"></span><span class="comment"> The naming convention to declare examples for the package, a function F, a type T and</span><span class="comment"> method M on type T are:</span><span class="comment"></span><span class="comment">     func Example() { ... }</span><span class="comment">     func ExampleF() { ... }</span><span class="comment">     func ExampleT() { ... }</span><span class="comment">     func ExampleT_M() { ... }</span><span class="comment"></span><span class="comment"> Multiple example functions for a package/type/function/method may be provided by</span><span class="comment"> appending a distinct suffix to the name. The suffix must start with a</span><span class="comment"> lower-case letter.</span><span class="comment"></span><span class="comment">     func Example_suffix() { ... }</span><span class="comment">     func ExampleF_suffix() { ... }</span><span class="comment">     func ExampleT_suffix() { ... }</span><span class="comment">     func ExampleT_M_suffix() { ... }</span><span class="comment"></span><span class="comment"> The entire test file is presented as the example when it contains a single</span><span class="comment"> example function, at least one other function, type, variable, or constant</span><span class="comment"> declaration, and no test or benchmark functions.</span><span class="comment"></span><span class="comment"> Skipping</span><span class="comment"></span><span class="comment"> Tests or benchmarks may be skipped at run time with a call to</span><span class="comment"> the Skip method of *T or *B:</span><span class="comment"></span><span class="comment">     func TestTimeConsuming(t *testing.T) {</span><span class="comment">         if testing.Short() {</span><span class="comment">             t.Skip("skipping test in short mode.")</span><span class="comment">         }</span><span class="comment">         ...</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> Subtests and Sub-benchmarks</span><span class="comment"></span><span class="comment"> The Run methods of T and B allow defining subtests and sub-benchmarks,</span><span class="comment"> without having to define separate functions for each. This enables uses</span><span class="comment"> like table-driven benchmarks and creating hierarchical tests.</span><span class="comment"> It also provides a way to share common setup and tear-down code:</span><span class="comment"></span><span class="comment">     func TestFoo(t *testing.T) {</span><span class="comment">         // &lt;setup code&gt;</span><span class="comment">         t.Run("A=1", func(t *testing.T) { ... })</span><span class="comment">         t.Run("A=2", func(t *testing.T) { ... })</span><span class="comment">         t.Run("B=1", func(t *testing.T) { ... })</span><span class="comment">         // &lt;tear-down code&gt;</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> Each subtest and sub-benchmark has a unique name: the combination of the name</span><span class="comment"> of the top-level test and the sequence of names passed to Run, separated by</span><span class="comment"> slashes, with an optional trailing sequence number for disambiguation.</span><span class="comment"></span><span class="comment"> The argument to the -run and -bench command-line flags is an unanchored regular</span><span class="comment"> expression that matches the test's name. For tests with multiple slash-separated</span><span class="comment"> elements, such as subtests, the argument is itself slash-separated, with</span><span class="comment"> expressions matching each name element in turn. Because it is unanchored, an</span><span class="comment"> empty expression matches any string.</span><span class="comment"> For example, using "matching" to mean "whose name contains":</span><span class="comment"></span><span class="comment">     go test -run ''      # Run all tests.</span><span class="comment">     go test -run Foo     # Run top-level tests matching "Foo", such as "TestFooBar".</span><span class="comment">     go test -run Foo/A=  # For top-level tests matching "Foo", run subtests matching "A=".</span><span class="comment">     go test -run /A=1    # For all top-level tests, run subtests matching "A=1".</span><span class="comment"></span><span class="comment"> Subtests can also be used to control parallelism. A parent test will only</span><span class="comment"> complete once all of its subtests complete. In this example, all tests are</span><span class="comment"> run in parallel with each other, and only with each other, regardless of</span><span class="comment"> other top-level tests that may be defined:</span><span class="comment"></span><span class="comment">     func TestGroupedParallel(t *testing.T) {</span><span class="comment">         for _, tc := range tests {</span><span class="comment">             tc := tc // capture range variable</span><span class="comment">             t.Run(tc.Name, func(t *testing.T) {</span><span class="comment">                 t.Parallel()</span><span class="comment">                 ...</span><span class="comment">             })</span><span class="comment">         }</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> The race detector kills the program if it exceeds 8192 concurrent goroutines,</span><span class="comment"> so use care when running parallel tests with the -race flag set.</span><span class="comment"></span><span class="comment"> Run does not return until parallel subtests have completed, providing a way</span><span class="comment"> to clean up after a group of parallel tests:</span><span class="comment"></span><span class="comment">     func TestTeardownParallel(t *testing.T) {</span><span class="comment">         // This Run will not return until the parallel tests finish.</span><span class="comment">         t.Run("group", func(t *testing.T) {</span><span class="comment">             t.Run("Test1", parallelTest1)</span><span class="comment">             t.Run("Test2", parallelTest2)</span><span class="comment">             t.Run("Test3", parallelTest3)</span><span class="comment">         })</span><span class="comment">         // &lt;tear-down code&gt;</span><span class="comment">     }</span><span class="comment"></span><span class="comment"> Main</span><span class="comment"></span><span class="comment"> It is sometimes necessary for a test program to do extra setup or teardown</span><span class="comment"> before or after testing. It is also sometimes necessary for a test to control</span><span class="comment"> which code runs on the main thread. To support these and other cases,</span><span class="comment"> if a test file contains a function:</span><span class="comment"></span><span class="comment">	func TestMain(m *testing.M)</span><span class="comment"></span><span class="comment"> then the generated test will call TestMain(m) instead of running the tests</span><span class="comment"> directly. TestMain runs in the main goroutine and can do whatever setup</span><span class="comment"> and teardown is necessary around a call to m.Run. m.Run will return an exit</span><span class="comment"> code that may be passed to os.Exit. If TestMain returns, the test wrapper</span><span class="comment"> will pass the result of m.Run to os.Exit itself.</span><span class="comment"></span><span class="comment"> When TestMain is called, flag.Parse has not been run. If TestMain depends on</span><span class="comment"> command-line flags, including those of the testing package, it should call</span><span class="comment"> flag.Parse explicitly. Command line flags are always parsed by the time test</span><span class="comment"> or benchmark functions run.</span><span class="comment"></span><span class="comment"> A simple implementation of TestMain is:</span><span class="comment"></span><span class="comment">	func TestMain(m *testing.M) {</span><span class="comment">		// call flag.Parse() here if TestMain uses flags</span><span class="comment">		os.Exit(m.Run())</span><span class="comment">	}</span><span class="comment"></span></div>
<div class="code"><pre><code><span class="keyword">package</span> testing

<span class="keyword">import</span> (
	<label for="i0"><span class="lit-string i0">"bytes"</span></label>
	<label for="i1"><span class="lit-string i1">"errors"</span></label>
	<label for="i2"><span class="lit-string i2">"flag"</span></label>
	<label for="i3"><span class="lit-string i3">"fmt"</span></label>
	<label for="i4"><span class="lit-string i4">"internal/race"</span></label>
	<label for="i5"><span class="lit-string i5">"io"</span></label>
	<label for="i6"><span class="lit-string i6">"os"</span></label>
	<label for="i7"><span class="lit-string i7">"runtime"</span></label>
	<label for="i8"><span class="lit-string i8">"runtime/debug"</span></label>
	<label for="i9"><span class="lit-string i9">"runtime/trace"</span></label>
	<label for="i10"><span class="lit-string i10">"strconv"</span></label>
	<label for="i11"><span class="lit-string i11">"strings"</span></label>
	<label for="i12"><span class="lit-string i12">"sync"</span></label>
	<label for="i13"><span class="lit-string i13">"sync/atomic"</span></label>
	<label for="i14"><span class="lit-string i14">"time"</span></label>
)

<span class="keyword">var</span> <a href="../../pkg/testing.html#name-initRan" class="ident">initRan</a> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Init registers testing flags. These flags are automatically registered by</span><span class="comment"> the "go test" command before running test functions, so Init is only needed</span><span class="comment"> when calling functions such as Benchmark without using "go test".</span><span class="comment"></span><span class="comment"> Init has no effect if it was already called.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r0" class="ident"><a href="../../pkg/testing.html#name-Init" class="ident">Init</a></label>() {
	<span class="keyword">if</span> <a href="#line-256" class="ident">initRan</a> {
		<span class="keyword">return</span>
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> The short flag requests that tests run more quickly, but its functionality</span><span class="comment">	 is provided by test writers themselves. The testing package is just its</span><span class="comment">	 home. The all.bash installation script sets it to make installation more</span><span class="comment">	 efficient, but by default the flag is off so a plain "go test" will do a</span><span class="comment">	 full test of the package.</span></div>
<div class="code"><pre><code>	<a href="#line-308" class="ident">short</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-649" class="ident">Bool</a>(<span class="lit-string">"test.short"</span>, <a href="../../pkg/builtin.html#name-false" class="ident">false</a>, <span class="lit-string">"run smaller test suite to save time"</span>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> The failfast flag requests that test execution stop after the first test failure.</span></div>
<div class="code"><pre><code>	<a href="#line-309" class="ident">failFast</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-649" class="ident">Bool</a>(<span class="lit-string">"test.failfast"</span>, <a href="../../pkg/builtin.html#name-false" class="ident">false</a>, <span class="lit-string">"do not start new tests after the first test failure"</span>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> The directory in which to create profile files and the like. When run from</span><span class="comment">	 "go test", the binary always runs in the source directory for the package;</span><span class="comment">	 this flag lets "go test" tell the binary to write the files in the directory where</span><span class="comment">	 the "go test" command is run.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Report as tests are run; default is silent for success.</span></div>
<div class="code"><pre><code>	<a href="#line-311" class="ident">chatty</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-649" class="ident">Bool</a>(<span class="lit-string">"test.v"</span>, <a href="../../pkg/builtin.html#name-false" class="ident">false</a>, <span class="lit-string">"verbose: print additional output"</span>)
	<a href="#line-312" class="ident">count</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-727" class="ident">Uint</a>(<span class="lit-string">"test.count"</span>, <span class="lit-number">1</span>, <span class="lit-string">"run tests and benchmarks `n` times"</span>)
	<a href="#line-313" class="ident">coverProfile</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.coverprofile"</span>, <span class="lit-string">""</span>, <span class="lit-string">"write a coverage profile to `file`"</span>)
	<a href="#line-314" class="ident">matchList</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.list"</span>, <span class="lit-string">""</span>, <span class="lit-string">"list tests, examples, and benchmarks matching `regexp` then exit"</span>)
	<a href="#line-315" class="ident">match</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.run"</span>, <span class="lit-string">""</span>, <span class="lit-string">"run only tests and examples matching `regexp`"</span>)
	<a href="#line-316" class="ident">memProfile</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.memprofile"</span>, <span class="lit-string">""</span>, <span class="lit-string">"write an allocation profile to `file`"</span>)
	<a href="#line-317" class="ident">memProfileRate</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-675" class="ident">Int</a>(<span class="lit-string">"test.memprofilerate"</span>, <span class="lit-number">0</span>, <span class="lit-string">"set memory allocation profiling `rate` (see runtime.MemProfileRate)"</span>)
	<a href="#line-318" class="ident">cpuProfile</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.cpuprofile"</span>, <span class="lit-string">""</span>, <span class="lit-string">"write a cpu profile to `file`"</span>)
	<a href="#line-319" class="ident">blockProfile</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.blockprofile"</span>, <span class="lit-string">""</span>, <span class="lit-string">"write a goroutine blocking profile to `file`"</span>)
	<a href="#line-320" class="ident">blockProfileRate</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-675" class="ident">Int</a>(<span class="lit-string">"test.blockprofilerate"</span>, <span class="lit-number">1</span>, <span class="lit-string">"set blocking profile `rate` (see runtime.SetBlockProfileRate)"</span>)
	<a href="#line-321" class="ident">mutexProfile</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.mutexprofile"</span>, <span class="lit-string">""</span>, <span class="lit-string">"write a mutex contention profile to the named file after execution"</span>)
	<a href="#line-322" class="ident">mutexProfileFraction</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-675" class="ident">Int</a>(<span class="lit-string">"test.mutexprofilefraction"</span>, <span class="lit-number">1</span>, <span class="lit-string">"if &gt;= 0, calls runtime.SetMutexProfileFraction()"</span>)
	<a href="#line-323" class="ident">panicOnExit0</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-649" class="ident">Bool</a>(<span class="lit-string">"test.paniconexit0"</span>, <a href="../../pkg/builtin.html#name-false" class="ident">false</a>, <span class="lit-string">"panic on call to os.Exit(0)"</span>)
	<a href="#line-324" class="ident">traceFile</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.trace"</span>, <span class="lit-string">""</span>, <span class="lit-string">"write an execution trace to `file`"</span>)
	<a href="#line-325" class="ident">timeout</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-835" class="ident">Duration</a>(<span class="lit-string">"test.timeout"</span>, <span class="lit-number">0</span>, <span class="lit-string">"panic test binary after duration `d` (default 0, timeout disabled)"</span>)
	<a href="#line-326" class="ident">cpuListStr</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.cpu"</span>, <span class="lit-string">""</span>, <span class="lit-string">"comma-separated `list` of cpu counts to run each test with"</span>)
	<a href="#line-327" class="ident">parallel</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-675" class="ident">Int</a>(<span class="lit-string">"test.parallel"</span>, <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/debug.go.html#line-16" class="ident">GOMAXPROCS</a>(<span class="lit-number">0</span>), <span class="lit-string">"run at most `n` tests in parallel"</span>)
	<a href="#line-328" class="ident">testlog</a> = <a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-779" class="ident">String</a>(<span class="lit-string">"test.testlogfile"</span>, <span class="lit-string">""</span>, <span class="lit-string">"write test action log to `file` (for use only by cmd/go)"</span>)

	<a href="benchmark.go.html#line-25" class="ident">initBenchmarkFlags</a>()
}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Flags, registered during Init.</span></div>
<div class="code"><pre><code>	<a href="../../pkg/testing.html#name-short" class="ident">short</a>                *<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
	<a href="../../pkg/testing.html#name-failFast" class="ident">failFast</a>             *<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
	<a href="../../pkg/testing.html#name-outputDir" class="ident">outputDir</a>            *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-chatty" class="ident">chatty</a>               *<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
	<a href="../../pkg/testing.html#name-count" class="ident">count</a>                *<a href="../../pkg/builtin.html#name-uint" class="ident">uint</a>
	<a href="../../pkg/testing.html#name-coverProfile" class="ident">coverProfile</a>         *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-matchList" class="ident">matchList</a>            *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-match" class="ident">match</a>                *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-memProfile" class="ident">memProfile</a>           *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-memProfileRate" class="ident">memProfileRate</a>       *<a href="../../pkg/builtin.html#name-int" class="ident">int</a>
	<a href="../../pkg/testing.html#name-cpuProfile" class="ident">cpuProfile</a>           *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-blockProfile" class="ident">blockProfile</a>         *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-blockProfileRate" class="ident">blockProfileRate</a>     *<a href="../../pkg/builtin.html#name-int" class="ident">int</a>
	<a href="../../pkg/testing.html#name-mutexProfile" class="ident">mutexProfile</a>         *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-mutexProfileFraction" class="ident">mutexProfileFraction</a> *<a href="../../pkg/builtin.html#name-int" class="ident">int</a>
	<a href="../../pkg/testing.html#name-panicOnExit0" class="ident">panicOnExit0</a>         *<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
	<a href="../../pkg/testing.html#name-traceFile" class="ident">traceFile</a>            *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-timeout" class="ident">timeout</a>              *<a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-583" class="ident">Duration</a>
	<a href="../../pkg/testing.html#name-cpuListStr" class="ident">cpuListStr</a>           *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../pkg/testing.html#name-parallel" class="ident">parallel</a>             *<a href="../../pkg/builtin.html#name-int" class="ident">int</a>
	<a href="../../pkg/testing.html#name-testlog" class="ident">testlog</a>              *<a href="../../pkg/builtin.html#name-string" class="ident">string</a>

	<a href="../../pkg/testing.html#name-haveExamples" class="ident">haveExamples</a> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> <span class="comment">// are there examples?</span>

	<a href="../../pkg/testing.html#name-cpuList" class="ident">cpuList</a>     []<a href="../../pkg/builtin.html#name-int" class="ident">int</a>
	<a href="../../pkg/testing.html#name-testlogFile" class="ident">testlogFile</a> *<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/types.go.html#line-16" class="ident">File</a>

	<a href="../../pkg/testing.html#name-numFailed" class="ident">numFailed</a> <a href="../../pkg/builtin.html#name-uint32" class="ident">uint32</a> <span class="comment">// number of test failures</span>
)

<span class="keyword">type</span> <a href="../../pkg/testing.html#name-chattyPrinter" class="ident">chattyPrinter</a> <span class="keyword">struct</span> {
	<a href="../../use/testing..chattyPrinter*80ae1.w*50e72.html" class="ident">w</a>          <a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>
	<a href="../../use/testing..chattyPrinter*80ae1.lastNameMu*fc0d4.html" class="ident">lastNameMu</a> <a href="../../pkg/sync.html" class="ident i12">sync</a>.<a href="../sync/mutex.go.html#line-25" class="ident">Mutex</a> <span class="comment">// guards lastName</span>
	<a href="../../use/testing..chattyPrinter*80ae1.lastName*18c9e.html" class="ident">lastName</a>   <a href="../../pkg/builtin.html#name-string" class="ident">string</a>     <span class="comment">// last printed test name in chatty mode</span>
}

<span class="keyword">func</span> <label for="r1" class="ident"><a href="../../pkg/testing.html#name-newChattyPrinter" class="ident">newChattyPrinter</a></label>(<label for="r2" class="ident">w</label> <a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>) *<a href="#line-338" class="ident">chattyPrinter</a> {
	<span class="keyword">return</span> &amp;<a href="#line-338" class="ident">chattyPrinter</a>{<a href="#line-339" class="ident">w</a>: <label for="r2" class="ident">w</label>}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Updatef prints a message about the status of the named test to w.</span><span class="comment"></span><span class="comment"> The formatted message must include the test name itself.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r3" class="ident">p</label> *<a href="#line-338" class="ident">chattyPrinter</a>) <label for="r4" class="ident"><a href="../../use/testing..chattyPrinter*80ae1.Updatef.html" class="ident">Updatef</a></label>(<label for="r5" class="ident">testName</label>, <label for="r6" class="ident">format</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r7" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r3" class="ident">p</label>.<a href="#line-340" class="ident">lastNameMu</a>.<a href="../sync/mutex.go.html#line-72" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r3" class="ident">p</label>.<a href="#line-340" class="ident">lastNameMu</a>.<a href="../sync/mutex.go.html#line-179" class="ident">Unlock</a>()
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Since the message already implies an association with a specific new test,</span><span class="comment">	 we don't need to check what the old test name was or log an extra CONT line</span><span class="comment">	 for it. (We're updating it anyway, and the current message already includes</span><span class="comment">	 the test name.)</span></div>
<div class="code"><pre><code>	<label for="r3" class="ident">p</label>.<a href="#line-341" class="ident">lastName</a> = <label for="r5" class="ident">testName</label>
	<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<label for="r3" class="ident">p</label>.<a href="#line-339" class="ident">w</a>, <label for="r6" class="ident">format</label>, <label for="r7" class="ident">args</label>...)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Printf prints a message, generated by the named test, that does not</span><span class="comment"> necessarily mention that tests's name itself.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r8" class="ident">p</label> *<a href="#line-338" class="ident">chattyPrinter</a>) <label for="r9" class="ident"><a href="../../use/testing..chattyPrinter*80ae1.Printf.html" class="ident">Printf</a></label>(<label for="r10" class="ident">testName</label>, <label for="r11" class="ident">format</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r12" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r8" class="ident">p</label>.<a href="#line-340" class="ident">lastNameMu</a>.<a href="../sync/mutex.go.html#line-72" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r8" class="ident">p</label>.<a href="#line-340" class="ident">lastNameMu</a>.<a href="../sync/mutex.go.html#line-179" class="ident">Unlock</a>()

	<span class="keyword">if</span> <label for="r8" class="ident">p</label>.<a href="#line-341" class="ident">lastName</a> == <span class="lit-string">""</span> {
		<label for="r8" class="ident">p</label>.<a href="#line-341" class="ident">lastName</a> = <label for="r10" class="ident">testName</label>
	} <span class="keyword">else</span> <span class="keyword">if</span> <label for="r8" class="ident">p</label>.<a href="#line-341" class="ident">lastName</a> != <label for="r10" class="ident">testName</label> {
		<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<label for="r8" class="ident">p</label>.<a href="#line-339" class="ident">w</a>, <span class="lit-string">"=== CONT  %s\n"</span>, <label for="r10" class="ident">testName</label>)
		<label for="r8" class="ident">p</label>.<a href="#line-341" class="ident">lastName</a> = <label for="r10" class="ident">testName</label>
	}

	<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<label for="r8" class="ident">p</label>.<a href="#line-339" class="ident">w</a>, <label for="r11" class="ident">format</label>, <label for="r12" class="ident">args</label>...)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> The maximum number of stack frames to go through when skipping helper functions for</span><span class="comment"> the purpose of decorating log messages.</span></div>
<div class="code"><pre><code><span class="keyword">const</span> <a href="../../pkg/testing.html#name-maxStackLen" class="ident">maxStackLen</a> = <span class="lit-number">50</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> common holds the elements common between T and B and</span><span class="comment"> captures common methods such as Errorf.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/testing.html#name-common" class="ident">common</a> <span class="keyword">struct</span> {
	<a href="../../use/testing..common*92a5d.mu*19503.html" class="ident">mu</a>          <a href="../../pkg/sync.html" class="ident i12">sync</a>.<a href="../sync/rwmutex.go.html#line-28" class="ident">RWMutex</a>         <span class="comment">// guards this group of fields</span>
	<a href="../../use/testing..common*92a5d.output*e0ee8.html" class="ident">output</a>      []<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>               <span class="comment">// Output generated by test or benchmark.</span>
	<a href="../../use/testing..common*92a5d.w*50e72.html" class="ident">w</a>           <a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>            <span class="comment">// For flushToParent.</span>
	<a href="../../use/testing..common*92a5d.ran*c8fc6.html" class="ident">ran</a>         <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>                 <span class="comment">// Test or benchmark (or one of its subtests) was executed.</span>
	<a href="../../use/testing..common*92a5d.failed*5d28a.html" class="ident">failed</a>      <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>                 <span class="comment">// Test or benchmark has failed.</span>
	<a href="../../use/testing..common*92a5d.skipped*38959.html" class="ident">skipped</a>     <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>                 <span class="comment">// Test of benchmark has been skipped.</span>
	<a href="../../use/testing..common*92a5d.done*a4c3e.html" class="ident">done</a>        <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>                 <span class="comment">// Test is finished and all subtests have completed.</span>
	<a href="../../use/testing..common*92a5d.helperPCs*818b2.html" class="ident">helperPCs</a>   <span class="keyword">map</span>[<a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>]<span class="keyword">struct</span>{} <span class="comment">// functions to be skipped when writing file/line info</span>
	<a href="../../use/testing..common*92a5d.helperNames*8b561.html" class="ident">helperNames</a> <span class="keyword">map</span>[<a href="../../pkg/builtin.html#name-string" class="ident">string</a>]<span class="keyword">struct</span>{}  <span class="comment">// helperPCs converted to function names</span>
	<a href="../../use/testing..common*92a5d.cleanups*ab723.html" class="ident">cleanups</a>    []<span class="keyword">func</span>()             <span class="comment">// optional functions to be called at the end of the test</span>
	<a href="../../use/testing..common*92a5d.cleanupName*4cf2f.html" class="ident">cleanupName</a> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>               <span class="comment">// Name of the cleanup function.</span>
	<a href="../../use/testing..common*92a5d.cleanupPc*00220.html" class="ident">cleanupPc</a>   []<a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>            <span class="comment">// The stack trace at the point where Cleanup was called.</span>

	<a href="../../use/testing..common*92a5d.chatty*8bd8e.html" class="ident">chatty</a>     *<a href="#line-338" class="ident">chattyPrinter</a> <span class="comment">// A copy of chattyPrinter, if the chatty flag is set.</span>
	<a href="../../use/testing..common*92a5d.bench*1b32c.html" class="ident">bench</a>      <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>           <span class="comment">// Whether the current test is a benchmark.</span>
	<a href="../../use/testing..common*92a5d.finished*05343.html" class="ident">finished</a>   <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>           <span class="comment">// Test function has completed.</span>
	<a href="../../use/testing..common*92a5d.hasSub*d387e.html" class="ident">hasSub</a>     <a href="../../pkg/builtin.html#name-int32" class="ident">int32</a>          <span class="comment">// Written atomically.</span>
	<a href="../../use/testing..common*92a5d.raceErrors*b8bad.html" class="ident">raceErrors</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>            <span class="comment">// Number of races detected during test.</span>
	<a href="../../use/testing..common*92a5d.runner*527aa.html" class="ident">runner</a>     <a href="../../pkg/builtin.html#name-string" class="ident">string</a>         <span class="comment">// Function name of tRunner running the test.</span>

	<a href="../../use/testing..common*92a5d.parent*e4712.html" class="ident">parent</a>   *<a href="#line-385" class="ident">common</a>
	<a href="../../use/testing..common*92a5d.level*00817.html" class="ident">level</a>    <a href="../../pkg/builtin.html#name-int" class="ident">int</a>       <span class="comment">// Nesting depth of test or benchmark.</span>
	<a href="../../use/testing..common*92a5d.creator*bc6bf.html" class="ident">creator</a>  []<a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a> <span class="comment">// If level &gt; 0, the stack trace at the point where the parent called t.Run.</span>
	<a href="../../use/testing..common*92a5d.name*82a35.html" class="ident">name</a>     <a href="../../pkg/builtin.html#name-string" class="ident">string</a>    <span class="comment">// Name of test or benchmark.</span>
	<a href="../../use/testing..common*92a5d.start*cced2.html" class="ident">start</a>    <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-127" class="ident">Time</a> <span class="comment">// Time test or benchmark started</span>
	<a href="../../use/testing..common*92a5d.duration*caa79.html" class="ident">duration</a> <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-583" class="ident">Duration</a>
	<a href="../../use/testing..common*92a5d.barrier*f0dc3.html" class="ident">barrier</a>  <span class="keyword">chan</span> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> <span class="comment">// To signal parallel subtests they may start.</span>
	<a href="../../use/testing..common*92a5d.signal*d0419.html" class="ident">signal</a>   <span class="keyword">chan</span> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> <span class="comment">// To signal a test is done.</span>
	<a href="../../use/testing..common*92a5d.sub*ddc6e.html" class="ident">sub</a>      []*<a href="#line-666" class="ident">T</a>      <span class="comment">// Queue of subtests to be run in parallel.</span>

	<a href="../../use/testing..common*92a5d.tempDirMu*236b5.html" class="ident">tempDirMu</a>  <a href="../../pkg/sync.html" class="ident i12">sync</a>.<a href="../sync/mutex.go.html#line-25" class="ident">Mutex</a>
	<a href="../../use/testing..common*92a5d.tempDir*0a526.html" class="ident">tempDir</a>    <a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../use/testing..common*92a5d.tempDirErr*b942a.html" class="ident">tempDirErr</a> <a href="../../pkg/builtin.html#name-error" class="ident">error</a>
	<a href="../../use/testing..common*92a5d.tempDirSeq*a4de2.html" class="ident">tempDirSeq</a> <a href="../../pkg/builtin.html#name-int32" class="ident">int32</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Short reports whether the -test.short flag is set.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r13" class="ident"><a href="../../pkg/testing.html#name-Short" class="ident">Short</a></label>() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<span class="keyword">if</span> <a href="#line-308" class="ident">short</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"testing: Short called before Init"</span>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Catch code that calls this from TestMain without first calling flag.Parse.</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> !<a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-1026" class="ident">Parsed</a>() {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"testing: Short called before Parse"</span>)
	}

	<span class="keyword">return</span> *<a href="#line-308" class="ident">short</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> CoverMode reports what the test coverage mode is set to. The</span><span class="comment"> values are "set", "count", or "atomic". The return value will be</span><span class="comment"> empty if test coverage is not enabled.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r14" class="ident"><a href="../../pkg/testing.html#name-CoverMode" class="ident">CoverMode</a></label>() <a href="../../pkg/builtin.html#name-string" class="ident">string</a> {
	<span class="keyword">return</span> <a href="cover.go.html#line-29" class="ident">cover</a>.<a href="cover.go.html#line-35" class="ident">Mode</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Verbose reports whether the -test.v flag is set.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Same as in Short.</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <a href="#line-311" class="ident">chatty</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"testing: Verbose called before Init"</span>)
	}
	<span class="keyword">if</span> !<a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-1026" class="ident">Parsed</a>() {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"testing: Verbose called before Parse"</span>)
	}
	<span class="keyword">return</span> *<a href="#line-311" class="ident">chatty</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> frameSkip searches, starting after skip frames, for the first caller frame</span><span class="comment"> in a function not marked as a helper and returns that frame.</span><span class="comment"> The search stops if it finds a tRunner function that</span><span class="comment"> was the entry point into the test and the test is not a subtest.</span><span class="comment"> This function must be called with c.mu held.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> If the search continues into the parent test, we'll have to hold</span><span class="comment">	 its mu temporarily. If we then return, we need to unlock it.</span></div>
<div class="code"><pre><code>	<label for="r19" class="ident">shouldUnlock</label> := <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
	<span class="keyword">defer</span> <span class="keyword">func</span>() {
		<span class="keyword">if</span> <label for="r19" class="ident">shouldUnlock</label> {
			<label for="r16" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
		}
	}()
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Skip two extra frames to account for this function</span><span class="comment">	 and runtime.Callers itself.</span></div>
<div class="code"><pre><code>	<label for="r21" class="ident">n</label> := <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/extern.go.html#line-222" class="ident">Callers</a>(<label for="r18" class="ident">skip</label>+<span class="lit-number">2</span>, <label for="r20" class="ident">pc</label>[:])
	<span class="keyword">if</span> <label for="r21" class="ident">n</label> == <span class="lit-number">0</span> {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"testing: zero callers found"</span>)
	}
	<label for="r22" class="ident">frames</label> := <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/symtab.go.html#line-65" class="ident">CallersFrames</a>(<label for="r20" class="ident">pc</label>[:<label for="r21" class="ident">n</label>])
	<span class="keyword">var</span> <label for="r23" class="ident">firstFrame</label>, <label for="r24" class="ident">prevFrame</label>, <label for="r25" class="ident">frame</label> <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/symtab.go.html#line-25" class="ident">Frame</a>
	<span class="keyword">for</span> <label for="r26" class="ident">more</label> := <a href="../../pkg/builtin.html#name-true" class="ident">true</a>; <label for="r26" class="ident">more</label>; <label for="r24" class="ident">prevFrame</label> = <label for="r25" class="ident">frame</label> {
		<label for="r25" class="ident">frame</label>, <label for="r26" class="ident">more</label> = <label for="r22" class="ident">frames</label>.<a href="../runtime/symtab.go.html#line-73" class="ident">Next</a>()
		<span class="keyword">if</span> <label for="r25" class="ident">frame</label>.<a href="../runtime/symtab.go.html#line-42" class="ident">Function</a> == <label for="r16" class="ident">c</label>.<a href="#line-396" class="ident">cleanupName</a> {
			<label for="r22" class="ident">frames</label> = <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/symtab.go.html#line-65" class="ident">CallersFrames</a>(<label for="r16" class="ident">c</label>.<a href="#line-397" class="ident">cleanupPc</a>)
			<span class="keyword">continue</span>
		}
		<span class="keyword">if</span> <label for="r23" class="ident">firstFrame</label>.<a href="../runtime/symtab.go.html#line-31" class="ident">PC</a> == <span class="lit-number">0</span> {
			<label for="r23" class="ident">firstFrame</label> = <label for="r25" class="ident">frame</label>
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> We've gone up all the way to the tRunner calling</span><span class="comment">			 the test function (so the user must have</span><span class="comment">			 called tb.Helper from inside that test function).</span><span class="comment">			 If this is a top-level test, only skip up to the test function itself.</span><span class="comment">			 If we're in a subtest, continue searching in the parent test,</span><span class="comment">			 starting from the point of the call to Run which created this subtest.</span></div>
<div class="code"><pre><code>			<span class="keyword">if</span> <label for="r16" class="ident">c</label>.<a href="#line-407" class="ident">level</a> &gt; <span class="lit-number">1</span> {
				<label for="r22" class="ident">frames</label> = <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/symtab.go.html#line-65" class="ident">CallersFrames</a>(<label for="r16" class="ident">c</label>.<a href="#line-408" class="ident">creator</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> We're no longer looking at the current c after this point,</span><span class="comment">				 so we should unlock its mu, unless it's the original receiver,</span><span class="comment">				 in which case our caller doesn't expect us to do that.</span></div>
<div class="code"><pre><code>				<span class="keyword">if</span> <label for="r19" class="ident">shouldUnlock</label> {
					<label for="r16" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
				}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Remember to unlock c.mu when we no longer need it, either</span><span class="comment">				 because we went up another nesting level, or because we</span><span class="comment">				 returned.</span></div>
<div class="code"><pre><code>				<label for="r19" class="ident">shouldUnlock</label> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
				<label for="r16" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
				<span class="keyword">continue</span>
			}
			<span class="keyword">return</span> <label for="r24" class="ident">prevFrame</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> If more helper PCs have been added since we last did the conversion</span></div>
<div class="code"><pre><code>		<span class="keyword">if</span> <label for="r16" class="ident">c</label>.<a href="#line-394" class="ident">helperNames</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<label for="r16" class="ident">c</label>.<a href="#line-394" class="ident">helperNames</a> = <a href="../../pkg/builtin.html#name-make" class="ident">make</a>(<span class="keyword">map</span>[<a href="../../pkg/builtin.html#name-string" class="ident">string</a>]<span class="keyword">struct</span>{})
			<span class="keyword">for</span> <label for="r28" class="ident">pc</label> := <span class="keyword">range</span> <label for="r16" class="ident">c</label>.<a href="#line-393" class="ident">helperPCs</a> {
				<label for="r16" class="ident">c</label>.<a href="#line-394" class="ident">helperNames</a>[<a href="#line-1022" class="ident">pcToName</a>(<label for="r28" class="ident">pc</label>)] = <span class="keyword">struct</span>{}{}
			}
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Found a frame that wasn't inside a helper function.</span></div>
<div class="code"><pre><code>			<span class="keyword">return</span> <label for="r25" class="ident">frame</label>
		}
	}
	<span class="keyword">return</span> <label for="r23" class="ident">firstFrame</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> decorate prefixes the string with the file and line of the call site</span><span class="comment"> and inserts the final newline if needed and indentation spaces for formatting.</span><span class="comment"> This function must be called with c.mu held.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r31" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r32" class="ident"><a href="../../use/testing..common*92a5d.decorate*567fa.html" class="ident">decorate</a></label>(<label for="r33" class="ident">s</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r34" class="ident">skip</label> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>) <a href="../../pkg/builtin.html#name-string" class="ident">string</a> {
	<label for="r35" class="ident">frame</label> := <label for="r31" class="ident">c</label>.<a href="#line-459" class="ident">frameSkip</a>(<label for="r34" class="ident">skip</label>)
	<label for="r36" class="ident">file</label> := <label for="r35" class="ident">frame</label>.<a href="../runtime/symtab.go.html#line-48" class="ident">File</a>
	<label for="r37" class="ident">line</label> := <label for="r35" class="ident">frame</label>.<a href="../runtime/symtab.go.html#line-49" class="ident">Line</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Truncate file name at last file name separator.</span></div>
<div class="code"><pre><code>		<span class="keyword">if</span> <label for="r38" class="ident">index</label> := <a href="../../pkg/strings.html" class="ident i11">strings</a>.<a href="../strings/strings.go.html#line-76" class="ident">LastIndex</a>(<label for="r36" class="ident">file</label>, <span class="lit-string">"/"</span>); <label for="r38" class="ident">index</label> &gt;= <span class="lit-number">0</span> {
			<label for="r36" class="ident">file</label> = <label for="r36" class="ident">file</label>[<label for="r38" class="ident">index</label>+<span class="lit-number">1</span>:]
		} <span class="keyword">else</span> <span class="keyword">if</span> <label for="r38" class="ident">index</label> = <a href="../../pkg/strings.html" class="ident i11">strings</a>.<a href="../strings/strings.go.html#line-76" class="ident">LastIndex</a>(<label for="r36" class="ident">file</label>, <span class="lit-string">"\\"</span>); <label for="r38" class="ident">index</label> &gt;= <span class="lit-number">0</span> {
			<label for="r36" class="ident">file</label> = <label for="r36" class="ident">file</label>[<label for="r38" class="ident">index</label>+<span class="lit-number">1</span>:]
		}
	} <span class="keyword">else</span> {
		<label for="r36" class="ident">file</label> = <span class="lit-string">"???"</span>
	}
	<span class="keyword">if</span> <label for="r37" class="ident">line</label> == <span class="lit-number">0</span> {
		<label for="r37" class="ident">line</label> = <span class="lit-number">1</span>
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Every line is indented at least 4 spaces.</span></div>
<div class="code"><pre><code>	<label for="r39" class="ident">buf</label>.<a href="../strings/builder.go.html#line-121" class="ident">WriteString</a>(<span class="lit-string">"    "</span>)
	<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<label for="r39" class="ident">buf</label>, <span class="lit-string">"%s:%d: "</span>, <label for="r36" class="ident">file</label>, <label for="r37" class="ident">line</label>)
	<label for="r40" class="ident">lines</label> := <a href="../../pkg/strings.html" class="ident i11">strings</a>.<a href="../strings/strings.go.html#line-299" class="ident">Split</a>(<label for="r33" class="ident">s</label>, <span class="lit-string">"\n"</span>)
	<span class="keyword">if</span> <label for="r41" class="ident">l</label> := <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r40" class="ident">lines</label>); <label for="r41" class="ident">l</label> &gt; <span class="lit-number">1</span> &amp;&amp; <label for="r40" class="ident">lines</label>[<label for="r41" class="ident">l</label>-<span class="lit-number">1</span>] == <span class="lit-string">""</span> {
		<label for="r40" class="ident">lines</label> = <label for="r40" class="ident">lines</label>[:<label for="r41" class="ident">l</label>-<span class="lit-number">1</span>]
	}
	<span class="keyword">for</span> <label for="r42" class="ident">i</label>, <label for="r43" class="ident">line</label> := <span class="keyword">range</span> <label for="r40" class="ident">lines</label> {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Second and subsequent lines are indented an additional 4 spaces.</span></div>
<div class="code"><pre><code>			<label for="r39" class="ident">buf</label>.<a href="../strings/builder.go.html#line-121" class="ident">WriteString</a>(<span class="lit-string">"\n        "</span>)
		}
		<label for="r39" class="ident">buf</label>.<a href="../strings/builder.go.html#line-121" class="ident">WriteString</a>(<label for="r43" class="ident">line</label>)
	}
	<label for="r39" class="ident">buf</label>.<a href="../strings/builder.go.html#line-96" class="ident">WriteByte</a>(<span class="lit-number">'\n'</span>)
	<span class="keyword">return</span> <label for="r39" class="ident">buf</label>.<a href="../strings/builder.go.html#line-47" class="ident">String</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> flushToParent writes c.output to the parent after first writing the header</span><span class="comment"> with the given format and arguments.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r44" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r45" class="ident"><a href="../../use/testing..common*92a5d.flushToParent*14af3.html" class="ident">flushToParent</a></label>(<label for="r46" class="ident">testName</label>, <label for="r47" class="ident">format</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r48" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r49" class="ident">p</label> := <label for="r44" class="ident">c</label>.<a href="#line-406" class="ident">parent</a>
	<label for="r49" class="ident">p</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r49" class="ident">p</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()

	<label for="r44" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r44" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()

	<span class="keyword">if</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r44" class="ident">c</label>.<a href="#line-387" class="ident">output</a>) &gt; <span class="lit-number">0</span> {
		<label for="r47" class="ident">format</label> += <span class="lit-string">"%s"</span>
		<label for="r48" class="ident">args</label> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r48" class="ident">args</label>[:<a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r48" class="ident">args</label>):<a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r48" class="ident">args</label>)], <label for="r44" class="ident">c</label>.<a href="#line-387" class="ident">output</a>)
		<label for="r44" class="ident">c</label>.<a href="#line-387" class="ident">output</a> = <label for="r44" class="ident">c</label>.<a href="#line-387" class="ident">output</a>[:<span class="lit-number">0</span>] <span class="comment">// but why?</span>
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> We're flushing to the actual output, so track that this output is</span><span class="comment">		 associated with a specific test (and, specifically, that the next output</span><span class="comment">		 is *not* associated with that test).</span><span class="comment">		</span><span class="comment">		 Moreover, if c.output is non-empty it is important that this write be</span><span class="comment">		 atomic with respect to the output of other tests, so that we don't end up</span><span class="comment">		 with confusing '=== CONT' lines in the middle of our '--- PASS' block.</span><span class="comment">		 Neither humans nor cmd/test2json can parse those easily.</span><span class="comment">		 (See https://golang.org/issue/40771.)</span></div>
<div class="code"><pre><code>		<label for="r44" class="ident">c</label>.<a href="#line-399" class="ident">chatty</a>.<a href="#line-351" class="ident">Updatef</a>(<label for="r46" class="ident">testName</label>, <label for="r47" class="ident">format</label>, <label for="r48" class="ident">args</label>...)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> We're flushing to the output buffer of the parent test, which will</span><span class="comment">		 itself follow a test-name header when it is finally flushed to stdout.</span></div>
<div class="code"><pre><code>		<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<label for="r49" class="ident">p</label>.<a href="#line-388" class="ident">w</a>, <label for="r47" class="ident">format</label>, <label for="r48" class="ident">args</label>...)
	}
}

<span class="keyword">type</span> <a href="../../pkg/testing.html#name-indenter" class="ident">indenter</a> <span class="keyword">struct</span> {
	<a href="../../use/testing..indenter*97e03.c*2e7d2.html" class="ident">c</a> *<a href="#line-385" class="ident">common</a>
}

<span class="keyword">func</span> (<label for="r50" class="ident">w</label> <a href="#line-600" class="ident">indenter</a>) <label for="r51" class="ident"><a href="../../use/testing..indenter*97e03.Write.html" class="ident">Write</a></label>(<label for="r52" class="ident">b</label> []<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>) (<label for="r53" class="ident">n</label> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>, <label for="r54" class="ident">err</label> <a href="../../pkg/builtin.html#name-error" class="ident">error</a>) {
	<label for="r53" class="ident">n</label> = <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r52" class="ident">b</label>)
	<span class="keyword">for</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r52" class="ident">b</label>) &gt; <span class="lit-number">0</span> {
		<label for="r55" class="ident">end</label> := <a href="../../pkg/bytes.html" class="ident i0">bytes</a>.<a href="../bytes/bytes.go.html#line-90" class="ident">IndexByte</a>(<label for="r52" class="ident">b</label>, <span class="lit-number">'\n'</span>)
		<span class="keyword">if</span> <label for="r55" class="ident">end</label> == -<span class="lit-number">1</span> {
			<label for="r55" class="ident">end</label> = <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r52" class="ident">b</label>)
		} <span class="keyword">else</span> {
			<label for="r55" class="ident">end</label>++
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> An indent of 4 spaces will neatly align the dashes with the status</span><span class="comment">		 indicator of the parent.</span></div>
<div class="code"><pre><code>		<span class="keyword">const</span> <label for="r56" class="ident">indent</label> = <span class="lit-string">"    "</span>
		<label for="r50" class="ident">w</label>.<a href="#line-601" class="ident">c</a>.<a href="#line-387" class="ident">output</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r50" class="ident">w</label>.<a href="#line-601" class="ident">c</a>.<a href="#line-387" class="ident">output</a>, <label for="r56" class="ident">indent</label>...)
		<label for="r50" class="ident">w</label>.<a href="#line-601" class="ident">c</a>.<a href="#line-387" class="ident">output</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r50" class="ident">w</label>.<a href="#line-601" class="ident">c</a>.<a href="#line-387" class="ident">output</a>, <label for="r52" class="ident">b</label>[:<label for="r55" class="ident">end</label>]...)
		<label for="r52" class="ident">b</label> = <label for="r52" class="ident">b</label>[<label for="r55" class="ident">end</label>:]
	}
	<span class="keyword">return</span>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> fmtDuration returns a string representing d in the form "87.00s".</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r57" class="ident"><a href="../../pkg/testing.html#name-fmtDuration" class="ident">fmtDuration</a></label>(<label for="r58" class="ident">d</label> <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-583" class="ident">Duration</a>) <a href="../../pkg/builtin.html#name-string" class="ident">string</a> {
	<span class="keyword">return</span> <a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<span class="lit-string">"%.2fs"</span>, <label for="r58" class="ident">d</label>.<a href="../time/time.go.html#line-747" class="ident">Seconds</a>())
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> TB is the interface common to T and B.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/testing.html#name-TB" class="ident">TB</a> <span class="keyword">interface</span> {
	Cleanup(<span class="keyword">func</span>())
	Error(args ...<span class="keyword">interface</span>{})
	Errorf(format <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, args ...<span class="keyword">interface</span>{})
	Fail()
	FailNow()
	Failed() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
	Fatal(args ...<span class="keyword">interface</span>{})
	Fatalf(format <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, args ...<span class="keyword">interface</span>{})
	Helper()
	Log(args ...<span class="keyword">interface</span>{})
	Logf(format <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, args ...<span class="keyword">interface</span>{})
	Name() <a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	Skip(args ...<span class="keyword">interface</span>{})
	SkipNow()
	Skipf(format <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, args ...<span class="keyword">interface</span>{})
	Skipped() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
	TempDir() <a href="../../pkg/builtin.html#name-string" class="ident">string</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> A private method to prevent users implementing the</span><span class="comment">	 interface and so future additions to it will not</span><span class="comment">	 violate Go 1 compatibility.</span></div>
<div class="code"><pre><code>	private()
}

<span class="keyword">var</span> _ <a href="#line-629" class="ident">TB</a> = (*<a href="#line-666" class="ident">T</a>)(<a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>)
<span class="keyword">var</span> _ <a href="#line-629" class="ident">TB</a> = (*<a href="benchmark.go.html#line-93" class="ident">B</a>)(<a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> T is a type passed to Test functions to manage test state and support formatted test logs.</span><span class="comment"></span><span class="comment"> A test ends when its Test function returns or calls any of the methods</span><span class="comment"> FailNow, Fatal, Fatalf, SkipNow, Skip, or Skipf. Those methods, as well as</span><span class="comment"> the Parallel method, must be called only from the goroutine running the</span><span class="comment"> Test function.</span><span class="comment"></span><span class="comment"> The other reporting methods, such as the variations of Log and Error,</span><span class="comment"> may be called simultaneously from multiple goroutines.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/testing.html#name-T" class="ident">T</a> <span class="keyword">struct</span> {
	<a href="#line-385" class="ident">common</a>
	<a href="../../use/testing..T.isParallel*3bdcf.html" class="ident">isParallel</a> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
	<a href="../../use/testing..T.context*ea779.html" class="ident">context</a>    *<a href="#line-1258" class="ident">testContext</a> <span class="comment">// For running tests and subtests.</span>
}

<span class="keyword">func</span> (<label for="r59" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r60" class="ident"><a href="../../use/testing..common*92a5d.private*715dc.html" class="ident">private</a></label>() {}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Name returns the name of the running test or benchmark.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r61" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r62" class="ident"><a href="../../use/testing..common*92a5d.Name.html" class="ident">Name</a></label>() <a href="../../pkg/builtin.html#name-string" class="ident">string</a> {
	<span class="keyword">return</span> <label for="r61" class="ident">c</label>.<a href="#line-409" class="ident">name</a>
}

<span class="keyword">func</span> (<label for="r63" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r64" class="ident"><a href="../../use/testing..common*92a5d.setRan*c83d2.html" class="ident">setRan</a></label>() {
	<span class="keyword">if</span> <label for="r63" class="ident">c</label>.<a href="#line-406" class="ident">parent</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<label for="r63" class="ident">c</label>.<a href="#line-406" class="ident">parent</a>.<label for="r64" class="ident">setRan</label>()
	}
	<label for="r63" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r63" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
	<label for="r63" class="ident">c</label>.<a href="#line-389" class="ident">ran</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Fail marks the function as having failed but continues execution.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r65" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r66" class="ident"><a href="../../use/testing..common*92a5d.Fail.html" class="ident">Fail</a></label>() {
	<span class="keyword">if</span> <label for="r65" class="ident">c</label>.<a href="#line-406" class="ident">parent</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<label for="r65" class="ident">c</label>.<a href="#line-406" class="ident">parent</a>.<label for="r66" class="ident">Fail</label>()
	}
	<label for="r65" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> c.done needs to be locked to synchronize checks to c.done in parent tests.</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <label for="r65" class="ident">c</label>.<a href="#line-392" class="ident">done</a> {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"Fail in goroutine after "</span> + <label for="r65" class="ident">c</label>.<a href="#line-409" class="ident">name</a> + <span class="lit-string">" has completed"</span>)
	}
	<label for="r65" class="ident">c</label>.<a href="#line-390" class="ident">failed</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Failed reports whether the function has failed.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r67" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r68" class="ident"><a href="../../use/testing..common*92a5d.Failed.html" class="ident">Failed</a></label>() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<label for="r67" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-56" class="ident">RLock</a>()
	<label for="r69" class="ident">failed</label> := <label for="r67" class="ident">c</label>.<a href="#line-390" class="ident">failed</a>
	<label for="r67" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-75" class="ident">RUnlock</a>()
	<span class="keyword">return</span> <label for="r69" class="ident">failed</label> || <label for="r67" class="ident">c</label>.<a href="#line-403" class="ident">raceErrors</a>+<a href="../../pkg/internal/race.html" class="ident i4">race</a>.<a href="../internal/race/norace.go.html#line-42" class="ident">Errors</a>() &gt; <span class="lit-number">0</span>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> FailNow marks the function as having failed and stops its execution</span><span class="comment"> by calling runtime.Goexit (which then runs all deferred calls in the</span><span class="comment"> current goroutine).</span><span class="comment"> Execution will continue at the next test or benchmark.</span><span class="comment"> FailNow must be called from the goroutine running the</span><span class="comment"> test or benchmark function, not from other goroutines</span><span class="comment"> created during the test. Calling FailNow does not stop</span><span class="comment"> those other goroutines.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r70" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r71" class="ident"><a href="../../use/testing..common*92a5d.FailNow.html" class="ident">FailNow</a></label>() {
	<label for="r70" class="ident">c</label>.<a href="#line-689" class="ident">Fail</a>()
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Calling runtime.Goexit will exit the goroutine, which</span><span class="comment">	 will run the deferred functions in this goroutine,</span><span class="comment">	 which will eventually run the deferred lines in tRunner,</span><span class="comment">	 which will signal to the test loop that this test is done.</span><span class="comment">	</span><span class="comment">	 A previous version of this code said:</span><span class="comment">	</span><span class="comment">		c.duration = ...</span><span class="comment">		c.signal &lt;- c.self</span><span class="comment">		runtime.Goexit()</span><span class="comment">	</span><span class="comment">	 This previous version duplicated code (those lines are in</span><span class="comment">	 tRunner no matter what), but worse the goroutine teardown</span><span class="comment">	 implicit in runtime.Goexit was not guaranteed to complete</span><span class="comment">	 before the test exited. If a test deferred an important cleanup</span><span class="comment">	 function (like removing temporary files), there was no guarantee</span><span class="comment">	 it would run on a test failure. Because we send on c.signal during</span><span class="comment">	 a top-of-stack deferred function now, we know that the send</span><span class="comment">	 only happens after any other stacked defers have completed.</span></div>
<div class="code"><pre><code>	<label for="r70" class="ident">c</label>.<a href="#line-401" class="ident">finished</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	<a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/panic.go.html#line-579" class="ident">Goexit</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> log generates the output. It's always at the same stack depth.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r72" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r73" class="ident"><a href="../../use/testing..common*92a5d.log*836ff.html" class="ident">log</a></label>(<label for="r74" class="ident">s</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) {
	<label for="r72" class="ident">c</label>.<a href="#line-750" class="ident">logDepth</a>(<label for="r74" class="ident">s</label>, <span class="lit-number">3</span>) <span class="comment">// logDepth + log + public function</span>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> logDepth generates the output at an arbitrary stack depth.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r75" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r76" class="ident"><a href="../../use/testing..common*92a5d.logDepth*f478a.html" class="ident">logDepth</a></label>(<label for="r77" class="ident">s</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r78" class="ident">depth</label> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>) {
	<label for="r75" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r75" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> This test has already finished. Try and log this message</span><span class="comment">		 with our parent. If we don't have a parent, panic.</span></div>
<div class="code"><pre><code>		<span class="keyword">for</span> <label for="r79" class="ident">parent</label> := <label for="r75" class="ident">c</label>.<a href="#line-406" class="ident">parent</a>; <label for="r79" class="ident">parent</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; <label for="r79" class="ident">parent</label> = <label for="r79" class="ident">parent</label>.<a href="#line-406" class="ident">parent</a> {
			<label for="r79" class="ident">parent</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
			<span class="keyword">defer</span> <label for="r79" class="ident">parent</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
			<span class="keyword">if</span> !<label for="r79" class="ident">parent</label>.<a href="#line-392" class="ident">done</a> {
				<label for="r79" class="ident">parent</label>.<a href="#line-387" class="ident">output</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r79" class="ident">parent</label>.<a href="#line-387" class="ident">output</a>, <label for="r79" class="ident">parent</label>.<a href="#line-530" class="ident">decorate</a>(<label for="r77" class="ident">s</label>, <label for="r78" class="ident">depth</label>+<span class="lit-number">1</span>)...)
				<span class="keyword">return</span>
			}
		}
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"Log in goroutine after "</span> + <label for="r75" class="ident">c</label>.<a href="#line-409" class="ident">name</a> + <span class="lit-string">" has completed"</span>)
	} <span class="keyword">else</span> {
		<span class="keyword">if</span> <label for="r75" class="ident">c</label>.<a href="#line-399" class="ident">chatty</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Benchmarks don't print === CONT, so we should skip the test</span><span class="comment">				 printer and just print straight to stdout.</span></div>
<div class="code"><pre><code>				<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-241" class="ident">Print</a>(<label for="r75" class="ident">c</label>.<a href="#line-530" class="ident">decorate</a>(<label for="r77" class="ident">s</label>, <label for="r78" class="ident">depth</label>+<span class="lit-number">1</span>))
			} <span class="keyword">else</span> {
				<label for="r75" class="ident">c</label>.<a href="#line-399" class="ident">chatty</a>.<a href="#line-365" class="ident">Printf</a>(<label for="r75" class="ident">c</label>.<a href="#line-409" class="ident">name</a>, <span class="lit-string">"%s"</span>, <label for="r75" class="ident">c</label>.<a href="#line-530" class="ident">decorate</a>(<label for="r77" class="ident">s</label>, <label for="r78" class="ident">depth</label>+<span class="lit-number">1</span>))
			}

			<span class="keyword">return</span>
		}
		<label for="r75" class="ident">c</label>.<a href="#line-387" class="ident">output</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r75" class="ident">c</label>.<a href="#line-387" class="ident">output</a>, <label for="r75" class="ident">c</label>.<a href="#line-530" class="ident">decorate</a>(<label for="r77" class="ident">s</label>, <label for="r78" class="ident">depth</label>+<span class="lit-number">1</span>)...)
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Log formats its arguments using default formatting, analogous to Println,</span><span class="comment"> and records the text in the error log. For tests, the text will be printed only if</span><span class="comment"> the test fails or the -test.v flag is set. For benchmarks, the text is always</span><span class="comment"> printed to avoid having performance depend on the value of the -test.v flag.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r80" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r81" class="ident"><a href="../../use/testing..common*92a5d.Log.html" class="ident">Log</a></label>(<label for="r82" class="ident">args</label> ...<span class="keyword">interface</span>{}) { <label for="r80" class="ident">c</label>.<a href="#line-745" class="ident">log</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-279" class="ident">Sprintln</a>(<label for="r82" class="ident">args</label>...)) }
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Logf formats its arguments according to the format, analogous to Printf, and</span><span class="comment"> records the text in the error log. A final newline is added if not provided. For</span><span class="comment"> tests, the text will be printed only if the test fails or the -test.v flag is</span><span class="comment"> set. For benchmarks, the text is always printed to avoid having performance</span><span class="comment"> depend on the value of the -test.v flag.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r83" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r84" class="ident"><a href="../../use/testing..common*92a5d.Logf.html" class="ident">Logf</a></label>(<label for="r85" class="ident">format</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r86" class="ident">args</label> ...<span class="keyword">interface</span>{}) { <label for="r83" class="ident">c</label>.<a href="#line-745" class="ident">log</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<label for="r85" class="ident">format</label>, <label for="r86" class="ident">args</label>...)) }
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Error is equivalent to Log followed by Fail.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r87" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r88" class="ident"><a href="../../use/testing..common*92a5d.Error.html" class="ident">Error</a></label>(<label for="r89" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r87" class="ident">c</label>.<a href="#line-745" class="ident">log</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-279" class="ident">Sprintln</a>(<label for="r89" class="ident">args</label>...))
	<label for="r87" class="ident">c</label>.<a href="#line-689" class="ident">Fail</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Errorf is equivalent to Logf followed by Fail.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r90" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r91" class="ident"><a href="../../use/testing..common*92a5d.Errorf.html" class="ident">Errorf</a></label>(<label for="r92" class="ident">format</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r93" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r90" class="ident">c</label>.<a href="#line-745" class="ident">log</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<label for="r92" class="ident">format</label>, <label for="r93" class="ident">args</label>...))
	<label for="r90" class="ident">c</label>.<a href="#line-689" class="ident">Fail</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Fatal is equivalent to Log followed by FailNow.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r94" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r95" class="ident"><a href="../../use/testing..common*92a5d.Fatal.html" class="ident">Fatal</a></label>(<label for="r96" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r94" class="ident">c</label>.<a href="#line-745" class="ident">log</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-279" class="ident">Sprintln</a>(<label for="r96" class="ident">args</label>...))
	<label for="r94" class="ident">c</label>.<a href="#line-718" class="ident">FailNow</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Fatalf is equivalent to Logf followed by FailNow.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r97" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r98" class="ident"><a href="../../use/testing..common*92a5d.Fatalf.html" class="ident">Fatalf</a></label>(<label for="r99" class="ident">format</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r100" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r97" class="ident">c</label>.<a href="#line-745" class="ident">log</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<label for="r99" class="ident">format</label>, <label for="r100" class="ident">args</label>...))
	<label for="r97" class="ident">c</label>.<a href="#line-718" class="ident">FailNow</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Skip is equivalent to Log followed by SkipNow.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r101" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r102" class="ident"><a href="../../use/testing..common*92a5d.Skip.html" class="ident">Skip</a></label>(<label for="r103" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r101" class="ident">c</label>.<a href="#line-745" class="ident">log</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-279" class="ident">Sprintln</a>(<label for="r103" class="ident">args</label>...))
	<label for="r101" class="ident">c</label>.<a href="#line-838" class="ident">SkipNow</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Skipf is equivalent to Logf followed by SkipNow.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r104" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r105" class="ident"><a href="../../use/testing..common*92a5d.Skipf.html" class="ident">Skipf</a></label>(<label for="r106" class="ident">format</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r107" class="ident">args</label> ...<span class="keyword">interface</span>{}) {
	<label for="r104" class="ident">c</label>.<a href="#line-745" class="ident">log</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<label for="r106" class="ident">format</label>, <label for="r107" class="ident">args</label>...))
	<label for="r104" class="ident">c</label>.<a href="#line-838" class="ident">SkipNow</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SkipNow marks the test as having been skipped and stops its execution</span><span class="comment"> by calling runtime.Goexit.</span><span class="comment"> If a test fails (see Error, Errorf, Fail) and is then skipped,</span><span class="comment"> it is still considered to have failed.</span><span class="comment"> Execution will continue at the next test or benchmark. See also FailNow.</span><span class="comment"> SkipNow must be called from the goroutine running the test, not from</span><span class="comment"> other goroutines created during the test. Calling SkipNow does not stop</span><span class="comment"> those other goroutines.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r108" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r109" class="ident"><a href="../../use/testing..common*92a5d.SkipNow.html" class="ident">SkipNow</a></label>() {
	<label for="r108" class="ident">c</label>.<a href="#line-844" class="ident">skip</a>()
	<label for="r108" class="ident">c</label>.<a href="#line-401" class="ident">finished</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	<a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/panic.go.html#line-579" class="ident">Goexit</a>()
}

<span class="keyword">func</span> (<label for="r110" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r111" class="ident"><a href="../../use/testing..common*92a5d.skip*42e93.html" class="ident">skip</a></label>() {
	<label for="r110" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r110" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
	<label for="r110" class="ident">c</label>.<a href="#line-391" class="ident">skipped</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Skipped reports whether the test was skipped.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r112" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r113" class="ident"><a href="../../use/testing..common*92a5d.Skipped.html" class="ident">Skipped</a></label>() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<label for="r112" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-56" class="ident">RLock</a>()
	<span class="keyword">defer</span> <label for="r112" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-75" class="ident">RUnlock</a>()
	<span class="keyword">return</span> <label for="r112" class="ident">c</label>.<a href="#line-391" class="ident">skipped</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Helper marks the calling function as a test helper function.</span><span class="comment"> When printing file and line information, that function will be skipped.</span><span class="comment"> Helper may be called simultaneously from multiple goroutines.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r114" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r115" class="ident"><a href="../../use/testing..common*92a5d.Helper.html" class="ident">Helper</a></label>() {
	<label for="r114" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r114" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
	<span class="keyword">if</span> <label for="r114" class="ident">c</label>.<a href="#line-393" class="ident">helperPCs</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<label for="r114" class="ident">c</label>.<a href="#line-393" class="ident">helperPCs</a> = <a href="../../pkg/builtin.html#name-make" class="ident">make</a>(<span class="keyword">map</span>[<a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>]<span class="keyword">struct</span>{})
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> repeating code from callerName here to save walking a stack frame</span></div>
<div class="code"><pre><code>	<span class="keyword">var</span> <label for="r116" class="ident">pc</label> [<span class="lit-number">1</span>]<a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>
	<label for="r117" class="ident">n</label> := <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/extern.go.html#line-222" class="ident">Callers</a>(<span class="lit-number">2</span>, <label for="r116" class="ident">pc</label>[:]) <span class="comment">// skip runtime.Callers + Helper</span>
	<span class="keyword">if</span> <label for="r117" class="ident">n</label> == <span class="lit-number">0</span> {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"testing: zero callers found"</span>)
	}
	<span class="keyword">if</span> <label for="r118" class="ident">_</label>, <label for="r119" class="ident">found</label> := <label for="r114" class="ident">c</label>.<a href="#line-393" class="ident">helperPCs</a>[<label for="r116" class="ident">pc</label>[<span class="lit-number">0</span>]]; !<label for="r119" class="ident">found</label> {
		<label for="r114" class="ident">c</label>.<a href="#line-393" class="ident">helperPCs</a>[<label for="r116" class="ident">pc</label>[<span class="lit-number">0</span>]] = <span class="keyword">struct</span>{}{}
		<label for="r114" class="ident">c</label>.<a href="#line-394" class="ident">helperNames</a> = <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> <span class="comment">// map will be recreated next time it is needed</span>
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Cleanup registers a function to be called when the test and all its</span><span class="comment"> subtests complete. Cleanup functions will be called in last added,</span><span class="comment"> first called order.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r120" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r121" class="ident"><a href="../../use/testing..common*92a5d.Cleanup.html" class="ident">Cleanup</a></label>(<label for="r122" class="ident">f</label> <span class="keyword">func</span>()) {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Skip two extra frames to account for this function and runtime.Callers itself.</span></div>
<div class="code"><pre><code>	<label for="r124" class="ident">n</label> := <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/extern.go.html#line-222" class="ident">Callers</a>(<span class="lit-number">2</span>, <label for="r123" class="ident">pc</label>[:])
	<label for="r125" class="ident">cleanupPc</label> := <label for="r123" class="ident">pc</label>[:<label for="r124" class="ident">n</label>]

	<label for="r126" class="ident">fn</label> := <span class="keyword">func</span>() {
		<span class="keyword">defer</span> <span class="keyword">func</span>() {
			<label for="r120" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
			<span class="keyword">defer</span> <label for="r120" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
			<label for="r120" class="ident">c</label>.<a href="#line-396" class="ident">cleanupName</a> = <span class="lit-string">""</span>
			<label for="r120" class="ident">c</label>.<a href="#line-397" class="ident">cleanupPc</a> = <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>
		}()

		<label for="r127" class="ident">name</label> := <a href="#line-1013" class="ident">callerName</a>(<span class="lit-number">0</span>)
		<label for="r120" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
		<label for="r120" class="ident">c</label>.<a href="#line-396" class="ident">cleanupName</a> = <label for="r127" class="ident">name</label>
		<label for="r120" class="ident">c</label>.<a href="#line-397" class="ident">cleanupPc</a> = <label for="r125" class="ident">cleanupPc</label>
		<label for="r120" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()

		<label for="r122" class="ident">f</label>()
	}

	<label for="r120" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
	<span class="keyword">defer</span> <label for="r120" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
	<label for="r120" class="ident">c</label>.<a href="#line-395" class="ident">cleanups</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r120" class="ident">c</label>.<a href="#line-395" class="ident">cleanups</a>, <label for="r126" class="ident">fn</label>)
}

<span class="keyword">var</span> <a href="../../pkg/testing.html#name-tempDirReplacer" class="ident">tempDirReplacer</a> <span class="keyword">struct</span> {
	<a href="../../pkg/sync.html" class="ident i12">sync</a>.<a href="../sync/once.go.html#line-14" class="ident">Once</a>
	r *<a href="../../pkg/strings.html" class="ident i11">strings</a>.<a href="../strings/replace.go.html#line-14" class="ident">Replacer</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> TempDir returns a temporary directory for the test to use.</span><span class="comment"> The directory is automatically removed by Cleanup when the test and</span><span class="comment"> all its subtests complete.</span><span class="comment"> Each subsequent call to t.TempDir returns a unique directory;</span><span class="comment"> if the directory creation fails, TempDir terminates the test by calling Fatal.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Use a single parent directory for all the temporary directories</span><span class="comment">	 created by a test, each numbered sequentially.</span></div>
<div class="code"><pre><code>	<label for="r128" class="ident">c</label>.<a href="#line-416" class="ident">tempDirMu</a>.<a href="../sync/mutex.go.html#line-72" class="ident">Lock</a>()
	<span class="keyword">var</span> <label for="r130" class="ident">nonExistent</label> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
	<span class="keyword">if</span> <label for="r128" class="ident">c</label>.<a href="#line-417" class="ident">tempDir</a> == <span class="lit-string">""</span> { <span class="comment">// Usually the case with js/wasm</span>
		<label for="r130" class="ident">nonExistent</label> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	} <span class="keyword">else</span> {
		<label for="r131" class="ident">_</label>, <label for="r132" class="ident">err</label> := <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/stat.go.html#line-11" class="ident">Stat</a>(<label for="r128" class="ident">c</label>.<a href="#line-417" class="ident">tempDir</a>)
		<label for="r130" class="ident">nonExistent</label> = <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/error.go.html#line-92" class="ident">IsNotExist</a>(<label for="r132" class="ident">err</label>)
		<span class="keyword">if</span> <label for="r132" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> &amp;&amp; !<label for="r130" class="ident">nonExistent</label> {
			<label for="r128" class="ident">c</label>.<a href="#line-813" class="ident">Fatalf</a>(<span class="lit-string">"TempDir: %v"</span>, <label for="r132" class="ident">err</label>)
		}
	}

	<span class="keyword">if</span> <label for="r130" class="ident">nonExistent</label> {
		<label for="r128" class="ident">c</label>.<a href="#line-860" class="ident">Helper</a>()
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> os.MkdirTemp doesn't like path separators in its pattern,</span><span class="comment">		 so mangle the name to accommodate subtests.</span></div>
<div class="code"><pre><code>		<a href="#line-909" class="ident">tempDirReplacer</a>.<a href="../sync/once.go.html#line-42" class="ident">Do</a>(<span class="keyword">func</span>() {
			<a href="#line-909" class="ident">tempDirReplacer</a>.<a href="#line-911" class="ident">r</a> = <a href="../../pkg/strings.html" class="ident i11">strings</a>.<a href="../strings/replace.go.html#line-32" class="ident">NewReplacer</a>(<span class="lit-string">"/"</span>, <span class="lit-string">"_"</span>, <span class="lit-string">"\\"</span>, <span class="lit-string">"_"</span>, <span class="lit-string">":"</span>, <span class="lit-string">"_"</span>)
		})
		<label for="r133" class="ident">pattern</label> := <a href="#line-909" class="ident">tempDirReplacer</a>.<a href="#line-911" class="ident">r</a>.<a href="../strings/replace.go.html#line-95" class="ident">Replace</a>(<label for="r128" class="ident">c</label>.<a href="#line-675" class="ident">Name</a>())

		<label for="r128" class="ident">c</label>.<a href="#line-417" class="ident">tempDir</a>, <label for="r128" class="ident">c</label>.<a href="#line-418" class="ident">tempDirErr</a> = <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/tempfile.go.html#line-77" class="ident">MkdirTemp</a>(<span class="lit-string">""</span>, <label for="r133" class="ident">pattern</label>)
		<span class="keyword">if</span> <label for="r128" class="ident">c</label>.<a href="#line-418" class="ident">tempDirErr</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<label for="r128" class="ident">c</label>.<a href="#line-881" class="ident">Cleanup</a>(<span class="keyword">func</span>() {
				<span class="keyword">if</span> <label for="r134" class="ident">err</label> := <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/path.go.html#line-66" class="ident">RemoveAll</a>(<label for="r128" class="ident">c</label>.<a href="#line-417" class="ident">tempDir</a>); <label for="r134" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
					<label for="r128" class="ident">c</label>.<a href="#line-801" class="ident">Errorf</a>(<span class="lit-string">"TempDir RemoveAll cleanup: %v"</span>, <label for="r134" class="ident">err</label>)
				}
			})
		}
	}
	<label for="r128" class="ident">c</label>.<a href="#line-416" class="ident">tempDirMu</a>.<a href="../sync/mutex.go.html#line-179" class="ident">Unlock</a>()

	<span class="keyword">if</span> <label for="r128" class="ident">c</label>.<a href="#line-418" class="ident">tempDirErr</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<label for="r128" class="ident">c</label>.<a href="#line-813" class="ident">Fatalf</a>(<span class="lit-string">"TempDir: %v"</span>, <label for="r128" class="ident">c</label>.<a href="#line-418" class="ident">tempDirErr</a>)
	}
	<label for="r135" class="ident">seq</label> := <a href="../../pkg/sync/atomic.html" class="ident i13">atomic</a>.<a href="../sync/atomic/doc.go.html#line-92" class="ident">AddInt32</a>(&amp;<label for="r128" class="ident">c</label>.<a href="#line-419" class="ident">tempDirSeq</a>, <span class="lit-number">1</span>)
	<label for="r136" class="ident">dir</label> := <a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<span class="lit-string">"%s%c%03d"</span>, <label for="r128" class="ident">c</label>.<a href="#line-417" class="ident">tempDir</a>, <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/path_unix.go.html#line-10" class="ident">PathSeparator</a>, <label for="r135" class="ident">seq</label>)
	<span class="keyword">if</span> <label for="r137" class="ident">err</label> := <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-255" class="ident">Mkdir</a>(<label for="r136" class="ident">dir</label>, <span class="lit-number">0777</span>); <label for="r137" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<label for="r128" class="ident">c</label>.<a href="#line-813" class="ident">Fatalf</a>(<span class="lit-string">"TempDir: %v"</span>, <label for="r137" class="ident">err</label>)
	}
	<span class="keyword">return</span> <label for="r136" class="ident">dir</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> panicHanding is an argument to runCleanup.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/testing.html#name-panicHandling" class="ident">panicHandling</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>

<span class="keyword">const</span> (
	<a href="../../pkg/testing.html#name-normalPanic" class="ident">normalPanic</a> <a href="#line-967" class="ident">panicHandling</a> = <a href="../../pkg/builtin.html#name-iota" class="ident">iota</a>
	<a href="../../pkg/testing.html#name-recoverAndReturnPanic" class="ident">recoverAndReturnPanic</a>
)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> runCleanup is called at the end of the test.</span><span class="comment"> If catchPanic is true, this will catch panics, and return the recovered</span><span class="comment"> value if any.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r138" class="ident">c</label> *<a href="#line-385" class="ident">common</a>) <label for="r139" class="ident"><a href="../../use/testing..common*92a5d.runCleanup*5ac5b.html" class="ident">runCleanup</a></label>(<label for="r140" class="ident">ph</label> <a href="#line-967" class="ident">panicHandling</a>) (<label for="r141" class="ident">panicVal</label> <span class="keyword">interface</span>{}) {
	<span class="keyword">if</span> <label for="r140" class="ident">ph</label> == <a href="#line-971" class="ident">recoverAndReturnPanic</a> {
		<span class="keyword">defer</span> <span class="keyword">func</span>() {
			<label for="r141" class="ident">panicVal</label> = <a href="../../pkg/builtin.html#name-recover" class="ident">recover</a>()
		}()
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Make sure that if a cleanup function panics,</span><span class="comment">	 we still run the remaining cleanup functions.</span></div>
<div class="code"><pre><code>	<span class="keyword">defer</span> <span class="keyword">func</span>() {
		<label for="r138" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
		<label for="r142" class="ident">recur</label> := <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r138" class="ident">c</label>.<a href="#line-395" class="ident">cleanups</a>) &gt; <span class="lit-number">0</span>
		<label for="r138" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
		<span class="keyword">if</span> <label for="r142" class="ident">recur</label> {
			<label for="r138" class="ident">c</label>.<label for="r139" class="ident">runCleanup</label>(<a href="#line-970" class="ident">normalPanic</a>)
		}
	}()

	<span class="keyword">for</span> {
		<span class="keyword">var</span> <label for="r143" class="ident">cleanup</label> <span class="keyword">func</span>()
		<label for="r138" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
		<span class="keyword">if</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r138" class="ident">c</label>.<a href="#line-395" class="ident">cleanups</a>) &gt; <span class="lit-number">0</span> {
			<label for="r144" class="ident">last</label> := <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r138" class="ident">c</label>.<a href="#line-395" class="ident">cleanups</a>) - <span class="lit-number">1</span>
			<label for="r143" class="ident">cleanup</label> = <label for="r138" class="ident">c</label>.<a href="#line-395" class="ident">cleanups</a>[<label for="r144" class="ident">last</label>]
			<label for="r138" class="ident">c</label>.<a href="#line-395" class="ident">cleanups</a> = <label for="r138" class="ident">c</label>.<a href="#line-395" class="ident">cleanups</a>[:<label for="r144" class="ident">last</label>]
		}
		<label for="r138" class="ident">c</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
		<span class="keyword">if</span> <label for="r143" class="ident">cleanup</label> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>
		}
		<label for="r143" class="ident">cleanup</label>()
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> callerName gives the function name (qualified with a package path)</span><span class="comment"> for the caller after skip frames (where 0 means the current function).</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r145" class="ident"><a href="../../pkg/testing.html#name-callerName" class="ident">callerName</a></label>(<label for="r146" class="ident">skip</label> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>) <a href="../../pkg/builtin.html#name-string" class="ident">string</a> {
	<span class="keyword">var</span> <label for="r147" class="ident">pc</label> [<span class="lit-number">1</span>]<a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>
	<label for="r148" class="ident">n</label> := <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/extern.go.html#line-222" class="ident">Callers</a>(<label for="r146" class="ident">skip</label>+<span class="lit-number">2</span>, <label for="r147" class="ident">pc</label>[:]) <span class="comment">// skip + runtime.Callers + callerName</span>
	<span class="keyword">if</span> <label for="r148" class="ident">n</label> == <span class="lit-number">0</span> {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"testing: zero callers found"</span>)
	}
	<span class="keyword">return</span> <a href="#line-1022" class="ident">pcToName</a>(<label for="r147" class="ident">pc</label>[<span class="lit-number">0</span>])
}

<span class="keyword">func</span> <label for="r149" class="ident"><a href="../../pkg/testing.html#name-pcToName" class="ident">pcToName</a></label>(<label for="r150" class="ident">pc</label> <a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>) <a href="../../pkg/builtin.html#name-string" class="ident">string</a> {
	<label for="r151" class="ident">pcs</label> := []<a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>{<label for="r150" class="ident">pc</label>}
	<label for="r152" class="ident">frames</label> := <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/symtab.go.html#line-65" class="ident">CallersFrames</a>(<label for="r151" class="ident">pcs</label>)
	<label for="r153" class="ident">frame</label>, <label for="r154" class="ident">_</label> := <label for="r152" class="ident">frames</label>.<a href="../runtime/symtab.go.html#line-73" class="ident">Next</a>()
	<span class="keyword">return</span> <label for="r153" class="ident">frame</label>.<a href="../runtime/symtab.go.html#line-42" class="ident">Function</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Parallel signals that this test is to be run in parallel with (and only with)</span><span class="comment"> other parallel tests. When a test is run multiple times due to use of</span><span class="comment"> -test.count or -test.cpu, multiple instances of a single test never run in</span><span class="comment"> parallel with each other.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r155" class="ident">t</label> *<a href="#line-666" class="ident">T</a>) <label for="r156" class="ident"><a href="../../use/testing..T.Parallel.html" class="ident">Parallel</a></label>() {
	<span class="keyword">if</span> <label for="r155" class="ident">t</label>.<a href="#line-668" class="ident">isParallel</a> {
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"testing: t.Parallel called multiple times"</span>)
	}
	<label for="r155" class="ident">t</label>.<a href="#line-668" class="ident">isParallel</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> We don't want to include the time we spend waiting for serial tests</span><span class="comment">	 in the test duration. Record the elapsed time thus far and reset the</span><span class="comment">	 timer afterwards.</span></div>
<div class="code"><pre><code>	<label for="r155" class="ident">t</label>.<a href="#line-411" class="ident">duration</a> += <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-868" class="ident">Since</a>(<label for="r155" class="ident">t</label>.<a href="#line-410" class="ident">start</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Add to the list of tests to be released by the parent.</span></div>
<div class="code"><pre><code>	<label for="r155" class="ident">t</label>.<a href="#line-406" class="ident">parent</a>.<a href="#line-414" class="ident">sub</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<label for="r155" class="ident">t</label>.<a href="#line-406" class="ident">parent</a>.<a href="#line-414" class="ident">sub</a>, <label for="r155" class="ident">t</label>)
	<label for="r155" class="ident">t</label>.<a href="#line-403" class="ident">raceErrors</a> += <a href="../../pkg/internal/race.html" class="ident i4">race</a>.<a href="../internal/race/norace.go.html#line-42" class="ident">Errors</a>()

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Unfortunately, even though PAUSE indicates that the named test is *no</span><span class="comment">		 longer* running, cmd/test2json interprets it as changing the active test</span><span class="comment">		 for the purpose of log parsing. We could fix cmd/test2json, but that</span><span class="comment">		 won't fix existing deployments of third-party tools that already shell</span><span class="comment">		 out to older builds of cmd/test2json  so merely fixing cmd/test2json</span><span class="comment">		 isn't enough for now.</span></div>
<div class="code"><pre><code>		<label for="r155" class="ident">t</label>.<a href="#line-399" class="ident">chatty</a>.<a href="#line-351" class="ident">Updatef</a>(<label for="r155" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <span class="lit-string">"=== PAUSE %s\n"</span>, <label for="r155" class="ident">t</label>.<a href="#line-409" class="ident">name</a>)
	}

	<label for="r155" class="ident">t</label>.<a href="#line-413" class="ident">signal</a> &lt;- <a href="../../pkg/builtin.html#name-true" class="ident">true</a>   <span class="comment">// Release calling test.</span>
	&lt;-<label for="r155" class="ident">t</label>.<a href="#line-406" class="ident">parent</a>.<a href="#line-412" class="ident">barrier</a> <span class="comment">// Wait for the parent test to complete.</span>
	<label for="r155" class="ident">t</label>.<a href="#line-669" class="ident">context</a>.<a href="#line-1287" class="ident">waitParallel</a>()

	<span class="keyword">if</span> <label for="r155" class="ident">t</label>.<a href="#line-399" class="ident">chatty</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<label for="r155" class="ident">t</label>.<a href="#line-399" class="ident">chatty</a>.<a href="#line-351" class="ident">Updatef</a>(<label for="r155" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <span class="lit-string">"=== CONT  %s\n"</span>, <label for="r155" class="ident">t</label>.<a href="#line-409" class="ident">name</a>)
	}

	<label for="r155" class="ident">t</label>.<a href="#line-410" class="ident">start</a> = <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-1066" class="ident">Now</a>()
	<label for="r155" class="ident">t</label>.<a href="#line-403" class="ident">raceErrors</a> += -<a href="../../pkg/internal/race.html" class="ident i4">race</a>.<a href="../internal/race/norace.go.html#line-42" class="ident">Errors</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> InternalTest is an internal type but exported because it is cross-package;</span><span class="comment"> it is part of the implementation of the "go test" command.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/testing.html#name-InternalTest" class="ident">InternalTest</a> <span class="keyword">struct</span> {
	<a href="../../use/testing..InternalTest.Name.html" class="ident">Name</a> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	<a href="../../use/testing..InternalTest.F.html" class="ident">F</a>    <span class="keyword">func</span>(*<a href="#line-666" class="ident">T</a>)
}

<span class="keyword">var</span> <a href="../../pkg/testing.html#name-errNilPanicOrGoexit" class="ident">errNilPanicOrGoexit</a> = <a href="../../pkg/errors.html" class="ident i1">errors</a>.<a href="../errors/errors.go.html#line-58" class="ident">New</a>(<span class="lit-string">"test executed panic(nil) or runtime.Goexit"</span>)

<span class="keyword">func</span> <label for="r157" class="ident"><a href="../../pkg/testing.html#name-tRunner" class="ident">tRunner</a></label>(<label for="r158" class="ident">t</label> *<a href="#line-666" class="ident">T</a>, <label for="r159" class="ident">fn</label> <span class="keyword">func</span>(<label for="r160" class="ident">t</label> *<a href="#line-666" class="ident">T</a>)) {
	<label for="r158" class="ident">t</label>.<a href="#line-404" class="ident">runner</a> = <a href="#line-1013" class="ident">callerName</a>(<span class="lit-number">0</span>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> When this goroutine is done, either because fn(t)</span><span class="comment">	 returned normally or because a test failure triggered</span><span class="comment">	 a call to runtime.Goexit, record the duration and send</span><span class="comment">	 a signal saying that the test is done.</span></div>
<div class="code"><pre><code>	<span class="keyword">defer</span> <span class="keyword">func</span>() {
		<span class="keyword">if</span> <label for="r158" class="ident">t</label>.<a href="#line-703" class="ident">Failed</a>() {
			<a href="../../pkg/sync/atomic.html" class="ident i13">atomic</a>.<a href="../sync/atomic/doc.go.html#line-97" class="ident">AddUint32</a>(&amp;<a href="#line-335" class="ident">numFailed</a>, <span class="lit-number">1</span>)
		}

		<span class="keyword">if</span> <label for="r158" class="ident">t</label>.<a href="#line-403" class="ident">raceErrors</a>+<a href="../../pkg/internal/race.html" class="ident i4">race</a>.<a href="../internal/race/norace.go.html#line-42" class="ident">Errors</a>() &gt; <span class="lit-number">0</span> {
			<label for="r158" class="ident">t</label>.<a href="#line-801" class="ident">Errorf</a>(<span class="lit-string">"race detected during execution of test"</span>)
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> If the test panicked, print any test output before dying.</span></div>
<div class="code"><pre><code>		<label for="r161" class="ident">err</label> := <a href="../../pkg/builtin.html#name-recover" class="ident">recover</a>()
		<label for="r162" class="ident">signal</label> := <a href="../../pkg/builtin.html#name-true" class="ident">true</a>

		<span class="keyword">if</span> !<label for="r158" class="ident">t</label>.<a href="#line-401" class="ident">finished</a> &amp;&amp; <label for="r161" class="ident">err</label> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<label for="r161" class="ident">err</label> = <a href="#line-1077" class="ident">errNilPanicOrGoexit</a>
			<span class="keyword">for</span> <label for="r163" class="ident">p</label> := <label for="r158" class="ident">t</label>.<a href="#line-406" class="ident">parent</a>; <label for="r163" class="ident">p</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; <label for="r163" class="ident">p</label> = <label for="r163" class="ident">p</label>.<a href="#line-406" class="ident">parent</a> {
				<span class="keyword">if</span> <label for="r163" class="ident">p</label>.<a href="#line-401" class="ident">finished</a> {
					<label for="r158" class="ident">t</label>.<a href="#line-801" class="ident">Errorf</a>(<span class="lit-string">"%v: subtest may have called FailNow on a parent test"</span>, <label for="r161" class="ident">err</label>)
					<label for="r161" class="ident">err</label> = <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>
					<label for="r162" class="ident">signal</label> = <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
					<span class="keyword">break</span>
				}
			}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Use a deferred call to ensure that we report that the test is</span><span class="comment">		 complete even if a cleanup function calls t.FailNow. See issue 41355.</span></div>
<div class="code"><pre><code>		<label for="r164" class="ident">didPanic</label> := <a href="../../pkg/builtin.html#name-false" class="ident">false</a>
		<span class="keyword">defer</span> <span class="keyword">func</span>() {
			<span class="keyword">if</span> <label for="r164" class="ident">didPanic</label> {
				<span class="keyword">return</span>
			}
			<span class="keyword">if</span> <label for="r161" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
				<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<label for="r161" class="ident">err</label>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Only report that the test is complete if it doesn't panic,</span><span class="comment">			 as otherwise the test binary can exit before the panic is</span><span class="comment">			 reported to the user. See issue 41479.</span></div>
<div class="code"><pre><code>			<label for="r158" class="ident">t</label>.<a href="#line-413" class="ident">signal</a> &lt;- <label for="r162" class="ident">signal</label>
		}()

		<label for="r165" class="ident">doPanic</label> := <span class="keyword">func</span>(<label for="r166" class="ident">err</label> <span class="keyword">interface</span>{}) {
			<label for="r158" class="ident">t</label>.<a href="#line-689" class="ident">Fail</a>()
			<span class="keyword">if</span> <label for="r167" class="ident">r</label> := <label for="r158" class="ident">t</label>.<a href="#line-977" class="ident">runCleanup</a>(<a href="#line-971" class="ident">recoverAndReturnPanic</a>); <label for="r167" class="ident">r</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
				<label for="r158" class="ident">t</label>.<a href="#line-792" class="ident">Logf</a>(<span class="lit-string">"cleanup panicked with %v"</span>, <label for="r167" class="ident">r</label>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Flush the output log up to the root before dying.</span></div>
<div class="code"><pre><code>			<span class="keyword">for</span> <label for="r168" class="ident">root</label> := &amp;<label for="r158" class="ident">t</label>.<a href="#line-667" class="ident">common</a>; <label for="r168" class="ident">root</label>.<a href="#line-406" class="ident">parent</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; <label for="r168" class="ident">root</label> = <label for="r168" class="ident">root</label>.<a href="#line-406" class="ident">parent</a> {
				<label for="r168" class="ident">root</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-105" class="ident">Lock</a>()
				<label for="r168" class="ident">root</label>.<a href="#line-411" class="ident">duration</a> += <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-868" class="ident">Since</a>(<label for="r168" class="ident">root</label>.<a href="#line-410" class="ident">start</a>)
				<label for="r169" class="ident">d</label> := <label for="r168" class="ident">root</label>.<a href="#line-411" class="ident">duration</a>
				<label for="r168" class="ident">root</label>.<a href="#line-386" class="ident">mu</a>.<a href="../sync/rwmutex.go.html#line-131" class="ident">Unlock</a>()
				<label for="r168" class="ident">root</label>.<a href="#line-568" class="ident">flushToParent</a>(<label for="r168" class="ident">root</label>.<a href="#line-409" class="ident">name</a>, <span class="lit-string">"--- FAIL: %s (%s)\n"</span>, <label for="r168" class="ident">root</label>.<a href="#line-409" class="ident">name</a>, <a href="#line-624" class="ident">fmtDuration</a>(<label for="r169" class="ident">d</label>))
				<span class="keyword">if</span> <label for="r170" class="ident">r</label> := <label for="r168" class="ident">root</label>.<a href="#line-406" class="ident">parent</a>.<a href="#line-977" class="ident">runCleanup</a>(<a href="#line-971" class="ident">recoverAndReturnPanic</a>); <label for="r170" class="ident">r</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
					<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<label for="r168" class="ident">root</label>.<a href="#line-406" class="ident">parent</a>.<a href="#line-388" class="ident">w</a>, <span class="lit-string">"cleanup panicked with %v"</span>, <label for="r170" class="ident">r</label>)
				}
			}
			<label for="r164" class="ident">didPanic</label> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
			<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<label for="r166" class="ident">err</label>)
		}
		<span class="keyword">if</span> <label for="r161" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<label for="r165" class="ident">doPanic</label>(<label for="r161" class="ident">err</label>)
		}

		<label for="r158" class="ident">t</label>.<a href="#line-411" class="ident">duration</a> += <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-868" class="ident">Since</a>(<label for="r158" class="ident">t</label>.<a href="#line-410" class="ident">start</a>)

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Run parallel subtests.</span><span class="comment">			 Decrease the running count for this test.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Release the parallel subtests.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Wait for subtests to complete.</span></div>
<div class="code"><pre><code>			<span class="keyword">for</span> <label for="r171" class="ident">_</label>, <label for="r172" class="ident">sub</label> := <span class="keyword">range</span> <label for="r158" class="ident">t</label>.<a href="#line-414" class="ident">sub</a> {
				&lt;-<label for="r172" class="ident">sub</label>.<a href="#line-413" class="ident">signal</a>
			}
			<label for="r173" class="ident">cleanupStart</label> := <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-1066" class="ident">Now</a>()
			<label for="r174" class="ident">err</label> := <label for="r158" class="ident">t</label>.<a href="#line-977" class="ident">runCleanup</a>(<a href="#line-971" class="ident">recoverAndReturnPanic</a>)
			<label for="r158" class="ident">t</label>.<a href="#line-411" class="ident">duration</a> += <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-868" class="ident">Since</a>(<label for="r173" class="ident">cleanupStart</label>)
			<span class="keyword">if</span> <label for="r174" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
				<label for="r165" class="ident">doPanic</label>(<label for="r174" class="ident">err</label>)
			}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Reacquire the count for sequential tests. See comment in Run.</span></div>
<div class="code"><pre><code>				<label for="r158" class="ident">t</label>.<a href="#line-669" class="ident">context</a>.<a href="#line-1287" class="ident">waitParallel</a>()
			}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Only release the count for this test if it was run as a parallel</span><span class="comment">			 test. See comment in Run method.</span></div>
<div class="code"><pre><code>			<label for="r158" class="ident">t</label>.<a href="#line-669" class="ident">context</a>.<a href="#line-1299" class="ident">release</a>()
		}
		<label for="r158" class="ident">t</label>.<a href="#line-1434" class="ident">report</a>() <span class="comment">// Report after all subtests have finished.</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Do not lock t.done to allow race detector to detect race in case</span><span class="comment">		 the user does not appropriately synchronizes a goroutine.</span></div>
<div class="code"><pre><code>		<label for="r158" class="ident">t</label>.<a href="#line-392" class="ident">done</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
		<span class="keyword">if</span> <label for="r158" class="ident">t</label>.<a href="#line-406" class="ident">parent</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> &amp;&amp; <a href="../../pkg/sync/atomic.html" class="ident i13">atomic</a>.<a href="../sync/atomic/doc.go.html#line-111" class="ident">LoadInt32</a>(&amp;<label for="r158" class="ident">t</label>.<a href="#line-402" class="ident">hasSub</a>) == <span class="lit-number">0</span> {
			<label for="r158" class="ident">t</label>.<a href="#line-679" class="ident">setRan</a>()
		}
	}()
	<span class="keyword">defer</span> <span class="keyword">func</span>() {
		<span class="keyword">if</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r158" class="ident">t</label>.<a href="#line-414" class="ident">sub</a>) == <span class="lit-number">0</span> {
			<label for="r158" class="ident">t</label>.<a href="#line-977" class="ident">runCleanup</a>(<a href="#line-970" class="ident">normalPanic</a>)
		}
	}()

	<label for="r158" class="ident">t</label>.<a href="#line-410" class="ident">start</a> = <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-1066" class="ident">Now</a>()
	<label for="r158" class="ident">t</label>.<a href="#line-403" class="ident">raceErrors</a> = -<a href="../../pkg/internal/race.html" class="ident i4">race</a>.<a href="../internal/race/norace.go.html#line-42" class="ident">Errors</a>()
	<label for="r159" class="ident">fn</label>(<label for="r158" class="ident">t</label>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> code beyond here will not be executed when FailNow is invoked</span></div>
<div class="code"><pre><code>	<label for="r158" class="ident">t</label>.<a href="#line-401" class="ident">finished</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Run runs f as a subtest of t called name. It runs f in a separate goroutine</span><span class="comment"> and blocks until f returns or calls t.Parallel to become a parallel test.</span><span class="comment"> Run reports whether f succeeded (or at least did not fail before calling t.Parallel).</span><span class="comment"></span><span class="comment"> Run may be called simultaneously from multiple goroutines, but all such calls</span><span class="comment"> must return before the outer test function for t returns.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r175" class="ident">t</label> *<a href="#line-666" class="ident">T</a>) <label for="r176" class="ident"><a href="../../use/testing..T.Run.html" class="ident">Run</a></label>(<label for="r177" class="ident">name</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <label for="r178" class="ident">f</label> <span class="keyword">func</span>(<label for="r179" class="ident">t</label> *<a href="#line-666" class="ident">T</a>)) <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<a href="../../pkg/sync/atomic.html" class="ident i13">atomic</a>.<a href="../sync/atomic/doc.go.html#line-129" class="ident">StoreInt32</a>(&amp;<label for="r175" class="ident">t</label>.<a href="#line-402" class="ident">hasSub</a>, <span class="lit-number">1</span>)
	<label for="r180" class="ident">testName</label>, <label for="r181" class="ident">ok</label>, <label for="r182" class="ident">_</label> := <label for="r175" class="ident">t</label>.<a href="#line-669" class="ident">context</a>.<a href="#line-1259" class="ident">match</a>.<a href="match.go.html#line-50" class="ident">fullName</a>(&amp;<label for="r175" class="ident">t</label>.<a href="#line-667" class="ident">common</a>, <label for="r177" class="ident">name</label>)
	<span class="keyword">if</span> !<label for="r181" class="ident">ok</label> || <a href="#line-1730" class="ident">shouldFailFast</a>() {
		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Record the stack trace at the point of this call so that if the subtest</span><span class="comment">	 function - which runs in a separate stack - is marked as a helper, we can</span><span class="comment">	 continue walking the stack into the parent test.</span></div>
<div class="code"><pre><code>	<span class="keyword">var</span> <label for="r183" class="ident">pc</label> [<a href="#line-381" class="ident">maxStackLen</a>]<a href="../../pkg/builtin.html#name-uintptr" class="ident">uintptr</a>
	<label for="r184" class="ident">n</label> := <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/extern.go.html#line-222" class="ident">Callers</a>(<span class="lit-number">2</span>, <label for="r183" class="ident">pc</label>[:])
	<label for="r175" class="ident">t</label> = &amp;<a href="#line-666" class="ident">T</a>{
		<a href="#line-667" class="ident">common</a>: <a href="#line-385" class="ident">common</a>{
			<a href="#line-412" class="ident">barrier</a>: <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>),
			<a href="#line-413" class="ident">signal</a>:  <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>),
			<a href="#line-409" class="ident">name</a>:    <label for="r180" class="ident">testName</label>,
			<a href="#line-406" class="ident">parent</a>:  &amp;<label for="r175" class="ident">t</label>.<a href="#line-667" class="ident">common</a>,
			<a href="#line-407" class="ident">level</a>:   <label for="r175" class="ident">t</label>.<a href="#line-407" class="ident">level</a> + <span class="lit-number">1</span>,
			<a href="#line-408" class="ident">creator</a>: <label for="r183" class="ident">pc</label>[:<label for="r184" class="ident">n</label>],
			<a href="#line-399" class="ident">chatty</a>:  <label for="r175" class="ident">t</label>.<a href="#line-399" class="ident">chatty</a>,
		},
		<a href="#line-669" class="ident">context</a>: <label for="r175" class="ident">t</label>.<a href="#line-669" class="ident">context</a>,
	}
	<label for="r175" class="ident">t</label>.<a href="#line-388" class="ident">w</a> = <a href="#line-600" class="ident">indenter</a>{&amp;<label for="r175" class="ident">t</label>.<a href="#line-667" class="ident">common</a>}

	<span class="keyword">if</span> <label for="r175" class="ident">t</label>.<a href="#line-399" class="ident">chatty</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<label for="r175" class="ident">t</label>.<a href="#line-399" class="ident">chatty</a>.<a href="#line-351" class="ident">Updatef</a>(<label for="r175" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <span class="lit-string">"=== RUN   %s\n"</span>, <label for="r175" class="ident">t</label>.<a href="#line-409" class="ident">name</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Instead of reducing the running count of this test before calling the</span><span class="comment">	 tRunner and increasing it afterwards, we rely on tRunner keeping the</span><span class="comment">	 count correct. This ensures that a sequence of sequential tests runs</span><span class="comment">	 without being preempted, even when their parent is a parallel test. This</span><span class="comment">	 may especially reduce surprises if *parallel == 1.</span></div>
<div class="code"><pre><code>	<span class="keyword">go</span> <a href="#line-1079" class="ident">tRunner</a>(<label for="r175" class="ident">t</label>, <label for="r178" class="ident">f</label>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> At this point, it is likely that FailNow was called on one of the</span><span class="comment">		 parent tests by one of the subtests. Continue aborting up the chain.</span></div>
<div class="code"><pre><code>		<a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/panic.go.html#line-579" class="ident">Goexit</a>()
	}
	<span class="keyword">return</span> !<label for="r175" class="ident">t</label>.<a href="#line-390" class="ident">failed</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Deadline reports the time at which the test binary will have</span><span class="comment"> exceeded the timeout specified by the -timeout flag.</span><span class="comment"></span><span class="comment"> The ok result is false if the -timeout flag indicates no timeout (0).</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r185" class="ident">t</label> *<a href="#line-666" class="ident">T</a>) <label for="r186" class="ident"><a href="../../use/testing..T.Deadline.html" class="ident">Deadline</a></label>() (<label for="r187" class="ident">deadline</label> <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-127" class="ident">Time</a>, <label for="r188" class="ident">ok</label> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {
	<label for="r187" class="ident">deadline</label> = <label for="r185" class="ident">t</label>.<a href="#line-669" class="ident">context</a>.<a href="#line-1260" class="ident">deadline</a>
	<span class="keyword">return</span> <label for="r187" class="ident">deadline</label>, !<label for="r187" class="ident">deadline</label>.<a href="../time/time.go.html#line-426" class="ident">IsZero</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> testContext holds all fields that are common to all tests. This includes</span><span class="comment"> synchronization primitives to run at most *parallel tests.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/testing.html#name-testContext" class="ident">testContext</a> <span class="keyword">struct</span> {
	<a href="../../use/testing..testContext*13d6f.match*4945a.html" class="ident">match</a>    *<a href="match.go.html#line-16" class="ident">matcher</a>
	<a href="../../use/testing..testContext*13d6f.deadline*dfc8a.html" class="ident">deadline</a> <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-127" class="ident">Time</a>

	<a href="../../use/testing..testContext*13d6f.mu*19503.html" class="ident">mu</a> <a href="../../pkg/sync.html" class="ident i12">sync</a>.<a href="../sync/mutex.go.html#line-25" class="ident">Mutex</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Channel used to signal tests that are ready to be run in parallel.</span></div>
<div class="code"><pre><code>	<a href="../../use/testing..testContext*13d6f.startParallel*34699.html" class="ident">startParallel</a> <span class="keyword">chan</span> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> running is the number of tests currently running in parallel.</span><span class="comment">	 This does not include tests that are waiting for subtests to complete.</span></div>
<div class="code"><pre><code>	<a href="../../use/testing..testContext*13d6f.running*c071c.html" class="ident">running</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> numWaiting is the number tests waiting to be run in parallel.</span></div>
<div class="code"><pre><code>	<a href="../../use/testing..testContext*13d6f.numWaiting*893c6.html" class="ident">numWaiting</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> maxParallel is a copy of the parallel flag.</span></div>
<div class="code"><pre><code>	<a href="../../use/testing..testContext*13d6f.maxParallel*84abb.html" class="ident">maxParallel</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>
}

<span class="keyword">func</span> <label for="r189" class="ident"><a href="../../pkg/testing.html#name-newTestContext" class="ident">newTestContext</a></label>(<label for="r190" class="ident">maxParallel</label> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>, <label for="r191" class="ident">m</label> *<a href="match.go.html#line-16" class="ident">matcher</a>) *<a href="#line-1258" class="ident">testContext</a> {
	<span class="keyword">return</span> &amp;<a href="#line-1258" class="ident">testContext</a>{
		<a href="#line-1259" class="ident">match</a>:         <label for="r191" class="ident">m</label>,
		<a href="#line-1265" class="ident">startParallel</a>: <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>),
		<a href="#line-1275" class="ident">maxParallel</a>:   <label for="r190" class="ident">maxParallel</label>,
		<a href="#line-1269" class="ident">running</a>:       <span class="lit-number">1</span>, <span class="comment">// Set the count to 1 for the main (sequential) test.</span>
	}
}

<span class="keyword">func</span> (<label for="r192" class="ident">c</label> *<a href="#line-1258" class="ident">testContext</a>) <label for="r193" class="ident"><a href="../../use/testing..testContext*13d6f.waitParallel*2c920.html" class="ident">waitParallel</a></label>() {
	<label for="r192" class="ident">c</label>.<a href="#line-1262" class="ident">mu</a>.<a href="../sync/mutex.go.html#line-72" class="ident">Lock</a>()
	<span class="keyword">if</span> <label for="r192" class="ident">c</label>.<a href="#line-1269" class="ident">running</a> &lt; <label for="r192" class="ident">c</label>.<a href="#line-1275" class="ident">maxParallel</a> {
		<label for="r192" class="ident">c</label>.<a href="#line-1269" class="ident">running</a>++
		<label for="r192" class="ident">c</label>.<a href="#line-1262" class="ident">mu</a>.<a href="../sync/mutex.go.html#line-179" class="ident">Unlock</a>()
		<span class="keyword">return</span>
	}
	<label for="r192" class="ident">c</label>.<a href="#line-1272" class="ident">numWaiting</a>++
	<label for="r192" class="ident">c</label>.<a href="#line-1262" class="ident">mu</a>.<a href="../sync/mutex.go.html#line-179" class="ident">Unlock</a>()
	&lt;-<label for="r192" class="ident">c</label>.<a href="#line-1265" class="ident">startParallel</a>
}

<span class="keyword">func</span> (<label for="r194" class="ident">c</label> *<a href="#line-1258" class="ident">testContext</a>) <label for="r195" class="ident"><a href="../../use/testing..testContext*13d6f.release*a4d45.html" class="ident">release</a></label>() {
	<label for="r194" class="ident">c</label>.<a href="#line-1262" class="ident">mu</a>.<a href="../sync/mutex.go.html#line-72" class="ident">Lock</a>()
	<span class="keyword">if</span> <label for="r194" class="ident">c</label>.<a href="#line-1272" class="ident">numWaiting</a> == <span class="lit-number">0</span> {
		<label for="r194" class="ident">c</label>.<a href="#line-1269" class="ident">running</a>--
		<label for="r194" class="ident">c</label>.<a href="#line-1262" class="ident">mu</a>.<a href="../sync/mutex.go.html#line-179" class="ident">Unlock</a>()
		<span class="keyword">return</span>
	}
	<label for="r194" class="ident">c</label>.<a href="#line-1272" class="ident">numWaiting</a>--
	<label for="r194" class="ident">c</label>.<a href="#line-1262" class="ident">mu</a>.<a href="../sync/mutex.go.html#line-179" class="ident">Unlock</a>()
	<label for="r194" class="ident">c</label>.<a href="#line-1265" class="ident">startParallel</a> &lt;- <a href="../../pkg/builtin.html#name-true" class="ident">true</a> <span class="comment">// Pick a waiting test to be run.</span>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> No one should be using func Main anymore.</span><span class="comment"> See the doc comment on func Main and use MainStart instead.</span></div>
<div class="code"><pre><code><span class="keyword">var</span> <a href="../../pkg/testing.html#name-errMain" class="ident">errMain</a> = <a href="../../pkg/errors.html" class="ident i1">errors</a>.<a href="../errors/errors.go.html#line-58" class="ident">New</a>(<span class="lit-string">"testing: unexpected use of func Main"</span>)

<span class="keyword">type</span> <a href="../../pkg/testing.html#name-matchStringOnly" class="ident">matchStringOnly</a> <span class="keyword">func</span>(pat, str <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>)

<span class="keyword">func</span> (<label for="r196" class="ident">f</label> <a href="#line-1315" class="ident">matchStringOnly</a>) <label for="r197" class="ident"><a href="../../use/testing..matchStringOnly*1750b.MatchString.html" class="ident">MatchString</a></label>(<label for="r198" class="ident">pat</label>, <label for="r199" class="ident">str</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>)   { <span class="keyword">return</span> <label for="r196" class="ident">f</label>(<label for="r198" class="ident">pat</label>, <label for="r199" class="ident">str</label>) }
<span class="keyword">func</span> (<label for="r200" class="ident">f</label> <a href="#line-1315" class="ident">matchStringOnly</a>) <label for="r201" class="ident"><a href="../../use/testing..matchStringOnly*1750b.StartCPUProfile.html" class="ident">StartCPUProfile</a></label>(<label for="r202" class="ident">w</label> <a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>) <a href="../../pkg/builtin.html#name-error" class="ident">error</a>           { <span class="keyword">return</span> <a href="#line-1313" class="ident">errMain</a> }
<span class="keyword">func</span> (<label for="r203" class="ident">f</label> <a href="#line-1315" class="ident">matchStringOnly</a>) <label for="r204" class="ident"><a href="../../use/testing..matchStringOnly*1750b.StopCPUProfile.html" class="ident">StopCPUProfile</a></label>()                             {}
<span class="keyword">func</span> (<label for="r205" class="ident">f</label> <a href="#line-1315" class="ident">matchStringOnly</a>) <label for="r206" class="ident"><a href="../../use/testing..matchStringOnly*1750b.WriteProfileTo.html" class="ident">WriteProfileTo</a></label>(<a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>, <a href="../../pkg/builtin.html#name-int" class="ident">int</a>) <a href="../../pkg/builtin.html#name-error" class="ident">error</a> { <span class="keyword">return</span> <a href="#line-1313" class="ident">errMain</a> }
<span class="keyword">func</span> (<label for="r207" class="ident">f</label> <a href="#line-1315" class="ident">matchStringOnly</a>) <label for="r208" class="ident"><a href="../../use/testing..matchStringOnly*1750b.ImportPath.html" class="ident">ImportPath</a></label>() <a href="../../pkg/builtin.html#name-string" class="ident">string</a>                          { <span class="keyword">return</span> <span class="lit-string">""</span> }
<span class="keyword">func</span> (<label for="r209" class="ident">f</label> <a href="#line-1315" class="ident">matchStringOnly</a>) <label for="r210" class="ident"><a href="../../use/testing..matchStringOnly*1750b.StartTestLog.html" class="ident">StartTestLog</a></label>(<a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>)                      {}
<span class="keyword">func</span> (<label for="r211" class="ident">f</label> <a href="#line-1315" class="ident">matchStringOnly</a>) <label for="r212" class="ident"><a href="../../use/testing..matchStringOnly*1750b.StopTestLog.html" class="ident">StopTestLog</a></label>() <a href="../../pkg/builtin.html#name-error" class="ident">error</a>                          { <span class="keyword">return</span> <a href="#line-1313" class="ident">errMain</a> }
<span class="keyword">func</span> (<label for="r213" class="ident">f</label> <a href="#line-1315" class="ident">matchStringOnly</a>) <label for="r214" class="ident"><a href="../../use/testing..matchStringOnly*1750b.SetPanicOnExit0.html" class="ident">SetPanicOnExit0</a></label>(<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>)                        {}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Main is an internal function, part of the implementation of the "go test" command.</span><span class="comment"> It was exported because it is cross-package and predates "internal" packages.</span><span class="comment"> It is no longer used by "go test" but preserved, as much as possible, for other</span><span class="comment"> systems that simulate "go test" using Main, but Main sometimes cannot be updated as</span><span class="comment"> new functionality is added to the testing package.</span><span class="comment"> Systems simulating "go test" should be updated to use MainStart.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r215" class="ident"><a href="../../pkg/testing.html#name-Main" class="ident">Main</a></label>(<label for="r216" class="ident">matchString</label> <span class="keyword">func</span>(<label for="r217" class="ident">pat</label>, <label for="r218" class="ident">str</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>), <label for="r219" class="ident">tests</label> []<a href="#line-1072" class="ident">InternalTest</a>, <label for="r220" class="ident">benchmarks</label> []<a href="benchmark.go.html#line-75" class="ident">InternalBenchmark</a>, <label for="r221" class="ident">examples</label> []<a href="example.go.html#line-15" class="ident">InternalExample</a>) {
	<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<a href="#line-1371" class="ident">MainStart</a>(<a href="#line-1315" class="ident">matchStringOnly</a>(<label for="r216" class="ident">matchString</label>), <label for="r219" class="ident">tests</label>, <label for="r220" class="ident">benchmarks</label>, <label for="r221" class="ident">examples</label>).<a href="#line-1382" class="ident">Run</a>())
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> M is a type passed to a TestMain function to run the actual tests.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/testing.html#name-M" class="ident">M</a> <span class="keyword">struct</span> {
	<a href="../../use/testing..M.deps*f9346.html" class="ident">deps</a>       <a href="#line-1357" class="ident">testDeps</a>
	<a href="../../use/testing..M.tests*59830.html" class="ident">tests</a>      []<a href="#line-1072" class="ident">InternalTest</a>
	<a href="../../use/testing..M.benchmarks*cb1d2.html" class="ident">benchmarks</a> []<a href="benchmark.go.html#line-75" class="ident">InternalBenchmark</a>
	<a href="../../use/testing..M.examples*c590b.html" class="ident">examples</a>   []<a href="example.go.html#line-15" class="ident">InternalExample</a>

	<a href="../../use/testing..M.timer*cd94e.html" class="ident">timer</a>     *<a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/sleep.go.html#line-50" class="ident">Timer</a>
	<a href="../../use/testing..M.afterOnce*f2b80.html" class="ident">afterOnce</a> <a href="../../pkg/sync.html" class="ident i12">sync</a>.<a href="../sync/once.go.html#line-14" class="ident">Once</a>

	<a href="../../use/testing..M.numRun*5f497.html" class="ident">numRun</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> value to pass to os.Exit, the outer test func main</span><span class="comment">	 harness calls os.Exit with this code. See #34129.</span></div>
<div class="code"><pre><code>	<a href="../../use/testing..M.exitCode*bba32.html" class="ident">exitCode</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> testDeps is an internal interface of functionality that is</span><span class="comment"> passed into this package by a test's generated main package.</span><span class="comment"> The canonical implementation of this interface is</span><span class="comment"> testing/internal/testdeps's TestDeps.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../pkg/testing.html#name-testDeps" class="ident">testDeps</a> <span class="keyword">interface</span> {
	ImportPath() <a href="../../pkg/builtin.html#name-string" class="ident">string</a>
	MatchString(pat, str <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>)
	SetPanicOnExit0(<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>)
	StartCPUProfile(<a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>) <a href="../../pkg/builtin.html#name-error" class="ident">error</a>
	StopCPUProfile()
	StartTestLog(<a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>)
	StopTestLog() <a href="../../pkg/builtin.html#name-error" class="ident">error</a>
	WriteProfileTo(<a href="../../pkg/builtin.html#name-string" class="ident">string</a>, <a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-96" class="ident">Writer</a>, <a href="../../pkg/builtin.html#name-int" class="ident">int</a>) <a href="../../pkg/builtin.html#name-error" class="ident">error</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> MainStart is meant for use by tests generated by 'go test'.</span><span class="comment"> It is not meant to be called directly and is not subject to the Go 1 compatibility document.</span><span class="comment"> It may change signature from release to release.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r222" class="ident"><a href="../../pkg/testing.html#name-MainStart" class="ident">MainStart</a></label>(<label for="r223" class="ident">deps</label> <a href="#line-1357" class="ident">testDeps</a>, <label for="r224" class="ident">tests</label> []<a href="#line-1072" class="ident">InternalTest</a>, <label for="r225" class="ident">benchmarks</label> []<a href="benchmark.go.html#line-75" class="ident">InternalBenchmark</a>, <label for="r226" class="ident">examples</label> []<a href="example.go.html#line-15" class="ident">InternalExample</a>) *<a href="#line-1337" class="ident">M</a> {
	<a href="#line-263" class="ident">Init</a>()
	<span class="keyword">return</span> &amp;<a href="#line-1337" class="ident">M</a>{
		<a href="#line-1338" class="ident">deps</a>:       <label for="r223" class="ident">deps</label>,
		<a href="#line-1339" class="ident">tests</a>:      <label for="r224" class="ident">tests</label>,
		<a href="#line-1340" class="ident">benchmarks</a>: <label for="r225" class="ident">benchmarks</label>,
		<a href="#line-1341" class="ident">examples</a>:   <label for="r226" class="ident">examples</label>,
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Run runs the tests. It returns an exit code to pass to os.Exit.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r227" class="ident">m</label> *<a href="#line-1337" class="ident">M</a>) <label for="r228" class="ident"><a href="../../use/testing..M.Run.html" class="ident">Run</a></label>() (<label for="r229" class="ident">code</label> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>) {
	<span class="keyword">defer</span> <span class="keyword">func</span>() {
		<label for="r229" class="ident">code</label> = <label for="r227" class="ident">m</label>.<a href="#line-1350" class="ident">exitCode</a>
	}()
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Count the number of calls to m.Run.</span><span class="comment">	 We only ever expected 1, but we didn't enforce that,</span><span class="comment">	 and now there are tests in the wild that call m.Run multiple times.</span><span class="comment">	 Sigh. golang.org/issue/23129.</span></div>
<div class="code"><pre><code>	<label for="r227" class="ident">m</label>.<a href="#line-1346" class="ident">numRun</a>++
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> TestMain may have already called flag.Parse.</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> !<a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-1026" class="ident">Parsed</a>() {
		<a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-1020" class="ident">Parse</a>()
	}

	<span class="keyword">if</span> *<a href="#line-327" class="ident">parallel</a> &lt; <span class="lit-number">1</span> {
		<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-262" class="ident">Fprintln</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: -parallel can only be given a positive integer"</span>)
		<a href="../../pkg/flag.html" class="ident i2">flag</a>.<a href="../flag/flag.go.html#line-587" class="ident">Usage</a>()
		<label for="r227" class="ident">m</label>.<a href="#line-1350" class="ident">exitCode</a> = <span class="lit-number">2</span>
		<span class="keyword">return</span>
	}

	<span class="keyword">if</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(*<a href="#line-314" class="ident">matchList</a>) != <span class="lit-number">0</span> {
		<a href="#line-1451" class="ident">listTests</a>(<label for="r227" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1359" class="ident">MatchString</a>, <label for="r227" class="ident">m</label>.<a href="#line-1339" class="ident">tests</a>, <label for="r227" class="ident">m</label>.<a href="#line-1340" class="ident">benchmarks</a>, <label for="r227" class="ident">m</label>.<a href="#line-1341" class="ident">examples</a>)
		<label for="r227" class="ident">m</label>.<a href="#line-1350" class="ident">exitCode</a> = <span class="lit-number">0</span>
		<span class="keyword">return</span>
	}

	<a href="#line-1712" class="ident">parseCpuList</a>()

	<label for="r227" class="ident">m</label>.<a href="#line-1526" class="ident">before</a>()
	<span class="keyword">defer</span> <label for="r227" class="ident">m</label>.<a href="#line-1592" class="ident">after</a>()
	<label for="r230" class="ident">deadline</label> := <label for="r227" class="ident">m</label>.<a href="#line-1691" class="ident">startAlarm</a>()
	<a href="#line-330" class="ident">haveExamples</a> = <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r227" class="ident">m</label>.<a href="#line-1341" class="ident">examples</a>) &gt; <span class="lit-number">0</span>
	<label for="r231" class="ident">testRan</label>, <label for="r232" class="ident">testOk</label> := <a href="#line-1488" class="ident">runTests</a>(<label for="r227" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1359" class="ident">MatchString</a>, <label for="r227" class="ident">m</label>.<a href="#line-1339" class="ident">tests</a>, <label for="r230" class="ident">deadline</label>)
	<label for="r233" class="ident">exampleRan</label>, <label for="r234" class="ident">exampleOk</label> := <a href="example.go.html#line-29" class="ident">runExamples</a>(<label for="r227" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1359" class="ident">MatchString</a>, <label for="r227" class="ident">m</label>.<a href="#line-1341" class="ident">examples</a>)
	<label for="r227" class="ident">m</label>.<a href="#line-1706" class="ident">stopAlarm</a>()
	<span class="keyword">if</span> !<label for="r231" class="ident">testRan</label> &amp;&amp; !<label for="r233" class="ident">exampleRan</label> &amp;&amp; *<a href="benchmark.go.html#line-32" class="ident">matchBenchmarks</a> == <span class="lit-string">""</span> {
		<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-262" class="ident">Fprintln</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: warning: no tests to run"</span>)
	}
	<span class="keyword">if</span> !<label for="r232" class="ident">testOk</label> || !<label for="r234" class="ident">exampleOk</label> || !<a href="benchmark.go.html#line-506" class="ident">runBenchmarks</a>(<label for="r227" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1358" class="ident">ImportPath</a>(), <label for="r227" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1359" class="ident">MatchString</a>, <label for="r227" class="ident">m</label>.<a href="#line-1340" class="ident">benchmarks</a>) || <a href="../../pkg/internal/race.html" class="ident i4">race</a>.<a href="../internal/race/norace.go.html#line-42" class="ident">Errors</a>() &gt; <span class="lit-number">0</span> {
		<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-273" class="ident">Println</a>(<span class="lit-string">"FAIL"</span>)
		<label for="r227" class="ident">m</label>.<a href="#line-1350" class="ident">exitCode</a> = <span class="lit-number">1</span>
		<span class="keyword">return</span>
	}

	<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-273" class="ident">Println</a>(<span class="lit-string">"PASS"</span>)
	<label for="r227" class="ident">m</label>.<a href="#line-1350" class="ident">exitCode</a> = <span class="lit-number">0</span>
	<span class="keyword">return</span>
}

<span class="keyword">func</span> (<label for="r235" class="ident">t</label> *<a href="#line-666" class="ident">T</a>) <label for="r236" class="ident"><a href="../../use/testing..T.report*845e9.html" class="ident">report</a></label>() {
	<span class="keyword">if</span> <label for="r235" class="ident">t</label>.<a href="#line-406" class="ident">parent</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">return</span>
	}
	<label for="r237" class="ident">dstr</label> := <a href="#line-624" class="ident">fmtDuration</a>(<label for="r235" class="ident">t</label>.<a href="#line-411" class="ident">duration</a>)
	<label for="r238" class="ident">format</label> := <span class="lit-string">"--- %s: %s (%s)\n"</span>
	<span class="keyword">if</span> <label for="r235" class="ident">t</label>.<a href="#line-703" class="ident">Failed</a>() {
		<label for="r235" class="ident">t</label>.<a href="#line-568" class="ident">flushToParent</a>(<label for="r235" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <label for="r238" class="ident">format</label>, <span class="lit-string">"FAIL"</span>, <label for="r235" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <label for="r237" class="ident">dstr</label>)
	} <span class="keyword">else</span> <span class="keyword">if</span> <label for="r235" class="ident">t</label>.<a href="#line-399" class="ident">chatty</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<span class="keyword">if</span> <label for="r235" class="ident">t</label>.<a href="#line-851" class="ident">Skipped</a>() {
			<label for="r235" class="ident">t</label>.<a href="#line-568" class="ident">flushToParent</a>(<label for="r235" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <label for="r238" class="ident">format</label>, <span class="lit-string">"SKIP"</span>, <label for="r235" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <label for="r237" class="ident">dstr</label>)
		} <span class="keyword">else</span> {
			<label for="r235" class="ident">t</label>.<a href="#line-568" class="ident">flushToParent</a>(<label for="r235" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <label for="r238" class="ident">format</label>, <span class="lit-string">"PASS"</span>, <label for="r235" class="ident">t</label>.<a href="#line-409" class="ident">name</a>, <label for="r237" class="ident">dstr</label>)
		}
	}
}

<span class="keyword">func</span> <label for="r239" class="ident"><a href="../../pkg/testing.html#name-listTests" class="ident">listTests</a></label>(<label for="r240" class="ident">matchString</label> <span class="keyword">func</span>(<label for="r241" class="ident">pat</label>, <label for="r242" class="ident">str</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>), <label for="r243" class="ident">tests</label> []<a href="#line-1072" class="ident">InternalTest</a>, <label for="r244" class="ident">benchmarks</label> []<a href="benchmark.go.html#line-75" class="ident">InternalBenchmark</a>, <label for="r245" class="ident">examples</label> []<a href="example.go.html#line-15" class="ident">InternalExample</a>) {
	<span class="keyword">if</span> <label for="r246" class="ident">_</label>, <label for="r247" class="ident">err</label> := <label for="r240" class="ident">matchString</label>(*<a href="#line-314" class="ident">matchList</a>, <span class="lit-string">"non-empty"</span>); <label for="r247" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: invalid regexp in -test.list (%q): %s\n"</span>, *<a href="#line-314" class="ident">matchList</a>, <label for="r247" class="ident">err</label>)
		<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">1</span>)
	}

	<span class="keyword">for</span> <label for="r248" class="ident">_</label>, <label for="r249" class="ident">test</label> := <span class="keyword">range</span> <label for="r243" class="ident">tests</label> {
		<span class="keyword">if</span> <label for="r250" class="ident">ok</label>, <label for="r251" class="ident">_</label> := <label for="r240" class="ident">matchString</label>(*<a href="#line-314" class="ident">matchList</a>, <label for="r249" class="ident">test</label>.<a href="#line-1073" class="ident">Name</a>); <label for="r250" class="ident">ok</label> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-273" class="ident">Println</a>(<label for="r249" class="ident">test</label>.<a href="#line-1073" class="ident">Name</a>)
		}
	}
	<span class="keyword">for</span> <label for="r252" class="ident">_</label>, <label for="r253" class="ident">bench</label> := <span class="keyword">range</span> <label for="r244" class="ident">benchmarks</label> {
		<span class="keyword">if</span> <label for="r254" class="ident">ok</label>, <label for="r255" class="ident">_</label> := <label for="r240" class="ident">matchString</label>(*<a href="#line-314" class="ident">matchList</a>, <label for="r253" class="ident">bench</label>.<a href="benchmark.go.html#line-76" class="ident">Name</a>); <label for="r254" class="ident">ok</label> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-273" class="ident">Println</a>(<label for="r253" class="ident">bench</label>.<a href="benchmark.go.html#line-76" class="ident">Name</a>)
		}
	}
	<span class="keyword">for</span> <label for="r256" class="ident">_</label>, <label for="r257" class="ident">example</label> := <span class="keyword">range</span> <label for="r245" class="ident">examples</label> {
		<span class="keyword">if</span> <label for="r258" class="ident">ok</label>, <label for="r259" class="ident">_</label> := <label for="r240" class="ident">matchString</label>(*<a href="#line-314" class="ident">matchList</a>, <label for="r257" class="ident">example</label>.<a href="example.go.html#line-16" class="ident">Name</a>); <label for="r258" class="ident">ok</label> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-273" class="ident">Println</a>(<label for="r257" class="ident">example</label>.<a href="example.go.html#line-16" class="ident">Name</a>)
		}
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> RunTests is an internal function but exported because it is cross-package;</span><span class="comment"> it is part of the implementation of the "go test" command.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r260" class="ident"><a href="../../pkg/testing.html#name-RunTests" class="ident">RunTests</a></label>(<label for="r261" class="ident">matchString</label> <span class="keyword">func</span>(<label for="r262" class="ident">pat</label>, <label for="r263" class="ident">str</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>), <label for="r264" class="ident">tests</label> []<a href="#line-1072" class="ident">InternalTest</a>) (<label for="r265" class="ident">ok</label> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {
	<span class="keyword">var</span> <label for="r266" class="ident">deadline</label> <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-127" class="ident">Time</a>
	<span class="keyword">if</span> *<a href="#line-325" class="ident">timeout</a> &gt; <span class="lit-number">0</span> {
		<label for="r266" class="ident">deadline</label> = <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-1066" class="ident">Now</a>().<a href="../time/time.go.html#line-813" class="ident">Add</a>(*<a href="#line-325" class="ident">timeout</a>)
	}
	<label for="r267" class="ident">ran</label>, <label for="r265" class="ident">ok</label> := <a href="#line-1488" class="ident">runTests</a>(<label for="r261" class="ident">matchString</label>, <label for="r264" class="ident">tests</label>, <label for="r266" class="ident">deadline</label>)
	<span class="keyword">if</span> !<label for="r267" class="ident">ran</label> &amp;&amp; !<a href="#line-330" class="ident">haveExamples</a> {
		<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-262" class="ident">Fprintln</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: warning: no tests to run"</span>)
	}
	<span class="keyword">return</span> <label for="r265" class="ident">ok</label>
}

<span class="keyword">func</span> <label for="r268" class="ident"><a href="../../pkg/testing.html#name-runTests" class="ident">runTests</a></label>(<label for="r269" class="ident">matchString</label> <span class="keyword">func</span>(<label for="r270" class="ident">pat</label>, <label for="r271" class="ident">str</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (<a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>), <label for="r272" class="ident">tests</label> []<a href="#line-1072" class="ident">InternalTest</a>, <label for="r273" class="ident">deadline</label> <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-127" class="ident">Time</a>) (<label for="r274" class="ident">ran</label>, <label for="r275" class="ident">ok</label> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {
	<label for="r275" class="ident">ok</label> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a>
	<span class="keyword">for</span> <label for="r276" class="ident">_</label>, <label for="r277" class="ident">procs</label> := <span class="keyword">range</span> <a href="#line-332" class="ident">cpuList</a> {
		<a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/debug.go.html#line-16" class="ident">GOMAXPROCS</a>(<label for="r277" class="ident">procs</label>)
		<span class="keyword">for</span> <label for="r278" class="ident">i</label> := <a href="../../pkg/builtin.html#name-uint" class="ident">uint</a>(<span class="lit-number">0</span>); <label for="r278" class="ident">i</label> &lt; *<a href="#line-312" class="ident">count</a>; <label for="r278" class="ident">i</label>++ {
			<span class="keyword">if</span> <a href="#line-1730" class="ident">shouldFailFast</a>() {
				<span class="keyword">break</span>
			}
			<label for="r279" class="ident">ctx</label> := <a href="#line-1278" class="ident">newTestContext</a>(*<a href="#line-327" class="ident">parallel</a>, <a href="match.go.html#line-28" class="ident">newMatcher</a>(<label for="r269" class="ident">matchString</label>, *<a href="#line-315" class="ident">match</a>, <span class="lit-string">"-test.run"</span>))
			<label for="r279" class="ident">ctx</label>.<a href="#line-1260" class="ident">deadline</a> = <label for="r273" class="ident">deadline</label>
			<label for="r280" class="ident">t</label> := &amp;<a href="#line-666" class="ident">T</a>{
				<a href="#line-667" class="ident">common</a>: <a href="#line-385" class="ident">common</a>{
					<a href="#line-413" class="ident">signal</a>:  <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>),
					<a href="#line-412" class="ident">barrier</a>: <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>),
					<a href="#line-388" class="ident">w</a>:       <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-65" class="ident">Stdout</a>,
				},
				<a href="#line-669" class="ident">context</a>: <label for="r279" class="ident">ctx</label>,
			}
			<span class="keyword">if</span> <a href="#line-443" class="ident">Verbose</a>() {
				<label for="r280" class="ident">t</label>.<a href="#line-399" class="ident">chatty</a> = <a href="#line-344" class="ident">newChattyPrinter</a>(<label for="r280" class="ident">t</label>.<a href="#line-388" class="ident">w</a>)
			}
			<a href="#line-1079" class="ident">tRunner</a>(<label for="r280" class="ident">t</label>, <span class="keyword">func</span>(<label for="r281" class="ident">t</label> *<a href="#line-666" class="ident">T</a>) {
				<span class="keyword">for</span> <label for="r282" class="ident">_</label>, <label for="r283" class="ident">test</label> := <span class="keyword">range</span> <label for="r272" class="ident">tests</label> {
					<label for="r281" class="ident">t</label>.<a href="#line-1205" class="ident">Run</a>(<label for="r283" class="ident">test</label>.<a href="#line-1073" class="ident">Name</a>, <label for="r283" class="ident">test</label>.<a href="#line-1074" class="ident">F</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Run catching the signal rather than the tRunner as a separate</span><span class="comment">				 goroutine to avoid adding a goroutine during the sequential</span><span class="comment">				 phase as this pollutes the stacktrace output when aborting.</span></div>
<div class="code"><pre><code>				<span class="keyword">go</span> <span class="keyword">func</span>() { &lt;-<label for="r281" class="ident">t</label>.<a href="#line-413" class="ident">signal</a> }()
			})
			<label for="r275" class="ident">ok</label> = <label for="r275" class="ident">ok</label> &amp;&amp; !<label for="r280" class="ident">t</label>.<a href="#line-703" class="ident">Failed</a>()
			<label for="r274" class="ident">ran</label> = <label for="r274" class="ident">ran</label> || <label for="r280" class="ident">t</label>.<a href="#line-389" class="ident">ran</a>
		}
	}
	<span class="keyword">return</span> <label for="r274" class="ident">ran</label>, <label for="r275" class="ident">ok</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> before runs before all testing.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r284" class="ident">m</label> *<a href="#line-1337" class="ident">M</a>) <label for="r285" class="ident"><a href="../../use/testing..M.before*6db7d.html" class="ident">before</a></label>() {
	<span class="keyword">if</span> *<a href="#line-317" class="ident">memProfileRate</a> &gt; <span class="lit-number">0</span> {
		<a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/mprof.go.html#line-493" class="ident">MemProfileRate</a> = *<a href="#line-317" class="ident">memProfileRate</a>
	}
	<span class="keyword">if</span> *<a href="#line-318" class="ident">cpuProfile</a> != <span class="lit-string">""</span> {
		<label for="r286" class="ident">f</label>, <label for="r287" class="ident">err</label> := <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-319" class="ident">Create</a>(<a href="#line-1666" class="ident">toOutputDir</a>(*<a href="#line-318" class="ident">cpuProfile</a>))
		<span class="keyword">if</span> <label for="r287" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: %s\n"</span>, <label for="r287" class="ident">err</label>)
			<span class="keyword">return</span>
		}
		<span class="keyword">if</span> <label for="r288" class="ident">err</label> := <label for="r284" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1361" class="ident">StartCPUProfile</a>(<label for="r286" class="ident">f</label>); <label for="r288" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: can't start cpu profile: %s\n"</span>, <label for="r288" class="ident">err</label>)
			<label for="r286" class="ident">f</label>.<a href="../os/file_posix.go.html#line-21" class="ident">Close</a>()
			<span class="keyword">return</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Could save f so after can call f.Close; not worth the effort.</span></div>
<div class="code"><pre><code>	}
	<span class="keyword">if</span> *<a href="#line-324" class="ident">traceFile</a> != <span class="lit-string">""</span> {
		<label for="r289" class="ident">f</label>, <label for="r290" class="ident">err</label> := <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-319" class="ident">Create</a>(<a href="#line-1666" class="ident">toOutputDir</a>(*<a href="#line-324" class="ident">traceFile</a>))
		<span class="keyword">if</span> <label for="r290" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: %s\n"</span>, <label for="r290" class="ident">err</label>)
			<span class="keyword">return</span>
		}
		<span class="keyword">if</span> <label for="r291" class="ident">err</label> := <a href="../../pkg/runtime/trace.html" class="ident i9">trace</a>.<a href="../runtime/trace/trace.go.html#line-120" class="ident">Start</a>(<label for="r289" class="ident">f</label>); <label for="r291" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: can't start tracing: %s\n"</span>, <label for="r291" class="ident">err</label>)
			<label for="r289" class="ident">f</label>.<a href="../os/file_posix.go.html#line-21" class="ident">Close</a>()
			<span class="keyword">return</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Could save f so after can call f.Close; not worth the effort.</span></div>
<div class="code"><pre><code>	}
	<span class="keyword">if</span> *<a href="#line-319" class="ident">blockProfile</a> != <span class="lit-string">""</span> &amp;&amp; *<a href="#line-320" class="ident">blockProfileRate</a> &gt;= <span class="lit-number">0</span> {
		<a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/mprof.go.html#line-380" class="ident">SetBlockProfileRate</a>(*<a href="#line-320" class="ident">blockProfileRate</a>)
	}
	<span class="keyword">if</span> *<a href="#line-321" class="ident">mutexProfile</a> != <span class="lit-string">""</span> &amp;&amp; *<a href="#line-322" class="ident">mutexProfileFraction</a> &gt;= <span class="lit-number">0</span> {
		<a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/mprof.go.html#line-439" class="ident">SetMutexProfileFraction</a>(*<a href="#line-322" class="ident">mutexProfileFraction</a>)
	}
	<span class="keyword">if</span> *<a href="#line-313" class="ident">coverProfile</a> != <span class="lit-string">""</span> &amp;&amp; <a href="cover.go.html#line-29" class="ident">cover</a>.<a href="cover.go.html#line-35" class="ident">Mode</a> == <span class="lit-string">""</span> {
		<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: cannot use -test.coverprofile because test binary was not built with coverage enabled\n"</span>)
		<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Note: Not using toOutputDir.</span><span class="comment">		 This file is for use by cmd/go, not users.</span></div>
<div class="code"><pre><code>		<span class="keyword">var</span> <label for="r292" class="ident">f</label> *<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/types.go.html#line-16" class="ident">File</a>
		<span class="keyword">var</span> <label for="r293" class="ident">err</label> <a href="../../pkg/builtin.html#name-error" class="ident">error</a>
		<span class="keyword">if</span> <label for="r284" class="ident">m</label>.<a href="#line-1346" class="ident">numRun</a> == <span class="lit-number">1</span> {
			<label for="r292" class="ident">f</label>, <label for="r293" class="ident">err</label> = <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-319" class="ident">Create</a>(*<a href="#line-328" class="ident">testlog</a>)
		} <span class="keyword">else</span> {
			<label for="r292" class="ident">f</label>, <label for="r293" class="ident">err</label> = <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-329" class="ident">OpenFile</a>(*<a href="#line-328" class="ident">testlog</a>, <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-74" class="ident">O_WRONLY</a>, <span class="lit-number">0</span>)
			<span class="keyword">if</span> <label for="r293" class="ident">err</label> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
				<label for="r292" class="ident">f</label>.<a href="../os/file.go.html#line-232" class="ident">Seek</a>(<span class="lit-number">0</span>, <a href="../../pkg/io.html" class="ident i5">io</a>.<a href="../io/io.go.html#line-24" class="ident">SeekEnd</a>)
			}
		}
		<span class="keyword">if</span> <label for="r293" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: %s\n"</span>, <label for="r293" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
		<label for="r284" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1363" class="ident">StartTestLog</a>(<label for="r292" class="ident">f</label>)
		<a href="#line-333" class="ident">testlogFile</a> = <label for="r292" class="ident">f</label>
	}
	<span class="keyword">if</span> *<a href="#line-323" class="ident">panicOnExit0</a> {
		<label for="r284" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1360" class="ident">SetPanicOnExit0</a>(<a href="../../pkg/builtin.html#name-true" class="ident">true</a>)
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> after runs after all testing.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r294" class="ident">m</label> *<a href="#line-1337" class="ident">M</a>) <label for="r295" class="ident"><a href="../../use/testing..M.after*f3959.html" class="ident">after</a></label>() {
	<label for="r294" class="ident">m</label>.<a href="#line-1344" class="ident">afterOnce</a>.<a href="../sync/once.go.html#line-42" class="ident">Do</a>(<span class="keyword">func</span>() {
		<label for="r294" class="ident">m</label>.<a href="#line-1605" class="ident">writeProfiles</a>()
	})
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Restore PanicOnExit0 after every run, because we set it to true before</span><span class="comment">	 every run. Otherwise, if m.Run is called multiple times the behavior of</span><span class="comment">	 os.Exit(0) will not be restored after the second run.</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> *<a href="#line-323" class="ident">panicOnExit0</a> {
		<label for="r294" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1360" class="ident">SetPanicOnExit0</a>(<a href="../../pkg/builtin.html#name-false" class="ident">false</a>)
	}
}

<span class="keyword">func</span> (<label for="r296" class="ident">m</label> *<a href="#line-1337" class="ident">M</a>) <label for="r297" class="ident"><a href="../../use/testing..M.writeProfiles*6dec2.html" class="ident">writeProfiles</a></label>() {
	<span class="keyword">if</span> *<a href="#line-328" class="ident">testlog</a> != <span class="lit-string">""</span> {
		<span class="keyword">if</span> <label for="r298" class="ident">err</label> := <label for="r296" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1364" class="ident">StopTestLog</a>(); <label for="r298" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: can't write %s: %s\n"</span>, *<a href="#line-328" class="ident">testlog</a>, <label for="r298" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
		<span class="keyword">if</span> <label for="r299" class="ident">err</label> := <a href="#line-333" class="ident">testlogFile</a>.<a href="../os/file_posix.go.html#line-21" class="ident">Close</a>(); <label for="r299" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: can't write %s: %s\n"</span>, *<a href="#line-328" class="ident">testlog</a>, <label for="r299" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
	}
	<span class="keyword">if</span> *<a href="#line-318" class="ident">cpuProfile</a> != <span class="lit-string">""</span> {
		<label for="r296" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1362" class="ident">StopCPUProfile</a>() <span class="comment">// flushes profile to disk</span>
	}
	<span class="keyword">if</span> *<a href="#line-324" class="ident">traceFile</a> != <span class="lit-string">""</span> {
		<a href="../../pkg/runtime/trace.html" class="ident i9">trace</a>.<a href="../runtime/trace/trace.go.html#line-142" class="ident">Stop</a>() <span class="comment">// flushes trace to disk</span>
	}
	<span class="keyword">if</span> *<a href="#line-316" class="ident">memProfile</a> != <span class="lit-string">""</span> {
		<label for="r300" class="ident">f</label>, <label for="r301" class="ident">err</label> := <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-319" class="ident">Create</a>(<a href="#line-1666" class="ident">toOutputDir</a>(*<a href="#line-316" class="ident">memProfile</a>))
		<span class="keyword">if</span> <label for="r301" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: %s\n"</span>, <label for="r301" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
		<a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/mgc.go.html#line-1126" class="ident">GC</a>() <span class="comment">// materialize all statistics</span>
		<span class="keyword">if</span> <label for="r301" class="ident">err</label> = <label for="r296" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1365" class="ident">WriteProfileTo</a>(<span class="lit-string">"allocs"</span>, <label for="r300" class="ident">f</label>, <span class="lit-number">0</span>); <label for="r301" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: can't write %s: %s\n"</span>, *<a href="#line-316" class="ident">memProfile</a>, <label for="r301" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
		<label for="r300" class="ident">f</label>.<a href="../os/file_posix.go.html#line-21" class="ident">Close</a>()
	}
	<span class="keyword">if</span> *<a href="#line-319" class="ident">blockProfile</a> != <span class="lit-string">""</span> &amp;&amp; *<a href="#line-320" class="ident">blockProfileRate</a> &gt;= <span class="lit-number">0</span> {
		<label for="r302" class="ident">f</label>, <label for="r303" class="ident">err</label> := <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-319" class="ident">Create</a>(<a href="#line-1666" class="ident">toOutputDir</a>(*<a href="#line-319" class="ident">blockProfile</a>))
		<span class="keyword">if</span> <label for="r303" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: %s\n"</span>, <label for="r303" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
		<span class="keyword">if</span> <label for="r303" class="ident">err</label> = <label for="r296" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1365" class="ident">WriteProfileTo</a>(<span class="lit-string">"block"</span>, <label for="r302" class="ident">f</label>, <span class="lit-number">0</span>); <label for="r303" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: can't write %s: %s\n"</span>, *<a href="#line-319" class="ident">blockProfile</a>, <label for="r303" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
		<label for="r302" class="ident">f</label>.<a href="../os/file_posix.go.html#line-21" class="ident">Close</a>()
	}
	<span class="keyword">if</span> *<a href="#line-321" class="ident">mutexProfile</a> != <span class="lit-string">""</span> &amp;&amp; *<a href="#line-322" class="ident">mutexProfileFraction</a> &gt;= <span class="lit-number">0</span> {
		<label for="r304" class="ident">f</label>, <label for="r305" class="ident">err</label> := <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-319" class="ident">Create</a>(<a href="#line-1666" class="ident">toOutputDir</a>(*<a href="#line-321" class="ident">mutexProfile</a>))
		<span class="keyword">if</span> <label for="r305" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: %s\n"</span>, <label for="r305" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
		<span class="keyword">if</span> <label for="r305" class="ident">err</label> = <label for="r296" class="ident">m</label>.<a href="#line-1338" class="ident">deps</a>.<a href="#line-1365" class="ident">WriteProfileTo</a>(<span class="lit-string">"mutex"</span>, <label for="r304" class="ident">f</label>, <span class="lit-number">0</span>); <label for="r305" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: can't write %s: %s\n"</span>, *<a href="#line-321" class="ident">mutexProfile</a>, <label for="r305" class="ident">err</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">2</span>)
		}
		<label for="r304" class="ident">f</label>.<a href="../os/file_posix.go.html#line-21" class="ident">Close</a>()
	}
	<span class="keyword">if</span> <a href="cover.go.html#line-29" class="ident">cover</a>.<a href="cover.go.html#line-35" class="ident">Mode</a> != <span class="lit-string">""</span> {
		<a href="cover.go.html#line-80" class="ident">coverReport</a>()
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> toOutputDir returns the file name relocated, if required, to outputDir.</span><span class="comment"> Simple implementation to avoid pulling in path/filepath.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r306" class="ident"><a href="../../pkg/testing.html#name-toOutputDir" class="ident">toOutputDir</a></label>(<label for="r307" class="ident">path</label> <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) <a href="../../pkg/builtin.html#name-string" class="ident">string</a> {
	<span class="keyword">if</span> *<a href="#line-310" class="ident">outputDir</a> == <span class="lit-string">""</span> || <label for="r307" class="ident">path</label> == <span class="lit-string">""</span> {
		<span class="keyword">return</span> <label for="r307" class="ident">path</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> On Windows, it's clumsy, but we can be almost always correct</span><span class="comment">	 by just looking for a drive letter and a colon.</span><span class="comment">	 Absolute paths always have a drive letter (ignoring UNC).</span><span class="comment">	 Problem: if path == "C:A" and outputdir == "C:\Go" it's unclear</span><span class="comment">	 what to do, but even then path/filepath doesn't help.</span><span class="comment">	 TODO: Worth doing better? Probably not, because we're here only</span><span class="comment">	 under the management of go test.</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/extern.go.html#line-253" class="ident">GOOS</a> == <span class="lit-string">"windows"</span> &amp;&amp; <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r307" class="ident">path</label>) &gt;= <span class="lit-number">2</span> {
		<label for="r308" class="ident">letter</label>, <label for="r309" class="ident">colon</label> := <label for="r307" class="ident">path</label>[<span class="lit-number">0</span>], <label for="r307" class="ident">path</label>[<span class="lit-number">1</span>]
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> If path starts with a drive letter we're stuck with it regardless.</span></div>
<div class="code"><pre><code>			<span class="keyword">return</span> <label for="r307" class="ident">path</label>
		}
	}
	<span class="keyword">if</span> <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/path_unix.go.html#line-15" class="ident">IsPathSeparator</a>(<label for="r307" class="ident">path</label>[<span class="lit-number">0</span>]) {
		<span class="keyword">return</span> <label for="r307" class="ident">path</label>
	}
	<span class="keyword">return</span> <a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<span class="lit-string">"%s%c%s"</span>, *<a href="#line-310" class="ident">outputDir</a>, <a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/path_unix.go.html#line-10" class="ident">PathSeparator</a>, <label for="r307" class="ident">path</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> startAlarm starts an alarm if requested.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r310" class="ident">m</label> *<a href="#line-1337" class="ident">M</a>) <label for="r311" class="ident"><a href="../../use/testing..M.startAlarm*c0492.html" class="ident">startAlarm</a></label>() <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-127" class="ident">Time</a> {
	<span class="keyword">if</span> *<a href="#line-325" class="ident">timeout</a> &lt;= <span class="lit-number">0</span> {
		<span class="keyword">return</span> <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-127" class="ident">Time</a>{}
	}

	<label for="r312" class="ident">deadline</label> := <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/time.go.html#line-1066" class="ident">Now</a>().<a href="../time/time.go.html#line-813" class="ident">Add</a>(*<a href="#line-325" class="ident">timeout</a>)
	<label for="r310" class="ident">m</label>.<a href="#line-1343" class="ident">timer</a> = <a href="../../pkg/time.html" class="ident i14">time</a>.<a href="../time/sleep.go.html#line-167" class="ident">AfterFunc</a>(*<a href="#line-325" class="ident">timeout</a>, <span class="keyword">func</span>() {
		<label for="r310" class="ident">m</label>.<a href="#line-1592" class="ident">after</a>()
		<a href="../../pkg/runtime/debug.html" class="ident i8">debug</a>.<a href="../runtime/debug/garbage.go.html#line-175" class="ident">SetTraceback</a>(<span class="lit-string">"all"</span>)
		<a href="../../pkg/builtin.html#name-panic" class="ident">panic</a>(<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<span class="lit-string">"test timed out after %v"</span>, *<a href="#line-325" class="ident">timeout</a>))
	})
	<span class="keyword">return</span> <label for="r312" class="ident">deadline</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> stopAlarm turns off the alarm.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r313" class="ident">m</label> *<a href="#line-1337" class="ident">M</a>) <label for="r314" class="ident"><a href="../../use/testing..M.stopAlarm*5874a.html" class="ident">stopAlarm</a></label>() {
	<span class="keyword">if</span> *<a href="#line-325" class="ident">timeout</a> &gt; <span class="lit-number">0</span> {
		<label for="r313" class="ident">m</label>.<a href="#line-1343" class="ident">timer</a>.<a href="../time/sleep.go.html#line-77" class="ident">Stop</a>()
	}
}

<span class="keyword">func</span> <label for="r315" class="ident"><a href="../../pkg/testing.html#name-parseCpuList" class="ident">parseCpuList</a></label>() {
	<span class="keyword">for</span> <label for="r316" class="ident">_</label>, <label for="r317" class="ident">val</label> := <span class="keyword">range</span> <a href="../../pkg/strings.html" class="ident i11">strings</a>.<a href="../strings/strings.go.html#line-299" class="ident">Split</a>(*<a href="#line-326" class="ident">cpuListStr</a>, <span class="lit-string">","</span>) {
		<label for="r317" class="ident">val</label> = <a href="../../pkg/strings.html" class="ident i11">strings</a>.<a href="../strings/strings.go.html#line-867" class="ident">TrimSpace</a>(<label for="r317" class="ident">val</label>)
		<span class="keyword">if</span> <label for="r317" class="ident">val</label> == <span class="lit-string">""</span> {
			<span class="keyword">continue</span>
		}
		<label for="r318" class="ident">cpu</label>, <label for="r319" class="ident">err</label> := <a href="../../pkg/strconv.html" class="ident i10">strconv</a>.<a href="../strconv/atoi.go.html#line-224" class="ident">Atoi</a>(<label for="r317" class="ident">val</label>)
		<span class="keyword">if</span> <label for="r319" class="ident">err</label> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> || <label for="r318" class="ident">cpu</label> &lt;= <span class="lit-number">0</span> {
			<a href="../../pkg/fmt.html" class="ident i3">fmt</a>.<a href="../fmt/print.go.html#line-202" class="ident">Fprintf</a>(<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/file.go.html#line-66" class="ident">Stderr</a>, <span class="lit-string">"testing: invalid value %q for -test.cpu\n"</span>, <label for="r317" class="ident">val</label>)
			<a href="../../pkg/os.html" class="ident i6">os</a>.<a href="../os/proc.go.html#line-62" class="ident">Exit</a>(<span class="lit-number">1</span>)
		}
		<a href="#line-332" class="ident">cpuList</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<a href="#line-332" class="ident">cpuList</a>, <label for="r318" class="ident">cpu</label>)
	}
	<span class="keyword">if</span> <a href="#line-332" class="ident">cpuList</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<a href="#line-332" class="ident">cpuList</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<a href="#line-332" class="ident">cpuList</a>, <a href="../../pkg/runtime.html" class="ident i7">runtime</a>.<a href="../runtime/debug.go.html#line-16" class="ident">GOMAXPROCS</a>(-<span class="lit-number">1</span>))
	}
}

<span class="keyword">func</span> <label for="r320" class="ident"><a href="../../pkg/testing.html#name-shouldFailFast" class="ident">shouldFailFast</a></label>() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<span class="keyword">return</span> *<a href="#line-309" class="ident">failFast</a> &amp;&amp; <a href="../../pkg/sync/atomic.html" class="ident i13">atomic</a>.<a href="../sync/atomic/doc.go.html#line-117" class="ident">LoadUint32</a>(&amp;<a href="#line-335" class="ident">numFailed</a>) &gt; <span class="lit-number">0</span>
</code></pre></div></div>

</div><pre id="footer">
<table><tr><td><img src="../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>