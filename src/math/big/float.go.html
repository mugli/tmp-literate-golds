<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: float.go in package math/big</title>
<link href="../../../css/lightLiterate-v0.3.2-preview.css" rel="stylesheet">
<script src="../../../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	float.go

<span class="title">Belonging Package</span>
	<a href="../../../pkg/math/big.html">math/big</a>
</code></pre>
<style>input[type=radio] {display: none;}
input[id=r0]:checked ~pre label[for=r0],
input[id=r1]:checked ~pre label[for=r1],
input[id=r2]:checked ~pre label[for=r2],
input[id=r3]:checked ~pre label[for=r3],
input[id=r4]:checked ~pre label[for=r4],
input[id=r5]:checked ~pre label[for=r5],
input[id=r6]:checked ~pre label[for=r6],
input[id=r7]:checked ~pre label[for=r7],
input[id=r8]:checked ~pre label[for=r8],
input[id=r9]:checked ~pre label[for=r9],
input[id=r10]:checked ~pre label[for=r10],
input[id=r11]:checked ~pre label[for=r11],
input[id=r12]:checked ~pre label[for=r12],
input[id=r13]:checked ~pre label[for=r13],
input[id=r14]:checked ~pre label[for=r14],
input[id=r15]:checked ~pre label[for=r15],
input[id=r16]:checked ~pre label[for=r16],
input[id=r17]:checked ~pre label[for=r17],
input[id=r18]:checked ~pre label[for=r18],
input[id=r19]:checked ~pre label[for=r19],
input[id=r20]:checked ~pre label[for=r20],
input[id=r21]:checked ~pre label[for=r21],
input[id=r22]:checked ~pre label[for=r22],
input[id=r23]:checked ~pre label[for=r23],
input[id=r24]:checked ~pre label[for=r24],
input[id=r25]:checked ~pre label[for=r25],
input[id=r26]:checked ~pre label[for=r26],
input[id=r27]:checked ~pre label[for=r27],
input[id=r28]:checked ~pre label[for=r28],
input[id=r29]:checked ~pre label[for=r29],
input[id=r30]:checked ~pre label[for=r30],
input[id=r31]:checked ~pre label[for=r31],
input[id=r32]:checked ~pre label[for=r32],
input[id=r33]:checked ~pre label[for=r33],
input[id=r34]:checked ~pre label[for=r34],
input[id=r35]:checked ~pre label[for=r35],
input[id=r36]:checked ~pre label[for=r36],
input[id=r37]:checked ~pre label[for=r37],
input[id=r38]:checked ~pre label[for=r38],
input[id=r39]:checked ~pre label[for=r39],
input[id=r40]:checked ~pre label[for=r40],
input[id=r41]:checked ~pre label[for=r41],
input[id=r42]:checked ~pre label[for=r42],
input[id=r43]:checked ~pre label[for=r43],
input[id=r44]:checked ~pre label[for=r44],
input[id=r45]:checked ~pre label[for=r45],
input[id=r46]:checked ~pre label[for=r46],
input[id=r47]:checked ~pre label[for=r47],
input[id=r48]:checked ~pre label[for=r48],
input[id=r49]:checked ~pre label[for=r49],
input[id=r50]:checked ~pre label[for=r50],
input[id=r51]:checked ~pre label[for=r51],
input[id=r52]:checked ~pre label[for=r52],
input[id=r53]:checked ~pre label[for=r53],
input[id=r54]:checked ~pre label[for=r54],
input[id=r55]:checked ~pre label[for=r55],
input[id=r56]:checked ~pre label[for=r56],
input[id=r57]:checked ~pre label[for=r57],
input[id=r58]:checked ~pre label[for=r58],
input[id=r59]:checked ~pre label[for=r59],
input[id=r60]:checked ~pre label[for=r60],
input[id=r61]:checked ~pre label[for=r61],
input[id=r62]:checked ~pre label[for=r62],
input[id=r63]:checked ~pre label[for=r63],
input[id=r64]:checked ~pre label[for=r64],
input[id=r65]:checked ~pre label[for=r65],
input[id=r66]:checked ~pre label[for=r66],
input[id=r67]:checked ~pre label[for=r67],
input[id=r68]:checked ~pre label[for=r68],
input[id=r69]:checked ~pre label[for=r69],
input[id=r70]:checked ~pre label[for=r70],
input[id=r71]:checked ~pre label[for=r71],
input[id=r72]:checked ~pre label[for=r72],
input[id=r73]:checked ~pre label[for=r73],
input[id=r74]:checked ~pre label[for=r74],
input[id=r75]:checked ~pre label[for=r75],
input[id=r76]:checked ~pre label[for=r76],
input[id=r77]:checked ~pre label[for=r77],
input[id=r78]:checked ~pre label[for=r78],
input[id=r79]:checked ~pre label[for=r79],
input[id=r80]:checked ~pre label[for=r80],
input[id=r81]:checked ~pre label[for=r81],
input[id=r82]:checked ~pre label[for=r82],
input[id=r83]:checked ~pre label[for=r83],
input[id=r84]:checked ~pre label[for=r84],
input[id=r85]:checked ~pre label[for=r85],
input[id=r86]:checked ~pre label[for=r86],
input[id=r87]:checked ~pre label[for=r87],
input[id=r88]:checked ~pre label[for=r88],
input[id=r89]:checked ~pre label[for=r89],
input[id=r90]:checked ~pre label[for=r90],
input[id=r91]:checked ~pre label[for=r91],
input[id=r92]:checked ~pre label[for=r92],
input[id=r93]:checked ~pre label[for=r93],
input[id=r94]:checked ~pre label[for=r94],
input[id=r95]:checked ~pre label[for=r95],
input[id=r96]:checked ~pre label[for=r96],
input[id=r97]:checked ~pre label[for=r97],
input[id=r98]:checked ~pre label[for=r98],
input[id=r99]:checked ~pre label[for=r99],
input[id=r100]:checked ~pre label[for=r100],
input[id=r101]:checked ~pre label[for=r101],
input[id=r102]:checked ~pre label[for=r102],
input[id=r103]:checked ~pre label[for=r103],
input[id=r104]:checked ~pre label[for=r104],
input[id=r105]:checked ~pre label[for=r105],
input[id=r106]:checked ~pre label[for=r106],
input[id=r107]:checked ~pre label[for=r107],
input[id=r108]:checked ~pre label[for=r108],
input[id=r109]:checked ~pre label[for=r109],
input[id=r110]:checked ~pre label[for=r110],
input[id=r111]:checked ~pre label[for=r111],
input[id=r112]:checked ~pre label[for=r112],
input[id=r113]:checked ~pre label[for=r113],
input[id=r114]:checked ~pre label[for=r114],
input[id=r115]:checked ~pre label[for=r115],
input[id=r116]:checked ~pre label[for=r116],
input[id=r117]:checked ~pre label[for=r117],
input[id=r118]:checked ~pre label[for=r118],
input[id=r119]:checked ~pre label[for=r119],
input[id=r120]:checked ~pre label[for=r120],
input[id=r121]:checked ~pre label[for=r121],
input[id=r122]:checked ~pre label[for=r122],
input[id=r123]:checked ~pre label[for=r123],
input[id=r124]:checked ~pre label[for=r124],
input[id=r125]:checked ~pre label[for=r125],
input[id=r126]:checked ~pre label[for=r126],
input[id=r127]:checked ~pre label[for=r127],
input[id=r128]:checked ~pre label[for=r128],
input[id=r129]:checked ~pre label[for=r129],
input[id=r130]:checked ~pre label[for=r130],
input[id=r131]:checked ~pre label[for=r131],
input[id=r132]:checked ~pre label[for=r132],
input[id=r133]:checked ~pre label[for=r133],
input[id=r134]:checked ~pre label[for=r134],
input[id=r135]:checked ~pre label[for=r135],
input[id=r136]:checked ~pre label[for=r136],
input[id=r137]:checked ~pre label[for=r137],
input[id=r138]:checked ~pre label[for=r138],
input[id=r139]:checked ~pre label[for=r139],
input[id=r140]:checked ~pre label[for=r140],
input[id=r141]:checked ~pre label[for=r141],
input[id=r142]:checked ~pre label[for=r142],
input[id=r143]:checked ~pre label[for=r143],
input[id=r144]:checked ~pre label[for=r144],
input[id=r145]:checked ~pre label[for=r145],
input[id=r146]:checked ~pre label[for=r146],
input[id=r147]:checked ~pre label[for=r147],
input[id=r148]:checked ~pre label[for=r148],
input[id=r149]:checked ~pre label[for=r149],
input[id=r150]:checked ~pre label[for=r150],
input[id=r151]:checked ~pre label[for=r151],
input[id=r152]:checked ~pre label[for=r152],
input[id=r153]:checked ~pre label[for=r153],
input[id=r154]:checked ~pre label[for=r154],
input[id=r155]:checked ~pre label[for=r155],
input[id=r156]:checked ~pre label[for=r156],
input[id=r157]:checked ~pre label[for=r157],
input[id=r158]:checked ~pre label[for=r158],
input[id=r159]:checked ~pre label[for=r159],
input[id=r160]:checked ~pre label[for=r160],
input[id=r161]:checked ~pre label[for=r161],
input[id=r162]:checked ~pre label[for=r162],
input[id=r163]:checked ~pre label[for=r163],
input[id=r164]:checked ~pre label[for=r164],
input[id=r165]:checked ~pre label[for=r165],
input[id=r166]:checked ~pre label[for=r166],
input[id=r167]:checked ~pre label[for=r167],
input[id=r168]:checked ~pre label[for=r168],
input[id=r169]:checked ~pre label[for=r169],
input[id=r170]:checked ~pre label[for=r170],
input[id=r171]:checked ~pre label[for=r171],
input[id=r172]:checked ~pre label[for=r172],
input[id=r173]:checked ~pre label[for=r173],
input[id=r174]:checked ~pre label[for=r174],
input[id=r175]:checked ~pre label[for=r175],
input[id=r176]:checked ~pre label[for=r176],
input[id=r177]:checked ~pre label[for=r177],
input[id=r178]:checked ~pre label[for=r178],
input[id=r179]:checked ~pre label[for=r179],
input[id=r180]:checked ~pre label[for=r180],
input[id=r181]:checked ~pre label[for=r181],
input[id=r182]:checked ~pre label[for=r182],
input[id=r183]:checked ~pre label[for=r183],
input[id=r184]:checked ~pre label[for=r184],
input[id=r185]:checked ~pre label[for=r185],
input[id=r186]:checked ~pre label[for=r186],
input[id=r187]:checked ~pre label[for=r187],
input[id=r188]:checked ~pre label[for=r188],
input[id=r189]:checked ~pre label[for=r189],
input[id=r190]:checked ~pre label[for=r190],
input[id=r191]:checked ~pre label[for=r191],
input[id=r192]:checked ~pre label[for=r192],
input[id=r193]:checked ~pre label[for=r193],
input[id=r194]:checked ~pre label[for=r194],
input[id=r195]:checked ~pre label[for=r195],
input[id=r196]:checked ~pre label[for=r196],
input[id=r197]:checked ~pre label[for=r197],
input[id=r198]:checked ~pre label[for=r198],
input[id=r199]:checked ~pre label[for=r199],
input[id=r200]:checked ~pre label[for=r200],
input[id=r201]:checked ~pre label[for=r201],
input[id=r202]:checked ~pre label[for=r202],
input[id=r203]:checked ~pre label[for=r203],
input[id=r204]:checked ~pre label[for=r204],
input[id=r205]:checked ~pre label[for=r205],
input[id=r206]:checked ~pre label[for=r206],
input[id=r207]:checked ~pre label[for=r207],
input[id=r208]:checked ~pre label[for=r208],
input[id=r209]:checked ~pre label[for=r209],
input[id=r210]:checked ~pre label[for=r210],
input[id=r211]:checked ~pre label[for=r211],
input[id=r212]:checked ~pre label[for=r212],
input[id=r213]:checked ~pre label[for=r213],
input[id=r214]:checked ~pre label[for=r214],
input[id=r215]:checked ~pre label[for=r215],
input[id=r216]:checked ~pre label[for=r216],
input[id=r217]:checked ~pre label[for=r217],
input[id=r218]:checked ~pre label[for=r218],
input[id=r219]:checked ~pre label[for=r219],
input[id=r220]:checked ~pre label[for=r220],
input[id=r221]:checked ~pre label[for=r221],
input[id=r222]:checked ~pre label[for=r222],
input[id=r223]:checked ~pre label[for=r223],
input[id=r224]:checked ~pre label[for=r224],
input[id=r225]:checked ~pre label[for=r225],
input[id=r226]:checked ~pre label[for=r226],
input[id=r227]:checked ~pre label[for=r227],
input[id=r228]:checked ~pre label[for=r228],
input[id=r229]:checked ~pre label[for=r229],
input[id=r230]:checked ~pre label[for=r230],
input[id=r231]:checked ~pre label[for=r231],
input[id=r232]:checked ~pre label[for=r232],
input[id=r233]:checked ~pre label[for=r233]
{background: #226; color: #ff8;}
input[id=i0]:checked ~pre .i0,
input[id=i1]:checked ~pre .i1,
input[id=i2]:checked ~pre .i2
{background: brown; color: #eed;}
</style><input id="r0" type="radio" name="g"/>
<input id="r1" type="radio" name="g"/>
<input id="r2" type="radio" name="g"/>
<input id="r3" type="radio" name="g"/>
<input id="r4" type="radio" name="g"/>
<input id="r5" type="radio" name="g"/>
<input id="r6" type="radio" name="g"/>
<input id="r7" type="radio" name="g"/>
<input id="r8" type="radio" name="g"/>
<input id="r9" type="radio" name="g"/>
<input id="r10" type="radio" name="g"/>
<input id="r11" type="radio" name="g"/>
<input id="r12" type="radio" name="g"/>
<input id="r13" type="radio" name="g"/>
<input id="r14" type="radio" name="g"/>
<input id="r15" type="radio" name="g"/>
<input id="r16" type="radio" name="g"/>
<input id="r17" type="radio" name="g"/>
<input id="r18" type="radio" name="g"/>
<input id="r19" type="radio" name="g"/>
<input id="r20" type="radio" name="g"/>
<input id="r21" type="radio" name="g"/>
<input id="r22" type="radio" name="g"/>
<input id="r23" type="radio" name="g"/>
<input id="r24" type="radio" name="g"/>
<input id="r25" type="radio" name="g"/>
<input id="r26" type="radio" name="g"/>
<input id="r27" type="radio" name="g"/>
<input id="r28" type="radio" name="g"/>
<input id="r29" type="radio" name="g"/>
<input id="r30" type="radio" name="g"/>
<input id="r31" type="radio" name="g"/>
<input id="r32" type="radio" name="g"/>
<input id="r33" type="radio" name="g"/>
<input id="r34" type="radio" name="g"/>
<input id="r35" type="radio" name="g"/>
<input id="r36" type="radio" name="g"/>
<input id="r37" type="radio" name="g"/>
<input id="r38" type="radio" name="g"/>
<input id="r39" type="radio" name="g"/>
<input id="r40" type="radio" name="g"/>
<input id="r41" type="radio" name="g"/>
<input id="r42" type="radio" name="g"/>
<input id="r43" type="radio" name="g"/>
<input id="r44" type="radio" name="g"/>
<input id="r45" type="radio" name="g"/>
<input id="r46" type="radio" name="g"/>
<input id="r47" type="radio" name="g"/>
<input id="r48" type="radio" name="g"/>
<input id="r49" type="radio" name="g"/>
<input id="r50" type="radio" name="g"/>
<input id="r51" type="radio" name="g"/>
<input id="r52" type="radio" name="g"/>
<input id="r53" type="radio" name="g"/>
<input id="r54" type="radio" name="g"/>
<input id="r55" type="radio" name="g"/>
<input id="r56" type="radio" name="g"/>
<input id="r57" type="radio" name="g"/>
<input id="r58" type="radio" name="g"/>
<input id="r59" type="radio" name="g"/>
<input id="r60" type="radio" name="g"/>
<input id="r61" type="radio" name="g"/>
<input id="r62" type="radio" name="g"/>
<input id="r63" type="radio" name="g"/>
<input id="r64" type="radio" name="g"/>
<input id="r65" type="radio" name="g"/>
<input id="r66" type="radio" name="g"/>
<input id="r67" type="radio" name="g"/>
<input id="r68" type="radio" name="g"/>
<input id="r69" type="radio" name="g"/>
<input id="r70" type="radio" name="g"/>
<input id="r71" type="radio" name="g"/>
<input id="r72" type="radio" name="g"/>
<input id="r73" type="radio" name="g"/>
<input id="r74" type="radio" name="g"/>
<input id="r75" type="radio" name="g"/>
<input id="r76" type="radio" name="g"/>
<input id="r77" type="radio" name="g"/>
<input id="r78" type="radio" name="g"/>
<input id="r79" type="radio" name="g"/>
<input id="r80" type="radio" name="g"/>
<input id="r81" type="radio" name="g"/>
<input id="r82" type="radio" name="g"/>
<input id="r83" type="radio" name="g"/>
<input id="r84" type="radio" name="g"/>
<input id="r85" type="radio" name="g"/>
<input id="r86" type="radio" name="g"/>
<input id="r87" type="radio" name="g"/>
<input id="r88" type="radio" name="g"/>
<input id="r89" type="radio" name="g"/>
<input id="r90" type="radio" name="g"/>
<input id="r91" type="radio" name="g"/>
<input id="r92" type="radio" name="g"/>
<input id="r93" type="radio" name="g"/>
<input id="r94" type="radio" name="g"/>
<input id="r95" type="radio" name="g"/>
<input id="r96" type="radio" name="g"/>
<input id="r97" type="radio" name="g"/>
<input id="r98" type="radio" name="g"/>
<input id="r99" type="radio" name="g"/>
<input id="r100" type="radio" name="g"/>
<input id="r101" type="radio" name="g"/>
<input id="r102" type="radio" name="g"/>
<input id="r103" type="radio" name="g"/>
<input id="r104" type="radio" name="g"/>
<input id="r105" type="radio" name="g"/>
<input id="r106" type="radio" name="g"/>
<input id="r107" type="radio" name="g"/>
<input id="r108" type="radio" name="g"/>
<input id="r109" type="radio" name="g"/>
<input id="r110" type="radio" name="g"/>
<input id="r111" type="radio" name="g"/>
<input id="r112" type="radio" name="g"/>
<input id="r113" type="radio" name="g"/>
<input id="r114" type="radio" name="g"/>
<input id="r115" type="radio" name="g"/>
<input id="r116" type="radio" name="g"/>
<input id="r117" type="radio" name="g"/>
<input id="r118" type="radio" name="g"/>
<input id="r119" type="radio" name="g"/>
<input id="r120" type="radio" name="g"/>
<input id="r121" type="radio" name="g"/>
<input id="r122" type="radio" name="g"/>
<input id="r123" type="radio" name="g"/>
<input id="r124" type="radio" name="g"/>
<input id="r125" type="radio" name="g"/>
<input id="r126" type="radio" name="g"/>
<input id="r127" type="radio" name="g"/>
<input id="r128" type="radio" name="g"/>
<input id="r129" type="radio" name="g"/>
<input id="r130" type="radio" name="g"/>
<input id="r131" type="radio" name="g"/>
<input id="r132" type="radio" name="g"/>
<input id="r133" type="radio" name="g"/>
<input id="r134" type="radio" name="g"/>
<input id="r135" type="radio" name="g"/>
<input id="r136" type="radio" name="g"/>
<input id="r137" type="radio" name="g"/>
<input id="r138" type="radio" name="g"/>
<input id="r139" type="radio" name="g"/>
<input id="r140" type="radio" name="g"/>
<input id="r141" type="radio" name="g"/>
<input id="r142" type="radio" name="g"/>
<input id="r143" type="radio" name="g"/>
<input id="r144" type="radio" name="g"/>
<input id="r145" type="radio" name="g"/>
<input id="r146" type="radio" name="g"/>
<input id="r147" type="radio" name="g"/>
<input id="r148" type="radio" name="g"/>
<input id="r149" type="radio" name="g"/>
<input id="r150" type="radio" name="g"/>
<input id="r151" type="radio" name="g"/>
<input id="r152" type="radio" name="g"/>
<input id="r153" type="radio" name="g"/>
<input id="r154" type="radio" name="g"/>
<input id="r155" type="radio" name="g"/>
<input id="r156" type="radio" name="g"/>
<input id="r157" type="radio" name="g"/>
<input id="r158" type="radio" name="g"/>
<input id="r159" type="radio" name="g"/>
<input id="r160" type="radio" name="g"/>
<input id="r161" type="radio" name="g"/>
<input id="r162" type="radio" name="g"/>
<input id="r163" type="radio" name="g"/>
<input id="r164" type="radio" name="g"/>
<input id="r165" type="radio" name="g"/>
<input id="r166" type="radio" name="g"/>
<input id="r167" type="radio" name="g"/>
<input id="r168" type="radio" name="g"/>
<input id="r169" type="radio" name="g"/>
<input id="r170" type="radio" name="g"/>
<input id="r171" type="radio" name="g"/>
<input id="r172" type="radio" name="g"/>
<input id="r173" type="radio" name="g"/>
<input id="r174" type="radio" name="g"/>
<input id="r175" type="radio" name="g"/>
<input id="r176" type="radio" name="g"/>
<input id="r177" type="radio" name="g"/>
<input id="r178" type="radio" name="g"/>
<input id="r179" type="radio" name="g"/>
<input id="r180" type="radio" name="g"/>
<input id="r181" type="radio" name="g"/>
<input id="r182" type="radio" name="g"/>
<input id="r183" type="radio" name="g"/>
<input id="r184" type="radio" name="g"/>
<input id="r185" type="radio" name="g"/>
<input id="r186" type="radio" name="g"/>
<input id="r187" type="radio" name="g"/>
<input id="r188" type="radio" name="g"/>
<input id="r189" type="radio" name="g"/>
<input id="r190" type="radio" name="g"/>
<input id="r191" type="radio" name="g"/>
<input id="r192" type="radio" name="g"/>
<input id="r193" type="radio" name="g"/>
<input id="r194" type="radio" name="g"/>
<input id="r195" type="radio" name="g"/>
<input id="r196" type="radio" name="g"/>
<input id="r197" type="radio" name="g"/>
<input id="r198" type="radio" name="g"/>
<input id="r199" type="radio" name="g"/>
<input id="r200" type="radio" name="g"/>
<input id="r201" type="radio" name="g"/>
<input id="r202" type="radio" name="g"/>
<input id="r203" type="radio" name="g"/>
<input id="r204" type="radio" name="g"/>
<input id="r205" type="radio" name="g"/>
<input id="r206" type="radio" name="g"/>
<input id="r207" type="radio" name="g"/>
<input id="r208" type="radio" name="g"/>
<input id="r209" type="radio" name="g"/>
<input id="r210" type="radio" name="g"/>
<input id="r211" type="radio" name="g"/>
<input id="r212" type="radio" name="g"/>
<input id="r213" type="radio" name="g"/>
<input id="r214" type="radio" name="g"/>
<input id="r215" type="radio" name="g"/>
<input id="r216" type="radio" name="g"/>
<input id="r217" type="radio" name="g"/>
<input id="r218" type="radio" name="g"/>
<input id="r219" type="radio" name="g"/>
<input id="r220" type="radio" name="g"/>
<input id="r221" type="radio" name="g"/>
<input id="r222" type="radio" name="g"/>
<input id="r223" type="radio" name="g"/>
<input id="r224" type="radio" name="g"/>
<input id="r225" type="radio" name="g"/>
<input id="r226" type="radio" name="g"/>
<input id="r227" type="radio" name="g"/>
<input id="r228" type="radio" name="g"/>
<input id="r229" type="radio" name="g"/>
<input id="r230" type="radio" name="g"/>
<input id="r231" type="radio" name="g"/>
<input id="r232" type="radio" name="g"/>
<input id="r233" type="radio" name="g"/>
<input id="i0" type="radio" name="i"/>
<input id="i1" type="radio" name="i"/>
<input id="i2" type="radio" name="i"/>
<div id="container"><div class="section">
<div class="doc">
<span class="comment"> Copyright 2014 The Go Authors. All rights reserved.</span><span class="comment"> Use of this source code is governed by a BSD-style</span><span class="comment"> license that can be found in the LICENSE file.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> This file implements multi-precision floating-point numbers.</span><span class="comment"> Like in the GNU MPFR library (https://www.mpfr.org/), operands</span><span class="comment"> can be of mixed precision. Unlike MPFR, the rounding mode is</span><span class="comment"> not specified with each operation, but with each operand. The</span><span class="comment"> rounding mode of the result operand determines the rounding</span><span class="comment"> mode of an operation. This is a from-scratch implementation.</span></div>
<div class="code"><pre><code>
<span class="keyword">package</span> big

<span class="keyword">import</span> (
	<label for="i0"><span class="lit-string i0">"fmt"</span></label>
	<label for="i1"><span class="lit-string i1">"math"</span></label>
	<label for="i2"><span class="lit-string i2">"math/bits"</span></label>
)

<span class="keyword">const</span> <a href="../../../pkg/math/big.html#name-debugFloat" class="ident">debugFloat</a> = <a href="../../../pkg/builtin.html#name-false" class="ident">false</a> <span class="comment">// enable for debugging</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> A nonzero finite Float represents a multi-precision floating point number</span><span class="comment"></span><span class="comment">   sign × mantissa × 2**exponent</span><span class="comment"></span><span class="comment"> with 0.5 &lt;= mantissa &lt; 1.0, and MinExp &lt;= exponent &lt;= MaxExp.</span><span class="comment"> A Float may also be zero (+0, -0) or infinite (+Inf, -Inf).</span><span class="comment"> All Floats are ordered, and the ordering of two Floats x and y</span><span class="comment"> is defined by x.Cmp(y).</span><span class="comment"></span><span class="comment"> Each Float value also has a precision, rounding mode, and accuracy.</span><span class="comment"> The precision is the maximum number of mantissa bits available to</span><span class="comment"> represent the value. The rounding mode specifies how a result should</span><span class="comment"> be rounded to fit into the mantissa bits, and accuracy describes the</span><span class="comment"> rounding error with respect to the exact result.</span><span class="comment"></span><span class="comment"> Unless specified otherwise, all operations (including setters) that</span><span class="comment"> specify a *Float variable for the result (usually via the receiver</span><span class="comment"> with the exception of MantExp), round the numeric result according</span><span class="comment"> to the precision and rounding mode of the result variable.</span><span class="comment"></span><span class="comment"> If the provided result precision is 0 (see below), it is set to the</span><span class="comment"> precision of the argument with the largest precision value before any</span><span class="comment"> rounding takes place, and the rounding mode remains unchanged. Thus,</span><span class="comment"> uninitialized Floats provided as result arguments will have their</span><span class="comment"> precision set to a reasonable value determined by the operands, and</span><span class="comment"> their mode is the zero value for RoundingMode (ToNearestEven).</span><span class="comment"></span><span class="comment"> By setting the desired precision to 24 or 53 and using matching rounding</span><span class="comment"> mode (typically ToNearestEven), Float operations produce the same results</span><span class="comment"> as the corresponding float32 or float64 IEEE-754 arithmetic for operands</span><span class="comment"> that correspond to normal (i.e., not denormal) float32 or float64 numbers.</span><span class="comment"> Exponent underflow and overflow lead to a 0 or an Infinity for different</span><span class="comment"> values than IEEE-754 because Float exponents have a much larger range.</span><span class="comment"></span><span class="comment"> The zero (uninitialized) value for a Float is ready to use and represents</span><span class="comment"> the number +0.0 exactly, with precision 0 and rounding mode ToNearestEven.</span><span class="comment"></span><span class="comment"> Operations always take pointer arguments (*Float) rather</span><span class="comment"> than Float values, and each unique Float value requires</span><span class="comment"> its own unique *Float pointer. To "copy" a Float value,</span><span class="comment"> an existing (or newly allocated) Float must be set to</span><span class="comment"> a new value using the Float.Set method; shallow copies</span><span class="comment"> of Floats are not supported and may lead to errors.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../../pkg/math/big.html#name-Float" class="ident">Float</a> <span class="keyword">struct</span> {
	<a href="../../../use/math/big..Float.prec*da4a0.html" class="ident">prec</a> <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>
	<a href="../../../use/math/big..Float.mode*e642b.html" class="ident">mode</a> <a href="#line-132" class="ident">RoundingMode</a>
	<a href="../../../use/math/big..Float.acc*41432.html" class="ident">acc</a>  <a href="#line-148" class="ident">Accuracy</a>
	<a href="../../../use/math/big..Float.form*07397.html" class="ident">form</a> <a href="#line-120" class="ident">form</a>
	<a href="../../../use/math/big..Float.neg*fa34f.html" class="ident">neg</a>  <a href="../../../pkg/builtin.html#name-bool" class="ident">bool</a>
	<a href="../../../use/math/big..Float.mant*0b88a.html" class="ident">mant</a> <a href="nat.go.html#line-35" class="ident">nat</a>
	<a href="../../../use/math/big..Float.exp*dd7a9.html" class="ident">exp</a>  <a href="../../../pkg/builtin.html#name-int32" class="ident">int32</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> An ErrNaN panic is raised by a Float operation that would lead to</span><span class="comment"> a NaN under IEEE-754 rules. An ErrNaN implements the error interface.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../../pkg/math/big.html#name-ErrNaN" class="ident">ErrNaN</a> <span class="keyword">struct</span> {
	<a href="../../../use/math/big..ErrNaN.msg*e46b3.html" class="ident">msg</a> <a href="../../../pkg/builtin.html#name-string" class="ident">string</a>
}

<span class="keyword">func</span> (<label for="r0" class="ident">err</label> <a href="#line-77" class="ident">ErrNaN</a>) <label for="r1" class="ident"><a href="../../../use/math/big..ErrNaN.Error.html" class="ident">Error</a></label>() <a href="../../../pkg/builtin.html#name-string" class="ident">string</a> {
	<span class="keyword">return</span> <label for="r0" class="ident">err</label>.<a href="#line-78" class="ident">msg</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> NewFloat allocates and returns a new Float set to x,</span><span class="comment"> with precision 53 and rounding mode ToNearestEven.</span><span class="comment"> NewFloat panics with ErrNaN if x is a NaN.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r2" class="ident"><a href="../../../pkg/math/big.html#name-NewFloat" class="ident">NewFloat</a></label>(<label for="r3" class="ident">x</label> <a href="../../../pkg/builtin.html#name-float64" class="ident">float64</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-34" class="ident">IsNaN</a>(<label for="r3" class="ident">x</label>) {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<a href="#line-77" class="ident">ErrNaN</a>{<span class="lit-string">"NewFloat(NaN)"</span>})
	}
	<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-new" class="ident">new</a>(<a href="#line-65" class="ident">Float</a>).<a href="#line-544" class="ident">SetFloat64</a>(<label for="r3" class="ident">x</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Exponent and precision limits.</span></div>
<div class="code"><pre><code><span class="keyword">const</span> (
	<a href="../../../pkg/math/big.html#name-MaxExp" class="ident">MaxExp</a>  = <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-44" class="ident">MaxInt32</a>  <span class="comment">// largest supported exponent</span>
	<a href="../../../pkg/math/big.html#name-MinExp" class="ident">MinExp</a>  = <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-45" class="ident">MinInt32</a>  <span class="comment">// smallest supported exponent</span>
	<a href="../../../pkg/math/big.html#name-MaxPrec" class="ident">MaxPrec</a> = <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-50" class="ident">MaxUint32</a> <span class="comment">// largest (theoretically) supported precision; likely memory-limited</span>
)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Internal representation: The mantissa bits x.mant of a nonzero finite</span><span class="comment"> Float x are stored in a nat slice long enough to hold up to x.prec bits;</span><span class="comment"> the slice may (but doesn't have to) be shorter if the mantissa contains</span><span class="comment"> trailing 0 bits. x.mant is normalized if the msb of x.mant == 1 (i.e.,</span><span class="comment"> the msb is shifted all the way "to the left"). Thus, if the mantissa has</span><span class="comment"> trailing 0 bits or x.prec is not a multiple of the Word size _W,</span><span class="comment"> x.mant[0] has trailing zero bits. The msb of the mantissa corresponds</span><span class="comment"> to the value 0.5; the exponent x.exp shifts the binary point as needed.</span><span class="comment"></span><span class="comment"> A zero or non-finite Float x ignores x.mant and x.exp.</span><span class="comment"></span><span class="comment"> x                 form      neg      mant         exp</span><span class="comment"> ----------------------------------------------------------</span><span class="comment"> ±0                zero      sign     -            -</span><span class="comment"> 0 &lt; |x| &lt; +Inf    finite    sign     mantissa     exponent</span><span class="comment"> ±Inf              inf       sign     -            -</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> A form value describes the internal representation.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../../pkg/math/big.html#name-form" class="ident">form</a> <a href="../../../pkg/builtin.html#name-byte" class="ident">byte</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> The form value order is relevant - do not change!</span></div>
<div class="code"><pre><code><span class="keyword">const</span> (
	<a href="../../../pkg/math/big.html#name-zero" class="ident">zero</a> <a href="#line-120" class="ident">form</a> = <a href="../../../pkg/builtin.html#name-iota" class="ident">iota</a>
	<a href="../../../pkg/math/big.html#name-finite" class="ident">finite</a>
	<a href="../../../pkg/math/big.html#name-inf" class="ident">inf</a>
)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> RoundingMode determines how a Float value is rounded to the</span><span class="comment"> desired precision. Rounding may change the Float value; the</span><span class="comment"> rounding error is described by the Float's Accuracy.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../../pkg/math/big.html#name-RoundingMode" class="ident">RoundingMode</a> <a href="../../../pkg/builtin.html#name-byte" class="ident">byte</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> These constants define supported rounding modes.</span></div>
<div class="code"><pre><code><span class="keyword">const</span> (
	<a href="../../../pkg/math/big.html#name-ToNearestEven" class="ident">ToNearestEven</a> <a href="#line-132" class="ident">RoundingMode</a> = <a href="../../../pkg/builtin.html#name-iota" class="ident">iota</a> <span class="comment">// == IEEE 754-2008 roundTiesToEven</span>
	<a href="../../../pkg/math/big.html#name-ToNearestAway" class="ident">ToNearestAway</a>                     <span class="comment">// == IEEE 754-2008 roundTiesToAway</span>
	<a href="../../../pkg/math/big.html#name-ToZero" class="ident">ToZero</a>                            <span class="comment">// == IEEE 754-2008 roundTowardZero</span>
	<a href="../../../pkg/math/big.html#name-AwayFromZero" class="ident">AwayFromZero</a>                      <span class="comment">// no IEEE 754-2008 equivalent</span>
	<a href="../../../pkg/math/big.html#name-ToNegativeInf" class="ident">ToNegativeInf</a>                     <span class="comment">// == IEEE 754-2008 roundTowardNegative</span>
	<a href="../../../pkg/math/big.html#name-ToPositiveInf" class="ident">ToPositiveInf</a>                     <span class="comment">// == IEEE 754-2008 roundTowardPositive</span>
)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">go:generate stringer -type=RoundingMode</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Accuracy describes the rounding error produced by the most recent</span><span class="comment"> operation that generated a Float value, relative to the exact value.</span></div>
<div class="code"><pre><code><span class="keyword">type</span> <a href="../../../pkg/math/big.html#name-Accuracy" class="ident">Accuracy</a> <a href="../../../pkg/builtin.html#name-int8" class="ident">int8</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Constants describing the Accuracy of a Float.</span></div>
<div class="code"><pre><code><span class="keyword">const</span> (
	<a href="../../../pkg/math/big.html#name-Below" class="ident">Below</a> <a href="#line-148" class="ident">Accuracy</a> = -<span class="lit-number">1</span>
	<a href="../../../pkg/math/big.html#name-Exact" class="ident">Exact</a> <a href="#line-148" class="ident">Accuracy</a> = <span class="lit-number">0</span>
	<a href="../../../pkg/math/big.html#name-Above" class="ident">Above</a> <a href="#line-148" class="ident">Accuracy</a> = +<span class="lit-number">1</span>
)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment">go:generate stringer -type=Accuracy</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetPrec sets z's precision to prec and returns the (possibly) rounded</span><span class="comment"> value of z. Rounding occurs according to z's rounding mode if the mantissa</span><span class="comment"> cannot be represented in prec bits without loss of precision.</span><span class="comment"> SetPrec(0) maps all finite values to ±0; infinite values remain unchanged.</span><span class="comment"> If prec &gt; MaxPrec, it is set to MaxPrec.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r4" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r5" class="ident"><a href="../../../use/math/big..Float.SetPrec.html" class="ident">SetPrec</a></label>(<label for="r6" class="ident">prec</label> <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>) *<a href="#line-65" class="ident">Float</a> {
	<label for="r4" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a> <span class="comment">// optimistically assume no rounding is needed</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> special case</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <label for="r6" class="ident">prec</label> == <span class="lit-number">0</span> {
		<label for="r4" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <span class="lit-number">0</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> truncate z to 0</span></div>
<div class="code"><pre><code>			<label for="r4" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-190" class="ident">makeAcc</a>(<label for="r4" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>)
			<label for="r4" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		}
		<span class="keyword">return</span> <label for="r4" class="ident">z</label>
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> general case</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <label for="r6" class="ident">prec</label> &gt; <a href="#line-99" class="ident">MaxPrec</a> {
		<label for="r6" class="ident">prec</label> = <a href="#line-99" class="ident">MaxPrec</a>
	}
	<label for="r7" class="ident">old</label> := <label for="r4" class="ident">z</label>.<a href="#line-66" class="ident">prec</a>
	<label for="r4" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r6" class="ident">prec</label>)
	<span class="keyword">if</span> <label for="r4" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> &lt; <label for="r7" class="ident">old</label> {
		<label for="r4" class="ident">z</label>.<a href="#line-391" class="ident">round</a>(<span class="lit-number">0</span>)
	}
	<span class="keyword">return</span> <label for="r4" class="ident">z</label>
}

<span class="keyword">func</span> <label for="r8" class="ident"><a href="../../../pkg/math/big.html#name-makeAcc" class="ident">makeAcc</a></label>(<label for="r9" class="ident">above</label> <a href="../../../pkg/builtin.html#name-bool" class="ident">bool</a>) <a href="#line-148" class="ident">Accuracy</a> {
	<span class="keyword">if</span> <label for="r9" class="ident">above</label> {
		<span class="keyword">return</span> <a href="#line-154" class="ident">Above</a>
	}
	<span class="keyword">return</span> <a href="#line-152" class="ident">Below</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetMode sets z's rounding mode to mode and returns an exact z.</span><span class="comment"> z remains unchanged otherwise.</span><span class="comment"> z.SetMode(z.Mode()) is a cheap way to set z's accuracy to Exact.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r10" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r11" class="ident"><a href="../../../use/math/big..Float.SetMode.html" class="ident">SetMode</a></label>(<label for="r12" class="ident">mode</label> <a href="#line-132" class="ident">RoundingMode</a>) *<a href="#line-65" class="ident">Float</a> {
	<label for="r10" class="ident">z</label>.<a href="#line-67" class="ident">mode</a> = <label for="r12" class="ident">mode</label>
	<label for="r10" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
	<span class="keyword">return</span> <label for="r10" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Prec returns the mantissa precision of x in bits.</span><span class="comment"> The result may be 0 for |x| == 0 and |x| == Inf.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r13" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r14" class="ident"><a href="../../../use/math/big..Float.Prec.html" class="ident">Prec</a></label>() <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a> {
	<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r13" class="ident">x</label>.<a href="#line-66" class="ident">prec</a>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> MinPrec returns the minimum precision required to represent x exactly</span><span class="comment"> (i.e., the smallest prec before x.SetPrec(prec) would start rounding x).</span><span class="comment"> The result is 0 for |x| == 0 and |x| == Inf.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r15" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r16" class="ident"><a href="../../../use/math/big..Float.MinPrec.html" class="ident">MinPrec</a></label>() <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a> {
	<span class="keyword">if</span> <label for="r15" class="ident">x</label>.<a href="#line-69" class="ident">form</a> != <a href="#line-125" class="ident">finite</a> {
		<span class="keyword">return</span> <span class="lit-number">0</span>
	}
	<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r15" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>))*<a href="arith.go.html#line-21" class="ident">_W</a> - <label for="r15" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-976" class="ident">trailingZeroBits</a>()
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Mode returns the rounding mode of x.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r17" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r18" class="ident"><a href="../../../use/math/big..Float.Mode.html" class="ident">Mode</a></label>() <a href="#line-132" class="ident">RoundingMode</a> {
	<span class="keyword">return</span> <label for="r17" class="ident">x</label>.<a href="#line-67" class="ident">mode</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Acc returns the accuracy of x produced by the most recent</span><span class="comment"> operation, unless explicitly documented otherwise by that</span><span class="comment"> operation.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r19" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r20" class="ident"><a href="../../../use/math/big..Float.Acc.html" class="ident">Acc</a></label>() <a href="#line-148" class="ident">Accuracy</a> {
	<span class="keyword">return</span> <label for="r19" class="ident">x</label>.<a href="#line-68" class="ident">acc</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Sign returns:</span><span class="comment"></span><span class="comment">	-1 if x &lt;   0</span><span class="comment">	 0 if x is ±0</span><span class="comment">	+1 if x &gt;   0</span><span class="comment"></span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r21" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r22" class="ident"><a href="../../../use/math/big..Float.Sign.html" class="ident">Sign</a></label>() <a href="../../../pkg/builtin.html#name-int" class="ident">int</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r21" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}
	<span class="keyword">if</span> <label for="r21" class="ident">x</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-124" class="ident">zero</a> {
		<span class="keyword">return</span> <span class="lit-number">0</span>
	}
	<span class="keyword">if</span> <label for="r21" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
		<span class="keyword">return</span> -<span class="lit-number">1</span>
	}
	<span class="keyword">return</span> <span class="lit-number">1</span>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> MantExp breaks x into its mantissa and exponent components</span><span class="comment"> and returns the exponent. If a non-nil mant argument is</span><span class="comment"> provided its value is set to the mantissa of x, with the</span><span class="comment"> same precision and rounding mode as x. The components</span><span class="comment"> satisfy x == mant × 2**exp, with 0.5 &lt;= |mant| &lt; 1.0.</span><span class="comment"> Calling MantExp with a nil argument is an efficient way to</span><span class="comment"> get the exponent of the receiver.</span><span class="comment"></span><span class="comment"> Special cases are:</span><span class="comment"></span><span class="comment">	(  ±0).MantExp(mant) = 0, with mant set to   ±0</span><span class="comment">	(±Inf).MantExp(mant) = 0, with mant set to ±Inf</span><span class="comment"></span><span class="comment"> x and mant may be the same in which case x is set to its</span><span class="comment"> mantissa value.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r23" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r24" class="ident"><a href="../../../use/math/big..Float.MantExp.html" class="ident">MantExp</a></label>(<label for="r25" class="ident">mant</label> *<a href="#line-65" class="ident">Float</a>) (<label for="r26" class="ident">exp</label> <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r23" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}
	<span class="keyword">if</span> <label for="r23" class="ident">x</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-125" class="ident">finite</a> {
		<label for="r26" class="ident">exp</label> = <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>(<label for="r23" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>)
	}
	<span class="keyword">if</span> <label for="r25" class="ident">mant</label> != <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
		<label for="r25" class="ident">mant</label>.<a href="#line-670" class="ident">Copy</a>(<label for="r23" class="ident">x</label>)
		<span class="keyword">if</span> <label for="r25" class="ident">mant</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-125" class="ident">finite</a> {
			<label for="r25" class="ident">mant</label>.<a href="#line-72" class="ident">exp</a> = <span class="lit-number">0</span>
		}
	}
	<span class="keyword">return</span>
}

<span class="keyword">func</span> (<label for="r27" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r28" class="ident"><a href="../../../use/math/big..Float.setExpAndRound*f0ae3.html" class="ident">setExpAndRound</a></label>(<label for="r29" class="ident">exp</label> <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>, <label for="r30" class="ident">sbit</label> <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>) {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> underflow</span></div>
<div class="code"><pre><code>		<label for="r27" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-190" class="ident">makeAcc</a>(<label for="r27" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>)
		<label for="r27" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<span class="keyword">return</span>
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> overflow</span></div>
<div class="code"><pre><code>		<label for="r27" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-190" class="ident">makeAcc</a>(!<label for="r27" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>)
		<label for="r27" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-126" class="ident">inf</a>
		<span class="keyword">return</span>
	}

	<label for="r27" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-125" class="ident">finite</a>
	<label for="r27" class="ident">z</label>.<a href="#line-72" class="ident">exp</a> = <a href="../../../pkg/builtin.html#name-int32" class="ident">int32</a>(<label for="r29" class="ident">exp</label>)
	<label for="r27" class="ident">z</label>.<a href="#line-391" class="ident">round</a>(<label for="r30" class="ident">sbit</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetMantExp sets z to mant × 2**exp and returns z.</span><span class="comment"> The result z has the same precision and rounding mode</span><span class="comment"> as mant. SetMantExp is an inverse of MantExp but does</span><span class="comment"> not require 0.5 &lt;= |mant| &lt; 1.0. Specifically:</span><span class="comment"></span><span class="comment">	mant := new(Float)</span><span class="comment">	new(Float).SetMantExp(mant, x.MantExp(mant)).Cmp(x) == 0</span><span class="comment"></span><span class="comment"> Special cases are:</span><span class="comment"></span><span class="comment">	z.SetMantExp(  ±0, exp) =   ±0</span><span class="comment">	z.SetMantExp(±Inf, exp) = ±Inf</span><span class="comment"></span><span class="comment"> z and mant may be the same in which case z's exponent</span><span class="comment"> is set to exp.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r31" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r32" class="ident"><a href="../../../use/math/big..Float.SetMantExp.html" class="ident">SetMantExp</a></label>(<label for="r33" class="ident">mant</label> *<a href="#line-65" class="ident">Float</a>, <label for="r34" class="ident">exp</label> <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r31" class="ident">z</label>.<a href="#line-362" class="ident">validate</a>()
		<label for="r33" class="ident">mant</label>.<a href="#line-362" class="ident">validate</a>()
	}
	<label for="r31" class="ident">z</label>.<a href="#line-670" class="ident">Copy</a>(<label for="r33" class="ident">mant</label>)

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; |mant| &lt; +Inf</span></div>
<div class="code"><pre><code>		<label for="r31" class="ident">z</label>.<a href="#line-284" class="ident">setExpAndRound</a>(<a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r31" class="ident">z</label>.<a href="#line-72" class="ident">exp</a>)+<a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r34" class="ident">exp</label>), <span class="lit-number">0</span>)
	}
	<span class="keyword">return</span> <label for="r31" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Signbit reports whether x is negative or negative zero.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r35" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r36" class="ident"><a href="../../../use/math/big..Float.Signbit.html" class="ident">Signbit</a></label>() <a href="../../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<span class="keyword">return</span> <label for="r35" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> IsInf reports whether x is +Inf or -Inf.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r37" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r38" class="ident"><a href="../../../use/math/big..Float.IsInf.html" class="ident">IsInf</a></label>() <a href="../../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<span class="keyword">return</span> <label for="r37" class="ident">x</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-126" class="ident">inf</a>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> IsInt reports whether x is an integer.</span><span class="comment"> ±Inf values are not integers.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r39" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r40" class="ident"><a href="../../../use/math/big..Float.IsInt.html" class="ident">IsInt</a></label>() <a href="../../../pkg/builtin.html#name-bool" class="ident">bool</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r39" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> special cases</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <label for="r39" class="ident">x</label>.<a href="#line-69" class="ident">form</a> != <a href="#line-125" class="ident">finite</a> {
		<span class="keyword">return</span> <label for="r39" class="ident">x</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-124" class="ident">zero</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x.form == finite</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <label for="r39" class="ident">x</label>.<a href="#line-72" class="ident">exp</a> &lt;= <span class="lit-number">0</span> {
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-false" class="ident">false</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x.exp &gt; 0</span></div>
<div class="code"><pre><code>	<span class="keyword">return</span> <label for="r39" class="ident">x</label>.<a href="#line-66" class="ident">prec</a> &lt;= <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r39" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>) || <label for="r39" class="ident">x</label>.<a href="#line-215" class="ident">MinPrec</a>() &lt;= <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r39" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>) <span class="comment">// not enough bits for fractional mantissa</span>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> debugging support</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r41" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r42" class="ident"><a href="../../../use/math/big..Float.validate*133c8.html" class="ident">validate</a></label>() {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> avoid performance bugs</span></div>
<div class="code"><pre><code>		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"validate called but debugFloat is not set"</span>)
	}
	<span class="keyword">if</span> <label for="r41" class="ident">x</label>.<a href="#line-69" class="ident">form</a> != <a href="#line-125" class="ident">finite</a> {
		<span class="keyword">return</span>
	}
	<label for="r43" class="ident">m</label> := <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r41" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
	<span class="keyword">if</span> <label for="r43" class="ident">m</label> == <span class="lit-number">0</span> {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"nonzero finite number with empty mantissa"</span>)
	}
	<span class="keyword">const</span> <label for="r44" class="ident">msb</label> = <span class="lit-number">1</span> &lt;&lt; (<a href="arith.go.html#line-21" class="ident">_W</a> - <span class="lit-number">1</span>)
	<span class="keyword">if</span> <label for="r41" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>[<label for="r43" class="ident">m</label>-<span class="lit-number">1</span>]&amp;<label for="r44" class="ident">msb</label> == <span class="lit-number">0</span> {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<a href="../../../pkg/fmt.html" class="ident i0">fmt</a>.<a href="../../fmt/print.go.html#line-217" class="ident">Sprintf</a>(<span class="lit-string">"msb not set in last word %#x of %s"</span>, <label for="r41" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>[<label for="r43" class="ident">m</label>-<span class="lit-number">1</span>], <label for="r41" class="ident">x</label>.<a href="ftoa.go.html#line-47" class="ident">Text</a>(<span class="lit-number">'p'</span>, <span class="lit-number">0</span>)))
	}
	<span class="keyword">if</span> <label for="r41" class="ident">x</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"zero precision finite number"</span>)
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> round rounds z according to z.mode to z.prec bits and sets z.acc accordingly.</span><span class="comment"> sbit must be 0 or 1 and summarizes any "sticky bit" information one might</span><span class="comment"> have before calling round. z's mantissa must be normalized (with the msb set)</span><span class="comment"> or empty.</span><span class="comment"></span><span class="comment"> CAUTION: The rounding modes ToNegativeInf, ToPositiveInf are affected by the</span><span class="comment"> sign of z. For correct rounding, the sign of z must be set correctly before</span><span class="comment"> calling round.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r45" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r46" class="ident"><a href="../../../use/math/big..Float.round*a97b0.html" class="ident">round</a></label>(<label for="r47" class="ident">sbit</label> <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r45" class="ident">z</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<label for="r45" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 or ±Inf =&gt; nothing left to do</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> z.form == finite &amp;&amp; len(z.mant) &gt; 0</span><span class="comment">	 m &gt; 0 implies z.prec &gt; 0 (checked by validate)</span></div>
<div class="code"><pre><code>
	<label for="r48" class="ident">m</label> := <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>)) <span class="comment">// present mantissa length in words</span>
	<label for="r49" class="ident">bits</label> := <label for="r48" class="ident">m</label> * <a href="arith.go.html#line-21" class="ident">_W</a>           <span class="comment">// present mantissa bits; bits &gt; 0</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> mantissa fits =&gt; nothing to do</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> bits &gt; z.prec</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Rounding is based on two bits: the rounding bit (rbit) and the</span><span class="comment">	 sticky bit (sbit). The rbit is the bit immediately before the</span><span class="comment">	 z.prec leading mantissa bits (the "0.5"). The sbit is set if any</span><span class="comment">	 of the bits before the rbit are set (the "0.25", "0.125", etc.):</span><span class="comment">	</span><span class="comment">	   rbit  sbit  =&gt; "fractional part"</span><span class="comment">	</span><span class="comment">	   0     0        == 0</span><span class="comment">	   0     1        &gt;  0  , &lt; 0.5</span><span class="comment">	   1     0        == 0.5</span><span class="comment">	   1     1        &gt;  0.5, &lt; 1.0</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> bits &gt; z.prec: mantissa too large =&gt; round</span></div>
<div class="code"><pre><code>	<label for="r50" class="ident">r</label> := <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r49" class="ident">bits</label> - <label for="r45" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> - <span class="lit-number">1</span>) <span class="comment">// rounding bit position; r &gt;= 0</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> The sticky bit is only needed for rounding ToNearestEven</span><span class="comment">	 or when the rounding bit is zero. Avoid computation otherwise.</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <label for="r47" class="ident">sbit</label> == <span class="lit-number">0</span> &amp;&amp; (<label for="r51" class="ident">rbit</label> == <span class="lit-number">0</span> || <label for="r45" class="ident">z</label>.<a href="#line-67" class="ident">mode</a> == <a href="#line-136" class="ident">ToNearestEven</a>) {
		<label for="r47" class="ident">sbit</label> = <label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-1082" class="ident">sticky</a>(<label for="r50" class="ident">r</label>)
	}
	<label for="r47" class="ident">sbit</label> &amp;= <span class="lit-number">1</span> <span class="comment">// be safe and ensure it's a single bit</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> cut off extra words</span></div>
<div class="code"><pre><code>	<label for="r52" class="ident">n</label> := (<label for="r45" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> + (<a href="arith.go.html#line-21" class="ident">_W</a> - <span class="lit-number">1</span>)) / <a href="arith.go.html#line-21" class="ident">_W</a> <span class="comment">// mantissa length in words for desired precision</span>
	<span class="keyword">if</span> <label for="r48" class="ident">m</label> &gt; <label for="r52" class="ident">n</label> {
		<a href="../../../pkg/builtin.html#name-copy" class="ident">copy</a>(<label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>, <label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>[<label for="r48" class="ident">m</label>-<label for="r52" class="ident">n</label>:]) <span class="comment">// move n last words to front</span>
		<label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>[:<label for="r52" class="ident">n</label>]
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> determine number of trailing zero bits (ntz) and compute lsb mask of mantissa's least-significant word</span></div>
<div class="code"><pre><code>	<label for="r53" class="ident">ntz</label> := <label for="r52" class="ident">n</label>*<a href="arith.go.html#line-21" class="ident">_W</a> - <label for="r45" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> <span class="comment">// 0 &lt;= ntz &lt; _W</span>
	<label for="r54" class="ident">lsb</label> := <a href="arith.go.html#line-16" class="ident">Word</a>(<span class="lit-number">1</span>) &lt;&lt; <label for="r53" class="ident">ntz</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> round if result is inexact</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Make rounding decision: The result mantissa is truncated ("rounded down")</span><span class="comment">		 by default. Decide if we need to increment, or "round up", the (unsigned)</span><span class="comment">		 mantissa.</span></div>
<div class="code"><pre><code>		<label for="r55" class="ident">inc</label> := <a href="../../../pkg/builtin.html#name-false" class="ident">false</a>
		<span class="keyword">switch</span> <label for="r45" class="ident">z</label>.<a href="#line-67" class="ident">mode</a> {
		<span class="keyword">case</span> <a href="#line-140" class="ident">ToNegativeInf</a>:
			<label for="r55" class="ident">inc</label> = <label for="r45" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> nothing to do</span></div>
<div class="code"><pre><code>		<span class="keyword">case</span> <a href="#line-136" class="ident">ToNearestEven</a>:
			<label for="r55" class="ident">inc</label> = <label for="r51" class="ident">rbit</label> != <span class="lit-number">0</span> &amp;&amp; (<label for="r47" class="ident">sbit</label> != <span class="lit-number">0</span> || <label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>[<span class="lit-number">0</span>]&amp;<label for="r54" class="ident">lsb</label> != <span class="lit-number">0</span>)
		<span class="keyword">case</span> <a href="#line-137" class="ident">ToNearestAway</a>:
			<label for="r55" class="ident">inc</label> = <label for="r51" class="ident">rbit</label> != <span class="lit-number">0</span>
		<span class="keyword">case</span> <a href="#line-139" class="ident">AwayFromZero</a>:
			<label for="r55" class="ident">inc</label> = <a href="../../../pkg/builtin.html#name-true" class="ident">true</a>
		<span class="keyword">case</span> <a href="#line-141" class="ident">ToPositiveInf</a>:
			<label for="r55" class="ident">inc</label> = !<label for="r45" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>
		<span class="keyword">default</span>:
			<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> A positive result (!z.neg) is Above the exact result if we increment,</span><span class="comment">		 and it's Below if we truncate (Exact results require no rounding).</span><span class="comment">		 For a negative result (z.neg) it is exactly the opposite.</span></div>
<div class="code"><pre><code>		<label for="r45" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-190" class="ident">makeAcc</a>(<label for="r55" class="ident">inc</label> != <label for="r45" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>)

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> add 1 to mantissa</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> mantissa overflow =&gt; adjust exponent</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> exponent overflow</span></div>
<div class="code"><pre><code>					<label for="r45" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-126" class="ident">inf</a>
					<span class="keyword">return</span>
				}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> adjust mantissa: divide by 2 to compensate for exponent adjustment</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> set msb == carry == 1 from the mantissa overflow above</span></div>
<div class="code"><pre><code>				<span class="keyword">const</span> <label for="r56" class="ident">msb</label> = <span class="lit-number">1</span> &lt;&lt; (<a href="arith.go.html#line-21" class="ident">_W</a> - <span class="lit-number">1</span>)
				<label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>[<label for="r52" class="ident">n</label>-<span class="lit-number">1</span>] |= <label for="r56" class="ident">msb</label>
			}
		}
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> zero out trailing bits in least-significant word</span></div>
<div class="code"><pre><code>	<label for="r45" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>[<span class="lit-number">0</span>] &amp;^= <label for="r54" class="ident">lsb</label> - <span class="lit-number">1</span>

	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r45" class="ident">z</label>.<a href="#line-362" class="ident">validate</a>()
	}
}

<span class="keyword">func</span> (<label for="r57" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r58" class="ident"><a href="../../../use/math/big..Float.setBits64*709f4.html" class="ident">setBits64</a></label>(<label for="r59" class="ident">neg</label> <a href="../../../pkg/builtin.html#name-bool" class="ident">bool</a>, <label for="r60" class="ident">x</label> <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <label for="r57" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<label for="r57" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <span class="lit-number">64</span>
	}
	<label for="r57" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
	<label for="r57" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r59" class="ident">neg</label>
	<span class="keyword">if</span> <label for="r60" class="ident">x</label> == <span class="lit-number">0</span> {
		<label for="r57" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<span class="keyword">return</span> <label for="r57" class="ident">z</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x != 0</span></div>
<div class="code"><pre><code>	<label for="r57" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-125" class="ident">finite</a>
	<label for="r61" class="ident">s</label> := <a href="../../../pkg/math/bits.html" class="ident i2">bits</a>.<a href="../bits/bits.go.html#line-31" class="ident">LeadingZeros64</a>(<label for="r60" class="ident">x</label>)
	<label for="r57" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r57" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-81" class="ident">setUint64</a>(<label for="r60" class="ident">x</label> &lt;&lt; <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r61" class="ident">s</label>))
	<label for="r57" class="ident">z</label>.<a href="#line-72" class="ident">exp</a> = <a href="../../../pkg/builtin.html#name-int32" class="ident">int32</a>(<span class="lit-number">64</span> - <label for="r61" class="ident">s</label>) <span class="comment">// always fits</span>
	<span class="keyword">if</span> <label for="r57" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> &lt; <span class="lit-number">64</span> {
		<label for="r57" class="ident">z</label>.<a href="#line-391" class="ident">round</a>(<span class="lit-number">0</span>)
	}
	<span class="keyword">return</span> <label for="r57" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetUint64 sets z to the (possibly rounded) value of x and returns z.</span><span class="comment"> If z's precision is 0, it is changed to 64 (and rounding will have</span><span class="comment"> no effect).</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r62" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r63" class="ident"><a href="../../../use/math/big..Float.SetUint64.html" class="ident">SetUint64</a></label>(<label for="r64" class="ident">x</label> <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">return</span> <label for="r62" class="ident">z</label>.<a href="#line-500" class="ident">setBits64</a>(<a href="../../../pkg/builtin.html#name-false" class="ident">false</a>, <label for="r64" class="ident">x</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetInt64 sets z to the (possibly rounded) value of x and returns z.</span><span class="comment"> If z's precision is 0, it is changed to 64 (and rounding will have</span><span class="comment"> no effect).</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r65" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r66" class="ident"><a href="../../../use/math/big..Float.SetInt64.html" class="ident">SetInt64</a></label>(<label for="r67" class="ident">x</label> <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>) *<a href="#line-65" class="ident">Float</a> {
	<label for="r68" class="ident">u</label> := <label for="r67" class="ident">x</label>
	<span class="keyword">if</span> <label for="r68" class="ident">u</label> &lt; <span class="lit-number">0</span> {
		<label for="r68" class="ident">u</label> = -<label for="r68" class="ident">u</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> We cannot simply call z.SetUint64(uint64(u)) and change</span><span class="comment">	 the sign afterwards because the sign affects rounding.</span></div>
<div class="code"><pre><code>	<span class="keyword">return</span> <label for="r65" class="ident">z</label>.<a href="#line-500" class="ident">setBits64</a>(<label for="r67" class="ident">x</label> &lt; <span class="lit-number">0</span>, <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>(<label for="r68" class="ident">u</label>))
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetFloat64 sets z to the (possibly rounded) value of x and returns z.</span><span class="comment"> If z's precision is 0, it is changed to 53 (and rounding will have</span><span class="comment"> no effect). SetFloat64 panics with ErrNaN if x is a NaN.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r69" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r70" class="ident"><a href="../../../use/math/big..Float.SetFloat64.html" class="ident">SetFloat64</a></label>(<label for="r71" class="ident">x</label> <a href="../../../pkg/builtin.html#name-float64" class="ident">float64</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <label for="r69" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<label for="r69" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <span class="lit-number">53</span>
	}
	<span class="keyword">if</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-34" class="ident">IsNaN</a>(<label for="r71" class="ident">x</label>) {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<a href="#line-77" class="ident">ErrNaN</a>{<span class="lit-string">"Float.SetFloat64(NaN)"</span>})
	}
	<label for="r69" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
	<label for="r69" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../signbit.go.html#line-8" class="ident">Signbit</a>(<label for="r71" class="ident">x</label>) <span class="comment">// handle -0, -Inf correctly</span>
	<span class="keyword">if</span> <label for="r71" class="ident">x</label> == <span class="lit-number">0</span> {
		<label for="r69" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<span class="keyword">return</span> <label for="r69" class="ident">z</label>
	}
	<span class="keyword">if</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-46" class="ident">IsInf</a>(<label for="r71" class="ident">x</label>, <span class="lit-number">0</span>) {
		<label for="r69" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-126" class="ident">inf</a>
		<span class="keyword">return</span> <label for="r69" class="ident">z</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> normalized x != 0</span></div>
<div class="code"><pre><code>	<label for="r69" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-125" class="ident">finite</a>
	<label for="r72" class="ident">fmant</label>, <label for="r73" class="ident">exp</label> := <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../frexp.go.html#line-16" class="ident">Frexp</a>(<label for="r71" class="ident">x</label>) <span class="comment">// get normalized mantissa</span>
	<label for="r69" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r69" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-81" class="ident">setUint64</a>(<span class="lit-number">1</span>&lt;&lt;<span class="lit-number">63</span> | <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../unsafe.go.html#line-23" class="ident">Float64bits</a>(<label for="r72" class="ident">fmant</label>)&lt;&lt;<span class="lit-number">11</span>)
	<label for="r69" class="ident">z</label>.<a href="#line-72" class="ident">exp</a> = <a href="../../../pkg/builtin.html#name-int32" class="ident">int32</a>(<label for="r73" class="ident">exp</label>) <span class="comment">// always fits</span>
	<span class="keyword">if</span> <label for="r69" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> &lt; <span class="lit-number">53</span> {
		<label for="r69" class="ident">z</label>.<a href="#line-391" class="ident">round</a>(<span class="lit-number">0</span>)
	}
	<span class="keyword">return</span> <label for="r69" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> fnorm normalizes mantissa m by shifting it to the left</span><span class="comment"> such that the msb of the most-significant word (msw) is 1.</span><span class="comment"> It returns the shift amount. It assumes that len(m) != 0.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r74" class="ident"><a href="../../../pkg/math/big.html#name-fnorm" class="ident">fnorm</a></label>(<label for="r75" class="ident">m</label> <a href="nat.go.html#line-35" class="ident">nat</a>) <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> &amp;&amp; (<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r75" class="ident">m</label>) == <span class="lit-number">0</span> || <label for="r75" class="ident">m</label>[<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r75" class="ident">m</label>)-<span class="lit-number">1</span>] == <span class="lit-number">0</span>) {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"msw of mantissa is 0"</span>)
	}
	<label for="r76" class="ident">s</label> := <a href="arith.go.html#line-59" class="ident">nlz</a>(<label for="r75" class="ident">m</label>[<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r75" class="ident">m</label>)-<span class="lit-number">1</span>])
	<span class="keyword">if</span> <label for="r76" class="ident">s</label> &gt; <span class="lit-number">0</span> {
		<label for="r77" class="ident">c</label> := <a href="arith_decl.go.html#line-15" class="ident">shlVU</a>(<label for="r75" class="ident">m</label>, <label for="r75" class="ident">m</label>, <label for="r76" class="ident">s</label>)
		<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> &amp;&amp; <label for="r77" class="ident">c</label> != <span class="lit-number">0</span> {
			<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"nlz or shlVU incorrect"</span>)
		}
	}
	<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r76" class="ident">s</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetInt sets z to the (possibly rounded) value of x and returns z.</span><span class="comment"> If z's precision is 0, it is changed to the larger of x.BitLen()</span><span class="comment"> or 64 (and rounding will have no effect).</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> TODO(gri) can be more efficient if z.prec &gt; 0</span><span class="comment">	 but small compared to the size of x, or if there</span><span class="comment">	 are many trailing 0's.</span></div>
<div class="code"><pre><code>	<label for="r81" class="ident">bits</label> := <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r80" class="ident">x</label>.<a href="int.go.html#line-472" class="ident">BitLen</a>())
	<span class="keyword">if</span> <label for="r78" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<label for="r78" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <a href="#line-1725" class="ident">umax32</a>(<label for="r81" class="ident">bits</label>, <span class="lit-number">64</span>)
	}
	<label for="r78" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
	<label for="r78" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r80" class="ident">x</label>.<a href="int.go.html#line-26" class="ident">neg</a>
	<span class="keyword">if</span> <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r80" class="ident">x</label>.<a href="int.go.html#line-27" class="ident">abs</a>) == <span class="lit-number">0</span> {
		<label for="r78" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<span class="keyword">return</span> <label for="r78" class="ident">z</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x != 0</span></div>
<div class="code"><pre><code>	<label for="r78" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r78" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-93" class="ident">set</a>(<label for="r80" class="ident">x</label>.<a href="int.go.html#line-27" class="ident">abs</a>)
	<a href="#line-575" class="ident">fnorm</a>(<label for="r78" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>)
	<label for="r78" class="ident">z</label>.<a href="#line-284" class="ident">setExpAndRound</a>(<a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r81" class="ident">bits</label>), <span class="lit-number">0</span>)
	<span class="keyword">return</span> <label for="r78" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetRat sets z to the (possibly rounded) value of x and returns z.</span><span class="comment"> If z's precision is 0, it is changed to the largest of a.BitLen(),</span><span class="comment"> b.BitLen(), or 64; with x = a/b.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r82" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r83" class="ident"><a href="../../../use/math/big..Float.SetRat.html" class="ident">SetRat</a></label>(<label for="r84" class="ident">x</label> *<a href="rat.go.html#line-23" class="ident">Rat</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <label for="r84" class="ident">x</label>.<a href="rat.go.html#line-401" class="ident">IsInt</a>() {
		<span class="keyword">return</span> <label for="r82" class="ident">z</label>.<a href="#line-592" class="ident">SetInt</a>(<label for="r84" class="ident">x</label>.<a href="rat.go.html#line-409" class="ident">Num</a>())
	}
	<span class="keyword">var</span> <label for="r85" class="ident">a</label>, <label for="r86" class="ident">b</label> <a href="#line-65" class="ident">Float</a>
	<label for="r85" class="ident">a</label>.<a href="#line-592" class="ident">SetInt</a>(<label for="r84" class="ident">x</label>.<a href="rat.go.html#line-409" class="ident">Num</a>())
	<label for="r86" class="ident">b</label>.<a href="#line-592" class="ident">SetInt</a>(<label for="r84" class="ident">x</label>.<a href="rat.go.html#line-420" class="ident">Denom</a>())
	<span class="keyword">if</span> <label for="r82" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<label for="r82" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <a href="#line-1725" class="ident">umax32</a>(<label for="r85" class="ident">a</label>.<a href="#line-66" class="ident">prec</a>, <label for="r86" class="ident">b</label>.<a href="#line-66" class="ident">prec</a>)
	}
	<span class="keyword">return</span> <label for="r82" class="ident">z</label>.<a href="#line-1627" class="ident">Quo</a>(&amp;<label for="r85" class="ident">a</label>, &amp;<label for="r86" class="ident">b</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> SetInf sets z to the infinite Float -Inf if signbit is</span><span class="comment"> set, or +Inf if signbit is not set, and returns z. The</span><span class="comment"> precision of z is unchanged and the result is always</span><span class="comment"> Exact.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r87" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r88" class="ident"><a href="../../../use/math/big..Float.SetInf.html" class="ident">SetInf</a></label>(<label for="r89" class="ident">signbit</label> <a href="../../../pkg/builtin.html#name-bool" class="ident">bool</a>) *<a href="#line-65" class="ident">Float</a> {
	<label for="r87" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
	<label for="r87" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-126" class="ident">inf</a>
	<label for="r87" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r89" class="ident">signbit</label>
	<span class="keyword">return</span> <label for="r87" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Set sets z to the (possibly rounded) value of x and returns z.</span><span class="comment"> If z's precision is 0, it is changed to the precision of x</span><span class="comment"> before setting z (and rounding will have no effect).</span><span class="comment"> Rounding is performed according to z's precision and rounding</span><span class="comment"> mode; and z's accuracy reports the result error relative to the</span><span class="comment"> exact (not rounded) result.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r90" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r91" class="ident"><a href="../../../use/math/big..Float.Set.html" class="ident">Set</a></label>(<label for="r92" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r92" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}
	<label for="r90" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
	<span class="keyword">if</span> <label for="r90" class="ident">z</label> != <label for="r92" class="ident">x</label> {
		<label for="r90" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <label for="r92" class="ident">x</label>.<a href="#line-69" class="ident">form</a>
		<label for="r90" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r92" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>
		<span class="keyword">if</span> <label for="r92" class="ident">x</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-125" class="ident">finite</a> {
			<label for="r90" class="ident">z</label>.<a href="#line-72" class="ident">exp</a> = <label for="r92" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>
			<label for="r90" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r90" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-93" class="ident">set</a>(<label for="r92" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
		}
		<span class="keyword">if</span> <label for="r90" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
			<label for="r90" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <label for="r92" class="ident">x</label>.<a href="#line-66" class="ident">prec</a>
		} <span class="keyword">else</span> <span class="keyword">if</span> <label for="r90" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> &lt; <label for="r92" class="ident">x</label>.<a href="#line-66" class="ident">prec</a> {
			<label for="r90" class="ident">z</label>.<a href="#line-391" class="ident">round</a>(<span class="lit-number">0</span>)
		}
	}
	<span class="keyword">return</span> <label for="r90" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Copy sets z to x, with the same precision, rounding mode, and</span><span class="comment"> accuracy as x, and returns z. x is not changed even if z and</span><span class="comment"> x are the same.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r93" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r94" class="ident"><a href="../../../use/math/big..Float.Copy.html" class="ident">Copy</a></label>(<label for="r95" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r95" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}
	<span class="keyword">if</span> <label for="r93" class="ident">z</label> != <label for="r95" class="ident">x</label> {
		<label for="r93" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <label for="r95" class="ident">x</label>.<a href="#line-66" class="ident">prec</a>
		<label for="r93" class="ident">z</label>.<a href="#line-67" class="ident">mode</a> = <label for="r95" class="ident">x</label>.<a href="#line-67" class="ident">mode</a>
		<label for="r93" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <label for="r95" class="ident">x</label>.<a href="#line-68" class="ident">acc</a>
		<label for="r93" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <label for="r95" class="ident">x</label>.<a href="#line-69" class="ident">form</a>
		<label for="r93" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r95" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>
		<span class="keyword">if</span> <label for="r93" class="ident">z</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-125" class="ident">finite</a> {
			<label for="r93" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r93" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-93" class="ident">set</a>(<label for="r95" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
			<label for="r93" class="ident">z</label>.<a href="#line-72" class="ident">exp</a> = <label for="r95" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>
		}
	}
	<span class="keyword">return</span> <label for="r93" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> msb32 returns the 32 most significant bits of x.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r96" class="ident"><a href="../../../pkg/math/big.html#name-msb32" class="ident">msb32</a></label>(<label for="r97" class="ident">x</label> <a href="nat.go.html#line-35" class="ident">nat</a>) <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a> {
	<label for="r98" class="ident">i</label> := <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r97" class="ident">x</label>) - <span class="lit-number">1</span>
	<span class="keyword">if</span> <label for="r98" class="ident">i</label> &lt; <span class="lit-number">0</span> {
		<span class="keyword">return</span> <span class="lit-number">0</span>
	}
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> &amp;&amp; <label for="r97" class="ident">x</label>[<label for="r98" class="ident">i</label>]&amp;(<span class="lit-number">1</span>&lt;&lt;(<a href="arith.go.html#line-21" class="ident">_W</a>-<span class="lit-number">1</span>)) == <span class="lit-number">0</span> {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"x not normalized"</span>)
	}
	<span class="keyword">switch</span> <a href="arith.go.html#line-21" class="ident">_W</a> {
	<span class="keyword">case</span> <span class="lit-number">32</span>:
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r97" class="ident">x</label>[<label for="r98" class="ident">i</label>])
	<span class="keyword">case</span> <span class="lit-number">64</span>:
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r97" class="ident">x</label>[<label for="r98" class="ident">i</label>] &gt;&gt; <span class="lit-number">32</span>)
	}
	<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> msb64 returns the 64 most significant bits of x.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> <label for="r99" class="ident"><a href="../../../pkg/math/big.html#name-msb64" class="ident">msb64</a></label>(<label for="r100" class="ident">x</label> <a href="nat.go.html#line-35" class="ident">nat</a>) <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a> {
	<label for="r101" class="ident">i</label> := <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r100" class="ident">x</label>) - <span class="lit-number">1</span>
	<span class="keyword">if</span> <label for="r101" class="ident">i</label> &lt; <span class="lit-number">0</span> {
		<span class="keyword">return</span> <span class="lit-number">0</span>
	}
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> &amp;&amp; <label for="r100" class="ident">x</label>[<label for="r101" class="ident">i</label>]&amp;(<span class="lit-number">1</span>&lt;&lt;(<a href="arith.go.html#line-21" class="ident">_W</a>-<span class="lit-number">1</span>)) == <span class="lit-number">0</span> {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"x not normalized"</span>)
	}
	<span class="keyword">switch</span> <a href="arith.go.html#line-21" class="ident">_W</a> {
	<span class="keyword">case</span> <span class="lit-number">32</span>:
		<label for="r102" class="ident">v</label> := <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>(<label for="r100" class="ident">x</label>[<label for="r101" class="ident">i</label>]) &lt;&lt; <span class="lit-number">32</span>
		<span class="keyword">if</span> <label for="r101" class="ident">i</label> &gt; <span class="lit-number">0</span> {
			<label for="r102" class="ident">v</label> |= <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>(<label for="r100" class="ident">x</label>[<label for="r101" class="ident">i</label>-<span class="lit-number">1</span>])
		}
		<span class="keyword">return</span> <label for="r102" class="ident">v</label>
	<span class="keyword">case</span> <span class="lit-number">64</span>:
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>(<label for="r100" class="ident">x</label>[<label for="r101" class="ident">i</label>])
	}
	<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Uint64 returns the unsigned integer resulting from truncating x</span><span class="comment"> towards zero. If 0 &lt;= x &lt;= math.MaxUint64, the result is Exact</span><span class="comment"> if x is an integer and Below otherwise.</span><span class="comment"> The result is (0, Above) for x &lt; 0, and (math.MaxUint64, Below)</span><span class="comment"> for x &gt; math.MaxUint64.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r103" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r104" class="ident"><a href="../../../use/math/big..Float.Uint64.html" class="ident">Uint64</a></label>() (<a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>, <a href="#line-148" class="ident">Accuracy</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r103" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">switch</span> <label for="r103" class="ident">x</label>.<a href="#line-69" class="ident">form</a> {
	<span class="keyword">case</span> <a href="#line-125" class="ident">finite</a>:
		<span class="keyword">if</span> <label for="r103" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<span class="keyword">return</span> <span class="lit-number">0</span>, <a href="#line-154" class="ident">Above</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; x &lt; +Inf</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; x &lt; 1</span></div>
<div class="code"><pre><code>			<span class="keyword">return</span> <span class="lit-number">0</span>, <a href="#line-152" class="ident">Below</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 1 &lt;= x &lt; Inf</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> u = trunc(x) fits into a uint64</span></div>
<div class="code"><pre><code>			<label for="r105" class="ident">u</label> := <a href="#line-707" class="ident">msb64</a>(<label for="r103" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>) &gt;&gt; (<span class="lit-number">64</span> - <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r103" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>))
			<span class="keyword">if</span> <label for="r103" class="ident">x</label>.<a href="#line-215" class="ident">MinPrec</a>() &lt;= <span class="lit-number">64</span> {
				<span class="keyword">return</span> <label for="r105" class="ident">u</label>, <a href="#line-153" class="ident">Exact</a>
			}
			<span class="keyword">return</span> <label for="r105" class="ident">u</label>, <a href="#line-152" class="ident">Below</a> <span class="comment">// x truncated</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x too large</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-51" class="ident">MaxUint64</a>, <a href="#line-152" class="ident">Below</a>

	<span class="keyword">case</span> <a href="#line-124" class="ident">zero</a>:
		<span class="keyword">return</span> <span class="lit-number">0</span>, <a href="#line-153" class="ident">Exact</a>

	<span class="keyword">case</span> <a href="#line-126" class="ident">inf</a>:
		<span class="keyword">if</span> <label for="r103" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<span class="keyword">return</span> <span class="lit-number">0</span>, <a href="#line-154" class="ident">Above</a>
		}
		<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-51" class="ident">MaxUint64</a>, <a href="#line-152" class="ident">Below</a>
	}

	<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Int64 returns the integer resulting from truncating x towards zero.</span><span class="comment"> If math.MinInt64 &lt;= x &lt;= math.MaxInt64, the result is Exact if x is</span><span class="comment"> an integer, and Above (x &lt; 0) or Below (x &gt; 0) otherwise.</span><span class="comment"> The result is (math.MinInt64, Above) for x &lt; math.MinInt64,</span><span class="comment"> and (math.MaxInt64, Below) for x &gt; math.MaxInt64.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r106" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r107" class="ident"><a href="../../../use/math/big..Float.Int64.html" class="ident">Int64</a></label>() (<a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>, <a href="#line-148" class="ident">Accuracy</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r106" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">switch</span> <label for="r106" class="ident">x</label>.<a href="#line-69" class="ident">form</a> {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; |x| &lt; +Inf</span></div>
<div class="code"><pre><code>		<label for="r108" class="ident">acc</label> := <a href="#line-190" class="ident">makeAcc</a>(<label for="r106" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; |x| &lt; 1</span></div>
<div class="code"><pre><code>			<span class="keyword">return</span> <span class="lit-number">0</span>, <label for="r108" class="ident">acc</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x.exp &gt; 0</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 1 &lt;= |x| &lt; +Inf</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> i = trunc(x) fits into an int64 (excluding math.MinInt64)</span></div>
<div class="code"><pre><code>			<label for="r109" class="ident">i</label> := <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<a href="#line-707" class="ident">msb64</a>(<label for="r106" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>) &gt;&gt; (<span class="lit-number">64</span> - <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r106" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>)))
			<span class="keyword">if</span> <label for="r106" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
				<label for="r109" class="ident">i</label> = -<label for="r109" class="ident">i</label>
			}
			<span class="keyword">if</span> <label for="r106" class="ident">x</label>.<a href="#line-215" class="ident">MinPrec</a>() &lt;= <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r106" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>) {
				<span class="keyword">return</span> <label for="r109" class="ident">i</label>, <a href="#line-153" class="ident">Exact</a>
			}
			<span class="keyword">return</span> <label for="r109" class="ident">i</label>, <label for="r108" class="ident">acc</label> <span class="comment">// x truncated</span>
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> check for special case x == math.MinInt64 (i.e., x == -(0.5 &lt;&lt; 64))</span></div>
<div class="code"><pre><code>			<span class="keyword">if</span> <label for="r106" class="ident">x</label>.<a href="#line-72" class="ident">exp</a> == <span class="lit-number">64</span> &amp;&amp; <label for="r106" class="ident">x</label>.<a href="#line-215" class="ident">MinPrec</a>() == <span class="lit-number">1</span> {
				<label for="r108" class="ident">acc</label> = <a href="#line-153" class="ident">Exact</a>
			}
			<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-47" class="ident">MinInt64</a>, <label for="r108" class="ident">acc</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x too large</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-46" class="ident">MaxInt64</a>, <a href="#line-152" class="ident">Below</a>

	<span class="keyword">case</span> <a href="#line-124" class="ident">zero</a>:
		<span class="keyword">return</span> <span class="lit-number">0</span>, <a href="#line-153" class="ident">Exact</a>

	<span class="keyword">case</span> <a href="#line-126" class="ident">inf</a>:
		<span class="keyword">if</span> <label for="r106" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-47" class="ident">MinInt64</a>, <a href="#line-154" class="ident">Above</a>
		}
		<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-46" class="ident">MaxInt64</a>, <a href="#line-152" class="ident">Below</a>
	}

	<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Float32 returns the float32 value nearest to x. If x is too small to be</span><span class="comment"> represented by a float32 (|x| &lt; math.SmallestNonzeroFloat32), the result</span><span class="comment"> is (0, Below) or (-0, Above), respectively, depending on the sign of x.</span><span class="comment"> If x is too large to be represented by a float32 (|x| &gt; math.MaxFloat32),</span><span class="comment"> the result is (+Inf, Above) or (-Inf, Below), depending on the sign of x.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r110" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r111" class="ident"><a href="../../../use/math/big..Float.Float32.html" class="ident">Float32</a></label>() (<a href="../../../pkg/builtin.html#name-float32" class="ident">float32</a>, <a href="#line-148" class="ident">Accuracy</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r110" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">switch</span> <label for="r110" class="ident">x</label>.<a href="#line-69" class="ident">form</a> {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; |x| &lt; +Inf</span></div>
<div class="code"><pre><code>
		<span class="keyword">const</span> (
			<label for="r112" class="ident">fbits</label> = <span class="lit-number">32</span>                <span class="comment">//        float size</span>
			<label for="r113" class="ident">mbits</label> = <span class="lit-number">23</span>                <span class="comment">//        mantissa size (excluding implicit msb)</span>
			<label for="r114" class="ident">ebits</label> = <label for="r112" class="ident">fbits</label> - <label for="r113" class="ident">mbits</label> - <span class="lit-number">1</span> <span class="comment">//     8  exponent size</span>
			<label for="r115" class="ident">bias</label>  = <span class="lit-number">1</span>&lt;&lt;(<label for="r114" class="ident">ebits</label>-<span class="lit-number">1</span>) - <span class="lit-number">1</span>  <span class="comment">//   127  exponent bias</span>
			<label for="r116" class="ident">dmin</label>  = <span class="lit-number">1</span> - <label for="r115" class="ident">bias</label> - <label for="r113" class="ident">mbits</label>  <span class="comment">//  -149  smallest unbiased exponent (denormal)</span>
			<label for="r117" class="ident">emin</label>  = <span class="lit-number">1</span> - <label for="r115" class="ident">bias</label>          <span class="comment">//  -126  smallest unbiased exponent (normal)</span>
			<label for="r118" class="ident">emax</label>  = <label for="r115" class="ident">bias</label>              <span class="comment">//   127  largest unbiased exponent (normal)</span>
		)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Float mantissa m is 0.5 &lt;= m &lt; 1.0; compute exponent e for float32 mantissa.</span></div>
<div class="code"><pre><code>		<label for="r119" class="ident">e</label> := <label for="r110" class="ident">x</label>.<a href="#line-72" class="ident">exp</a> - <span class="lit-number">1</span> <span class="comment">// exponent for normal mantissa m with 1.0 &lt;= m &lt; 2.0</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Compute precision p for float32 mantissa.</span><span class="comment">		 If the exponent is too small, we have a denormal number before</span><span class="comment">		 rounding and fewer than p mantissa bits of precision available</span><span class="comment">		 (the exponent remains fixed but the mantissa gets shifted right).</span></div>
<div class="code"><pre><code>		<label for="r120" class="ident">p</label> := <label for="r113" class="ident">mbits</label> + <span class="lit-number">1</span> <span class="comment">// precision of normal float</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> recompute precision</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> If p == 0, the mantissa of x is shifted so much to the right</span><span class="comment">			 that its msb falls immediately to the right of the float32</span><span class="comment">			 mantissa space. In other words, if the smallest denormal is</span><span class="comment">			 considered "1.0", for p == 0, the mantissa value m is &gt;= 0.5.</span><span class="comment">			 If m &gt; 0.5, it is rounded up to 1.0; i.e., the smallest denormal.</span><span class="comment">			 If m == 0.5, it is rounded down to even, i.e., 0.0.</span><span class="comment">			 If p &lt; 0, the mantissa value m is &lt;= "0.25" which is never rounded up.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> underflow to ±0</span></div>
<div class="code"><pre><code>				<span class="keyword">if</span> <label for="r110" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
					<span class="keyword">var</span> <label for="r121" class="ident">z</label> <a href="../../../pkg/builtin.html#name-float32" class="ident">float32</a>
					<span class="keyword">return</span> -<label for="r121" class="ident">z</label>, <a href="#line-154" class="ident">Above</a>
				}
				<span class="keyword">return</span> <span class="lit-number">0.0</span>, <a href="#line-152" class="ident">Below</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> otherwise, round up</span><span class="comment">			 We handle p == 0 explicitly because it's easy and because</span><span class="comment">			 Float.round doesn't support rounding to 0 bits of precision.</span></div>
<div class="code"><pre><code>			<span class="keyword">if</span> <label for="r120" class="ident">p</label> == <span class="lit-number">0</span> {
				<span class="keyword">if</span> <label for="r110" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
					<span class="keyword">return</span> -<a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-32" class="ident">SmallestNonzeroFloat32</a>, <a href="#line-152" class="ident">Below</a>
				}
				<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-32" class="ident">SmallestNonzeroFloat32</a>, <a href="#line-154" class="ident">Above</a>
			}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> p &gt; 0</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> round</span></div>
<div class="code"><pre><code>		<span class="keyword">var</span> <label for="r122" class="ident">r</label> <a href="#line-65" class="ident">Float</a>
		<label for="r122" class="ident">r</label>.<a href="#line-66" class="ident">prec</a> = <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r120" class="ident">p</label>)
		<label for="r122" class="ident">r</label>.<a href="#line-646" class="ident">Set</a>(<label for="r110" class="ident">x</label>)
		<label for="r119" class="ident">e</label> = <label for="r122" class="ident">r</label>.<a href="#line-72" class="ident">exp</a> - <span class="lit-number">1</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Rounding may have caused r to overflow to ±Inf</span><span class="comment">		 (rounding never causes underflows to 0).</span><span class="comment">		 If the exponent is too large, also overflow to ±Inf.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> overflow</span></div>
<div class="code"><pre><code>			<span class="keyword">if</span> <label for="r110" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
				<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-float32" class="ident">float32</a>(<a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-20" class="ident">Inf</a>(-<span class="lit-number">1</span>)), <a href="#line-152" class="ident">Below</a>
			}
			<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-float32" class="ident">float32</a>(<a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-20" class="ident">Inf</a>(+<span class="lit-number">1</span>)), <a href="#line-154" class="ident">Above</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> e &lt;= emax</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Determine sign, biased exponent, and mantissa.</span></div>
<div class="code"><pre><code>		<span class="keyword">var</span> <label for="r123" class="ident">sign</label>, <label for="r124" class="ident">bexp</label>, <label for="r125" class="ident">mant</label> <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>
		<span class="keyword">if</span> <label for="r110" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<label for="r123" class="ident">sign</label> = <span class="lit-number">1</span> &lt;&lt; (<label for="r112" class="ident">fbits</label> - <span class="lit-number">1</span>)
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Rounding may have caused a denormal number to</span><span class="comment">		 become normal. Check again.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> denormal number: recompute precision</span><span class="comment">			 Since rounding may have at best increased precision</span><span class="comment">			 and we have eliminated p &lt;= 0 early, we know p &gt; 0.</span><span class="comment">			 bexp == 0 for denormals</span></div>
<div class="code"><pre><code>			<label for="r120" class="ident">p</label> = <label for="r113" class="ident">mbits</label> + <span class="lit-number">1</span> - <label for="r117" class="ident">emin</label> + <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>(<label for="r119" class="ident">e</label>)
			<label for="r125" class="ident">mant</label> = <a href="#line-689" class="ident">msb32</a>(<label for="r122" class="ident">r</label>.<a href="#line-71" class="ident">mant</a>) &gt;&gt; <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r112" class="ident">fbits</label>-<label for="r120" class="ident">p</label>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> normal number: emin &lt;= e &lt;= emax</span></div>
<div class="code"><pre><code>			<label for="r124" class="ident">bexp</label> = <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r119" class="ident">e</label>+<label for="r115" class="ident">bias</label>) &lt;&lt; <label for="r113" class="ident">mbits</label>
			<label for="r125" class="ident">mant</label> = <a href="#line-689" class="ident">msb32</a>(<label for="r122" class="ident">r</label>.<a href="#line-71" class="ident">mant</a>) &gt;&gt; <label for="r114" class="ident">ebits</label> &amp; (<span class="lit-number">1</span>&lt;&lt;<label for="r113" class="ident">mbits</label> - <span class="lit-number">1</span>) <span class="comment">// cut off msb (implicit 1 bit)</span>
		}

		<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../unsafe.go.html#line-18" class="ident">Float32frombits</a>(<label for="r123" class="ident">sign</label> | <label for="r124" class="ident">bexp</label> | <label for="r125" class="ident">mant</label>), <label for="r122" class="ident">r</label>.<a href="#line-68" class="ident">acc</a>

	<span class="keyword">case</span> <a href="#line-124" class="ident">zero</a>:
		<span class="keyword">if</span> <label for="r110" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<span class="keyword">var</span> <label for="r126" class="ident">z</label> <a href="../../../pkg/builtin.html#name-float32" class="ident">float32</a>
			<span class="keyword">return</span> -<label for="r126" class="ident">z</label>, <a href="#line-153" class="ident">Exact</a>
		}
		<span class="keyword">return</span> <span class="lit-number">0.0</span>, <a href="#line-153" class="ident">Exact</a>

	<span class="keyword">case</span> <a href="#line-126" class="ident">inf</a>:
		<span class="keyword">if</span> <label for="r110" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-float32" class="ident">float32</a>(<a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-20" class="ident">Inf</a>(-<span class="lit-number">1</span>)), <a href="#line-153" class="ident">Exact</a>
		}
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-float32" class="ident">float32</a>(<a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-20" class="ident">Inf</a>(+<span class="lit-number">1</span>)), <a href="#line-153" class="ident">Exact</a>
	}

	<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Float64 returns the float64 value nearest to x. If x is too small to be</span><span class="comment"> represented by a float64 (|x| &lt; math.SmallestNonzeroFloat64), the result</span><span class="comment"> is (0, Below) or (-0, Above), respectively, depending on the sign of x.</span><span class="comment"> If x is too large to be represented by a float64 (|x| &gt; math.MaxFloat64),</span><span class="comment"> the result is (+Inf, Above) or (-Inf, Below), depending on the sign of x.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r127" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r128" class="ident"><a href="../../../use/math/big..Float.Float64.html" class="ident">Float64</a></label>() (<a href="../../../pkg/builtin.html#name-float64" class="ident">float64</a>, <a href="#line-148" class="ident">Accuracy</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r127" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">switch</span> <label for="r127" class="ident">x</label>.<a href="#line-69" class="ident">form</a> {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; |x| &lt; +Inf</span></div>
<div class="code"><pre><code>
		<span class="keyword">const</span> (
			<label for="r129" class="ident">fbits</label> = <span class="lit-number">64</span>                <span class="comment">//        float size</span>
			<label for="r130" class="ident">mbits</label> = <span class="lit-number">52</span>                <span class="comment">//        mantissa size (excluding implicit msb)</span>
			<label for="r131" class="ident">ebits</label> = <label for="r129" class="ident">fbits</label> - <label for="r130" class="ident">mbits</label> - <span class="lit-number">1</span> <span class="comment">//    11  exponent size</span>
			<label for="r132" class="ident">bias</label>  = <span class="lit-number">1</span>&lt;&lt;(<label for="r131" class="ident">ebits</label>-<span class="lit-number">1</span>) - <span class="lit-number">1</span>  <span class="comment">//  1023  exponent bias</span>
			<label for="r133" class="ident">dmin</label>  = <span class="lit-number">1</span> - <label for="r132" class="ident">bias</label> - <label for="r130" class="ident">mbits</label>  <span class="comment">// -1074  smallest unbiased exponent (denormal)</span>
			<label for="r134" class="ident">emin</label>  = <span class="lit-number">1</span> - <label for="r132" class="ident">bias</label>          <span class="comment">// -1022  smallest unbiased exponent (normal)</span>
			<label for="r135" class="ident">emax</label>  = <label for="r132" class="ident">bias</label>              <span class="comment">//  1023  largest unbiased exponent (normal)</span>
		)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Float mantissa m is 0.5 &lt;= m &lt; 1.0; compute exponent e for float64 mantissa.</span></div>
<div class="code"><pre><code>		<label for="r136" class="ident">e</label> := <label for="r127" class="ident">x</label>.<a href="#line-72" class="ident">exp</a> - <span class="lit-number">1</span> <span class="comment">// exponent for normal mantissa m with 1.0 &lt;= m &lt; 2.0</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Compute precision p for float64 mantissa.</span><span class="comment">		 If the exponent is too small, we have a denormal number before</span><span class="comment">		 rounding and fewer than p mantissa bits of precision available</span><span class="comment">		 (the exponent remains fixed but the mantissa gets shifted right).</span></div>
<div class="code"><pre><code>		<label for="r137" class="ident">p</label> := <label for="r130" class="ident">mbits</label> + <span class="lit-number">1</span> <span class="comment">// precision of normal float</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> recompute precision</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> If p == 0, the mantissa of x is shifted so much to the right</span><span class="comment">			 that its msb falls immediately to the right of the float64</span><span class="comment">			 mantissa space. In other words, if the smallest denormal is</span><span class="comment">			 considered "1.0", for p == 0, the mantissa value m is &gt;= 0.5.</span><span class="comment">			 If m &gt; 0.5, it is rounded up to 1.0; i.e., the smallest denormal.</span><span class="comment">			 If m == 0.5, it is rounded down to even, i.e., 0.0.</span><span class="comment">			 If p &lt; 0, the mantissa value m is &lt;= "0.25" which is never rounded up.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> underflow to ±0</span></div>
<div class="code"><pre><code>				<span class="keyword">if</span> <label for="r127" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
					<span class="keyword">var</span> <label for="r138" class="ident">z</label> <a href="../../../pkg/builtin.html#name-float64" class="ident">float64</a>
					<span class="keyword">return</span> -<label for="r138" class="ident">z</label>, <a href="#line-154" class="ident">Above</a>
				}
				<span class="keyword">return</span> <span class="lit-number">0.0</span>, <a href="#line-152" class="ident">Below</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> otherwise, round up</span><span class="comment">			 We handle p == 0 explicitly because it's easy and because</span><span class="comment">			 Float.round doesn't support rounding to 0 bits of precision.</span></div>
<div class="code"><pre><code>			<span class="keyword">if</span> <label for="r137" class="ident">p</label> == <span class="lit-number">0</span> {
				<span class="keyword">if</span> <label for="r127" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
					<span class="keyword">return</span> -<a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-35" class="ident">SmallestNonzeroFloat64</a>, <a href="#line-152" class="ident">Below</a>
				}
				<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../const.go.html#line-35" class="ident">SmallestNonzeroFloat64</a>, <a href="#line-154" class="ident">Above</a>
			}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> p &gt; 0</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> round</span></div>
<div class="code"><pre><code>		<span class="keyword">var</span> <label for="r139" class="ident">r</label> <a href="#line-65" class="ident">Float</a>
		<label for="r139" class="ident">r</label>.<a href="#line-66" class="ident">prec</a> = <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>(<label for="r137" class="ident">p</label>)
		<label for="r139" class="ident">r</label>.<a href="#line-646" class="ident">Set</a>(<label for="r127" class="ident">x</label>)
		<label for="r136" class="ident">e</label> = <label for="r139" class="ident">r</label>.<a href="#line-72" class="ident">exp</a> - <span class="lit-number">1</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Rounding may have caused r to overflow to ±Inf</span><span class="comment">		 (rounding never causes underflows to 0).</span><span class="comment">		 If the exponent is too large, also overflow to ±Inf.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> overflow</span></div>
<div class="code"><pre><code>			<span class="keyword">if</span> <label for="r127" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
				<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-20" class="ident">Inf</a>(-<span class="lit-number">1</span>), <a href="#line-152" class="ident">Below</a>
			}
			<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-20" class="ident">Inf</a>(+<span class="lit-number">1</span>), <a href="#line-154" class="ident">Above</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> e &lt;= emax</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Determine sign, biased exponent, and mantissa.</span></div>
<div class="code"><pre><code>		<span class="keyword">var</span> <label for="r140" class="ident">sign</label>, <label for="r141" class="ident">bexp</label>, <label for="r142" class="ident">mant</label> <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>
		<span class="keyword">if</span> <label for="r127" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<label for="r140" class="ident">sign</label> = <span class="lit-number">1</span> &lt;&lt; (<label for="r129" class="ident">fbits</label> - <span class="lit-number">1</span>)
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Rounding may have caused a denormal number to</span><span class="comment">		 become normal. Check again.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> denormal number: recompute precision</span><span class="comment">			 Since rounding may have at best increased precision</span><span class="comment">			 and we have eliminated p &lt;= 0 early, we know p &gt; 0.</span><span class="comment">			 bexp == 0 for denormals</span></div>
<div class="code"><pre><code>			<label for="r137" class="ident">p</label> = <label for="r130" class="ident">mbits</label> + <span class="lit-number">1</span> - <label for="r134" class="ident">emin</label> + <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>(<label for="r136" class="ident">e</label>)
			<label for="r142" class="ident">mant</label> = <a href="#line-707" class="ident">msb64</a>(<label for="r139" class="ident">r</label>.<a href="#line-71" class="ident">mant</a>) &gt;&gt; <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r129" class="ident">fbits</label>-<label for="r137" class="ident">p</label>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> normal number: emin &lt;= e &lt;= emax</span></div>
<div class="code"><pre><code>			<label for="r141" class="ident">bexp</label> = <a href="../../../pkg/builtin.html#name-uint64" class="ident">uint64</a>(<label for="r136" class="ident">e</label>+<label for="r132" class="ident">bias</label>) &lt;&lt; <label for="r130" class="ident">mbits</label>
			<label for="r142" class="ident">mant</label> = <a href="#line-707" class="ident">msb64</a>(<label for="r139" class="ident">r</label>.<a href="#line-71" class="ident">mant</a>) &gt;&gt; <label for="r131" class="ident">ebits</label> &amp; (<span class="lit-number">1</span>&lt;&lt;<label for="r130" class="ident">mbits</label> - <span class="lit-number">1</span>) <span class="comment">// cut off msb (implicit 1 bit)</span>
		}

		<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../unsafe.go.html#line-29" class="ident">Float64frombits</a>(<label for="r140" class="ident">sign</label> | <label for="r141" class="ident">bexp</label> | <label for="r142" class="ident">mant</label>), <label for="r139" class="ident">r</label>.<a href="#line-68" class="ident">acc</a>

	<span class="keyword">case</span> <a href="#line-124" class="ident">zero</a>:
		<span class="keyword">if</span> <label for="r127" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<span class="keyword">var</span> <label for="r143" class="ident">z</label> <a href="../../../pkg/builtin.html#name-float64" class="ident">float64</a>
			<span class="keyword">return</span> -<label for="r143" class="ident">z</label>, <a href="#line-153" class="ident">Exact</a>
		}
		<span class="keyword">return</span> <span class="lit-number">0.0</span>, <a href="#line-153" class="ident">Exact</a>

	<span class="keyword">case</span> <a href="#line-126" class="ident">inf</a>:
		<span class="keyword">if</span> <label for="r127" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
			<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-20" class="ident">Inf</a>(-<span class="lit-number">1</span>), <a href="#line-153" class="ident">Exact</a>
		}
		<span class="keyword">return</span> <a href="../../../pkg/math.html" class="ident i1">math</a>.<a href="../bits.go.html#line-20" class="ident">Inf</a>(+<span class="lit-number">1</span>), <a href="#line-153" class="ident">Exact</a>
	}

	<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Int returns the result of truncating x towards zero;</span><span class="comment"> or nil if x is an infinity.</span><span class="comment"> The result is Exact if x.IsInt(); otherwise it is Below</span><span class="comment"> for x &gt; 0, and Above for x &lt; 0.</span><span class="comment"> If a non-nil *Int argument z is provided, Int stores</span><span class="comment"> the result in z instead of allocating a new Int.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r144" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r145" class="ident"><a href="../../../use/math/big..Float.Int.html" class="ident">Int</a></label>(<label for="r146" class="ident">z</label> *<a href="int.go.html#line-25" class="ident">Int</a>) (*<a href="int.go.html#line-25" class="ident">Int</a>, <a href="#line-148" class="ident">Accuracy</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r144" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">if</span> <label for="r146" class="ident">z</label> == <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> &amp;&amp; <label for="r144" class="ident">x</label>.<a href="#line-69" class="ident">form</a> &lt;= <a href="#line-125" class="ident">finite</a> {
		<label for="r146" class="ident">z</label> = <a href="../../../pkg/builtin.html#name-new" class="ident">new</a>(<a href="int.go.html#line-25" class="ident">Int</a>)
	}

	<span class="keyword">switch</span> <label for="r144" class="ident">x</label>.<a href="#line-69" class="ident">form</a> {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; |x| &lt; +Inf</span></div>
<div class="code"><pre><code>		<label for="r147" class="ident">acc</label> := <a href="#line-190" class="ident">makeAcc</a>(<label for="r144" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; |x| &lt; 1</span></div>
<div class="code"><pre><code>			<span class="keyword">return</span> <label for="r146" class="ident">z</label>.<a href="int.go.html#line-49" class="ident">SetInt64</a>(<span class="lit-number">0</span>), <label for="r147" class="ident">acc</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x.exp &gt; 0</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 1 &lt;= |x| &lt; +Inf</span><span class="comment">		 determine minimum required precision for x</span></div>
<div class="code"><pre><code>		<label for="r148" class="ident">allBits</label> := <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r144" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)) * <a href="arith.go.html#line-21" class="ident">_W</a>
		<label for="r149" class="ident">exp</label> := <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r144" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>)
		<span class="keyword">if</span> <label for="r144" class="ident">x</label>.<a href="#line-215" class="ident">MinPrec</a>() &lt;= <label for="r149" class="ident">exp</label> {
			<label for="r147" class="ident">acc</label> = <a href="#line-153" class="ident">Exact</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> shift mantissa as needed</span></div>
<div class="code"><pre><code>		<span class="keyword">if</span> <label for="r146" class="ident">z</label> == <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> {
			<label for="r146" class="ident">z</label> = <a href="../../../pkg/builtin.html#name-new" class="ident">new</a>(<a href="int.go.html#line-25" class="ident">Int</a>)
		}
		<label for="r146" class="ident">z</label>.<a href="int.go.html#line-26" class="ident">neg</a> = <label for="r144" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>
		<span class="keyword">switch</span> {
		<span class="keyword">case</span> <label for="r149" class="ident">exp</label> &gt; <label for="r148" class="ident">allBits</label>:
			<label for="r146" class="ident">z</label>.<a href="int.go.html#line-27" class="ident">abs</a> = <label for="r146" class="ident">z</label>.<a href="int.go.html#line-27" class="ident">abs</a>.<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r144" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r149" class="ident">exp</label>-<label for="r148" class="ident">allBits</label>)
		<span class="keyword">default</span>:
			<label for="r146" class="ident">z</label>.<a href="int.go.html#line-27" class="ident">abs</a> = <label for="r146" class="ident">z</label>.<a href="int.go.html#line-27" class="ident">abs</a>.<a href="nat.go.html#line-93" class="ident">set</a>(<label for="r144" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
		<span class="keyword">case</span> <label for="r149" class="ident">exp</label> &lt; <label for="r148" class="ident">allBits</label>:
			<label for="r146" class="ident">z</label>.<a href="int.go.html#line-27" class="ident">abs</a> = <label for="r146" class="ident">z</label>.<a href="int.go.html#line-27" class="ident">abs</a>.<a href="nat.go.html#line-1018" class="ident">shr</a>(<label for="r144" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r148" class="ident">allBits</label>-<label for="r149" class="ident">exp</label>)
		}
		<span class="keyword">return</span> <label for="r146" class="ident">z</label>, <label for="r147" class="ident">acc</label>

	<span class="keyword">case</span> <a href="#line-124" class="ident">zero</a>:
		<span class="keyword">return</span> <label for="r146" class="ident">z</label>.<a href="int.go.html#line-49" class="ident">SetInt64</a>(<span class="lit-number">0</span>), <a href="#line-153" class="ident">Exact</a>

	<span class="keyword">case</span> <a href="#line-126" class="ident">inf</a>:
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="#line-190" class="ident">makeAcc</a>(<label for="r144" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>)
	}

	<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Rat returns the rational number corresponding to x;</span><span class="comment"> or nil if x is an infinity.</span><span class="comment"> The result is Exact if x is not an Inf.</span><span class="comment"> If a non-nil *Rat argument z is provided, Rat stores</span><span class="comment"> the result in z instead of allocating a new Rat.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r150" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r151" class="ident"><a href="../../../use/math/big..Float.Rat.html" class="ident">Rat</a></label>(<label for="r152" class="ident">z</label> *<a href="rat.go.html#line-23" class="ident">Rat</a>) (*<a href="rat.go.html#line-23" class="ident">Rat</a>, <a href="#line-148" class="ident">Accuracy</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r150" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">if</span> <label for="r152" class="ident">z</label> == <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a> &amp;&amp; <label for="r150" class="ident">x</label>.<a href="#line-69" class="ident">form</a> &lt;= <a href="#line-125" class="ident">finite</a> {
		<label for="r152" class="ident">z</label> = <a href="../../../pkg/builtin.html#name-new" class="ident">new</a>(<a href="rat.go.html#line-23" class="ident">Rat</a>)
	}

	<span class="keyword">switch</span> <label for="r150" class="ident">x</label>.<a href="#line-69" class="ident">form</a> {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> 0 &lt; |x| &lt; +Inf</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> build up numerator and denominator</span></div>
<div class="code"><pre><code>		<label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">a</a>.<a href="int.go.html#line-26" class="ident">neg</a> = <label for="r150" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>
		<span class="keyword">switch</span> {
		<span class="keyword">case</span> <label for="r150" class="ident">x</label>.<a href="#line-72" class="ident">exp</a> &gt; <label for="r153" class="ident">allBits</label>:
			<label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">a</a>.<a href="int.go.html#line-27" class="ident">abs</a> = <label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">a</a>.<a href="int.go.html#line-27" class="ident">abs</a>.<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r150" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r150" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>-<label for="r153" class="ident">allBits</label>))
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> z already in normal form</span></div>
<div class="code"><pre><code>		<span class="keyword">default</span>:
			<label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">a</a>.<a href="int.go.html#line-27" class="ident">abs</a> = <label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">a</a>.<a href="int.go.html#line-27" class="ident">abs</a>.<a href="nat.go.html#line-93" class="ident">set</a>(<label for="r150" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> z already in normal form</span></div>
<div class="code"><pre><code>		<span class="keyword">case</span> <label for="r150" class="ident">x</label>.<a href="#line-72" class="ident">exp</a> &lt; <label for="r153" class="ident">allBits</label>:
			<label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">a</a>.<a href="int.go.html#line-27" class="ident">abs</a> = <label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">a</a>.<a href="int.go.html#line-27" class="ident">abs</a>.<a href="nat.go.html#line-93" class="ident">set</a>(<label for="r150" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
			<label for="r154" class="ident">t</label> := <label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">b</a>.<a href="int.go.html#line-27" class="ident">abs</a>.<a href="nat.go.html#line-81" class="ident">setUint64</a>(<span class="lit-number">1</span>)
			<label for="r152" class="ident">z</label>.<a href="rat.go.html#line-29" class="ident">b</a>.<a href="int.go.html#line-27" class="ident">abs</a> = <label for="r154" class="ident">t</label>.<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r154" class="ident">t</label>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r153" class="ident">allBits</label>-<label for="r150" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>))
			<label for="r152" class="ident">z</label>.<a href="rat.go.html#line-431" class="ident">norm</a>()
		}
		<span class="keyword">return</span> <label for="r152" class="ident">z</label>, <a href="#line-153" class="ident">Exact</a>

	<span class="keyword">case</span> <a href="#line-124" class="ident">zero</a>:
		<span class="keyword">return</span> <label for="r152" class="ident">z</label>.<a href="rat.go.html#line-340" class="ident">SetInt64</a>(<span class="lit-number">0</span>), <a href="#line-153" class="ident">Exact</a>

	<span class="keyword">case</span> <a href="#line-126" class="ident">inf</a>:
		<span class="keyword">return</span> <a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="#line-190" class="ident">makeAcc</a>(<label for="r150" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>)
	}

	<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"unreachable"</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Abs sets z to the (possibly rounded) value |x| (the absolute value of x)</span><span class="comment"> and returns z.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r155" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r156" class="ident"><a href="../../../use/math/big..Float.Abs.html" class="ident">Abs</a></label>(<label for="r157" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) *<a href="#line-65" class="ident">Float</a> {
	<label for="r155" class="ident">z</label>.<a href="#line-646" class="ident">Set</a>(<label for="r157" class="ident">x</label>)
	<label for="r155" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/builtin.html#name-false" class="ident">false</a>
	<span class="keyword">return</span> <label for="r155" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Neg sets z to the (possibly rounded) value of x with its sign negated,</span><span class="comment"> and returns z.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r158" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r159" class="ident"><a href="../../../use/math/big..Float.Neg.html" class="ident">Neg</a></label>(<label for="r160" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) *<a href="#line-65" class="ident">Float</a> {
	<label for="r158" class="ident">z</label>.<a href="#line-646" class="ident">Set</a>(<label for="r160" class="ident">x</label>)
	<label for="r158" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = !<label for="r158" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>
	<span class="keyword">return</span> <label for="r158" class="ident">z</label>
}

<span class="keyword">func</span> <label for="r161" class="ident"><a href="../../../pkg/math/big.html#name-validateBinaryOperands" class="ident">validateBinaryOperands</a></label>(<label for="r162" class="ident">x</label>, <label for="r163" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) {
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> avoid performance bugs</span></div>
<div class="code"><pre><code>		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"validateBinaryOperands called but debugFloat is not set"</span>)
	}
	<span class="keyword">if</span> <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r162" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>) == <span class="lit-number">0</span> {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"empty mantissa for x"</span>)
	}
	<span class="keyword">if</span> <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r163" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>) == <span class="lit-number">0</span> {
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<span class="lit-string">"empty mantissa for y"</span>)
	}
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> z = x + y, ignoring signs of x and y for the addition</span><span class="comment"> but using the sign of z for rounding the result.</span><span class="comment"> x and y must have a non-empty mantissa and valid exponent.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Note: This implementation requires 2 shifts most of the</span><span class="comment">	 time. It is also inefficient if exponents or precisions</span><span class="comment">	 differ by wide margins. The following article describes</span><span class="comment">	 an efficient (but much more complicated) implementation</span><span class="comment">	 compatible with the internal representation used here:</span><span class="comment">	</span><span class="comment">	 Vincent Lefèvre: "The Generic Multiple-Precision Floating-</span><span class="comment">	 Point Addition With Exact Rounding (as in the MPFR Library)"</span><span class="comment">	 http://www.vinc17.net/research/papers/rnc6.pdf</span></div>
<div class="code"><pre><code>
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<a href="#line-1188" class="ident">validateBinaryOperands</a>(<label for="r166" class="ident">x</label>, <label for="r167" class="ident">y</label>)
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> compute exponents ex, ey for mantissa with "binary point"</span><span class="comment">	 on the right (mantissa.0) - use int64 to avoid overflow</span></div>
<div class="code"><pre><code>	<label for="r168" class="ident">ex</label> := <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r166" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>) - <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r166" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>))*<a href="arith.go.html#line-21" class="ident">_W</a>
	<label for="r169" class="ident">ey</label> := <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r167" class="ident">y</label>.<a href="#line-72" class="ident">exp</a>) - <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r167" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>))*<a href="arith.go.html#line-21" class="ident">_W</a>

	<label for="r170" class="ident">al</label> := <a href="nat.go.html#line-370" class="ident">alias</a>(<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>, <label for="r166" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>) || <a href="nat.go.html#line-370" class="ident">alias</a>(<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>, <label for="r167" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> TODO(gri) having a combined add-and-shift primitive</span><span class="comment">	           could make this code significantly faster</span></div>
<div class="code"><pre><code>	<span class="keyword">switch</span> {
	<span class="keyword">case</span> <label for="r168" class="ident">ex</label> &lt; <label for="r169" class="ident">ey</label>:
		<span class="keyword">if</span> <label for="r170" class="ident">al</label> {
			<label for="r171" class="ident">t</label> := <a href="nat.go.html#line-35" class="ident">nat</a>(<a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>).<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r167" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r169" class="ident">ey</label>-<label for="r168" class="ident">ex</label>))
			<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-99" class="ident">add</a>(<label for="r166" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r171" class="ident">t</label>)
		} <span class="keyword">else</span> {
			<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r167" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r169" class="ident">ey</label>-<label for="r168" class="ident">ex</label>))
			<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-99" class="ident">add</a>(<label for="r166" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>)
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ex == ey, no shift needed</span></div>
<div class="code"><pre><code>		<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-99" class="ident">add</a>(<label for="r166" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r167" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
	<span class="keyword">case</span> <label for="r168" class="ident">ex</label> &gt; <label for="r169" class="ident">ey</label>:
		<span class="keyword">if</span> <label for="r170" class="ident">al</label> {
			<label for="r172" class="ident">t</label> := <a href="nat.go.html#line-35" class="ident">nat</a>(<a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>).<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r166" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r168" class="ident">ex</label>-<label for="r169" class="ident">ey</label>))
			<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-99" class="ident">add</a>(<label for="r172" class="ident">t</label>, <label for="r167" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
		} <span class="keyword">else</span> {
			<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r166" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r168" class="ident">ex</label>-<label for="r169" class="ident">ey</label>))
			<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-99" class="ident">add</a>(<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>, <label for="r167" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
		}
		<label for="r168" class="ident">ex</label> = <label for="r169" class="ident">ey</label>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> len(z.mant) &gt; 0</span></div>
<div class="code"><pre><code>
	<label for="r164" class="ident">z</label>.<a href="#line-284" class="ident">setExpAndRound</a>(<label for="r168" class="ident">ex</label>+<a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>))*<a href="arith.go.html#line-21" class="ident">_W</a>-<a href="#line-575" class="ident">fnorm</a>(<label for="r164" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>), <span class="lit-number">0</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> z = x - y for |x| &gt; |y|, ignoring signs of x and y for the subtraction</span><span class="comment"> but using the sign of z for rounding the result.</span><span class="comment"> x and y must have a non-empty mantissa and valid exponent.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> This code is symmetric to uadd.</span><span class="comment">	 We have not factored the common code out because</span><span class="comment">	 eventually uadd (and usub) should be optimized</span><span class="comment">	 by special-casing, and the code will diverge.</span></div>
<div class="code"><pre><code>
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<a href="#line-1188" class="ident">validateBinaryOperands</a>(<label for="r175" class="ident">x</label>, <label for="r176" class="ident">y</label>)
	}

	<label for="r177" class="ident">ex</label> := <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r175" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>) - <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r175" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>))*<a href="arith.go.html#line-21" class="ident">_W</a>
	<label for="r178" class="ident">ey</label> := <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r176" class="ident">y</label>.<a href="#line-72" class="ident">exp</a>) - <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r176" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>))*<a href="arith.go.html#line-21" class="ident">_W</a>

	<label for="r179" class="ident">al</label> := <a href="nat.go.html#line-370" class="ident">alias</a>(<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>, <label for="r175" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>) || <a href="nat.go.html#line-370" class="ident">alias</a>(<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>, <label for="r176" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)

	<span class="keyword">switch</span> {
	<span class="keyword">case</span> <label for="r177" class="ident">ex</label> &lt; <label for="r178" class="ident">ey</label>:
		<span class="keyword">if</span> <label for="r179" class="ident">al</label> {
			<label for="r180" class="ident">t</label> := <a href="nat.go.html#line-35" class="ident">nat</a>(<a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>).<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r176" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r178" class="ident">ey</label>-<label for="r177" class="ident">ex</label>))
			<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r180" class="ident">t</label>.<a href="nat.go.html#line-125" class="ident">sub</a>(<label for="r175" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r180" class="ident">t</label>)
		} <span class="keyword">else</span> {
			<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r176" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r178" class="ident">ey</label>-<label for="r177" class="ident">ex</label>))
			<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-125" class="ident">sub</a>(<label for="r175" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>)
		}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ex == ey, no shift needed</span></div>
<div class="code"><pre><code>		<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-125" class="ident">sub</a>(<label for="r175" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r176" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
	<span class="keyword">case</span> <label for="r177" class="ident">ex</label> &gt; <label for="r178" class="ident">ey</label>:
		<span class="keyword">if</span> <label for="r179" class="ident">al</label> {
			<label for="r181" class="ident">t</label> := <a href="nat.go.html#line-35" class="ident">nat</a>(<a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>).<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r175" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r177" class="ident">ex</label>-<label for="r178" class="ident">ey</label>))
			<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r181" class="ident">t</label>.<a href="nat.go.html#line-125" class="ident">sub</a>(<label for="r181" class="ident">t</label>, <label for="r176" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
		} <span class="keyword">else</span> {
			<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-993" class="ident">shl</a>(<label for="r175" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>(<label for="r177" class="ident">ex</label>-<label for="r178" class="ident">ey</label>))
			<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-125" class="ident">sub</a>(<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>, <label for="r176" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
		}
		<label for="r177" class="ident">ex</label> = <label for="r178" class="ident">ey</label>
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> operands may have canceled each other out</span></div>
<div class="code"><pre><code>	<span class="keyword">if</span> <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>) == <span class="lit-number">0</span> {
		<label for="r173" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
		<label for="r173" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<label for="r173" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/builtin.html#name-false" class="ident">false</a>
		<span class="keyword">return</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> len(z.mant) &gt; 0</span></div>
<div class="code"><pre><code>
	<label for="r173" class="ident">z</label>.<a href="#line-284" class="ident">setExpAndRound</a>(<label for="r177" class="ident">ex</label>+<a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>))*<a href="arith.go.html#line-21" class="ident">_W</a>-<a href="#line-575" class="ident">fnorm</a>(<label for="r173" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>), <span class="lit-number">0</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> z = x * y, ignoring signs of x and y for the multiplication</span><span class="comment"> but using the sign of z for rounding the result.</span><span class="comment"> x and y must have a non-empty mantissa and valid exponent.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r182" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r183" class="ident"><a href="../../../use/math/big..Float.umul*15a13.html" class="ident">umul</a></label>(<label for="r184" class="ident">x</label>, <label for="r185" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<a href="#line-1188" class="ident">validateBinaryOperands</a>(<label for="r184" class="ident">x</label>, <label for="r185" class="ident">y</label>)
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Note: This is doing too much work if the precision</span><span class="comment">	 of z is less than the sum of the precisions of x</span><span class="comment">	 and y which is often the case (e.g., if all floats</span><span class="comment">	 have the same precision).</span><span class="comment">	 TODO(gri) Optimize this for the common case.</span></div>
<div class="code"><pre><code>
	<label for="r186" class="ident">e</label> := <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r184" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>) + <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r185" class="ident">y</label>.<a href="#line-72" class="ident">exp</a>)
	<span class="keyword">if</span> <label for="r184" class="ident">x</label> == <label for="r185" class="ident">y</label> {
		<label for="r182" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r182" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-560" class="ident">sqr</a>(<label for="r184" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
	} <span class="keyword">else</span> {
		<label for="r182" class="ident">z</label>.<a href="#line-71" class="ident">mant</a> = <label for="r182" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-408" class="ident">mul</a>(<label for="r184" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>, <label for="r185" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
	}
	<label for="r182" class="ident">z</label>.<a href="#line-284" class="ident">setExpAndRound</a>(<label for="r186" class="ident">e</label>-<a href="#line-575" class="ident">fnorm</a>(<label for="r182" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>), <span class="lit-number">0</span>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> z = x / y, ignoring signs of x and y for the division</span><span class="comment"> but using the sign of z for rounding the result.</span><span class="comment"> x and y must have a non-empty mantissa and valid exponent.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r187" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r188" class="ident"><a href="../../../use/math/big..Float.uquo*a8f2f.html" class="ident">uquo</a></label>(<label for="r189" class="ident">x</label>, <label for="r190" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<a href="#line-1188" class="ident">validateBinaryOperands</a>(<label for="r189" class="ident">x</label>, <label for="r190" class="ident">y</label>)
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> mantissa length in words for desired result precision + 1</span><span class="comment">	 (at least one extra bit so we get the rounding bit after</span><span class="comment">	 the division)</span></div>
<div class="code"><pre><code>	<label for="r191" class="ident">n</label> := <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>(<label for="r187" class="ident">z</label>.<a href="#line-66" class="ident">prec</a>/<a href="arith.go.html#line-21" class="ident">_W</a>) + <span class="lit-number">1</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> compute adjusted x.mant such that we get enough result precision</span></div>
<div class="code"><pre><code>	<label for="r192" class="ident">xadj</label> := <label for="r189" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> d extra words needed =&gt; add d "0 digits" to x</span></div>
<div class="code"><pre><code>		<label for="r192" class="ident">xadj</label> = <a href="../../../pkg/builtin.html#name-make" class="ident">make</a>(<a href="nat.go.html#line-35" class="ident">nat</a>, <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r189" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)+<label for="r193" class="ident">d</label>)
		<a href="../../../pkg/builtin.html#name-copy" class="ident">copy</a>(<label for="r192" class="ident">xadj</label>[<label for="r193" class="ident">d</label>:], <label for="r189" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> TODO(gri): If we have too many digits (d &lt; 0), we should be able</span><span class="comment">	 to shorten x for faster division. But we must be extra careful</span><span class="comment">	 with rounding in that case.</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Compute d before division since there may be aliasing of x.mant</span><span class="comment">	 (via xadj) or y.mant with z.mant.</span></div>
<div class="code"><pre><code>	<label for="r194" class="ident">d</label> := <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r192" class="ident">xadj</label>) - <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r190" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> divide</span></div>
<div class="code"><pre><code>	<span class="keyword">var</span> <label for="r195" class="ident">r</label> <a href="nat.go.html#line-35" class="ident">nat</a>
	<label for="r187" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>, <label for="r195" class="ident">r</label> = <label for="r187" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>.<a href="nat.go.html#line-654" class="ident">div</a>(<a href="../../../pkg/builtin.html#name-nil" class="ident">nil</a>, <label for="r192" class="ident">xadj</label>, <label for="r190" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
	<label for="r196" class="ident">e</label> := <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r189" class="ident">x</label>.<a href="#line-72" class="ident">exp</a>) - <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r190" class="ident">y</label>.<a href="#line-72" class="ident">exp</a>) - <a href="../../../pkg/builtin.html#name-int64" class="ident">int64</a>(<label for="r194" class="ident">d</label>-<a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r187" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>))*<a href="arith.go.html#line-21" class="ident">_W</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> The result is long enough to include (at least) the rounding bit.</span><span class="comment">	 If there's a non-zero remainder, the corresponding fractional part</span><span class="comment">	 (if it were computed), would have a non-zero sticky bit (if it were</span><span class="comment">	 zero, it couldn't have a non-zero remainder).</span></div>
<div class="code"><pre><code>	<span class="keyword">var</span> <label for="r197" class="ident">sbit</label> <a href="../../../pkg/builtin.html#name-uint" class="ident">uint</a>
	<span class="keyword">if</span> <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r195" class="ident">r</label>) &gt; <span class="lit-number">0</span> {
		<label for="r197" class="ident">sbit</label> = <span class="lit-number">1</span>
	}

	<label for="r187" class="ident">z</label>.<a href="#line-284" class="ident">setExpAndRound</a>(<label for="r196" class="ident">e</label>-<a href="#line-575" class="ident">fnorm</a>(<label for="r187" class="ident">z</label>.<a href="#line-71" class="ident">mant</a>), <label for="r197" class="ident">sbit</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ucmp returns -1, 0, or +1, depending on whether</span><span class="comment"> |x| &lt; |y|, |x| == |y|, or |x| &gt; |y|.</span><span class="comment"> x and y must have a non-empty mantissa and valid exponent.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r198" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r199" class="ident"><a href="../../../use/math/big..Float.ucmp*9f6fa.html" class="ident">ucmp</a></label>(<label for="r200" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) <a href="../../../pkg/builtin.html#name-int" class="ident">int</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<a href="#line-1188" class="ident">validateBinaryOperands</a>(<label for="r198" class="ident">x</label>, <label for="r200" class="ident">y</label>)
	}

	<span class="keyword">switch</span> {
	<span class="keyword">case</span> <label for="r198" class="ident">x</label>.<a href="#line-72" class="ident">exp</a> &lt; <label for="r200" class="ident">y</label>.<a href="#line-72" class="ident">exp</a>:
		<span class="keyword">return</span> -<span class="lit-number">1</span>
	<span class="keyword">case</span> <label for="r198" class="ident">x</label>.<a href="#line-72" class="ident">exp</a> &gt; <label for="r200" class="ident">y</label>.<a href="#line-72" class="ident">exp</a>:
		<span class="keyword">return</span> +<span class="lit-number">1</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x.exp == y.exp</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> compare mantissas</span></div>
<div class="code"><pre><code>	<label for="r201" class="ident">i</label> := <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r198" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>)
	<label for="r202" class="ident">j</label> := <a href="../../../pkg/builtin.html#name-len" class="ident">len</a>(<label for="r200" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>)
	<span class="keyword">for</span> <label for="r201" class="ident">i</label> &gt; <span class="lit-number">0</span> || <label for="r202" class="ident">j</label> &gt; <span class="lit-number">0</span> {
		<span class="keyword">var</span> <label for="r203" class="ident">xm</label>, <label for="r204" class="ident">ym</label> <a href="arith.go.html#line-16" class="ident">Word</a>
		<span class="keyword">if</span> <label for="r201" class="ident">i</label> &gt; <span class="lit-number">0</span> {
			<label for="r201" class="ident">i</label>--
			<label for="r203" class="ident">xm</label> = <label for="r198" class="ident">x</label>.<a href="#line-71" class="ident">mant</a>[<label for="r201" class="ident">i</label>]
		}
		<span class="keyword">if</span> <label for="r202" class="ident">j</label> &gt; <span class="lit-number">0</span> {
			<label for="r202" class="ident">j</label>--
			<label for="r204" class="ident">ym</label> = <label for="r200" class="ident">y</label>.<a href="#line-71" class="ident">mant</a>[<label for="r202" class="ident">j</label>]
		}
		<span class="keyword">switch</span> {
		<span class="keyword">case</span> <label for="r203" class="ident">xm</label> &lt; <label for="r204" class="ident">ym</label>:
			<span class="keyword">return</span> -<span class="lit-number">1</span>
		<span class="keyword">case</span> <label for="r203" class="ident">xm</label> &gt; <label for="r204" class="ident">ym</label>:
			<span class="keyword">return</span> +<span class="lit-number">1</span>
		}
	}

	<span class="keyword">return</span> <span class="lit-number">0</span>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Handling of sign bit as defined by IEEE 754-2008, section 6.3:</span><span class="comment"></span><span class="comment"> When neither the inputs nor result are NaN, the sign of a product or</span><span class="comment"> quotient is the exclusive OR of the operands’ signs; the sign of a sum,</span><span class="comment"> or of a difference x−y regarded as a sum x+(−y), differs from at most</span><span class="comment"> one of the addends’ signs; and the sign of the result of conversions,</span><span class="comment"> the quantize operation, the roundToIntegral operations, and the</span><span class="comment"> roundToIntegralExact (see 5.3.1) is the sign of the first or only operand.</span><span class="comment"> These rules shall apply even when operands or results are zero or infinite.</span><span class="comment"></span><span class="comment"> When the sum of two operands with opposite signs (or the difference of</span><span class="comment"> two operands with like signs) is exactly zero, the sign of that sum (or</span><span class="comment"> difference) shall be +0 in all rounding-direction attributes except</span><span class="comment"> roundTowardNegative; under that attribute, the sign of an exact zero</span><span class="comment"> sum (or difference) shall be −0. However, x+x = x−(−x) retains the same</span><span class="comment"> sign as x even when x is zero.</span><span class="comment"></span><span class="comment"> See also: https://play.golang.org/p/RtH3UCt5IH</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Add sets z to the rounded sum x+y and returns z. If z's precision is 0,</span><span class="comment"> it is changed to the larger of x's or y's precision before the operation.</span><span class="comment"> Rounding is performed according to z's precision and rounding mode; and</span><span class="comment"> z's accuracy reports the result error relative to the exact (not rounded)</span><span class="comment"> result. Add panics with ErrNaN if x and y are infinities with opposite</span><span class="comment"> signs. The value of z is undefined in that case.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r205" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r206" class="ident"><a href="../../../use/math/big..Float.Add.html" class="ident">Add</a></label>(<label for="r207" class="ident">x</label>, <label for="r208" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r207" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
		<label for="r208" class="ident">y</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">if</span> <label for="r205" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<label for="r205" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <a href="#line-1725" class="ident">umax32</a>(<label for="r207" class="ident">x</label>.<a href="#line-66" class="ident">prec</a>, <label for="r208" class="ident">y</label>.<a href="#line-66" class="ident">prec</a>)
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x + y (common case)</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Below we set z.neg = x.neg, and when z aliases y this will</span><span class="comment">		 change the y operand's sign. This is fine, because if an</span><span class="comment">		 operand aliases the receiver it'll be overwritten, but we still</span><span class="comment">		 want the original x.neg and y.neg values when we evaluate</span><span class="comment">		 x.neg != y.neg, so we need to save y.neg before setting z.neg.</span></div>
<div class="code"><pre><code>		<label for="r209" class="ident">yneg</label> := <label for="r208" class="ident">y</label>.<a href="#line-70" class="ident">neg</a>

		<label for="r205" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r207" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x + y == x + y</span><span class="comment">			 (-x) + (-y) == -(x + y)</span></div>
<div class="code"><pre><code>			<label for="r205" class="ident">z</label>.<a href="#line-1204" class="ident">uadd</a>(<label for="r207" class="ident">x</label>, <label for="r208" class="ident">y</label>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x + (-y) == x - y == -(y - x)</span><span class="comment">			 (-x) + y == y - x == -(x - y)</span></div>
<div class="code"><pre><code>			<span class="keyword">if</span> <label for="r207" class="ident">x</label>.<a href="#line-1379" class="ident">ucmp</a>(<label for="r208" class="ident">y</label>) &gt; <span class="lit-number">0</span> {
				<label for="r205" class="ident">z</label>.<a href="#line-1258" class="ident">usub</a>(<label for="r207" class="ident">x</label>, <label for="r208" class="ident">y</label>)
			} <span class="keyword">else</span> {
				<label for="r205" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = !<label for="r205" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>
				<label for="r205" class="ident">z</label>.<a href="#line-1258" class="ident">usub</a>(<label for="r208" class="ident">y</label>, <label for="r207" class="ident">x</label>)
			}
		}
		<span class="keyword">if</span> <label for="r205" class="ident">z</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-124" class="ident">zero</a> &amp;&amp; <label for="r205" class="ident">z</label>.<a href="#line-67" class="ident">mode</a> == <a href="#line-140" class="ident">ToNegativeInf</a> &amp;&amp; <label for="r205" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> == <a href="#line-153" class="ident">Exact</a> {
			<label for="r205" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/builtin.html#name-true" class="ident">true</a>
		}
		<span class="keyword">return</span> <label for="r205" class="ident">z</label>
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> +Inf + -Inf</span><span class="comment">		 -Inf + +Inf</span><span class="comment">		 value of z is undefined but make sure it's valid</span></div>
<div class="code"><pre><code>		<label for="r205" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
		<label for="r205" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<label for="r205" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/builtin.html#name-false" class="ident">false</a>
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<a href="#line-77" class="ident">ErrNaN</a>{<span class="lit-string">"addition of infinities with opposite signs"</span>})
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 + ±0</span></div>
<div class="code"><pre><code>		<label for="r205" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
		<label for="r205" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<label for="r205" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r207" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> &amp;&amp; <label for="r208" class="ident">y</label>.<a href="#line-70" class="ident">neg</a> <span class="comment">// -0 + -0 == -0</span>
		<span class="keyword">return</span> <label for="r205" class="ident">z</label>
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±Inf + y</span><span class="comment">		 x + ±0</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <label for="r205" class="ident">z</label>.<a href="#line-646" class="ident">Set</a>(<label for="r207" class="ident">x</label>)
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 + y</span><span class="comment">	 x + ±Inf</span></div>
<div class="code"><pre><code>	<span class="keyword">return</span> <label for="r205" class="ident">z</label>.<a href="#line-646" class="ident">Set</a>(<label for="r208" class="ident">y</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Sub sets z to the rounded difference x-y and returns z.</span><span class="comment"> Precision, rounding, and accuracy reporting are as for Add.</span><span class="comment"> Sub panics with ErrNaN if x and y are infinities with equal</span><span class="comment"> signs. The value of z is undefined in that case.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r210" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r211" class="ident"><a href="../../../use/math/big..Float.Sub*21c1e.html" class="ident">Sub</a></label>(<label for="r212" class="ident">x</label>, <label for="r213" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r212" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
		<label for="r213" class="ident">y</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">if</span> <label for="r210" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<label for="r210" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <a href="#line-1725" class="ident">umax32</a>(<label for="r212" class="ident">x</label>.<a href="#line-66" class="ident">prec</a>, <label for="r213" class="ident">y</label>.<a href="#line-66" class="ident">prec</a>)
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x - y (common case)</span></div>
<div class="code"><pre><code>		<label for="r214" class="ident">yneg</label> := <label for="r213" class="ident">y</label>.<a href="#line-70" class="ident">neg</a>
		<label for="r210" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r212" class="ident">x</label>.<a href="#line-70" class="ident">neg</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x - (-y) == x + y</span><span class="comment">			 (-x) - y == -(x + y)</span></div>
<div class="code"><pre><code>			<label for="r210" class="ident">z</label>.<a href="#line-1204" class="ident">uadd</a>(<label for="r212" class="ident">x</label>, <label for="r213" class="ident">y</label>)
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x - y == x - y == -(y - x)</span><span class="comment">			 (-x) - (-y) == y - x == -(x - y)</span></div>
<div class="code"><pre><code>			<span class="keyword">if</span> <label for="r212" class="ident">x</label>.<a href="#line-1379" class="ident">ucmp</a>(<label for="r213" class="ident">y</label>) &gt; <span class="lit-number">0</span> {
				<label for="r210" class="ident">z</label>.<a href="#line-1258" class="ident">usub</a>(<label for="r212" class="ident">x</label>, <label for="r213" class="ident">y</label>)
			} <span class="keyword">else</span> {
				<label for="r210" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = !<label for="r210" class="ident">z</label>.<a href="#line-70" class="ident">neg</a>
				<label for="r210" class="ident">z</label>.<a href="#line-1258" class="ident">usub</a>(<label for="r213" class="ident">y</label>, <label for="r212" class="ident">x</label>)
			}
		}
		<span class="keyword">if</span> <label for="r210" class="ident">z</label>.<a href="#line-69" class="ident">form</a> == <a href="#line-124" class="ident">zero</a> &amp;&amp; <label for="r210" class="ident">z</label>.<a href="#line-67" class="ident">mode</a> == <a href="#line-140" class="ident">ToNegativeInf</a> &amp;&amp; <label for="r210" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> == <a href="#line-153" class="ident">Exact</a> {
			<label for="r210" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/builtin.html#name-true" class="ident">true</a>
		}
		<span class="keyword">return</span> <label for="r210" class="ident">z</label>
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> +Inf - +Inf</span><span class="comment">		 -Inf - -Inf</span><span class="comment">		 value of z is undefined but make sure it's valid</span></div>
<div class="code"><pre><code>		<label for="r210" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
		<label for="r210" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<label for="r210" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/builtin.html#name-false" class="ident">false</a>
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<a href="#line-77" class="ident">ErrNaN</a>{<span class="lit-string">"subtraction of infinities with equal signs"</span>})
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 - ±0</span></div>
<div class="code"><pre><code>		<label for="r210" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
		<label for="r210" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<label for="r210" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r212" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> &amp;&amp; !<label for="r213" class="ident">y</label>.<a href="#line-70" class="ident">neg</a> <span class="comment">// -0 - +0 == -0</span>
		<span class="keyword">return</span> <label for="r210" class="ident">z</label>
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±Inf - y</span><span class="comment">		 x - ±0</span></div>
<div class="code"><pre><code>		<span class="keyword">return</span> <label for="r210" class="ident">z</label>.<a href="#line-646" class="ident">Set</a>(<label for="r212" class="ident">x</label>)
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 - y</span><span class="comment">	 x - ±Inf</span></div>
<div class="code"><pre><code>	<span class="keyword">return</span> <label for="r210" class="ident">z</label>.<a href="#line-1182" class="ident">Neg</a>(<label for="r213" class="ident">y</label>)
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Mul sets z to the rounded product x*y and returns z.</span><span class="comment"> Precision, rounding, and accuracy reporting are as for Add.</span><span class="comment"> Mul panics with ErrNaN if one operand is zero and the other</span><span class="comment"> operand an infinity. The value of z is undefined in that case.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r215" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r216" class="ident"><a href="../../../use/math/big..Float.Mul*082ac.html" class="ident">Mul</a></label>(<label for="r217" class="ident">x</label>, <label for="r218" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r217" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
		<label for="r218" class="ident">y</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">if</span> <label for="r215" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<label for="r215" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <a href="#line-1725" class="ident">umax32</a>(<label for="r217" class="ident">x</label>.<a href="#line-66" class="ident">prec</a>, <label for="r218" class="ident">y</label>.<a href="#line-66" class="ident">prec</a>)
	}

	<label for="r215" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r217" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> != <label for="r218" class="ident">y</label>.<a href="#line-70" class="ident">neg</a>

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x * y (common case)</span></div>
<div class="code"><pre><code>		<label for="r215" class="ident">z</label>.<a href="#line-1311" class="ident">umul</a>(<label for="r217" class="ident">x</label>, <label for="r218" class="ident">y</label>)
		<span class="keyword">return</span> <label for="r215" class="ident">z</label>
	}

	<label for="r215" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 * ±Inf</span><span class="comment">		 ±Inf * ±0</span><span class="comment">		 value of z is undefined but make sure it's valid</span></div>
<div class="code"><pre><code>		<label for="r215" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<label for="r215" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/builtin.html#name-false" class="ident">false</a>
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<a href="#line-77" class="ident">ErrNaN</a>{<span class="lit-string">"multiplication of zero with infinity"</span>})
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±Inf * y</span><span class="comment">		 x * ±Inf</span></div>
<div class="code"><pre><code>		<label for="r215" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-126" class="ident">inf</a>
		<span class="keyword">return</span> <label for="r215" class="ident">z</label>
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 * y</span><span class="comment">	 x * ±0</span></div>
<div class="code"><pre><code>	<label for="r215" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
	<span class="keyword">return</span> <label for="r215" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Quo sets z to the rounded quotient x/y and returns z.</span><span class="comment"> Precision, rounding, and accuracy reporting are as for Add.</span><span class="comment"> Quo panics with ErrNaN if both operands are zero or infinities.</span><span class="comment"> The value of z is undefined in that case.</span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r219" class="ident">z</label> *<a href="#line-65" class="ident">Float</a>) <label for="r220" class="ident"><a href="../../../use/math/big..Float.Quo*e3702.html" class="ident">Quo</a></label>(<label for="r221" class="ident">x</label>, <label for="r222" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) *<a href="#line-65" class="ident">Float</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r221" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
		<label for="r222" class="ident">y</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<span class="keyword">if</span> <label for="r219" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> == <span class="lit-number">0</span> {
		<label for="r219" class="ident">z</label>.<a href="#line-66" class="ident">prec</a> = <a href="#line-1725" class="ident">umax32</a>(<label for="r221" class="ident">x</label>.<a href="#line-66" class="ident">prec</a>, <label for="r222" class="ident">y</label>.<a href="#line-66" class="ident">prec</a>)
	}

	<label for="r219" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <label for="r221" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> != <label for="r222" class="ident">y</label>.<a href="#line-70" class="ident">neg</a>

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x / y (common case)</span></div>
<div class="code"><pre><code>		<label for="r219" class="ident">z</label>.<a href="#line-1334" class="ident">uquo</a>(<label for="r221" class="ident">x</label>, <label for="r222" class="ident">y</label>)
		<span class="keyword">return</span> <label for="r219" class="ident">z</label>
	}

	<label for="r219" class="ident">z</label>.<a href="#line-68" class="ident">acc</a> = <a href="#line-153" class="ident">Exact</a>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 / ±0</span><span class="comment">		 ±Inf / ±Inf</span><span class="comment">		 value of z is undefined but make sure it's valid</span></div>
<div class="code"><pre><code>		<label for="r219" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<label for="r219" class="ident">z</label>.<a href="#line-70" class="ident">neg</a> = <a href="../../../pkg/builtin.html#name-false" class="ident">false</a>
		<a href="../../../pkg/builtin.html#name-panic" class="ident">panic</a>(<a href="#line-77" class="ident">ErrNaN</a>{<span class="lit-string">"division of zero by zero or infinity by infinity"</span>})
	}

</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ±0 / y</span><span class="comment">		 x / ±Inf</span></div>
<div class="code"><pre><code>		<label for="r219" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-124" class="ident">zero</a>
		<span class="keyword">return</span> <label for="r219" class="ident">z</label>
	}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> x / ±0</span><span class="comment">	 ±Inf / y</span></div>
<div class="code"><pre><code>	<label for="r219" class="ident">z</label>.<a href="#line-69" class="ident">form</a> = <a href="#line-126" class="ident">inf</a>
	<span class="keyword">return</span> <label for="r219" class="ident">z</label>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> Cmp compares x and y and returns:</span><span class="comment"></span><span class="comment">   -1 if x &lt;  y</span><span class="comment">    0 if x == y (incl. -0 == 0, -Inf == -Inf, and +Inf == +Inf)</span><span class="comment">   +1 if x &gt;  y</span><span class="comment"></span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r223" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r224" class="ident"><a href="../../../use/math/big..Float.Cmp.html" class="ident">Cmp</a></label>(<label for="r225" class="ident">y</label> *<a href="#line-65" class="ident">Float</a>) <a href="../../../pkg/builtin.html#name-int" class="ident">int</a> {
	<span class="keyword">if</span> <a href="#line-20" class="ident">debugFloat</a> {
		<label for="r223" class="ident">x</label>.<a href="#line-362" class="ident">validate</a>()
		<label for="r225" class="ident">y</label>.<a href="#line-362" class="ident">validate</a>()
	}

	<label for="r226" class="ident">mx</label> := <label for="r223" class="ident">x</label>.<a href="#line-1709" class="ident">ord</a>()
	<label for="r227" class="ident">my</label> := <label for="r225" class="ident">y</label>.<a href="#line-1709" class="ident">ord</a>()
	<span class="keyword">switch</span> {
	<span class="keyword">case</span> <label for="r226" class="ident">mx</label> &lt; <label for="r227" class="ident">my</label>:
		<span class="keyword">return</span> -<span class="lit-number">1</span>
	<span class="keyword">case</span> <label for="r226" class="ident">mx</label> &gt; <label for="r227" class="ident">my</label>:
		<span class="keyword">return</span> +<span class="lit-number">1</span>
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> mx == my</span></div>
<div class="code"><pre><code></code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> only if |mx| == 1 we have to compare the mantissae</span></div>
<div class="code"><pre><code>	<span class="keyword">switch</span> <label for="r226" class="ident">mx</label> {
	<span class="keyword">case</span> -<span class="lit-number">1</span>:
		<span class="keyword">return</span> <label for="r225" class="ident">y</label>.<a href="#line-1379" class="ident">ucmp</a>(<label for="r223" class="ident">x</label>)
	<span class="keyword">case</span> +<span class="lit-number">1</span>:
		<span class="keyword">return</span> <label for="r223" class="ident">x</label>.<a href="#line-1379" class="ident">ucmp</a>(<label for="r225" class="ident">y</label>)
	}

	<span class="keyword">return</span> <span class="lit-number">0</span>
}
</code></pre></div></div>
<div class="section">
<div class="doc">
<span class="comment"> ord classifies x and returns:</span><span class="comment"></span><span class="comment">	-2 if -Inf == x</span><span class="comment">	-1 if -Inf &lt; x &lt; 0</span><span class="comment">	 0 if x == 0 (signed or unsigned)</span><span class="comment">	+1 if 0 &lt; x &lt; +Inf</span><span class="comment">	+2 if x == +Inf</span><span class="comment"></span></div>
<div class="code"><pre><code><span class="keyword">func</span> (<label for="r228" class="ident">x</label> *<a href="#line-65" class="ident">Float</a>) <label for="r229" class="ident"><a href="../../../use/math/big..Float.ord*55df1.html" class="ident">ord</a></label>() <a href="../../../pkg/builtin.html#name-int" class="ident">int</a> {
	<span class="keyword">var</span> <label for="r230" class="ident">m</label> <a href="../../../pkg/builtin.html#name-int" class="ident">int</a>
	<span class="keyword">switch</span> <label for="r228" class="ident">x</label>.<a href="#line-69" class="ident">form</a> {
	<span class="keyword">case</span> <a href="#line-125" class="ident">finite</a>:
		<label for="r230" class="ident">m</label> = <span class="lit-number">1</span>
	<span class="keyword">case</span> <a href="#line-124" class="ident">zero</a>:
		<span class="keyword">return</span> <span class="lit-number">0</span>
	<span class="keyword">case</span> <a href="#line-126" class="ident">inf</a>:
		<label for="r230" class="ident">m</label> = <span class="lit-number">2</span>
	}
	<span class="keyword">if</span> <label for="r228" class="ident">x</label>.<a href="#line-70" class="ident">neg</a> {
		<label for="r230" class="ident">m</label> = -<label for="r230" class="ident">m</label>
	}
	<span class="keyword">return</span> <label for="r230" class="ident">m</label>
}

<span class="keyword">func</span> <label for="r231" class="ident"><a href="../../../pkg/math/big.html#name-umax32" class="ident">umax32</a></label>(<label for="r232" class="ident">x</label>, <label for="r233" class="ident">y</label> <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a>) <a href="../../../pkg/builtin.html#name-uint32" class="ident">uint32</a> {
	<span class="keyword">if</span> <label for="r232" class="ident">x</label> &gt; <label for="r233" class="ident">y</label> {
		<span class="keyword">return</span> <label for="r232" class="ident">x</label>
	}
	<span class="keyword">return</span> <label for="r233" class="ident">y</label>
</code></pre></div></div>

</div><pre id="footer">
<table><tr><td><img src="../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>