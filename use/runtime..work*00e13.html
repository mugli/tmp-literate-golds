<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>References: runtime.work</title>
<link href="../css/light-v0.3.2-preview.css" rel="stylesheet">
<script src="../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre><code><span style="font-size:x-large;">var <b><a href="../pkg/runtime.html">runtime</a>.<a href="../src/runtime/mgc.go.html#line-1009">work</a></b></span>

<span class="title">203 uses</span>

	runtime (current package)
		<a href="../src/runtime/mgc.go.html#line-192">mgc.go#L192</a>: 	<b>work</b>.startSema = 1
		<a href="../src/runtime/mgc.go.html#line-193" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-193">#L193</a>: 	<b>work</b>.markDoneSema = 1
		<a href="../src/runtime/mgc.go.html#line-194" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-194">#L194</a>: 	lockInit(&amp;<b>work</b>.sweepWaiters.lock, lockRankSweepWaiters)
		<a href="../src/runtime/mgc.go.html#line-195" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-195">#L195</a>: 	lockInit(&amp;<b>work</b>.assistQueue.lock, lockRankAssistQueue)
		<a href="../src/runtime/mgc.go.html#line-196" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-196">#L196</a>: 	lockInit(&amp;<b>work</b>.wbufSpans.lock, lockRankWbufSpans)
		<a href="../src/runtime/mgc.go.html#line-243" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-243">#L243</a>: 		gcWaitOnMark(atomic.Load(&amp;<b>work</b>.cycles))
		<a href="../src/runtime/mgc.go.html#line-495" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-495">#L495</a>: 			<b>work</b>.initialHeapLive>>20, "->",
		<a href="../src/runtime/mgc.go.html#line-604" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-604">#L604</a>: 	if <b>work</b>.userForced {
		<a href="../src/runtime/mgc.go.html#line-895" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-895">#L895</a>: 			print("runtime: next_gc=", memstats.next_gc, " heap_marked=", memstats.heap_marked, " heap_live=", memstats.heap_live, " initialHeapLive=", <b>work</b>.initialHeapLive, "triggerRatio=", triggerRatio, " minTrigger=", minTrigger, "\n")
		<a href="../src/runtime/mgc.go.html#line-1009" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1009">#L1009</a>: var <b>work</b> struct {
		<a href="../src/runtime/mgc.go.html#line-1153" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1153">#L1153</a>: 	n := atomic.Load(&amp;<b>work</b>.cycles)
		<a href="../src/runtime/mgc.go.html#line-1168" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1168">#L1168</a>: 	for atomic.Load(&amp;<b>work</b>.cycles) == n+1 && sweepone() != ^uintptr(0) {
		<a href="../src/runtime/mgc.go.html#line-1184" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1184">#L1184</a>: 	for atomic.Load(&amp;<b>work</b>.cycles) == n+1 && atomic.Load(&mheap_.sweepers) != 0 {
		<a href="../src/runtime/mgc.go.html#line-1192" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1192">#L1192</a>: 	cycle := atomic.Load(&amp;<b>work</b>.cycles)
		<a href="../src/runtime/mgc.go.html#line-1204" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1204">#L1204</a>: 		lock(&amp;<b>work</b>.sweepWaiters.lock)
		<a href="../src/runtime/mgc.go.html#line-1205" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1205">#L1205</a>: 		nMarks := atomic.Load(&amp;<b>work</b>.cycles)
		<a href="../src/runtime/mgc.go.html#line-1212" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1212">#L1212</a>: 			unlock(&amp;<b>work</b>.sweepWaiters.lock)
		<a href="../src/runtime/mgc.go.html#line-1218" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1218">#L1218</a>: 		<b>work</b>.sweepWaiters.list.push(getg())
		<a href="../src/runtime/mgc.go.html#line-1219" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1219">#L1219</a>: 		goparkunlock(&amp;<b>work</b>.sweepWaiters.lock, waitReasonWaitForGCCycle, traceEvGoBlock, 1)
		<a href="../src/runtime/mgc.go.html#line-1281" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1281">#L1281</a>: 		return int32(t.n-<b>work</b>.cycles) > 0
		<a href="../src/runtime/mgc.go.html#line-1321" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1321">#L1321</a>: 	semacquire(&amp;<b>work</b>.startSema)
		<a href="../src/runtime/mgc.go.html#line-1324" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1324">#L1324</a>: 		semrelease(&amp;<b>work</b>.startSema)
		<a href="../src/runtime/mgc.go.html#line-1329" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1329">#L1329</a>: 	<b>work</b>.userForced = trigger.kind == gcTriggerCycle
		<a href="../src/runtime/mgc.go.html#line-1362" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1362">#L1362</a>: 	<b>work</b>.stwprocs, <b>work</b>.maxprocs = gomaxprocs, gomaxprocs
		<a href="../src/runtime/mgc.go.html#line-1363" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1363">#L1363</a>: 	if <b>work</b>.stwprocs > ncpu {
		<a href="../src/runtime/mgc.go.html#line-1366" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1366">#L1366</a>: 		<b>work</b>.stwprocs = ncpu
		<a href="../src/runtime/mgc.go.html#line-1368" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1368">#L1368</a>: 	<b>work</b>.heap0 = atomic.Load64(&memstats.heap_live)
		<a href="../src/runtime/mgc.go.html#line-1369" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1369">#L1369</a>: 	<b>work</b>.pauseNS = 0
		<a href="../src/runtime/mgc.go.html#line-1370" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1370">#L1370</a>: 	<b>work</b>.mode = mode
		<a href="../src/runtime/mgc.go.html#line-1373" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1373">#L1373</a>: 	<b>work</b>.tSweepTerm = now
		<a href="../src/runtime/mgc.go.html#line-1374" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1374">#L1374</a>: 	<b>work</b>.pauseStart = now
		<a href="../src/runtime/mgc.go.html#line-1388" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1388">#L1388</a>: 	<b>work</b>.cycles++
		<a href="../src/runtime/mgc.go.html#line-1391" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1391">#L1391</a>: 	<b>work</b>.heapGoal = memstats.next_gc
		<a href="../src/runtime/mgc.go.html#line-1444" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1444">#L1444</a>: 		<b>work</b>.pauseNS += now - <b>work</b>.pauseStart
		<a href="../src/runtime/mgc.go.html#line-1445" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1445">#L1445</a>: 		<b>work</b>.tMark = now
		<a href="../src/runtime/mgc.go.html#line-1446" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1446">#L1446</a>: 		memstats.gcPauseDist.record(now - <b>work</b>.pauseStart)
		<a href="../src/runtime/mgc.go.html#line-1462" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1462">#L1462</a>: 	semrelease(&amp;<b>work</b>.startSema)
		<a href="../src/runtime/mgc.go.html#line-1497" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1497">#L1497</a>: 	semacquire(&amp;<b>work</b>.markDoneSema)
		<a href="../src/runtime/mgc.go.html#line-1506" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1506">#L1506</a>: 	if !(gcphase == _GCmark &amp;&amp; <b>work</b>.nwait == <b>work</b>.nproc && !gcMarkWorkAvailable(nil)) {
		<a href="../src/runtime/mgc.go.html#line-1507" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1507">#L1507</a>: 		semrelease(&amp;<b>work</b>.markDoneSema)
		<a href="../src/runtime/mgc.go.html#line-1559" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1559">#L1559</a>: 	<b>work</b>.tMarkTerm = now
		<a href="../src/runtime/mgc.go.html#line-1560" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1560">#L1560</a>: 	<b>work</b>.pauseStart = now
		<a href="../src/runtime/mgc.go.html#line-1593" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1593">#L1593</a>: 			<b>work</b>.pauseNS += now - <b>work</b>.pauseStart
		<a href="../src/runtime/mgc.go.html#line-1594" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1594">#L1594</a>: 			memstats.gcPauseDist.record(now - <b>work</b>.pauseStart)
		<a href="../src/runtime/mgc.go.html#line-1611" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1611">#L1611</a>: 	semrelease(&amp;<b>work</b>.markDoneSema)
		<a href="../src/runtime/mgc.go.html#line-1632" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1632">#L1632</a>: 	<b>work</b>.heap1 = memstats.heap_live
		<a href="../src/runtime/mgc.go.html#line-1660" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1660">#L1660</a>: 		<b>work</b>.heap2 = <b>work</b>.bytesMarked
		<a href="../src/runtime/mgc.go.html#line-1677" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1677">#L1677</a>: 		gcSweep(<b>work</b>.mode)
		<a href="../src/runtime/mgc.go.html#line-1705" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1705">#L1705</a>: 	<b>work</b>.pauseNS += now - <b>work</b>.pauseStart
		<a href="../src/runtime/mgc.go.html#line-1706" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1706">#L1706</a>: 	<b>work</b>.tEnd = now
		<a href="../src/runtime/mgc.go.html#line-1707" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1707">#L1707</a>: 	memstats.gcPauseDist.record(now - <b>work</b>.pauseStart)
		<a href="../src/runtime/mgc.go.html#line-1710" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1710">#L1710</a>: 	memstats.pause_ns[memstats.numgc%uint32(len(memstats.pause_ns))] = uint64(<b>work</b>.pauseNS)
		<a href="../src/runtime/mgc.go.html#line-1712" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1712">#L1712</a>: 	memstats.pause_total_ns += uint64(<b>work</b>.pauseNS)
		<a href="../src/runtime/mgc.go.html#line-1715" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1715">#L1715</a>: 	sweepTermCpu := int64(<b>work</b>.stwprocs) * (<b>work</b>.tMark - <b>work</b>.tSweepTerm)
		<a href="../src/runtime/mgc.go.html#line-1719" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1719">#L1719</a>: 	markTermCpu := int64(<b>work</b>.stwprocs) * (<b>work</b>.tEnd - <b>work</b>.tMarkTerm)
		<a href="../src/runtime/mgc.go.html#line-1721" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1721">#L1721</a>: 	<b>work</b>.totaltime += cycleCpu
		<a href="../src/runtime/mgc.go.html#line-1725" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1725">#L1725</a>: 	memstats.gc_cpu_fraction = float64(<b>work</b>.totaltime) / float64(totalCpu)
		<a href="../src/runtime/mgc.go.html#line-1731" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1731">#L1731</a>: 	if <b>work</b>.userForced {
		<a href="../src/runtime/mgc.go.html#line-1736" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1736">#L1736</a>: 	lock(&amp;<b>work</b>.sweepWaiters.lock)
		<a href="../src/runtime/mgc.go.html#line-1738" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1738">#L1738</a>: 	injectglist(&amp;<b>work</b>.sweepWaiters.list)
		<a href="../src/runtime/mgc.go.html#line-1739" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1739">#L1739</a>: 	unlock(&amp;<b>work</b>.sweepWaiters.lock)
		<a href="../src/runtime/mgc.go.html#line-1779" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1779">#L1779</a>: 			" @", string(itoaDiv(sbuf[:], uint64(<b>work</b>.tSweepTerm-runtimeInitTime)/1e6, 3)), "s ",
		<a href="../src/runtime/mgc.go.html#line-1781" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1781">#L1781</a>: 		prev := <b>work</b>.tSweepTerm
		<a href="../src/runtime/mgc.go.html#line-1782" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1782">#L1782</a>: 		for i, ns := range []int64{<b>work</b>.tMark, <b>work</b>.tMarkTerm, <b>work</b>.tEnd} {
		<a href="../src/runtime/mgc.go.html#line-1800" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1800">#L1800</a>: 			<b>work</b>.heap0&gt;&gt;20, "-&gt;", <b>work</b>.heap1&gt;&gt;20, "-&gt;", <b>work</b>.heap2>>20, " MB, ",
		<a href="../src/runtime/mgc.go.html#line-1801" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1801">#L1801</a>: 			<b>work</b>.heapGoal>>20, " MB goal, ",
		<a href="../src/runtime/mgc.go.html#line-1802" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1802">#L1802</a>: 			<b>work</b>.maxprocs, " P")
		<a href="../src/runtime/mgc.go.html#line-1803" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1803">#L1803</a>: 		if <b>work</b>.userForced {
		<a href="../src/runtime/mgc.go.html#line-1837" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1837">#L1837</a>: 		notetsleepg(&amp;<b>work</b>.bgMarkReady, -1)
		<a href="../src/runtime/mgc.go.html#line-1838" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1838">#L1838</a>: 		noteclear(&amp;<b>work</b>.bgMarkReady)
		<a href="../src/runtime/mgc.go.html#line-1858" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1858">#L1858</a>: 	<b>work</b>.nproc = ^uint32(0)
		<a href="../src/runtime/mgc.go.html#line-1859" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1859">#L1859</a>: 	<b>work</b>.nwait = ^uint32(0)
		<a href="../src/runtime/mgc.go.html#line-1890" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1890">#L1890</a>: 	notewakeup(&amp;<b>work</b>.bgMarkReady)
		<a href="../src/runtime/mgc.go.html#line-1961" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1961">#L1961</a>: 		decnwait := atomic.Xadd(&amp;<b>work</b>.nwait, -1)
		<a href="../src/runtime/mgc.go.html#line-1962" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1962">#L1962</a>: 		if decnwait == <b>work</b>.nproc {
		<a href="../src/runtime/mgc.go.html#line-1963" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1963">#L1963</a>: 			println("runtime: work.nwait=", decnwait, "work.nproc=", <b>work</b>.nproc)
		<a href="../src/runtime/mgc.go.html#line-2023" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2023">#L2023</a>: 		incnwait := atomic.Xadd(&amp;<b>work</b>.nwait, +1)
		<a href="../src/runtime/mgc.go.html#line-2024" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2024">#L2024</a>: 		if incnwait &gt; <b>work</b>.nproc {
		<a href="../src/runtime/mgc.go.html#line-2026" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2026">#L2026</a>: 				"work.nwait=", incnwait, "work.nproc=", <b>work</b>.nproc)
		<a href="../src/runtime/mgc.go.html#line-2038" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2038">#L2038</a>: 		if incnwait == <b>work</b>.nproc && !gcMarkWorkAvailable(nil) {
		<a href="../src/runtime/mgc.go.html#line-2057" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2057">#L2057</a>: 	if !<b>work</b>.full.empty() {
		<a href="../src/runtime/mgc.go.html#line-2060" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2060">#L2060</a>: 	if <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgc.go.html#line-2077" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2077">#L2077</a>: 	<b>work</b>.tstart = start_time
		<a href="../src/runtime/mgc.go.html#line-2080" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2080">#L2080</a>: 	if <b>work</b>.full != 0 || <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgc.go.html#line-2081" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2081">#L2081</a>: 		print("runtime: full=", hex(<b>work</b>.full), " next=", <b>work</b>.markrootNext, " jobs=", <b>work</b>.markrootJobs, " nDataRoots=", <b>work</b>.nDataRoots, " nBSSRoots=", <b>work</b>.nBSSRoots, " nSpanRoots=", <b>work</b>.nSpanRoots, " nStackRoots=", <b>work</b>.nStackRoots, "\n")
		<a href="../src/runtime/mgc.go.html#line-2090" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2090">#L2090</a>: 	if <b>work</b>.full != 0 {
		<a href="../src/runtime/mgc.go.html#line-2139" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2139">#L2139</a>: 	memstats.heap_marked = <b>work</b>.bytesMarked
		<a href="../src/runtime/mgc.go.html#line-2156" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2156">#L2156</a>: 	memstats.heap_live = <b>work</b>.bytesMarked
		<a href="../src/runtime/mgc.go.html#line-2251" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2251">#L2251</a>: 	<b>work</b>.bytesMarked = 0
		<a href="../src/runtime/mgc.go.html#line-2252" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-2252">#L2252</a>: 	<b>work</b>.initialHeapLive = atomic.Load64(&memstats.heap_live)
		<a href="../src/runtime/mgcmark.go.html#line-59">mgcmark.go#L59</a>: 	<b>work</b>.nFlushCacheRoots = 0
		<a href="../src/runtime/mgcmark.go.html#line-66" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-66">#L66</a>: 	<b>work</b>.nDataRoots = 0
		<a href="../src/runtime/mgcmark.go.html#line-67" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-67">#L67</a>: 	<b>work</b>.nBSSRoots = 0
		<a href="../src/runtime/mgcmark.go.html#line-72" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-72">#L72</a>: 		if nDataRoots &gt; <b>work</b>.nDataRoots {
		<a href="../src/runtime/mgcmark.go.html#line-73" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-73">#L73</a>: 			<b>work</b>.nDataRoots = nDataRoots
		<a href="../src/runtime/mgcmark.go.html#line-79" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-79">#L79</a>: 		if nBSSRoots &gt; <b>work</b>.nBSSRoots {
		<a href="../src/runtime/mgcmark.go.html#line-80" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-80">#L80</a>: 			<b>work</b>.nBSSRoots = nBSSRoots
		<a href="../src/runtime/mgcmark.go.html#line-97" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-97">#L97</a>: 	<b>work</b>.nSpanRoots = len(mheap_.markArenas) * (pagesPerArena / pagesPerSpanRoot)
		<a href="../src/runtime/mgcmark.go.html#line-105" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-105">#L105</a>: 	<b>work</b>.nStackRoots = int(atomic.Loaduintptr(&allglen))
		<a href="../src/runtime/mgcmark.go.html#line-107" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-107">#L107</a>: 	<b>work</b>.markrootNext = 0
		<a href="../src/runtime/mgcmark.go.html#line-108" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-108">#L108</a>: 	<b>work</b>.markrootJobs = uint32(fixedRootCount + <b>work</b>.nFlushCacheRoots + <b>work</b>.nDataRoots + <b>work</b>.nBSSRoots + <b>work</b>.nSpanRoots + <b>work</b>.nStackRoots)
		<a href="../src/runtime/mgcmark.go.html#line-114" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-114">#L114</a>: 	if <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcmark.go.html#line-115" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-115">#L115</a>: 		print(<b>work</b>.markrootNext, " of ", <b>work</b>.markrootJobs, " markroot jobs done\n")
		<a href="../src/runtime/mgcmark.go.html#line-122" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-122">#L122</a>: 	for i := 0; i &lt; <b>work</b>.nStackRoots; i++ {
		<a href="../src/runtime/mgcmark.go.html#line-152" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-152">#L152</a>: 	baseData := baseFlushCache + uint32(<b>work</b>.nFlushCacheRoots)
		<a href="../src/runtime/mgcmark.go.html#line-153" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-153">#L153</a>: 	baseBSS := baseData + uint32(<b>work</b>.nDataRoots)
		<a href="../src/runtime/mgcmark.go.html#line-154" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-154">#L154</a>: 	baseSpans := baseBSS + uint32(<b>work</b>.nBSSRoots)
		<a href="../src/runtime/mgcmark.go.html#line-155" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-155">#L155</a>: 	baseStacks := baseSpans + uint32(<b>work</b>.nSpanRoots)
		<a href="../src/runtime/mgcmark.go.html#line-156" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-156">#L156</a>: 	end := baseStacks + uint32(<b>work</b>.nStackRoots)
		<a href="../src/runtime/mgcmark.go.html#line-201" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-201">#L201</a>: 			gp.waitsince = <b>work</b>.tstart
		<a href="../src/runtime/mgcmark.go.html#line-525" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-525">#L525</a>: 	decnwait := atomic.Xadd(&amp;<b>work</b>.nwait, -1)
		<a href="../src/runtime/mgcmark.go.html#line-526" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-526">#L526</a>: 	if decnwait == <b>work</b>.nproc {
		<a href="../src/runtime/mgcmark.go.html#line-527" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-527">#L527</a>: 		println("runtime: work.nwait =", decnwait, "work.nproc=", <b>work</b>.nproc)
		<a href="../src/runtime/mgcmark.go.html#line-553" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-553">#L553</a>: 	incnwait := atomic.Xadd(&amp;<b>work</b>.nwait, +1)
		<a href="../src/runtime/mgcmark.go.html#line-554" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-554">#L554</a>: 	if incnwait &gt; <b>work</b>.nproc {
		<a href="../src/runtime/mgcmark.go.html#line-556" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-556">#L556</a>: 			"work.nproc=", <b>work</b>.nproc)
		<a href="../src/runtime/mgcmark.go.html#line-560" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-560">#L560</a>: 	if incnwait == <b>work</b>.nproc && !gcMarkWorkAvailable(nil) {
		<a href="../src/runtime/mgcmark.go.html#line-580" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-580">#L580</a>: 	lock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-581" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-581">#L581</a>: 	list := <b>work</b>.assistQueue.q.popList()
		<a href="../src/runtime/mgcmark.go.html#line-583" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-583">#L583</a>: 	unlock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-593" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-593">#L593</a>: 	lock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-598" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-598">#L598</a>: 		unlock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-603" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-603">#L603</a>: 	oldList := <b>work</b>.assistQueue.q
		<a href="../src/runtime/mgcmark.go.html#line-604" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-604">#L604</a>: 	<b>work</b>.assistQueue.q.pushBack(gp)
		<a href="../src/runtime/mgcmark.go.html#line-611" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-611">#L611</a>: 		<b>work</b>.assistQueue.q = oldList
		<a href="../src/runtime/mgcmark.go.html#line-615" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-615">#L615</a>: 		unlock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-619" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-619">#L619</a>: 	goparkunlock(&amp;<b>work</b>.assistQueue.lock, waitReasonGCAssistWait, traceEvGoBlockGC, 2)
		<a href="../src/runtime/mgcmark.go.html#line-634" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-634">#L634</a>: 	if <b>work</b>.assistQueue.q.empty() {
		<a href="../src/runtime/mgcmark.go.html#line-646" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-646">#L646</a>: 	lock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-647" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-647">#L647</a>: 	for !<b>work</b>.assistQueue.q.empty() && scanBytes > 0 {
		<a href="../src/runtime/mgcmark.go.html#line-648" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-648">#L648</a>: 		gp := <b>work</b>.assistQueue.q.pop()
		<a href="../src/runtime/mgcmark.go.html#line-670" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-670">#L670</a>: 			<b>work</b>.assistQueue.q.pushBack(gp)
		<a href="../src/runtime/mgcmark.go.html#line-681" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-681">#L681</a>: 	unlock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-1007" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1007">#L1007</a>: 	if <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcmark.go.html#line-1010" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1010">#L1010</a>: 			job := atomic.Xadd(&amp;<b>work</b>.markrootNext, +1) - 1
		<a href="../src/runtime/mgcmark.go.html#line-1011" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1011">#L1011</a>: 			if job &gt;= <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcmark.go.html#line-1029" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1029">#L1029</a>: 		if <b>work</b>.full == 0 {
		<a href="../src/runtime/mgcmark.go.html#line-1107" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1107">#L1107</a>: 		if <b>work</b>.full == 0 {
		<a href="../src/runtime/mgcmark.go.html#line-1132" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1132">#L1132</a>: 			if <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcmark.go.html#line-1133" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1133">#L1133</a>: 				job := atomic.Xadd(&amp;<b>work</b>.markrootNext, +1) - 1
		<a href="../src/runtime/mgcmark.go.html#line-1134" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1134">#L1134</a>: 				if job &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcwork.go.html#line-115">mgcwork.go#L115</a>: 	lockWithRankMayAcquire(&amp;<b>work</b>.wbufSpans.lock, lockRankWbufSpans)
		<a href="../src/runtime/mgcwork.go.html#line-274" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-274">#L274</a>: 		atomic.Xadd64(&amp;<b>work</b>.bytesMarked, int64(w.bytesMarked))
		<a href="../src/runtime/mgcwork.go.html#line-350" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-350">#L350</a>: 	if <b>work</b>.empty != 0 {
		<a href="../src/runtime/mgcwork.go.html#line-351" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-351">#L351</a>: 		b = (*workbuf)(<b>work</b>.empty.pop())
		<a href="../src/runtime/mgcwork.go.html#line-358" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-358">#L358</a>: 	lockWithRankMayAcquire(&amp;<b>work</b>.wbufSpans.lock, lockRankWbufSpans)
		<a href="../src/runtime/mgcwork.go.html#line-363" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-363">#L363</a>: 		if <b>work</b>.wbufSpans.free.first != nil {
		<a href="../src/runtime/mgcwork.go.html#line-364" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-364">#L364</a>: 			lock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-365" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-365">#L365</a>: 			s = <b>work</b>.wbufSpans.free.first
		<a href="../src/runtime/mgcwork.go.html#line-367" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-367">#L367</a>: 				<b>work</b>.wbufSpans.free.remove(s)
		<a href="../src/runtime/mgcwork.go.html#line-368" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-368">#L368</a>: 				<b>work</b>.wbufSpans.busy.insert(s)
		<a href="../src/runtime/mgcwork.go.html#line-370" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-370">#L370</a>: 			unlock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-380" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-380">#L380</a>: 			lock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-381" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-381">#L381</a>: 			<b>work</b>.wbufSpans.busy.insert(s)
		<a href="../src/runtime/mgcwork.go.html#line-382" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-382">#L382</a>: 			unlock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-405" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-405">#L405</a>: 	<b>work</b>.empty.push(&b.node)
		<a href="../src/runtime/mgcwork.go.html#line-414" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-414">#L414</a>: 	<b>work</b>.full.push(&b.node)
		<a href="../src/runtime/mgcwork.go.html#line-421" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-421">#L421</a>: 	b := (*workbuf)(<b>work</b>.full.pop())
		<a href="../src/runtime/mgcwork.go.html#line-447" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-447">#L447</a>: 	lock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-448" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-448">#L448</a>: 	if <b>work</b>.full != 0 {
		<a href="../src/runtime/mgcwork.go.html#line-454" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-454">#L454</a>: 	<b>work</b>.empty = 0
		<a href="../src/runtime/mgcwork.go.html#line-455" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-455">#L455</a>: 	<b>work</b>.wbufSpans.free.takeAll(&amp;<b>work</b>.wbufSpans.busy)
		<a href="../src/runtime/mgcwork.go.html#line-456" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-456">#L456</a>: 	unlock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-463" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-463">#L463</a>: 	lock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-464" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-464">#L464</a>: 	if gcphase != _GCoff || <b>work</b>.wbufSpans.free.isEmpty() {
		<a href="../src/runtime/mgcwork.go.html#line-465" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-465">#L465</a>: 		unlock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-471" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-471">#L471</a>: 			span := <b>work</b>.wbufSpans.free.first
		<a href="../src/runtime/mgcwork.go.html#line-475" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-475">#L475</a>: 			<b>work</b>.wbufSpans.free.remove(span)
		<a href="../src/runtime/mgcwork.go.html#line-479" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-479">#L479</a>: 	more := !<b>work</b>.wbufSpans.free.isEmpty()
		<a href="../src/runtime/mgcwork.go.html#line-480" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-480">#L480</a>: 	unlock(&amp;<b>work</b>.wbufSpans.lock)
</code></pre><pre id="footer">
<table><tr><td><img src="../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>