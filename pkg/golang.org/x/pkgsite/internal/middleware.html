<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: golang.org/x/pkgsite/internal/middleware</title>
<link href="../../../../../css/light-v0.3.2-preview.css" rel="stylesheet">
<script src="../../../../../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>middleware</b></span>

<span class="title">Import Path</span>
	<a href="../../../../../index.html#pkg-golang.org/x/pkgsite/internal/middleware">golang.org/x/pkgsite/internal/middleware</a><i> (on <a href="https://pkg.go.dev/golang.org/x/pkgsite/internal/middleware" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../../../../dep/golang.org/x/pkgsite/internal/middleware.html">34 packages</a>, and imported by <a href="../../../../../dep/golang.org/x/pkgsite/internal/middleware.html#imported-by">8 packages</a>

<div id="files"><span class="title">Involved Source Files</span>

	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/accept_requests.go.html">accept_requests.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html">betaRedirect.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html">caching.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/errorreporting.go.html">errorreporting.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html">experiment.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/iapheader.go.html">iapheader.go</a></span>
	<input type='checkbox' checked class="fold" id="file-6-fold-content"><label for="file-6-fold-content">   <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/middleware.go.html#doc">dâžœ</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/middleware.go.html">middleware.go</a></label><span id='file-6-fold-content-items' class="fold-items">
		Package middleware implements a simple middleware pattern for http handlers,
		along with implementations for some common middlewares.
</span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/panic.go.html">panic.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/quota.go.html">quota.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html">requestlog.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/secureheaders.go.html">secureheaders.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html">stats.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/timeout.go.html">timeout.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (total 15, in which 8 are exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-Experimenter" data-popularity="285">	<input type='checkbox' class="fold" id="Experimenter-fold-content"><label for="Experimenter-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Experimenter.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-34">Experimenter</a> <i>(struct)</i></label><span id='Experimenter-fold-content-docs' class="fold-docs">
		An Experimenter contains information about active experiments from the
		experiment source.

		<input type='checkbox' class="fold" id="Experimenter-fold-fields"><label for="Experimenter-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='Experimenter-fold-fields-items' class="fold-items">
			<input type='checkbox' class="showhide" id="Experimenter-showhide-fields"><i><label for="Experimenter-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="Experimenter-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-35">p</a> <i>*<a href="poller.html">poller</a>.<a href="poller.html#name-Poller">Poller</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="Experimenter-fold-methods"><label for="Experimenter-fold-methods">Methods (<i>total 2, in which 1 are exported</i>)</label><span id='Experimenter-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Experimenter-fold-method-Experiments"><label for="Experimenter-fold-method-Experiments">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-80">Experiments</a>() []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Experiment">Experiment</a></label><span id='Experimenter-fold-method-Experiments-docs' class="fold-docs">
				Experiments returns the experiments currently in use.
</span></span>
			<input type='checkbox' class="showhide" id="Experimenter-showhide-methods"><i><label for="Experimenter-showhide-methods" class="show-inline">/* one unexported ... */</label><label for="Experimenter-showhide-methods" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="Experimenter-fold-method-setExperimentsForRequest"><label for="Experimenter-fold-method-setExperimentsForRequest">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-96">setExperimentsForRequest</a>(r *<a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Request">Request</a>) *<a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Request">Request</a></label><span id='Experimenter-fold-method-setExperimentsForRequest-docs' class="fold-docs">
				setExperimentsForRequest sets the experiments for a given request.
				Experiments should be stable for a given IP address.
</span></i></span></span>
		<input type='checkbox' class="fold" id="Experimenter-fold-results"><label for="Experimenter-fold-results">As Outputs Of (<i>at least 2, both are exported</i>)</label><span id='Experimenter-fold-results-items' class="fold-items"><span>
			func <a href="#name-NewExperimenter">NewExperimenter</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, pollEvery <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>, getter <a href="#name-ExperimentGetter">ExperimentGetter</a>, rep <a href="#name-Reporter">Reporter</a>) (_ *<b>Experimenter</b>, err <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func golang.org/x/pkgsite/cmd/internal/cmdconfig.<a href="../cmd/internal/cmdconfig.html#name-Experimenter">Experimenter</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, cfg *<a href="config.html">config</a>.<a href="config.html#name-Config">Config</a>, getter <a href="#name-ExperimentGetter">ExperimentGetter</a>, reportingClient *<a href="../../../../cloud.google.com/go/errorreporting.html">errorreporting</a>.<a href="../../../../cloud.google.com/go/errorreporting.html#name-Client">Client</a>) *<b>Experimenter</b></span></span>
		<input type='checkbox' class="fold" id="Experimenter-fold-params"><label for="Experimenter-fold-params">As Inputs Of (<i>at least one exported</i>)</label><span id='Experimenter-fold-params-items' class="fold-items"><span>
			func <a href="#name-Experiment">Experiment</a>(e *<b>Experimenter</b>) <a href="#name-Middleware">Middleware</a></span></span>

</span></div><div class="anchor type-res" id="name-ExperimentGetter" data-popularity="180">	<input type='checkbox' class="fold" id="ExperimentGetter-fold-content"><label for="ExperimentGetter-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..ExperimentGetter.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-30">ExperimentGetter</a> <i>(func)</i></label><span id='ExperimentGetter-fold-content-docs' class="fold-docs">
		ExperimentGetter is the signature of a function that gets experiments.

		<input type='checkbox' class="fold" id="ExperimentGetter-fold-results"><label for="ExperimentGetter-fold-results">As Outputs Of (<i>at least one exported</i>)</label><span id='ExperimentGetter-fold-results-items' class="fold-items"><span>
			func golang.org/x/pkgsite/cmd/internal/cmdconfig.<a href="../cmd/internal/cmdconfig.html#name-ExperimentGetter">ExperimentGetter</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, cfg *<a href="config.html">config</a>.<a href="config.html#name-Config">Config</a>) <b>ExperimentGetter</b></span></span>
		<input type='checkbox' class="fold" id="ExperimentGetter-fold-params"><label for="ExperimentGetter-fold-params">As Inputs Of (<i>at least 3, all are exported</i>)</label><span id='ExperimentGetter-fold-params-items' class="fold-items"><span>
			func <a href="#name-NewExperimenter">NewExperimenter</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, pollEvery <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>, getter <b>ExperimentGetter</b>, rep <a href="#name-Reporter">Reporter</a>) (_ *<a href="#name-Experimenter">Experimenter</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func golang.org/x/pkgsite/internal/queue.<a href="queue.html#name-New">New</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, cfg *<a href="config.html">config</a>.<a href="config.html#name-Config">Config</a>, queueName <a href="../../../../builtin.html#name-string">string</a>, numWorkers <a href="../../../../builtin.html#name-int">int</a>, expGetter <b>ExperimentGetter</b>, processFunc <a href="queue.html">queue</a>.<a href="queue.html#name-inMemoryProcessFunc">inMemoryProcessFunc</a>) (<a href="queue.html">queue</a>.<a href="queue.html#name-Queue">Queue</a>, <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func golang.org/x/pkgsite/cmd/internal/cmdconfig.<a href="../cmd/internal/cmdconfig.html#name-Experimenter">Experimenter</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, cfg *<a href="config.html">config</a>.<a href="config.html#name-Config">Config</a>, getter <b>ExperimentGetter</b>, reportingClient *<a href="../../../../cloud.google.com/go/errorreporting.html">errorreporting</a>.<a href="../../../../cloud.google.com/go/errorreporting.html#name-Client">Client</a>) *<a href="#name-Experimenter">Experimenter</a></span></span>

</span></div><div class="anchor type-res" id="name-Expirer" data-popularity="110">	<input type='checkbox' class="fold" id="Expirer-fold-content"><label for="Expirer-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Expirer.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-99">Expirer</a> <i>(func)</i></label><span id='Expirer-fold-content-docs' class="fold-docs">
		An Expirer computes the TTL that should be used when caching a page.

		<input type='checkbox' class="fold" id="Expirer-fold-results"><label for="Expirer-fold-results">As Outputs Of (<i>at least one exported</i>)</label><span id='Expirer-fold-results-items' class="fold-items"><span>
			func <a href="#name-TTL">TTL</a>(ttl <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>) <b>Expirer</b></span></span>
		<input type='checkbox' class="fold" id="Expirer-fold-params"><label for="Expirer-fold-params">As Inputs Of (<i>at least one exported</i>)</label><span id='Expirer-fold-params-items' class="fold-items"><span>
			func <a href="#name-Cache">Cache</a>(name <a href="../../../../builtin.html#name-string">string</a>, client *<a href="../../../../github.com/go-redis/redis/v8.html">redis</a>.<a href="../../../../github.com/go-redis/redis/v8.html#name-Client">Client</a>, expirer <b>Expirer</b>, authValues []<a href="../../../../builtin.html#name-string">string</a>) <a href="#name-Middleware">Middleware</a></span></span>

</span></div><div class="anchor type-res" id="name-LocalLogger" data-popularity="100">	<input type='checkbox' class="fold" id="LocalLogger-fold-content"><label for="LocalLogger-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..LocalLogger.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-26">LocalLogger</a> <i>(struct)</i></label><span id='LocalLogger-fold-content-docs' class="fold-docs">
		LocalLogger is a logger that can be used when running locally (i.e.: not on
		GCP)

		<input type='checkbox' class="fold" id="LocalLogger-fold-methods"><label for="LocalLogger-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='LocalLogger-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="LocalLogger-fold-method-Log"><label for="LocalLogger-fold-method-Log">( T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-29">Log</a>(entry <a href="../../../../cloud.google.com/go/logging.html">logging</a>.<a href="../../../../cloud.google.com/go/logging.html#name-Entry">Entry</a>)</label><span id='LocalLogger-fold-method-Log-docs' class="fold-docs">
				Log implements the Logger interface via our internal log package.
</span></span></span>
		<input type='checkbox' class="fold" id="LocalLogger-fold-impls"><label for="LocalLogger-fold-impls">Implements (<i>at least one exported</i>)</label><span id='LocalLogger-fold-impls-items' class="fold-items"><span>
			 T : <a href="#name-Logger">Logger</a></span></span>

</span></div><div class="anchor type-res" id="name-Logger" data-popularity="460">	<input type='checkbox' class="fold" id="Logger-fold-content"><label for="Logger-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Logger.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-20">Logger</a> <b><i>(interface)</i></b></label><span id='Logger-fold-content-docs' class="fold-docs">
		Logger is the interface used to write request logs to GCP.

		<input type='checkbox' class="fold" id="Logger-fold-methods"><label for="Logger-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='Logger-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">( T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-21">Log</a>(<a href="../../../../cloud.google.com/go/logging.html">logging</a>.<a href="../../../../cloud.google.com/go/logging.html#name-Entry">Entry</a>)</span></span></span>
		<input type='checkbox' class="fold" id="Logger-fold-impledby"><label for="Logger-fold-impledby">Implemented By (<i>at least 2, both are exported</i>)</label><span id='Logger-fold-impledby-items' class="fold-items"><span>
			 <a href="#name-LocalLogger">LocalLogger</a></span><span>
			*cloud.google.com/go/logging.<a href="../../../../cloud.google.com/go/logging.html#name-Logger">Logger</a></span></span>
		<input type='checkbox' class="fold" id="Logger-fold-results"><label for="Logger-fold-results">As Outputs Of (<i>at least one exported</i>)</label><span id='Logger-fold-results-items' class="fold-items"><span>
			func golang.org/x/pkgsite/cmd/internal/cmdconfig.<a href="../cmd/internal/cmdconfig.html#name-Logger">Logger</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, cfg *<a href="config.html">config</a>.<a href="config.html#name-Config">Config</a>, logName <a href="../../../../builtin.html#name-string">string</a>) <b>Logger</b></span></span>
		<input type='checkbox' class="fold" id="Logger-fold-params"><label for="Logger-fold-params">As Inputs Of (<i>at least one exported</i>)</label><span id='Logger-fold-params-items' class="fold-items"><span>
			func <a href="#name-RequestLog">RequestLog</a>(lg <b>Logger</b>) <a href="#name-Middleware">Middleware</a></span></span>

</span></div><div class="anchor type-res" id="name-Middleware" data-popularity="1085">	<input type='checkbox' class="fold" id="Middleware-fold-content"><label for="Middleware-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Middleware.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/middleware.go.html#line-12">Middleware</a> <i>(func)</i></label><span id='Middleware-fold-content-docs' class="fold-docs">
		A Middleware is a func that wraps an http.Handler.

		<input type='checkbox' class="fold" id="Middleware-fold-results"><label for="Middleware-fold-results">As Outputs Of (<i>at least 14, all are exported</i>)</label><span id='Middleware-fold-results-items' class="fold-items"><span>
			func <a href="#name-AcceptRequests">AcceptRequests</a>(methods ...<a href="../../../../builtin.html#name-string">string</a>) <b>Middleware</b></span><span>
			func <a href="#name-BetaPkgGoDevRedirect">BetaPkgGoDevRedirect</a>() <b>Middleware</b></span><span>
			func <a href="#name-Cache">Cache</a>(name <a href="../../../../builtin.html#name-string">string</a>, client *<a href="../../../../github.com/go-redis/redis/v8.html">redis</a>.<a href="../../../../github.com/go-redis/redis/v8.html#name-Client">Client</a>, expirer <a href="#name-Expirer">Expirer</a>, authValues []<a href="../../../../builtin.html#name-string">string</a>) <b>Middleware</b></span><span>
			func <a href="#name-Chain">Chain</a>(middlewares ...<b>Middleware</b>) <b>Middleware</b></span><span>
			func <a href="#name-ErrorReporting">ErrorReporting</a>(report func(<a href="../../../../cloud.google.com/go/errorreporting.html">errorreporting</a>.<a href="../../../../cloud.google.com/go/errorreporting.html#name-Entry">Entry</a>)) <b>Middleware</b></span><span>
			func <a href="#name-Experiment">Experiment</a>(e *<a href="#name-Experimenter">Experimenter</a>) <b>Middleware</b></span><span>
			func <a href="#name-Identity">Identity</a>() <b>Middleware</b></span><span>
			func <a href="#name-Panic">Panic</a>(panicHandler <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Handler">Handler</a>) <b>Middleware</b></span><span>
			func <a href="#name-Quota">Quota</a>(settings <a href="config.html">config</a>.<a href="config.html#name-QuotaSettings">QuotaSettings</a>, client *<a href="../../../../github.com/go-redis/redis/v8.html">redis</a>.<a href="../../../../github.com/go-redis/redis/v8.html#name-Client">Client</a>) <b>Middleware</b></span><span>
			func <a href="#name-RequestLog">RequestLog</a>(lg <a href="#name-Logger">Logger</a>) <b>Middleware</b></span><span>
			func <a href="#name-SecureHeaders">SecureHeaders</a>(enableCSP <a href="../../../../builtin.html#name-bool">bool</a>) <b>Middleware</b></span><span>
			func <a href="#name-Stats">Stats</a>() <b>Middleware</b></span><span>
			func <a href="#name-Timeout">Timeout</a>(d <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>) <b>Middleware</b></span><span>
			func <a href="#name-ValidateIAPHeader">ValidateIAPHeader</a>(audience <a href="../../../../builtin.html#name-string">string</a>) <b>Middleware</b></span></span>
		<input type='checkbox' class="fold" id="Middleware-fold-params"><label for="Middleware-fold-params">As Inputs Of (<i>at least one exported</i>)</label><span id='Middleware-fold-params-items' class="fold-items"><span>
			func <a href="#name-Chain">Chain</a>(middlewares ...<b>Middleware</b>) <b>Middleware</b></span></span>

</span></div><div class="anchor type-res" id="name-PageStats" data-popularity="0">	<input type='checkbox' class="fold" id="PageStats-fold-content"><label for="PageStats-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..PageStats.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-71">PageStats</a> <i>(struct)</i></label><span id='PageStats-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="PageStats-fold-fields"><label for="PageStats-fold-fields">Fields (<i>total 6, all are exported</i>)</label><span id='PageStats-fold-fields-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="PageStats-fold-field-Hash"><label for="PageStats-fold-field-Hash"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-74">Hash</a> <i><a href="../../../../builtin.html#name-uint64">uint64</a></i></label><span id='PageStats-fold-field-Hash-docs' class="fold-docs">
				// hash of page contents
</span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-72">MillisToFirstByte</a> <i><a href="../../../../builtin.html#name-int64">int64</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-73">MillisToLastByte</a> <i><a href="../../../../builtin.html#name-int64">int64</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-77">Other</a> <i>map[<a href="../../../../builtin.html#name-string">string</a>]interface{}</i></span></span><span>
			<input type='checkbox' class="fold" id="PageStats-fold-field-Size"><label for="PageStats-fold-field-Size"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-75">Size</a> <i><a href="../../../../builtin.html#name-int">int</a></i></label><span id='PageStats-fold-field-Size-docs' class="fold-docs">
				// total size of data written
</span></span><span>
			<input type='checkbox' class="fold" id="PageStats-fold-field-StatusCode"><label for="PageStats-fold-field-StatusCode"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-76">StatusCode</a> <i><a href="../../../../builtin.html#name-int">int</a></i></label><span id='PageStats-fold-field-StatusCode-docs' class="fold-docs">
				// HTTP status
</span></span></span>

</span></div><div class="anchor type-res" id="name-Reporter" data-popularity="235">	<input type='checkbox' class="fold" id="Reporter-fold-content"><label for="Reporter-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Reporter.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-25">Reporter</a> <b><i>(interface)</i></b></label><span id='Reporter-fold-content-docs' class="fold-docs">
		A Reporter sends errors to the Error-Reporting service.

		<input type='checkbox' class="fold" id="Reporter-fold-methods"><label for="Reporter-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='Reporter-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">( T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-26">Report</a>(<a href="../../../../cloud.google.com/go/errorreporting.html">errorreporting</a>.<a href="../../../../cloud.google.com/go/errorreporting.html#name-Entry">Entry</a>)</span></span></span>
		<input type='checkbox' class="fold" id="Reporter-fold-impledby"><label for="Reporter-fold-impledby">Implemented By (<i>at least one exported</i>)</label><span id='Reporter-fold-impledby-items' class="fold-items"><span>
			*cloud.google.com/go/errorreporting.<a href="../../../../cloud.google.com/go/errorreporting.html#name-Client">Client</a></span></span>
		<input type='checkbox' class="fold" id="Reporter-fold-params"><label for="Reporter-fold-params">As Inputs Of (<i>at least one exported</i>)</label><span id='Reporter-fold-params-items' class="fold-items"><span>
			func <a href="#name-NewExperimenter">NewExperimenter</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, pollEvery <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>, getter <a href="#name-ExperimentGetter">ExperimentGetter</a>, rep <b>Reporter</b>) (_ *<a href="#name-Experimenter">Experimenter</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></span>

</span></div></div><div>	<input type='checkbox' class="showhide" id="unexported-typenames-showhide"><i><label for="unexported-typenames-showhide" class="show-inline">/* 7 unexporteds ... */</label><label for="unexported-typenames-showhide" class="hide-inline">/* 7 unexporteds: */</label></i><div class="anchor type-res hidden" id="name-cache" data-popularity="200">	<input type='checkbox' class="fold" id="cache-fold-content"><label for="cache-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..cache*5e1ec.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-90">cache</a> <i>(struct)</i></label><span id='cache-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="cache-fold-fields"><label for="cache-fold-fields">Fields (<i>total 5, none are exported</i>)</label><span id='cache-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="cache-showhide-fields"><i><label for="cache-showhide-fields" class="show-inline">/* 5 unexporteds ... */</label><label for="cache-showhide-fields" class="hide-inline">/* 5 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-92">authValues</a> <i>[]<a href="../../../../builtin.html#name-string">string</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-93">cache</a> <i>*<a href="cache.html">icache</a>.<a href="cache.html#name-Cache">Cache</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-94">delegate</a> <i><a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Handler">Handler</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-95">expirer</a> <i><a href="#name-Expirer">Expirer</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-91">name</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="cache-fold-methods"><label for="cache-fold-methods">Methods (<i>total 3, in which 1 are exported</i>)</label><span id='cache-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-127">ServeHTTP</a>(w <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a>, r *<a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Request">Request</a>)</span></span>
			<input type='checkbox' checked class="showhide" id="cache-showhide-methods"><i><label for="cache-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="cache-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-164">get</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, key <a href="../../../../builtin.html#name-string">string</a>) (<a href="../../../../io.html">io</a>.<a href="../../../../io.html#name-Reader">Reader</a>, <a href="../../../../builtin.html#name-bool">bool</a>)</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-192">put</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, key <a href="../../../../builtin.html#name-string">string</a>, rec *<a href="#name-cacheRecorder">cacheRecorder</a>, ttl <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>)</span></i></span></span>
		<input type='checkbox' class="fold" id="cache-fold-impls"><label for="cache-fold-impls">Implements (<i>at least one exported</i>)</label><span id='cache-fold-impls-items' class="fold-items"><span>
			*T : net/http.<a href="../../../../net/http.html#name-Handler">Handler</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-cacheRecorder" data-popularity="425">	<input type='checkbox' class="fold" id="cacheRecorder-fold-content"><label for="cacheRecorder-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..cacheRecorder*b7b51.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-215">cacheRecorder</a> <i>(struct)</i></label><span id='cacheRecorder-fold-content-docs' class="fold-docs">
		cacheRecorder is an http.ResponseWriter that collects http bytes for later
		writing to the cache. Along the way it collects any error, along with the
		resulting HTTP status code. We only cache 200 OK responses.

		<input type='checkbox' class="fold" id="cacheRecorder-fold-fields"><label for="cacheRecorder-fold-fields">Fields (<i>total 5, in which 1 are exported</i>)</label><span id='cacheRecorder-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-216">ResponseWriter</a> <i><a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a></i></span></span>
			<input type='checkbox' checked class="showhide" id="cacheRecorder-showhide-fields"><i><label for="cacheRecorder-showhide-fields" class="show-inline">/* 4 unexporteds ... */</label><label for="cacheRecorder-showhide-fields" class="hide-inline">/* 4 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-220">buf</a> <i>*<a href="../../../../bytes.html">bytes</a>.<a href="../../../../bytes.html#name-Buffer">Buffer</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-219">bufErr</a> <i><a href="../../../../builtin.html#name-error">error</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-217">statusCode</a> <i><a href="../../../../builtin.html#name-int">int</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-221">zipWriter</a> <i>*<a href="../../../../compress/gzip.html">gzip</a>.<a href="../../../../compress/gzip.html#name-Writer">Writer</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="cacheRecorder-fold-methods"><label for="cacheRecorder-fold-methods">Methods (<i>total 3, all are exported</i>)</label><span id='cacheRecorder-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="cacheRecorder-fold-method-Header"><label for="cacheRecorder-fold-method-Header">( T) <a href="../../../../../src/net/http/server.go.html#line-116">Header</a>() <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Header">Header</a></label><span id='cacheRecorder-fold-method-Header-docs' class="fold-docs">
				Header returns the header map that will be sent by
				WriteHeader. The Header map also is the mechanism with which
				Handlers can set HTTP trailers.

				Changing the header map after a call to WriteHeader (or
				Write) has no effect unless the modified headers are
				trailers.

				There are two ways to set Trailers. The preferred way is to
				predeclare in the headers which trailers you will later
				send by setting the "Trailer" header to the names of the
				trailer keys which will come later. In this case, those
				keys of the Header map are treated as if they were
				trailers. See the example. The second way, for trailer
				keys not known to the Handler until after the first Write,
				is to prefix the Header map keys with the TrailerPrefix
				constant value. See TrailerPrefix.

				To suppress automatic response headers (such as "Date"), set
				their value to nil.
</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-224">Write</a>(b []<a href="../../../../builtin.html#name-byte">byte</a>) (<a href="../../../../builtin.html#name-int">int</a>, <a href="../../../../builtin.html#name-error">error</a>)</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-243">WriteHeader</a>(statusCode <a href="../../../../builtin.html#name-int">int</a>)</span></span></span>
		<input type='checkbox' class="fold" id="cacheRecorder-fold-impls"><label for="cacheRecorder-fold-impls">Implements (<i>at least 4, all are exported</i>)</label><span id='cacheRecorder-fold-impls-items' class="fold-items"><span>
			*T : github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband.<a href="../../../../github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband.html#name-Progress">Progress</a></span><span>
			*T : github.com/jbenet/go-context/io.<a href="../../../../github.com/jbenet/go-context/io.html#name-Writer">Writer</a></span><span>
			*T : io.<a href="../../../../io.html#name-Writer">Writer</a></span><span>
			*T : net/http.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a></span></span>
		<input type='checkbox' class="fold" id="cacheRecorder-fold-results"><label for="cacheRecorder-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='cacheRecorder-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="cacheRecorder-showhide-inputofs"><i><label for="cacheRecorder-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="cacheRecorder-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newRecorder">newRecorder</a>(w <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a>) *<b>cacheRecorder</b></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-erResponseWriter" data-popularity="350">	<input type='checkbox' class="fold" id="erResponseWriter-fold-content"><label for="erResponseWriter-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..erResponseWriter*d7486.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/errorreporting.go.html#line-51">erResponseWriter</a> <i>(struct)</i></label><span id='erResponseWriter-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="erResponseWriter-fold-fields"><label for="erResponseWriter-fold-fields">Fields (<i>total 3, in which 1 are exported</i>)</label><span id='erResponseWriter-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/errorreporting.go.html#line-52">ResponseWriter</a> <i><a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a></i></span></span>
			<input type='checkbox' checked class="showhide" id="erResponseWriter-showhide-fields"><i><label for="erResponseWriter-showhide-fields" class="show-inline">/* 2 unexporteds ... */</label><label for="erResponseWriter-showhide-fields" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/errorreporting.go.html#line-54">bypass</a> <i><a href="../../../../builtin.html#name-bool">bool</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/errorreporting.go.html#line-55">status</a> <i><a href="../../../../builtin.html#name-int">int</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="erResponseWriter-fold-methods"><label for="erResponseWriter-fold-methods">Methods (<i>total 3, all are exported</i>)</label><span id='erResponseWriter-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="erResponseWriter-fold-method-Header"><label for="erResponseWriter-fold-method-Header">( T) <a href="../../../../../src/net/http/server.go.html#line-116">Header</a>() <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Header">Header</a></label><span id='erResponseWriter-fold-method-Header-docs' class="fold-docs">
				Header returns the header map that will be sent by
				WriteHeader. The Header map also is the mechanism with which
				Handlers can set HTTP trailers.

				Changing the header map after a call to WriteHeader (or
				Write) has no effect unless the modified headers are
				trailers.

				There are two ways to set Trailers. The preferred way is to
				predeclare in the headers which trailers you will later
				send by setting the "Trailer" header to the names of the
				trailer keys which will come later. In this case, those
				keys of the Header map are treated as if they were
				trailers. See the example. The second way, for trailer
				keys not known to the Handler until after the first Write,
				is to prefix the Header map keys with the TrailerPrefix
				constant value. See TrailerPrefix.

				To suppress automatic response headers (such as "Date"), set
				their value to nil.
</span></span><span>
			<input type='checkbox' class="fold" id="erResponseWriter-fold-method-Write"><label for="erResponseWriter-fold-method-Write">( T) <a href="../../../../../src/net/http/server.go.html#line-139">Write</a>([]<a href="../../../../builtin.html#name-byte">byte</a>) (<a href="../../../../builtin.html#name-int">int</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='erResponseWriter-fold-method-Write-docs' class="fold-docs">
				Write writes the data to the connection as part of an HTTP reply.

				If WriteHeader has not yet been called, Write calls
				WriteHeader(http.StatusOK) before writing the data. If the Header
				does not contain a Content-Type line, Write adds a Content-Type set
				to the result of passing the initial 512 bytes of written data to
				DetectContentType. Additionally, if the total size of all written
				data is under a few KB and there are no Flush calls, the
				Content-Length header is added automatically.

				Depending on the HTTP protocol version and the client, calling
				Write or WriteHeader may prevent future reads on the
				Request.Body. For HTTP/1.x requests, handlers should read any
				needed request body data before writing the response. Once the
				headers have been flushed (due to either an explicit Flusher.Flush
				call or writing enough data to trigger a flush), the request body
				may be unavailable. For HTTP/2 requests, the Go HTTP server permits
				handlers to continue to read the request body while concurrently
				writing the response. However, such behavior may not be supported
				by all HTTP/2 clients. Handlers should read before writing if
				possible to maximize compatibility.
</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/errorreporting.go.html#line-58">WriteHeader</a>(code <a href="../../../../builtin.html#name-int">int</a>)</span></span></span>
		<input type='checkbox' class="fold" id="erResponseWriter-fold-impls"><label for="erResponseWriter-fold-impls">Implements (<i>at least 4, all are exported</i>)</label><span id='erResponseWriter-fold-impls-items' class="fold-items"><span>
			 T : github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband.<a href="../../../../github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband.html#name-Progress">Progress</a></span><span>
			 T : github.com/jbenet/go-context/io.<a href="../../../../github.com/jbenet/go-context/io.html#name-Writer">Writer</a></span><span>
			 T : io.<a href="../../../../io.html#name-Writer">Writer</a></span><span>
			*T : net/http.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-handler" data-popularity="100">	<input type='checkbox' class="fold" id="handler-fold-content"><label for="handler-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..handler*31283.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-54">handler</a> <i>(struct)</i></label><span id='handler-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="handler-fold-fields"><label for="handler-fold-fields">Fields (<i>total 2, neither is exported</i>)</label><span id='handler-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="handler-showhide-fields"><i><label for="handler-showhide-fields" class="show-inline">/* 2 unexporteds ... */</label><label for="handler-showhide-fields" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-55">delegate</a> <i><a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Handler">Handler</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-56">logger</a> <i><a href="#name-Logger">Logger</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="handler-fold-methods"><label for="handler-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='handler-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-59">ServeHTTP</a>(w <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a>, r *<a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Request">Request</a>)</span></span></span>
		<input type='checkbox' class="fold" id="handler-fold-impls"><label for="handler-fold-impls">Implements (<i>at least one exported</i>)</label><span id='handler-fold-impls-items' class="fold-items"><span>
			*T : net/http.<a href="../../../../net/http.html#name-Handler">Handler</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-responseWriter" data-popularity="350">	<input type='checkbox' class="fold" id="responseWriter-fold-content"><label for="responseWriter-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..responseWriter*f6765.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-117">responseWriter</a> <i>(struct)</i></label><span id='responseWriter-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="responseWriter-fold-fields"><label for="responseWriter-fold-fields">Fields (<i>total 2, in which 1 are exported</i>)</label><span id='responseWriter-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-118">ResponseWriter</a> <i><a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a></i></span></span>
			<input type='checkbox' checked class="showhide" id="responseWriter-showhide-fields"><i><label for="responseWriter-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="responseWriter-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-120">status</a> <i><a href="../../../../builtin.html#name-int">int</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="responseWriter-fold-methods"><label for="responseWriter-fold-methods">Methods (<i>total 3, all are exported</i>)</label><span id='responseWriter-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="responseWriter-fold-method-Header"><label for="responseWriter-fold-method-Header">( T) <a href="../../../../../src/net/http/server.go.html#line-116">Header</a>() <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Header">Header</a></label><span id='responseWriter-fold-method-Header-docs' class="fold-docs">
				Header returns the header map that will be sent by
				WriteHeader. The Header map also is the mechanism with which
				Handlers can set HTTP trailers.

				Changing the header map after a call to WriteHeader (or
				Write) has no effect unless the modified headers are
				trailers.

				There are two ways to set Trailers. The preferred way is to
				predeclare in the headers which trailers you will later
				send by setting the "Trailer" header to the names of the
				trailer keys which will come later. In this case, those
				keys of the Header map are treated as if they were
				trailers. See the example. The second way, for trailer
				keys not known to the Handler until after the first Write,
				is to prefix the Header map keys with the TrailerPrefix
				constant value. See TrailerPrefix.

				To suppress automatic response headers (such as "Date"), set
				their value to nil.
</span></span><span>
			<input type='checkbox' class="fold" id="responseWriter-fold-method-Write"><label for="responseWriter-fold-method-Write">( T) <a href="../../../../../src/net/http/server.go.html#line-139">Write</a>([]<a href="../../../../builtin.html#name-byte">byte</a>) (<a href="../../../../builtin.html#name-int">int</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='responseWriter-fold-method-Write-docs' class="fold-docs">
				Write writes the data to the connection as part of an HTTP reply.

				If WriteHeader has not yet been called, Write calls
				WriteHeader(http.StatusOK) before writing the data. If the Header
				does not contain a Content-Type line, Write adds a Content-Type set
				to the result of passing the initial 512 bytes of written data to
				DetectContentType. Additionally, if the total size of all written
				data is under a few KB and there are no Flush calls, the
				Content-Length header is added automatically.

				Depending on the HTTP protocol version and the client, calling
				Write or WriteHeader may prevent future reads on the
				Request.Body. For HTTP/1.x requests, handlers should read any
				needed request body data before writing the response. Once the
				headers have been flushed (due to either an explicit Flusher.Flush
				call or writing enough data to trigger a flush), the request body
				may be unavailable. For HTTP/2 requests, the Go HTTP server permits
				handlers to continue to read the request body while concurrently
				writing the response. However, such behavior may not be supported
				by all HTTP/2 clients. Handlers should read before writing if
				possible to maximize compatibility.
</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-123">WriteHeader</a>(code <a href="../../../../builtin.html#name-int">int</a>)</span></span></span>
		<input type='checkbox' class="fold" id="responseWriter-fold-impls"><label for="responseWriter-fold-impls">Implements (<i>at least 4, all are exported</i>)</label><span id='responseWriter-fold-impls-items' class="fold-items"><span>
			 T : github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband.<a href="../../../../github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband.html#name-Progress">Progress</a></span><span>
			 T : github.com/jbenet/go-context/io.<a href="../../../../github.com/jbenet/go-context/io.html#name-Writer">Writer</a></span><span>
			 T : io.<a href="../../../../io.html#name-Writer">Writer</a></span><span>
			*T : net/http.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-statsKey" data-popularity="0">	<input type='checkbox' class="fold" id="statsKey-fold-content"><label for="statsKey-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..statsKey*ca766.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-17">statsKey</a> <i>(struct)</i></label><span id='statsKey-fold-content-docs' class="fold-docs">
		statsKey is the type of the context key for stats.


</span></div><div class="anchor type-res hidden" id="name-statsResponseWriter" data-popularity="475">	<input type='checkbox' class="fold" id="statsResponseWriter-fold-content"><label for="statsResponseWriter-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..statsResponseWriter*90602.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-64">statsResponseWriter</a> <i>(struct)</i></label><span id='statsResponseWriter-fold-content-docs' class="fold-docs">
		statsResponseWriter is an http.ResponseWriter that tracks statistics about
		the page being written.

		<input type='checkbox' class="fold" id="statsResponseWriter-fold-fields"><label for="statsResponseWriter-fold-fields">Fields (<i>total 4, none are exported</i>)</label><span id='statsResponseWriter-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="statsResponseWriter-showhide-fields"><i><label for="statsResponseWriter-showhide-fields" class="show-inline">/* 4 unexporteds ... */</label><label for="statsResponseWriter-showhide-fields" class="hide-inline">/* 4 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-67">hasher</a> <i><a href="../../../../hash.html">hash</a>.<a href="../../../../hash.html#name-Hash64">Hash64</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="statsResponseWriter-fold-field-header"><label for="statsResponseWriter-fold-field-header"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-65">header</a> <i><a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Header">Header</a></i></label><span id='statsResponseWriter-fold-field-header-docs' class="fold-docs">
				// required for a ResponseWriter; ignored
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="statsResponseWriter-fold-field-start"><label for="statsResponseWriter-fold-field-start"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-66">start</a> <i><a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Time">Time</a></i></label><span id='statsResponseWriter-fold-field-start-docs' class="fold-docs">
				// start time of request
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-68">stats</a> <i><a href="#name-PageStats">PageStats</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="statsResponseWriter-fold-methods"><label for="statsResponseWriter-fold-methods">Methods (<i>total 4, all are exported</i>)</label><span id='statsResponseWriter-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="statsResponseWriter-fold-method-Header"><label for="statsResponseWriter-fold-method-Header">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-90">Header</a>() <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Header">Header</a></label><span id='statsResponseWriter-fold-method-Header-docs' class="fold-docs">
				Header implements http.ResponseWriter.Header.
</span></span><span>
			<input type='checkbox' class="fold" id="statsResponseWriter-fold-method-Write"><label for="statsResponseWriter-fold-method-Write">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-99">Write</a>(data []<a href="../../../../builtin.html#name-byte">byte</a>) (<a href="../../../../builtin.html#name-int">int</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='statsResponseWriter-fold-method-Write-docs' class="fold-docs">
				Write implements http.ResponseWriter.Write by
				tracking statistics about the data being written.
</span></span><span>
			<input type='checkbox' class="fold" id="statsResponseWriter-fold-method-WriteHeader"><label for="statsResponseWriter-fold-method-WriteHeader">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-93">WriteHeader</a>(statusCode <a href="../../../../builtin.html#name-int">int</a>)</label><span id='statsResponseWriter-fold-method-WriteHeader-docs' class="fold-docs">
				WriteHeader implements http.ResponseWriter.WriteHeader.
</span></span><span>
			<input type='checkbox' class="fold" id="statsResponseWriter-fold-method-WriteStats"><label for="statsResponseWriter-fold-method-WriteStats">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-112">WriteStats</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, w <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a>)</label><span id='statsResponseWriter-fold-method-WriteStats-docs' class="fold-docs">
				WriteStats writes the statistics to w.
</span></span></span>
		<input type='checkbox' class="fold" id="statsResponseWriter-fold-impls"><label for="statsResponseWriter-fold-impls">Implements (<i>at least 4, all are exported</i>)</label><span id='statsResponseWriter-fold-impls-items' class="fold-items"><span>
			*T : github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband.<a href="../../../../github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband.html#name-Progress">Progress</a></span><span>
			*T : github.com/jbenet/go-context/io.<a href="../../../../github.com/jbenet/go-context/io.html#name-Writer">Writer</a></span><span>
			*T : io.<a href="../../../../io.html#name-Writer">Writer</a></span><span>
			*T : net/http.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a></span></span>
		<input type='checkbox' class="fold" id="statsResponseWriter-fold-results"><label for="statsResponseWriter-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='statsResponseWriter-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="statsResponseWriter-showhide-inputofs"><i><label for="statsResponseWriter-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="statsResponseWriter-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newStatsResponseWriter">newStatsResponseWriter</a>() *<b>statsResponseWriter</b></i></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 32, in which 18 are exported)</i></span></span>

<div class="anchor value-res" id="name-AcceptRequests">	<input type='checkbox' class="fold" id="AcceptRequests-fold-content"><label for="AcceptRequests-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..AcceptRequests.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/accept_requests.go.html#line-16">AcceptRequests</a>(methods ...<a href="../../../../builtin.html#name-string">string</a>) <a href="#name-Middleware">Middleware</a></label><span id='AcceptRequests-fold-content-docs' class="fold-docs">
		AcceptRequests serves 405 (Method Not Allowed) for any method not on the
		given list and 414 (Method Request URI Too Long) for any URI that exceeds
		the maxURILength.

</span></div><div class="anchor value-res" id="name-BetaPkgGoDevRedirect">	<input type='checkbox' class="fold" id="BetaPkgGoDevRedirect-fold-content"><label for="BetaPkgGoDevRedirect-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..BetaPkgGoDevRedirect.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-23">BetaPkgGoDevRedirect</a>() <a href="#name-Middleware">Middleware</a></label><span id='BetaPkgGoDevRedirect-fold-content-docs' class="fold-docs">
		BetaPkgGoDevRedirect redirects requests from pkg.go.dev to beta.pkg.go.dev,
		based on whether a cookie is set for betapkggodev-redirect. The cookie
		can be turned on/off using a query param.

</span></div><div class="anchor value-res" id="name-Cache">	<input type='checkbox' class="fold" id="Cache-fold-content"><label for="Cache-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Cache.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-115">Cache</a>(name <a href="../../../../builtin.html#name-string">string</a>, client *<a href="../../../../github.com/go-redis/redis/v8.html">redis</a>.<a href="../../../../github.com/go-redis/redis/v8.html#name-Client">Client</a>, expirer <a href="#name-Expirer">Expirer</a>, authValues []<a href="../../../../builtin.html#name-string">string</a>) <a href="#name-Middleware">Middleware</a></label><span id='Cache-fold-content-docs' class="fold-docs">
		Cache returns a new Middleware that caches every request.
		The name of the cache is used only for metrics.
		The expirer is a func that is used to map a new request to its TTL.
		authHeader is the header key used by the cache to know that a
		request should bypass the cache.
		authValues is the set of values that could be set on the authHeader in
		order to bypass the cache.

</span></div><div class="anchor value-res" id="name-Chain">	<input type='checkbox' class="fold" id="Chain-fold-content"><label for="Chain-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Chain.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/middleware.go.html#line-21">Chain</a>(middlewares ...<a href="#name-Middleware">Middleware</a>) <a href="#name-Middleware">Middleware</a></label><span id='Chain-fold-content-docs' class="fold-docs">
		Chain creates a new Middleware that applies a sequence of Middlewares, so
		that they execute in the given order when handling an http request.

		In other words, Chain(m1, m2)(handler) = m1(m2(handler))

		A similar pattern is used in e.g. github.com/justinas/alice:
		https://github.com/justinas/alice/blob/ce87934/chain.go#L45

</span></div><div class="anchor value-res" id="name-ElapsedStat">	<input type='checkbox' class="fold" id="ElapsedStat-fold-content"><label for="ElapsedStat-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..ElapsedStat.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-55">ElapsedStat</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, name <a href="../../../../builtin.html#name-string">string</a>) func()</label><span id='ElapsedStat-fold-content-docs' class="fold-docs">
		ElapsedStat records as a stat the elapsed time for a
		function execution. Invoke like so:
		  defer ElapsedStat(ctx, "FunctionName")()
		The resulting stat will be called "FunctionName ms" and will
		be the wall-clock execution time of the function in milliseconds.

</span></div><div class="anchor value-res" id="name-ErrorReporting">	<input type='checkbox' class="fold" id="ErrorReporting-fold-content"><label for="ErrorReporting-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..ErrorReporting.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/errorreporting.go.html#line-18">ErrorReporting</a>(report func(<a href="../../../../cloud.google.com/go/errorreporting.html">errorreporting</a>.<a href="../../../../cloud.google.com/go/errorreporting.html#name-Entry">Entry</a>)) <a href="#name-Middleware">Middleware</a></label><span id='ErrorReporting-fold-content-docs' class="fold-docs">
		ErrorReporting returns a middleware that reports any server errors using the
		report func.

</span></div><div class="anchor value-res" id="name-Experiment">	<input type='checkbox' class="fold" id="Experiment-fold-content"><label for="Experiment-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Experiment.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-70">Experiment</a>(e *<a href="#name-Experimenter">Experimenter</a>) <a href="#name-Middleware">Middleware</a></label><span id='Experiment-fold-content-docs' class="fold-docs">
		Experiment returns a new Middleware that sets active experiments for each
		incoming request.

</span></div><div class="anchor value-res" id="name-Identity">	<input type='checkbox' class="fold" id="Identity-fold-content"><label for="Identity-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Identity.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/middleware.go.html#line-32">Identity</a>() <a href="#name-Middleware">Middleware</a></label><span id='Identity-fold-content-docs' class="fold-docs">
		Identity is a middleware that does nothing. It can be used as a helper when
		building middleware chains.

</span></div><div class="anchor value-res" id="name-NewExperimenter">	<input type='checkbox' class="fold" id="NewExperimenter-fold-content"><label for="NewExperimenter-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..NewExperimenter.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-40">NewExperimenter</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, pollEvery <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>, getter <a href="#name-ExperimentGetter">ExperimentGetter</a>, rep <a href="#name-Reporter">Reporter</a>) (_ *<a href="#name-Experimenter">Experimenter</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='NewExperimenter-fold-content-docs' class="fold-docs">
		NewExperimenter returns an Experimenter for use in the middleware. The
		experimenter regularly polls for updates to the snapshot in the background.

</span></div><div class="anchor value-res" id="name-Panic">	<input type='checkbox' class="fold" id="Panic-fold-content"><label for="Panic-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Panic.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/panic.go.html#line-15">Panic</a>(panicHandler <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Handler">Handler</a>) <a href="#name-Middleware">Middleware</a></label><span id='Panic-fold-content-docs' class="fold-docs">
		Panic returns a middleware that executes panicHandler on any panic
		originating from the delegate handler.

</span></div><div class="anchor value-res" id="name-Quota">	<input type='checkbox' class="fold" id="Quota-fold-content"><label for="Quota-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Quota.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/quota.go.html#line-71">Quota</a>(settings <a href="config.html">config</a>.<a href="config.html#name-QuotaSettings">QuotaSettings</a>, client *<a href="../../../../github.com/go-redis/redis/v8.html">redis</a>.<a href="../../../../github.com/go-redis/redis/v8.html#name-Client">Client</a>) <a href="#name-Middleware">Middleware</a></label><span id='Quota-fold-content-docs' class="fold-docs">
		Quota implements a simple IP-based rate limiter. Each set of incoming IP
		addresses with the same low-order byte gets settings.QPS requests per second.

		Information is kept in a redis instance.

		If a request is disallowed, a 429 (TooManyRequests) will be served.

</span></div><div class="anchor value-res" id="name-RequestLog">	<input type='checkbox' class="fold" id="RequestLog-fold-content"><label for="RequestLog-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..RequestLog.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-48">RequestLog</a>(lg <a href="#name-Logger">Logger</a>) <a href="#name-Middleware">Middleware</a></label><span id='RequestLog-fold-content-docs' class="fold-docs">
		RequestLog returns a middleware that logs each incoming requests using the
		given logger. This logger replaces the built-in appengine request logger,
		which logged PII when behind IAP, in such a way that was impossible to turn
		off.

		Logs may be viewed in Pantheon by selecting the log source corresponding to
		the AppEngine service name (e.g. 'dev-worker').

</span></div><div class="anchor value-res" id="name-SecureHeaders">	<input type='checkbox' class="fold" id="SecureHeaders-fold-content"><label for="SecureHeaders-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..SecureHeaders.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/secureheaders.go.html#line-42">SecureHeaders</a>(enableCSP <a href="../../../../builtin.html#name-bool">bool</a>) <a href="#name-Middleware">Middleware</a></label><span id='SecureHeaders-fold-content-docs' class="fold-docs">
		SecureHeaders adds a content-security-policy and other security-related
		headers to all responses.

</span></div><div class="anchor value-res" id="name-SetStat">	<input type='checkbox' class="fold" id="SetStat-fold-content"><label for="SetStat-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..SetStat.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-34">SetStat</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, key <a href="../../../../builtin.html#name-string">string</a>, value interface{})</label><span id='SetStat-fold-content-docs' class="fold-docs">
		SetStat sets a stat named key in the current context. If key already has a
		value, the old and new value are both stored in a slice.

</span></div><div class="anchor value-res" id="name-Stats">	<input type='checkbox' class="fold" id="Stats-fold-content"><label for="Stats-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Stats.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-21">Stats</a>() <a href="#name-Middleware">Middleware</a></label><span id='Stats-fold-content-docs' class="fold-docs">
		Stats returns a Middleware that, instead of serving the page,
		serves statistics about the page.

</span></div><div class="anchor value-res" id="name-Timeout">	<input type='checkbox' class="fold" id="Timeout-fold-content"><label for="Timeout-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..Timeout.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/timeout.go.html#line-15">Timeout</a>(d <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>) <a href="#name-Middleware">Middleware</a></label><span id='Timeout-fold-content-docs' class="fold-docs">
		Timeout returns a new Middleware that times out each request after the given
		duration.

</span></div><div class="anchor value-res" id="name-TTL">	<input type='checkbox' class="fold" id="TTL-fold-content"><label for="TTL-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..TTL.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-102">TTL</a>(ttl <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>) <a href="#name-Expirer">Expirer</a></label><span id='TTL-fold-content-docs' class="fold-docs">
		TTL returns an Expirer that expires all pages after the given TTL.

</span></div><div class="anchor value-res" id="name-ValidateIAPHeader">	<input type='checkbox' class="fold" id="ValidateIAPHeader-fold-content"><label for="ValidateIAPHeader-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..ValidateIAPHeader.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/iapheader.go.html#line-19">ValidateIAPHeader</a>(audience <a href="../../../../builtin.html#name-string">string</a>) <a href="#name-Middleware">Middleware</a></label><span id='ValidateIAPHeader-fold-content-docs' class="fold-docs">
		ValidateIAPHeader checks that the request has a header that proves it arrived
		via the IAP.
		See https://cloud.google.com/iap/docs/signed-headers-howto#securing_iap_headers.

</span></div>	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* 14 unexporteds ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* 14 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-betaPkgGoDevURL"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..betaPkgGoDevURL*3a0d5.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-65">betaPkgGoDevURL</a>(sourceURL *<a href="../../../../net/url.html">url</a>.<a href="../../../../net/url.html#name-URL">URL</a>) *<a href="../../../../net/url.html">url</a>.<a href="../../../../net/url.html#name-URL">URL</a></span></i></div><div class="anchor value-res hidden" id="name-enforceQuota"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..enforceQuota*c27e0.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/quota.go.html#line-105">enforceQuota</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, client *<a href="../../../../github.com/go-redis/redis/v8.html">redis</a>.<a href="../../../../github.com/go-redis/redis/v8.html#name-Client">Client</a>, qps <a href="../../../../builtin.html#name-int">int</a>, header <a href="../../../../builtin.html#name-string">string</a>, hmacKey []<a href="../../../../builtin.html#name-byte">byte</a>) (blocked <a href="../../../../builtin.html#name-bool">bool</a>, reason <a href="../../../../builtin.html#name-string">string</a>)</span></i></div><div class="anchor value-res hidden" id="name-ipKey"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..ipKey*31d6f.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/quota.go.html#line-50">ipKey</a>(s <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-string">string</a></span></i></div><div class="anchor value-res hidden" id="name-isRobot"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..isRobot*1181d.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-105">isRobot</a>(userAgent <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-bool">bool</a></span></i></div><div class="anchor value-res hidden" id="name-newRecorder"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..newRecorder*94f4e.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-206">newRecorder</a>(w <a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-ResponseWriter">ResponseWriter</a>) *<a href="#name-cacheRecorder">cacheRecorder</a></span></i></div><div class="anchor value-res hidden" id="name-newStatsResponseWriter"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..newStatsResponseWriter*94d90.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/stats.go.html#line-80">newStatsResponseWriter</a>() *<a href="#name-statsResponseWriter">statsResponseWriter</a></span></i></div><div class="anchor value-res hidden" id="name-recordCacheError"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..recordCacheError*c35e7.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-83">recordCacheError</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, name, operation <a href="../../../../builtin.html#name-string">string</a>)</span></i></div><div class="anchor value-res hidden" id="name-recordCacheResult"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..recordCacheResult*9949f.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-75">recordCacheResult</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, name <a href="../../../../builtin.html#name-string">string</a>, hit <a href="../../../../builtin.html#name-bool">bool</a>, latency <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>)</span></i></div><div class="anchor value-res hidden" id="name-recordQuotaMetric"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..recordQuotaMetric*df335.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/quota.go.html#line-44">recordQuotaMetric</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, blocked <a href="../../../../builtin.html#name-string">string</a>)</span></i></div><div class="anchor value-res hidden" id="name-shouldRedirectToBetaPkgGoDev"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..shouldRedirectToBetaPkgGoDev*678e2.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-56">shouldRedirectToBetaPkgGoDev</a>(req *<a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Request">Request</a>) <a href="../../../../builtin.html#name-bool">bool</a></span></i></div><div class="anchor value-res hidden" id="name-shouldSetExperiment"><i>	<input type='checkbox' class="fold" id="shouldSetExperiment-fold-content"><label for="shouldSetExperiment-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..shouldSetExperiment*87661.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-114">shouldSetExperiment</a>(r *<a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Request">Request</a>, e *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Experiment">Experiment</a>) <a href="../../../../builtin.html#name-bool">bool</a></label><span id='shouldSetExperiment-fold-content-docs' class="fold-docs">
		shouldSetExperiment reports whether a given request should be enrolled in
		the experiment, based on the ip. e.Name, and e.Rollout.

		Requests from empty ip addresses are never enrolled.
		All requests from the same IP will be enrolled in the same set of
		experiments.

</span></i></div><div class="anchor value-res hidden" id="name-translateStatus"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..translateStatus*7559d.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-128">translateStatus</a>(code <a href="../../../../builtin.html#name-int">int</a>) <a href="../../../../builtin.html#name-int">int</a></span></i></div><div class="anchor value-res hidden" id="name-userReturningFromBetaPkgGoDev"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..userReturningFromBetaPkgGoDev*3b647.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-52">userReturningFromBetaPkgGoDev</a>(req *<a href="../../../../net/http.html">http</a>.<a href="../../../../net/http.html#name-Request">Request</a>) <a href="../../../../builtin.html#name-bool">bool</a></span></i></div><div class="anchor value-res hidden" id="name-validateIAPToken"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..validateIAPToken*19ee6.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/iapheader.go.html#line-36">validateIAPToken</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, iapJWT, audience <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-error">error</a></span></i></div></div>
<div id="exported-variables"><span class="title">Package-Level Variables<span class="title-stat"><i> (total 15, in which 5 are exported)</i></span></span>

<div class="anchor value-res" id="name-CacheErrorCount">	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..CacheErrorCount.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-62">CacheErrorCount</a> *<a href="../../../../go.opencensus.io/stats/view.html">view</a>.<a href="../../../../go.opencensus.io/stats/view.html#name-View">View</a></span></div><div class="anchor value-res" id="name-CacheLatency">	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..CacheLatency.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-55">CacheLatency</a> *<a href="../../../../go.opencensus.io/stats/view.html">view</a>.<a href="../../../../go.opencensus.io/stats/view.html#name-View">View</a></span></div><div class="anchor value-res" id="name-CacheResultCount">	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..CacheResultCount.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-48">CacheResultCount</a> *<a href="../../../../go.opencensus.io/stats/view.html">view</a>.<a href="../../../../go.opencensus.io/stats/view.html#name-View">View</a></span></div><div class="anchor value-res" id="name-QuotaResultCount">	<input type='checkbox' class="fold" id="QuotaResultCount-fold-content"><label for="QuotaResultCount-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..QuotaResultCount.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/quota.go.html#line-35">QuotaResultCount</a> *<a href="../../../../go.opencensus.io/stats/view.html">view</a>.<a href="../../../../go.opencensus.io/stats/view.html#name-View">View</a></label><span id='QuotaResultCount-fold-content-docs' class="fold-docs">
		QuotaResultCount is a counter of quota results, by whether the request was blocked or not.

</span></div><div class="anchor value-res" id="name-TestMode">	<input type='checkbox' class="fold" id="TestMode-fold-content"><label for="TestMode-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..TestMode.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-72">TestMode</a> <a href="../../../../builtin.html#name-bool">bool</a></label><span id='TestMode-fold-content-docs' class="fold-docs">
		To avoid test flakiness, when TestMode is true, cache writes are
		synchronous.

</span></div>	<input type='checkbox' class="showhide" id="unexported-variables-showhide"><i><label for="unexported-variables-showhide" class="show-inline">/* 10 unexporteds ... */</label><label for="unexported-variables-showhide" class="hide-inline">/* 10 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-browserAgentPrefixes"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..browserAgentPrefixes*ac36a.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/requestlog.go.html#line-98">browserAgentPrefixes</a> []<a href="../../../../builtin.html#name-string">string</a></span></i></div><div class="anchor value-res hidden" id="name-cacheErrors"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..cacheErrors*84639.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-42">cacheErrors</a> *<a href="../../../../go.opencensus.io/stats.html">stats</a>.<a href="../../../../go.opencensus.io/stats.html#name-Int64Measure">Int64Measure</a></span></i></div><div class="anchor value-res hidden" id="name-cacheLatency"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..cacheLatency*7eaef.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-37">cacheLatency</a> *<a href="../../../../go.opencensus.io/stats.html">stats</a>.<a href="../../../../go.opencensus.io/stats.html#name-Float64Measure">Float64Measure</a></span></i></div><div class="anchor value-res hidden" id="name-cacheResults"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..cacheResults*8c88c.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-32">cacheResults</a> *<a href="../../../../go.opencensus.io/stats.html">stats</a>.<a href="../../../../go.opencensus.io/stats.html#name-Int64Measure">Int64Measure</a></span></i></div><div class="anchor value-res hidden" id="name-keyCacheHit"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..keyCacheHit*f7489.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-29">keyCacheHit</a> <a href="../../../../go.opencensus.io/tag.html">tag</a>.<a href="../../../../go.opencensus.io/tag.html#name-Key">Key</a></span></i></div><div class="anchor value-res hidden" id="name-keyCacheName"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..keyCacheName*80194.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-30">keyCacheName</a> <a href="../../../../go.opencensus.io/tag.html">tag</a>.<a href="../../../../go.opencensus.io/tag.html#name-Key">Key</a></span></i></div><div class="anchor value-res hidden" id="name-keyCacheOperation"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..keyCacheOperation*9828c.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/caching.go.html#line-31">keyCacheOperation</a> <a href="../../../../go.opencensus.io/tag.html">tag</a>.<a href="../../../../go.opencensus.io/tag.html#name-Key">Key</a></span></i></div><div class="anchor value-res hidden" id="name-keyQuotaBlocked"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..keyQuotaBlocked*f9b65.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/quota.go.html#line-28">keyQuotaBlocked</a> <a href="../../../../go.opencensus.io/tag.html">tag</a>.<a href="../../../../go.opencensus.io/tag.html#name-Key">Key</a></span></i></div><div class="anchor value-res hidden" id="name-quotaResults"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..quotaResults*75f88.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/quota.go.html#line-29">quotaResults</a> *<a href="../../../../go.opencensus.io/stats.html">stats</a>.<a href="../../../../go.opencensus.io/stats.html#name-Int64Measure">Int64Measure</a></span></i></div><div class="anchor value-res hidden" id="name-scriptHashes"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..scriptHashes*54cef.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/secureheaders.go.html#line-13">scriptHashes</a> []<a href="../../../../builtin.html#name-string">string</a></span></i></div></div>
<div id="exported-constants"><span class="title">Package-Level Constants<span class="title-stat"><i> (total 7, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-constants-showhide"><i><label for="unexported-constants-showhide" class="show-inline">/* 7 unexporteds ... */</label><label for="unexported-constants-showhide" class="hide-inline">/* 7 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-betaPkgGoDevHost"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..betaPkgGoDevHost*12039.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-17">betaPkgGoDevHost</a> = "beta.pkg.go.dev"</span></i></div><div class="anchor value-res hidden" id="name-betaPkgGoDevRedirectCookie"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..betaPkgGoDevRedirectCookie*5b3c6.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-13">betaPkgGoDevRedirectCookie</a> = "betapkggodev-redirect"</span></i></div><div class="anchor value-res hidden" id="name-betaPkgGoDevRedirectOff"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..betaPkgGoDevRedirectOff*afeaf.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-16">betaPkgGoDevRedirectOff</a> = "off"</span></i></div><div class="anchor value-res hidden" id="name-betaPkgGoDevRedirectOn"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..betaPkgGoDevRedirectOn*cc6e0.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-15">betaPkgGoDevRedirectOn</a> = "on"</span></i></div><div class="anchor value-res hidden" id="name-betaPkgGoDevRedirectParam"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..betaPkgGoDevRedirectParam*0bb40.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/betaRedirect.go*c7964.html#line-14">betaPkgGoDevRedirectParam</a> = "betaredirect"</span></i></div><div class="anchor value-res hidden" id="name-experimentQueryParamKey"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..experimentQueryParamKey*c50bd.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/experiment.go.html#line-22">experimentQueryParamKey</a> = "experiment"</span></i></div><div class="anchor value-res hidden" id="name-maxURILength"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/middleware..maxURILength*65e3a.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/middleware/accept_requests.go.html#line-11">maxURILength</a> = 1000</span></i></div></div></code></pre><pre id="footer">
<table><tr><td><img src="../../../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>