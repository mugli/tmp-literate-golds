<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: golang.org/x/pkgsite/internal/postgres</title>
<link href="../../../../../css/light-v0.3.2-preview.css" rel="stylesheet">
<script src="../../../../../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>postgres</b></span>

<span class="title">Import Path</span>
	<a href="../../../../../index.html#pkg-golang.org/x/pkgsite/internal/postgres">golang.org/x/pkgsite/internal/postgres</a><i> (on <a href="https://pkg.go.dev/golang.org/x/pkgsite/internal/postgres" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../../../../dep/golang.org/x/pkgsite/internal/postgres.html">58 packages</a>, and imported by <a href="../../../../../dep/golang.org/x/pkgsite/internal/postgres.html#imported-by">5 packages</a>

<div id="files"><span class="title">Involved Source Files</span>

	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html">clean.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/delete.go.html">delete.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html">details.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/excluded.go.html">excluded.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/goldmark.go.html">goldmark.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html">insert_module.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_symbol_history.go.html">insert_symbol_history.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/licenses.go.html">licenses.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/package_symbol.go.html">package_symbol.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/path.go.html">path.go</a></span>
	<input type='checkbox' checked class="fold" id="file-10-fold-content"><label for="file-10-fold-content">   <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#doc">dâžœ</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html">postgres.go</a></label><span id='file-10-fold-content-items' class="fold-items">
		Package postgres provides functionality for reading and writing to
		the postgres database.
</span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html">requeue.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html">search.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html">searchdoc.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/stdlib.go.html">stdlib.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html">symbol.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol_history.go.html">symbol_history.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html">test_helper.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html">unit.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html">version.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version_map.go.html">version_map.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html">versionstate.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (total 13, in which 7 are exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-ASTTransformer" data-popularity="100">	<input type='checkbox' class="fold" id="ASTTransformer-fold-content"><label for="ASTTransformer-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..ASTTransformer.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/goldmark.go.html#line-19">ASTTransformer</a> <i>(struct)</i></label><span id='ASTTransformer-fold-content-docs' class="fold-docs">
		ASTTransformer is a default transformer of the goldmark tree.

		<input type='checkbox' class="fold" id="ASTTransformer-fold-methods"><label for="ASTTransformer-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='ASTTransformer-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="ASTTransformer-fold-method-Transform"><label for="ASTTransformer-fold-method-Transform">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/goldmark.go.html#line-30">Transform</a>(node *<a href="../../../../github.com/yuin/goldmark/ast.html">ast</a>.<a href="../../../../github.com/yuin/goldmark/ast.html#name-Document">Document</a>, reader <a href="../../../../github.com/yuin/goldmark/text.html">text</a>.<a href="../../../../github.com/yuin/goldmark/text.html#name-Reader">Reader</a>, pc <a href="../../../../github.com/yuin/goldmark/parser.html">parser</a>.<a href="../../../../github.com/yuin/goldmark/parser.html#name-Context">Context</a>)</label><span id='ASTTransformer-fold-method-Transform-docs' class="fold-docs">
				Transform transforms the given AST tree to remove an unnecessary child
				node from the image node. This is so that the summary generated doesn't
				the text content of an image block.
</span></span></span>
		<input type='checkbox' class="fold" id="ASTTransformer-fold-impls"><label for="ASTTransformer-fold-impls">Implements (<i>at least one exported</i>)</label><span id='ASTTransformer-fold-impls-items' class="fold-items"><span>
			*T : github.com/yuin/goldmark/parser.<a href="../../../../github.com/yuin/goldmark/parser.html#name-ASTTransformer">ASTTransformer</a></span></span>

</span></div><div class="anchor type-res" id="name-DB" data-popularity="5045">	<input type='checkbox' class="fold" id="DB-fold-content"><label for="DB-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..DB.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-20">DB</a> <i>(struct)</i></label><span id='DB-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="DB-fold-fields"><label for="DB-fold-fields">Fields (<i>total 4, none are exported</i>)</label><span id='DB-fold-fields-items' class="fold-items">
			<input type='checkbox' class="showhide" id="DB-showhide-fields"><i><label for="DB-showhide-fields" class="show-inline">/* 4 unexporteds ... */</label><label for="DB-showhide-fields" class="hide-inline">/* 4 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-22">bypassLicenseCheck</a> <i><a href="../../../../builtin.html#name-bool">bool</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-24">cancel</a> <i>func()</i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-21">db</a> <i>*<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-23">expoller</a> <i>*<a href="poller.html">poller</a>.<a href="poller.html#name-Poller">Poller</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="DB-fold-methods"><label for="DB-fold-methods">Methods (<i>total 76, in which 52 are exported</i>)</label><span id='DB-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="DB-fold-method-CleanModule"><label for="DB-fold-method-CleanModule">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-93">CleanModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, reason <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-CleanModule-docs' class="fold-docs">
				CleanModule deletes all versions of the given module path from the DB and marks them
				as cleaned in module_version_states.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-CleanModuleVersions"><label for="DB-fold-method-CleanModuleVersions">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-76">CleanModuleVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, mvs []<a href="#name-ModuleVersion">ModuleVersion</a>, reason <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-CleanModuleVersions-docs' class="fold-docs">
				CleanModuleVersions deletes each module version from the DB and marks it as cleaned
				in module_version_states.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-Close"><label for="DB-fold-method-Close">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-65">Close</a>() <a href="../../../../builtin.html#name-error">error</a></label><span id='DB-fold-method-Close-docs' class="fold-docs">
				Close closes a DB.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-DeleteModule"><label for="DB-fold-method-DeleteModule">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-846">DeleteModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-DeleteModule-docs' class="fold-docs">
				DeleteModule deletes a Version from the database.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-DeleteOlderVersionFromSearchDocuments"><label for="DB-fold-method-DeleteOlderVersionFromSearchDocuments">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-1018">DeleteOlderVersionFromSearchDocuments</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-DeleteOlderVersionFromSearchDocuments-docs' class="fold-docs">
				DeleteOlderVersionFromSearchDocuments deletes from search_documents every package with
				the given module path whose version is older than the given version.
				It is used when fetching a module with an alternative path. See internal/worker/fetch.go:fetchAndUpdateState.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-DeletePseudoversionsExcept"><label for="DB-fold-method-DeletePseudoversionsExcept">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/delete.go.html#line-18">DeletePseudoversionsExcept</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-DeletePseudoversionsExcept-docs' class="fold-docs">
				DeletePseudoversionsExcept deletes all pseudoversions for the module except
				the provided resolvedVersion.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetExcludedPrefixes"><label for="DB-fold-method-GetExcludedPrefixes">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/excluded.go.html#line-55">GetExcludedPrefixes</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>) ([]<a href="../../../../builtin.html#name-string">string</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetExcludedPrefixes-docs' class="fold-docs">
				GetExcludedPrefixes reads all the excluded prefixes from the database.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetImportedBy"><label for="DB-fold-method-GetImportedBy">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-79">GetImportedBy</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, pkgPath, modulePath <a href="../../../../builtin.html#name-string">string</a>, limit <a href="../../../../builtin.html#name-int">int</a>) (paths []<a href="../../../../builtin.html#name-string">string</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetImportedBy-docs' class="fold-docs">
				GetImportedBy fetches and returns all of the packages that import the
				package with path.
				The returned error may be checked with derrors.IsInvalidArgument to
				determine if it resulted from an invalid package path or version.

				Instead of supporting pagination, this query runs with a limit.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetImportedByCount"><label for="DB-fold-method-GetImportedByCount">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-103">GetImportedByCount</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, pkgPath, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ <a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetImportedByCount-docs' class="fold-docs">
				GetImportedByCount returns the number of packages that import pkgPath.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetLatestInfo"><label for="DB-fold-method-GetLatestInfo">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-156">GetLatestInfo</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, unitPath, modulePath <a href="../../../../builtin.html#name-string">string</a>, latestUnitMeta *<a href="../internal.html">internal</a>.<a href="../internal.html#name-UnitMeta">UnitMeta</a>) (latest <a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestInfo">LatestInfo</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetLatestInfo-docs' class="fold-docs">
				GetLatestInfo returns the latest information about the unit in the module.
				See internal.LatestInfo for documentation about the returned values.
				If latestUnitMeta is non-nil, it is the result of GetUnitMeta(unitPath, internal.UnknownModulePath, internal.LatestVersion).
				That can save a redundant call to GetUnitMeta here.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetLatestMajorPathForV1Path"><label for="DB-fold-method-GetLatestMajorPathForV1Path">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/path.go.html#line-23">GetLatestMajorPathForV1Path</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, v1path <a href="../../../../builtin.html#name-string">string</a>) (_ <a href="../../../../builtin.html#name-string">string</a>, _ <a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetLatestMajorPathForV1Path-docs' class="fold-docs">
				GetLatestMajorPathForV1Path reports the latest unit path in the series for
				the given v1path. It also returns the major version for that path.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetLatestModuleVersions"><label for="DB-fold-method-GetLatestModuleVersions">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-408">GetLatestModuleVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetLatestModuleVersions-docs' class="fold-docs">
				GetLatestModuleVersions returns the row of the latest_module_versions table for modulePath.
				If the module path is not found, it returns nil, nil.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetModuleInfo"><label for="DB-fold-method-GetModuleInfo">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-131">GetModuleInfo</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetModuleInfo-docs' class="fold-docs">
				GetModuleInfo fetches a module version from the database with the primary key
				(module_path, version).
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetModuleReadme"><label for="DB-fold-method-GetModuleReadme">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-628">GetModuleReadme</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Readme">Readme</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetModuleReadme-docs' class="fold-docs">
				GetModuleReadme returns the README corresponding to the modulePath and version.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetModuleVersionState"><label for="DB-fold-method-GetModuleVersionState">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-325">GetModuleVersionState</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleVersionState">ModuleVersionState</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetModuleVersionState-docs' class="fold-docs">
				GetModuleVersionState returns the current module version state for
				modulePath and version.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetModuleVersionsToClean"><label for="DB-fold-method-GetModuleVersionsToClean">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-29">GetModuleVersionsToClean</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, daysOld, limit <a href="../../../../builtin.html#name-int">int</a>) (modvers []<a href="#name-ModuleVersion">ModuleVersion</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetModuleVersionsToClean-docs' class="fold-docs">
				GetModuleVersionsToClean returns module versions that can be removed from the database.
				Only module versions that were updated more than daysOld days ago will be considered.
				At most limit module versions will be returned.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetNestedModules"><label for="DB-fold-method-GetNestedModules">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-23">GetNestedModules</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetNestedModules-docs' class="fold-docs">
				GetNestedModules returns the latest major version of all nested modules
				given a modulePath path prefix with or without major version.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetNextModulesToFetch"><label for="DB-fold-method-GetNextModulesToFetch">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html#line-135">GetNextModulesToFetch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, limit <a href="../../../../builtin.html#name-int">int</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleVersionState">ModuleVersionState</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetNextModulesToFetch-docs' class="fold-docs">
				GetNextModulesToFetch returns the next batch of modules that need to be
				processed. We prioritize modules based on (1) whether it has status zero
				(never processed), (2) whether it is the latest version, (3) if it is an
				alternative module, and (4) the number of packages it has. We want to leave
				time-consuming modules until the end and process them at a slower rate to
				reduce database load and timeouts. We also want to leave alternative modules
				towards the end, since these will incur unnecessary deletes otherwise.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetPackageVersionState"><label for="DB-fold-method-GetPackageVersionState">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-384">GetPackageVersionState</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, pkgPath, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-PackageVersionState">PackageVersionState</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetPackageVersionState-docs' class="fold-docs">
				GetPackageVersionState returns the current package version state for
				pkgPath, modulePath and version.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetPackageVersionStatesForModule"><label for="DB-fold-method-GetPackageVersionStatesForModule">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-350">GetPackageVersionStatesForModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-PackageVersionState">PackageVersionState</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetPackageVersionStatesForModule-docs' class="fold-docs">
				GetPackageVersionStatesForModule returns the current package version states
				for modulePath and version.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetPackagesForSearchDocumentUpsert"><label for="DB-fold-method-GetPackagesForSearchDocumentUpsert">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-689">GetPackagesForSearchDocumentUpsert</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, before <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Time">Time</a>, limit <a href="../../../../builtin.html#name-int">int</a>) (argsList []<a href="#name-UpsertSearchDocumentArgs">UpsertSearchDocumentArgs</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetPackagesForSearchDocumentUpsert-docs' class="fold-docs">
				GetPackagesForSearchDocumentUpsert fetches search information for packages in search_documents
				whose update time is before the given time.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetRecentFailedVersions"><label for="DB-fold-method-GetRecentFailedVersions">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-297">GetRecentFailedVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, limit <a href="../../../../builtin.html#name-int">int</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleVersionState">ModuleVersionState</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetRecentFailedVersions-docs' class="fold-docs">
				GetRecentFailedVersions returns versions that have most recently failed.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetRecentVersions"><label for="DB-fold-method-GetRecentVersions">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-311">GetRecentVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, limit <a href="../../../../builtin.html#name-int">int</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleVersionState">ModuleVersionState</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetRecentVersions-docs' class="fold-docs">
				GetRecentVersions returns recent versions that have been processed.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetStdlibPathsWithSuffix"><label for="DB-fold-method-GetStdlibPathsWithSuffix">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/stdlib.go.html#line-20">GetStdlibPathsWithSuffix</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, suffix <a href="../../../../builtin.html#name-string">string</a>) (paths []<a href="../../../../builtin.html#name-string">string</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetStdlibPathsWithSuffix-docs' class="fold-docs">
				GetStdlibPathsWithSuffix returns information about all paths in the latest version of the standard
				library whose last component is suffix. A path that exactly match suffix is not included;
				the path must end with "/" + suffix.

				We are only interested in actual standard library packages: not commands, which we happen to include
				in the stdlib module, and not directories (paths that do not contain a package).
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetSymbolHistory"><label for="DB-fold-method-GetSymbolHistory">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol_history.go.html#line-24">GetSymbolHistory</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, packagePath, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolHistory">SymbolHistory</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetSymbolHistory-docs' class="fold-docs">
				GetSymbolHistory returns a SymbolHistory, which is a representation of the
				first version when a symbol is added to an API.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetUnit"><label for="DB-fold-method-GetUnit">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-245">GetUnit</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, um *<a href="../internal.html">internal</a>.<a href="../internal.html#name-UnitMeta">UnitMeta</a>, fields <a href="../internal.html">internal</a>.<a href="../internal.html#name-FieldSet">FieldSet</a>, bc <a href="../internal.html">internal</a>.<a href="../internal.html#name-BuildContext">BuildContext</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Unit">Unit</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetUnit-docs' class="fold-docs">
				GetUnit returns a unit from the database, along with all of the data
				associated with that unit.
				If bc is not nil, get only the Documentation that matches it (or nil if none do).
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetUnitMeta"><label for="DB-fold-method-GetUnitMeta">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-38">GetUnitMeta</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, fullPath, requestedModulePath, requestedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-UnitMeta">UnitMeta</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetUnitMeta-docs' class="fold-docs">
				GetUnitMeta returns information about the "best" entity (module, path or directory) with
				the given path. The module and version arguments provide additional constraints.
				If the module is unknown, pass internal.UnknownModulePath; if the version is unknown, pass
				internal.LatestVersion.

				The rules for picking the best are:
				1. If the version is known but the module path is not, choose the longest module path
				   at that version that contains fullPath.
				2. Otherwise, find the latest "good" version (in the modules table) that contains fullPath.
				   a. First, follow the algorithm of the go command: prefer longer module paths, and
				      find the latest unretracted version, using semver but preferring release to pre-release.
				   b. If no modules have latest-version information, find the latest by sorting the versions
				      we do have: again first by module path length, then by version.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetVersionMap"><label for="DB-fold-method-GetVersionMap">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version_map.go.html#line-70">GetVersionMap</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, requestedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-VersionMap">VersionMap</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetVersionMap-docs' class="fold-docs">
				GetVersionMap fetches a version_map entry corresponding to the given
				modulePath and requestedVersion.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetVersionMaps"><label for="DB-fold-method-GetVersionMaps">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version_map.go.html#line-99">GetVersionMaps</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, paths []<a href="../../../../builtin.html#name-string">string</a>, requestedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-VersionMap">VersionMap</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetVersionMaps-docs' class="fold-docs">
				GetVersionMaps returns all of the version maps for the provided
				path and requested version if they are present.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetVersionStats"><label for="DB-fold-method-GetVersionStats">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-425">GetVersionStats</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>) (_ *<a href="#name-VersionStats">VersionStats</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetVersionStats-docs' class="fold-docs">
				GetVersionStats queries the module_version_states table for aggregate
				information about the current state of module versions, grouping them by
				their current status code.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-GetVersionsForPath"><label for="DB-fold-method-GetVersionsForPath">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-29">GetVersionsForPath</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, path <a href="../../../../builtin.html#name-string">string</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-GetVersionsForPath-docs' class="fold-docs">
				GetVersionsForPath returns a list of tagged versions sorted in
				descending semver order if any exist. If none, it returns the 10 most
				recent from a list of pseudo-versions sorted in descending semver order.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-HasGoMod"><label for="DB-fold-method-HasGoMod">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-463">HasGoMod</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, version <a href="../../../../builtin.html#name-string">string</a>) (has <a href="../../../../builtin.html#name-bool">bool</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-HasGoMod-docs' class="fold-docs">
				HasGoMod reports whether a given module version has a go.mod file.
				It returns a NotFound error if it can't find any information.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-InsertExcludedPrefix"><label for="DB-fold-method-InsertExcludedPrefix">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/excluded.go.html#line-43">InsertExcludedPrefix</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, prefix, user, reason <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-InsertExcludedPrefix-docs' class="fold-docs">
				InsertExcludedPrefix inserts prefix into the excluded_prefixes table.

				For real-time administration (e.g. DOS prevention), use the dbadmin tool.
				to exclude or unexclude a prefix. If the exclusion is permanent (e.g. a user
				request), also add the prefix and reason to the excluded.txt file.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-InsertIndexVersions"><label for="DB-fold-method-InsertIndexVersions">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-25">InsertIndexVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, versions []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-IndexVersion">IndexVersion</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-InsertIndexVersions-docs' class="fold-docs">
				InsertIndexVersions inserts new versions into the module_version_states
				table with a status of zero.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-InsertModule"><label for="DB-fold-method-InsertModule">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-35">InsertModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>, lmv *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>) (isLatest <a href="../../../../builtin.html#name-bool">bool</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-InsertModule-docs' class="fold-docs">
				InsertModule inserts a version into the database using db.saveVersion, along
				with a search document corresponding to each of its packages.
				It returns whether the version inserted was the latest for the given module path.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-IsExcluded"><label for="DB-fold-method-IsExcluded">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/excluded.go.html#line-21">IsExcluded</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, path <a href="../../../../builtin.html#name-string">string</a>) (_ <a href="../../../../builtin.html#name-bool">bool</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-IsExcluded-docs' class="fold-docs">
				IsExcluded reports whether the path matches the excluded list.
				A path matches an entry on the excluded list if it equals the entry, or
				is a component-wise suffix of the entry.
				So path "bad/ness" matches entries "bad" and "bad/", but path "badness"
				matches neither of those.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-LatestIndexTimestamp"><label for="DB-fold-method-LatestIndexTimestamp">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-210">LatestIndexTimestamp</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>) (_ <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Time">Time</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-LatestIndexTimestamp-docs' class="fold-docs">
				LatestIndexTimestamp returns the last timestamp successfully inserted into
				the module_version_states table.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-ReInsertLatestVersion"><label for="DB-fold-method-ReInsertLatestVersion">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-619">ReInsertLatestVersion</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-ReInsertLatestVersion-docs' class="fold-docs">
				ReInsertLatestVersion checks that the latest good version matches the version
				in search_documents. If it doesn't, it inserts the latest good version into
				search_documents and imports_unique.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-Search"><label for="DB-fold-method-Search">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-120">Search</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, q <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>, searchSymbols <a href="../../../../builtin.html#name-bool">bool</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-SearchResult">SearchResult</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-Search-docs' class="fold-docs">
				Search executes two search requests concurrently:
				  - a sequential scan of packages in descending order of popularity.
				  - all packages ("deep" search) using an inverted index to filter to search
				    terms.

				The sequential scan takes significantly less time when searching for very
				common terms (e.g. "errors", "cloud", or "kubernetes"), due to its ability
				to exit early once the requested page of search results is provably
				complete.

				Because 0 &lt;= ts_rank() &lt;= 1, we know that the highest score of any unscanned
				package is ln(e+N), where N is imported_by_count of the package we are
				currently considering.  Therefore if the lowest scoring result of popular
				search is greater than ln(e+N), we know that we haven't missed any results
				and can return the search result immediately, cancelling other searches.

				On the other hand, if the popular search is slow, it is likely that the
				search term is infrequent, and deep search will be fast due to our inverted
				gin index on search tokens.

				The gap in this optimization is search terms that are very frequent, but
				rarely relevant: "int" or "package", for example. In these cases we'll pay
				the penalty of a deep search that scans nearly every package.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-StalenessTimestamp"><label for="DB-fold-method-StalenessTimestamp">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-87">StalenessTimestamp</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>) (<a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Time">Time</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-StalenessTimestamp-docs' class="fold-docs">
				StalenessTimestamp returns the index timestamp of the oldest
				module that is newer than the index timestamp of the youngest module we have
				processed. That is, let T be the maximum index timestamp of all processed
				modules. Then this function return the minimum index timestamp of unprocessed
				modules that is no less than T, or an error that wraps derrors.NotFound if
				there is none.

				The name of the function is imprecise: there may be an older unprocessed
				module, if one newer than it has been processed.

				We use this function to compute a metric that is a lower bound on the time
				it takes to process a module since it appeared in the index.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-Underlying"><label for="DB-fold-method-Underlying">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-71">Underlying</a>() *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a></label><span id='DB-fold-method-Underlying-docs' class="fold-docs">
				Underlying returns the *database.DB inside db.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpdateLatestModuleVersions"><label for="DB-fold-method-UpdateLatestModuleVersions">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-459">UpdateLatestModuleVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, vNew *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpdateLatestModuleVersions-docs' class="fold-docs">
				UpdateLatestModuleVersions upserts its argument into the latest_module_versions table
				if the row doesn't exist, or the new version is later.
				It returns the version that is in the DB when it completes.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpdateLatestModuleVersionsStatus"><label for="DB-fold-method-UpdateLatestModuleVersionsStatus">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-510">UpdateLatestModuleVersionsStatus</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>, newStatus <a href="../../../../builtin.html#name-int">int</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpdateLatestModuleVersionsStatus-docs' class="fold-docs">
				UpdateLatestModuleVersionsStatus updates or inserts a failure status into the
				latest_module_versions table.
				It only updates the table if it doesn't have valid information for the module path.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpdateModuleVersionStatesForReprocessing"><label for="DB-fold-method-UpdateModuleVersionStatesForReprocessing">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html#line-22">UpdateModuleVersionStatesForReprocessing</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, appVersion <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpdateModuleVersionStatesForReprocessing-docs' class="fold-docs">
				UpdateModuleVersionStatesForReprocessing marks modules to be reprocessed
				that were processed prior to the provided appVersion.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpdateModuleVersionStatesForReprocessingLatestOnly"><label for="DB-fold-method-UpdateModuleVersionStatesForReprocessingLatestOnly">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html#line-65">UpdateModuleVersionStatesForReprocessingLatestOnly</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, appVersion <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpdateModuleVersionStatesForReprocessingLatestOnly-docs' class="fold-docs">
				UpdateModuleVersionStatesForReprocessingLatestOnly marks modules to be
				reprocessed that were processed prior to the provided appVersion.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpdateModuleVersionStatesForReprocessingReleaseVersionsOnly"><label for="DB-fold-method-UpdateModuleVersionStatesForReprocessingReleaseVersionsOnly">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html#line-39">UpdateModuleVersionStatesForReprocessingReleaseVersionsOnly</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, appVersion <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpdateModuleVersionStatesForReprocessingReleaseVersionsOnly-docs' class="fold-docs">
				UpdateModuleVersionStatesForReprocessingReleaseVersionsOnly marks modules to be
				reprocessed that were processed prior to the provided appVersion.
</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html#line-98">UpdateModuleVersionStatesWithStatus</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, status <a href="../../../../builtin.html#name-int">int</a>, appVersion <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpdateModuleVersionStatus"><label for="DB-fold-method-UpdateModuleVersionStatus">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-165">UpdateModuleVersionStatus</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, version <a href="../../../../builtin.html#name-string">string</a>, status <a href="../../../../builtin.html#name-int">int</a>, error <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpdateModuleVersionStatus-docs' class="fold-docs">
				UpdateModuleVersionStatus updates the status and error fields of a module version.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpdateSearchDocumentsImportedByCount"><label for="DB-fold-method-UpdateSearchDocumentsImportedByCount">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-745">UpdateSearchDocumentsImportedByCount</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>) (nUpdated <a href="../../../../builtin.html#name-int64">int64</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpdateSearchDocumentsImportedByCount-docs' class="fold-docs">
				UpdateSearchDocumentsImportedByCount updates imported_by_count and
				imported_by_count_updated_at.

				It does so by completely recalculating the imported-by counts
				from the imports_unique table.

				UpdateSearchDocumentsImportedByCount returns the number of rows updated.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpsertModuleVersionState"><label for="DB-fold-method-UpsertModuleVersionState">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-59">UpsertModuleVersionState</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, mvs *<a href="#name-ModuleVersionStateForUpsert">ModuleVersionStateForUpsert</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpsertModuleVersionState-docs' class="fold-docs">
				UpsertModuleVersionState inserts or updates the module_version_state table with
				the results of a fetch operation for a given module version.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpsertSearchDocumentWithImportedByCount"><label for="DB-fold-method-UpsertSearchDocumentWithImportedByCount">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-1060">UpsertSearchDocumentWithImportedByCount</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, args <a href="#name-UpsertSearchDocumentArgs">UpsertSearchDocumentArgs</a>, importedByCount <a href="../../../../builtin.html#name-int">int</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpsertSearchDocumentWithImportedByCount-docs' class="fold-docs">
				UpsertSearchDocumentWithImportedByCount is the same as UpsertSearchDocument,
				except it also updates the imported by count. This is only used for testing.
</span></span><span>
			<input type='checkbox' class="fold" id="DB-fold-method-UpsertVersionMap"><label for="DB-fold-method-UpsertVersionMap">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version_map.go.html#line-20">UpsertVersionMap</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, vm *<a href="../internal.html">internal</a>.<a href="../internal.html#name-VersionMap">VersionMap</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-UpsertVersionMap-docs' class="fold-docs">
				UpsertVersionMap inserts a version_map entry into the database.
</span></span>
			<input type='checkbox' class="showhide" id="DB-showhide-methods"><i><label for="DB-showhide-methods" class="show-inline">/* 24 unexporteds ... */</label><label for="DB-showhide-methods" class="hide-inline">/* 24 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-addPackageDataToSearchResults"><label for="DB-fold-method-addPackageDataToSearchResults">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-430">addPackageDataToSearchResults</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, results []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-SearchResult">SearchResult</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-addPackageDataToSearchResults-docs' class="fold-docs">
				addPackageDataToSearchResults adds package information to SearchResults that is not stored
				in the search_documents table.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-compareLicenses"><label for="DB-fold-method-compareLicenses">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-805">compareLicenses</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, moduleID <a href="../../../../builtin.html#name-int">int</a>, lics []*<a href="licenses.html">licenses</a>.<a href="licenses.html#name-License">License</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-compareLicenses-docs' class="fold-docs">
				compareLicenses compares m.Licenses with the existing licenses for
				m.ModulePath and m.Version in the database. It returns an error if there
				are licenses in the licenses table that are not present in m.Licenses.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-comparePaths"><label for="DB-fold-method-comparePaths">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-827">comparePaths</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-comparePaths-docs' class="fold-docs">
				comparePaths compares m.Directories with the existing directories for
				m.ModulePath and m.Version in the database. It returns an error if there
				are paths in the paths table that are not present in m.Directories.
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-788">computeImportedByCounts</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, searchDocsPackages map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-bool">bool</a>) (counts map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-deepSearch"><label for="DB-fold-method-deepSearch">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-252">deepSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, q <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>) <a href="#name-searchResponse">searchResponse</a></label><span id='DB-fold-method-deepSearch-docs' class="fold-docs">
				deepSearch searches all packages for the query. It is slower, but results
				are always valid.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-getImports"><label for="DB-fold-method-getImports">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-316">getImports</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, unitID <a href="../../../../builtin.html#name-int">int</a>) (_ []<a href="../../../../builtin.html#name-string">string</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-getImports-docs' class="fold-docs">
				getImports returns the imports corresponding to unitID.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-getLatestMajorVersion"><label for="DB-fold-method-getLatestMajorVersion">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-201">getLatestMajorVersion</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, fullPath, modulePath <a href="../../../../builtin.html#name-string">string</a>) (modPath, pkgPath <a href="../../../../builtin.html#name-string">string</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-getLatestMajorVersion-docs' class="fold-docs">
				getLatestMajorVersion returns the latest module path and the full package path
				of the latest version found, given the fullPath and the modulePath.
				For example, in the module path "github.com/casbin/casbin", there
				is another module path with a greater major version "github.com/casbin/casbin/v3".
				This function will return "github.com/casbin/casbin/v3" or the input module path
				if no later module path was found. It also returns the full package path at the
				latest module version if it exists. If not, it returns the module path.

				getLatestMajorVersion only considers tagged (non-pseudo) versions. If there are none,
				it returns empty strings.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-getLatestUnitVersion"><label for="DB-fold-method-getLatestUnitVersion">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-143">getLatestUnitVersion</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, fullPath, requestedModulePath <a href="../../../../builtin.html#name-string">string</a>) (modulePath, latestVersion <a href="../../../../builtin.html#name-string">string</a>, lmv *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-getLatestUnitVersion-docs' class="fold-docs">
				getLatestUnitVersion gets the latest version of requestedModulePath that contains fullPath.
				See GetUnitMeta for more details.
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/licenses.go.html#line-25">getLicenses</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, fullPath, modulePath <a href="../../../../builtin.html#name-string">string</a>, unitID <a href="../../../../builtin.html#name-int">int</a>) (_ []*<a href="licenses.html">licenses</a>.<a href="licenses.html#name-License">License</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-getModuleLicenses"><label for="DB-fold-method-getModuleLicenses">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/licenses.go.html#line-85">getModuleLicenses</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, moduleID <a href="../../../../builtin.html#name-int">int</a>) (_ []*<a href="licenses.html">licenses</a>.<a href="licenses.html#name-License">License</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-getModuleLicenses-docs' class="fold-docs">
				getModuleLicenses returns all licenses associated with the given module path and
				version. These are the top-level licenses in the module zip file.
				It returns an InvalidArgument error if the module path or version is invalid.
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-329">getMultiLatestModuleVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePaths []<a href="../../../../builtin.html#name-string">string</a>) (lmvs []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-getPackagesInUnit"><label for="DB-fold-method-getPackagesInUnit">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-327">getPackagesInUnit</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, fullPath <a href="../../../../builtin.html#name-string">string</a>, moduleID <a href="../../../../builtin.html#name-int">int</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-PackageMeta">PackageMeta</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-getPackagesInUnit-docs' class="fold-docs">
				getPackagesInUnit returns all of the packages in a unit from a
				module_id, including the package that lives at fullPath, if present.
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-585">getPathsInModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ []*<a href="#name-dbPath">dbPath</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-getSearchPackages"><label for="DB-fold-method-getSearchPackages">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-770">getSearchPackages</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>) (set map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-bool">bool</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-getSearchPackages-docs' class="fold-docs">
				getSearchPackages returns the set of package paths that are in the search_documents table.
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-291">getUnitID</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, fullPath, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ <a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-54">getUnitMetaWithKnownLatestVersion</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, fullPath, modulePath, version <a href="../../../../builtin.html#name-string">string</a>, lmv *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-UnitMeta">UnitMeta</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-425">getUnitWithAllFields</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, um *<a href="../internal.html">internal</a>.<a href="../internal.html#name-UnitMeta">UnitMeta</a>, bc <a href="../internal.html">internal</a>.<a href="../internal.html#name-BuildContext">BuildContext</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Unit">Unit</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-hedgedSearch"><label for="DB-fold-method-hedgedSearch">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-194">hedgedSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, q <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>, searchers map[<a href="../../../../builtin.html#name-string">string</a>]<a href="#name-searcher">searcher</a>, guardTestResult func(<a href="../../../../builtin.html#name-string">string</a>) func()) (_ *<a href="#name-searchResponse">searchResponse</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-hedgedSearch-docs' class="fold-docs">
				hedgedSearch executes multiple search methods and returns the first
				available result.
				The optional guardTestResult func may be used to allow tests to control the
				order in which search results are returned.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-insertUnits"><label for="DB-fold-method-insertUnits">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-329">insertUnits</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>, moduleID <a href="../../../../builtin.html#name-int">int</a>, pathToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-insertUnits-docs' class="fold-docs">
				insertUnits inserts the units for a module into the units table.

				It can be assume that at least one unit is a package, and there are one or
				more units in the module.
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-300">popularSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, searchQuery <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>) <a href="#name-searchResponse">searchResponse</a></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-queryModuleVersionStates"><label for="DB-fold-method-queryModuleVersionStates">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-276">queryModuleVersionStates</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, queryFormat <a href="../../../../builtin.html#name-string">string</a>, args ...interface{}) ([]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleVersionState">ModuleVersionState</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-queryModuleVersionStates-docs' class="fold-docs">
				queryModuleVersionStates executes a query for ModuleModuleVersionState rows. It expects the
				given queryFormat be a format specifier with exactly one argument: a %s verb
				for the query columns.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-saveModule"><label for="DB-fold-method-saveModule">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-75">saveModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>, lmv *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>) (isLatest <a href="../../../../builtin.html#name-bool">bool</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-saveModule-docs' class="fold-docs">
				saveModule inserts a Module into the database along with its packages,
				imports, and licenses.  If any of these rows already exist, the module and
				corresponding will be deleted and reinserted.
				If the module is malformed then insertion will fail.

				saveModule reports whether the version inserted is the latest known version
				for the module path (that is, the latest minor version of the module)

				A derrors.InvalidArgument error will be returned if the given module and
				licenses are invalid.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-symbolSearch"><label for="DB-fold-method-symbolSearch">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-347">symbolSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, q <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>) <a href="#name-searchResponse">searchResponse</a></label><span id='DB-fold-method-symbolSearch-docs' class="fold-docs">
				symbolSearch searches all symbols in the symbol_search_documents table for
				the query.

				TODO(https://golang.org/issue/44142): factor out common code between
				symbolSearch and deepSearch.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="DB-fold-method-unitExistsAtLatest"><label for="DB-fold-method-unitExistsAtLatest">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-279">unitExistsAtLatest</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, unitPath, modulePath <a href="../../../../builtin.html#name-string">string</a>) (unitExists <a href="../../../../builtin.html#name-bool">bool</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='DB-fold-method-unitExistsAtLatest-docs' class="fold-docs">
				unitExistsAtLatest reports whether unitPath exists at the latest version of modulePath.
</span></i></span></span>
		<input type='checkbox' class="fold" id="DB-fold-impls"><label for="DB-fold-impls">Implements (<i>at least 2, both are exported</i>)</label><span id='DB-fold-impls-items' class="fold-items"><span>
			*T : golang.org/x/pkgsite/internal.<a href="../internal.html#name-DataSource">DataSource</a></span><span>
			*T : io.<a href="../../../../io.html#name-Closer">Closer</a></span></span>
		<input type='checkbox' class="fold" id="DB-fold-results"><label for="DB-fold-results">As Outputs Of (<i>at least 5, in which 4 are exported</i>)</label><span id='DB-fold-results-items' class="fold-items"><span>
			func <a href="#name-New">New</a>(db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>) *<b>DB</b></span><span>
			func <a href="#name-NewBypassingLicenseCheck">NewBypassingLicenseCheck</a>(db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>) *<b>DB</b></span><span>
			func <a href="#name-SetupTestDB">SetupTestDB</a>(dbName <a href="../../../../builtin.html#name-string">string</a>) (_ *<b>DB</b>, err <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func golang.org/x/pkgsite/cmd/internal/cmdconfig.<a href="../cmd/internal/cmdconfig.html#name-OpenDB">OpenDB</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, cfg *<a href="config.html">config</a>.<a href="config.html#name-Config">Config</a>, bypassLicenseCheck <a href="../../../../builtin.html#name-bool">bool</a>) (_ *<b>DB</b>, err <a href="../../../../builtin.html#name-error">error</a>)</span>
			<input type='checkbox' class="showhide" id="DB-showhide-inputofs"><i><label for="DB-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="DB-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newdb">newdb</a>(db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, bypass <a href="../../../../builtin.html#name-bool">bool</a>) *<b>DB</b></i></span></span>
		<input type='checkbox' class="fold" id="DB-fold-params"><label for="DB-fold-params">As Inputs Of (<i>at least 22, in which 8 are exported</i>)</label><span id='DB-fold-params-items' class="fold-items"><span>
			func <a href="#name-GetFromSearchDocuments">GetFromSearchDocuments</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<b>DB</b>, packagePath <a href="../../../../builtin.html#name-string">string</a>) (modulePath, version <a href="../../../../builtin.html#name-string">string</a>, found <a href="../../../../builtin.html#name-bool">bool</a>)</span><span>
			func <a href="#name-InsertSampleDirectoryTree">InsertSampleDirectoryTree</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, testDB *<b>DB</b>)</span><span>
			func <a href="#name-MustInsertModule">MustInsertModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<b>DB</b>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>)</span><span>
			func <a href="#name-MustInsertModuleGoMod">MustInsertModuleGoMod</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<b>DB</b>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>, goMod <a href="../../../../builtin.html#name-string">string</a>)</span><span>
			func <a href="#name-MustInsertModuleNotLatest">MustInsertModuleNotLatest</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<b>DB</b>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>)</span><span>
			func <a href="#name-ResetTestDB">ResetTestDB</a>(db *<b>DB</b>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>)</span><span>
			func <a href="#name-RunDBTests">RunDBTests</a>(dbName <a href="../../../../builtin.html#name-string">string</a>, m *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-M">M</a>, testDB **<b>DB</b>)</span><span>
			func golang.org/x/pkgsite/internal/frontend.<a href="frontend.html#name-FetchAndUpdateState">FetchAndUpdateState</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, requestedVersion <a href="../../../../builtin.html#name-string">string</a>, proxyClient *<a href="proxy.html">proxy</a>.<a href="proxy.html#name-Client">Client</a>, sourceClient *<a href="source.html">source</a>.<a href="source.html#name-Client">Client</a>, db *<b>DB</b>) (_ <a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span>
			<input type='checkbox' class="showhide" id="DB-showhide-outputofs"><i><label for="DB-showhide-outputofs" class="show-inline">/* 14+ unexporteds ... */</label><label for="DB-showhide-outputofs" class="hide-inline">/* 14+ unexporteds: */</label></i><span class="hidden"><i>
			func <a href="#name-addLatest">addLatest</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<b>DB</b>, modulePath, version, modFile <a href="../../../../builtin.html#name-string">string</a>) *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a></i></span><span class="hidden"><i>
			func <a href="#name-getPathVersions">getPathVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, path <a href="../../../../builtin.html#name-string">string</a>, versionTypes ...<a href="version.html">version</a>.<a href="version.html#name-Type">Type</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>, err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func <a href="#name-mustInsertModule">mustInsertModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<b>DB</b>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>, goMod <a href="../../../../builtin.html#name-string">string</a>, latest <a href="../../../../builtin.html#name-bool">bool</a>)</i></span><span class="hidden"><i>
			func <a href="#name-populateLatestInfo">populateLatestInfo</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, mi *<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func <a href="#name-populateLatestInfos">populateLatestInfos</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, mis []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/internal/frontend.<a href="frontend.html#name-checkForPath">checkForPath</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, fullPath, modulePath, requestedVersion <a href="../../../../builtin.html#name-string">string</a>, taskIDChangeInterval <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>) (fr *<a href="frontend.html">frontend</a>.<a href="frontend.html#name-fetchResult">fetchResult</a>)</i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/internal/frontend.<a href="frontend.html#name-fetchSearchPage">fetchSearchPage</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, query <a href="../../../../builtin.html#name-string">string</a>, pageParams <a href="frontend.html">frontend</a>.<a href="frontend.html#name-paginationParams">paginationParams</a>) (*<a href="frontend.html">frontend</a>.<a href="frontend.html#name-SearchPage">SearchPage</a>, <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/internal/frontend.<a href="frontend.html#name-pollForPath">pollForPath</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, pollEvery <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>, fullPath, modulePath, requestedVersion <a href="../../../../builtin.html#name-string">string</a>, taskIDChangeInterval <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a>) *<a href="frontend.html">frontend</a>.<a href="frontend.html#name-fetchResult">fetchResult</a></i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/internal/frontend.<a href="frontend.html#name-previousFetchStatusAndResponse">previousFetchStatusAndResponse</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, fullPath, modulePath, requestedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="frontend.html">frontend</a>.<a href="frontend.html#name-fetchResult">fetchResult</a>, err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/internal/frontend.<a href="frontend.html#name-stdlibPathForShortcut">stdlibPathForShortcut</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, shortcut <a href="../../../../builtin.html#name-string">string</a>) (path <a href="../../../../builtin.html#name-string">string</a>, err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/internal/frontend.(*<a href="frontend.html#name-Server">Server</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/frontend/fetch.go.html#line-175">checkPossibleModulePaths</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, fullPath, requestedVersion <a href="../../../../builtin.html#name-string">string</a>, modulePaths []<a href="../../../../builtin.html#name-string">string</a>, shouldQueue <a href="../../../../builtin.html#name-bool">bool</a>) []*<a href="frontend.html">frontend</a>.<a href="frontend.html#name-fetchResult">fetchResult</a></i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/internal/worker.<a href="worker.html#name-deleteModule">deleteModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, ft *<a href="worker.html">worker</a>.<a href="worker.html#name-fetchTask">fetchTask</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/internal/worker.<a href="worker.html#name-updateVersionMap">updateVersionMap</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>, ft *<a href="worker.html">worker</a>.<a href="worker.html#name-fetchTask">fetchTask</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func golang.org/x/pkgsite/cmd/worker.<a href="../cmd/worker.html#name-populateExcluded">populateExcluded</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<b>DB</b>)</i></span></span>

</span></div><div class="anchor type-res" id="name-HTMLRenderer" data-popularity="300">	<input type='checkbox' class="fold" id="HTMLRenderer-fold-content"><label for="HTMLRenderer-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..HTMLRenderer.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/goldmark.go.html#line-23">HTMLRenderer</a> <i>(struct)</i></label><span id='HTMLRenderer-fold-content-docs' class="fold-docs">
		HTMLRenderer is a renderer.NodeRenderer implementation that renders
		pkg.go.dev readme features.

		<input type='checkbox' class="fold" id="HTMLRenderer-fold-fields"><label for="HTMLRenderer-fold-fields">Fields (<i>total 5, all are exported</i>)</label><span id='HTMLRenderer-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-146">Config</a> <i><a href="../../../../github.com/yuin/goldmark/renderer/html.html">html</a>.<a href="../../../../github.com/yuin/goldmark/renderer/html.html#name-Config">Config</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-146" class="path-duplicate">Config</a>.<a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-16">HardWraps</a> <i><a href="../../../../builtin.html#name-bool">bool</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-146" class="path-duplicate">Config</a>.<a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-18">Unsafe</a> <i><a href="../../../../builtin.html#name-bool">bool</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-146" class="path-duplicate">Config</a>.<a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-15">Writer</a> <i><a href="../../../../github.com/yuin/goldmark/renderer/html.html">html</a>.<a href="../../../../github.com/yuin/goldmark/renderer/html.html#name-Writer">Writer</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-146" class="path-duplicate">Config</a>.<a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-17">XHTML</a> <i><a href="../../../../builtin.html#name-bool">bool</a></i></span></span></span>
		<input type='checkbox' class="fold" id="HTMLRenderer-fold-methods"><label for="HTMLRenderer-fold-methods">Methods (<i>total 4, in which 2 are exported</i>)</label><span id='HTMLRenderer-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="HTMLRenderer-fold-method-RegisterFuncs"><label for="HTMLRenderer-fold-method-RegisterFuncs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/goldmark.go.html#line-56">RegisterFuncs</a>(reg <a href="../../../../github.com/yuin/goldmark/renderer.html">renderer</a>.<a href="../../../../github.com/yuin/goldmark/renderer.html#name-NodeRendererFuncRegisterer">NodeRendererFuncRegisterer</a>)</label><span id='HTMLRenderer-fold-method-RegisterFuncs-docs' class="fold-docs">
				RegisterFuncs implements renderer.NodeRenderer.RegisterFuncs.
</span></span><span>
			<input type='checkbox' class="fold" id="HTMLRenderer-fold-method-SetOption"><label for="HTMLRenderer-fold-method-SetOption">(*T) <a href="../../../../../src/github.com/yuin/goldmark/renderer/html/html.go.html#line-32">SetOption</a>(name <a href="../../../../github.com/yuin/goldmark/renderer.html">renderer</a>.<a href="../../../../github.com/yuin/goldmark/renderer.html#name-OptionName">OptionName</a>, value interface{})</label><span id='HTMLRenderer-fold-method-SetOption-docs' class="fold-docs">
				SetOption implements renderer.NodeRenderer.SetOption.
</span></span>
			<input type='checkbox' class="showhide" id="HTMLRenderer-showhide-methods"><i><label for="HTMLRenderer-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="HTMLRenderer-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/goldmark.go.html#line-70">skipImage</a>(w <a href="../../../../github.com/yuin/goldmark/util.html">util</a>.<a href="../../../../github.com/yuin/goldmark/util.html#name-BufWriter">BufWriter</a>, source []<a href="../../../../builtin.html#name-byte">byte</a>, node <a href="../../../../github.com/yuin/goldmark/ast.html">ast</a>.<a href="../../../../github.com/yuin/goldmark/ast.html#name-Node">Node</a>, entering <a href="../../../../builtin.html#name-bool">bool</a>) (<a href="../../../../github.com/yuin/goldmark/ast.html">ast</a>.<a href="../../../../github.com/yuin/goldmark/ast.html#name-WalkStatus">WalkStatus</a>, <a href="../../../../builtin.html#name-error">error</a>)</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/goldmark.go.html#line-77">skipNode</a>(w <a href="../../../../github.com/yuin/goldmark/util.html">util</a>.<a href="../../../../github.com/yuin/goldmark/util.html#name-BufWriter">BufWriter</a>, source []<a href="../../../../builtin.html#name-byte">byte</a>, node <a href="../../../../github.com/yuin/goldmark/ast.html">ast</a>.<a href="../../../../github.com/yuin/goldmark/ast.html#name-Node">Node</a>, entering <a href="../../../../builtin.html#name-bool">bool</a>) (<a href="../../../../github.com/yuin/goldmark/ast.html">ast</a>.<a href="../../../../github.com/yuin/goldmark/ast.html#name-WalkStatus">WalkStatus</a>, <a href="../../../../builtin.html#name-error">error</a>)</span></i></span></span>
		<input type='checkbox' class="fold" id="HTMLRenderer-fold-impls"><label for="HTMLRenderer-fold-impls">Implements (<i>at least 2, both are exported</i>)</label><span id='HTMLRenderer-fold-impls-items' class="fold-items"><span>
			*T : github.com/yuin/goldmark/renderer.<a href="../../../../github.com/yuin/goldmark/renderer.html#name-NodeRenderer">NodeRenderer</a></span><span>
			*T : github.com/yuin/goldmark/renderer.<a href="../../../../github.com/yuin/goldmark/renderer.html#name-SetOptioner">SetOptioner</a></span></span>

</span></div><div class="anchor type-res" id="name-ModuleVersion" data-popularity="360">	<input type='checkbox' class="fold" id="ModuleVersion-fold-content"><label for="ModuleVersion-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..ModuleVersion.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-17">ModuleVersion</a> <i>(struct)</i></label><span id='ModuleVersion-fold-content-docs' class="fold-docs">
		A ModuleVersion holds a module path and version.

		<input type='checkbox' class="fold" id="ModuleVersion-fold-fields"><label for="ModuleVersion-fold-fields">Fields (<i>total 2, both are exported</i>)</label><span id='ModuleVersion-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-18">ModulePath</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-19">Version</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span></span>
		<input type='checkbox' class="fold" id="ModuleVersion-fold-methods"><label for="ModuleVersion-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='ModuleVersion-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">( T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-22">String</a>() <a href="../../../../builtin.html#name-string">string</a></span></span></span>
		<input type='checkbox' class="fold" id="ModuleVersion-fold-impls"><label for="ModuleVersion-fold-impls">Implements (<i>at least 4, in which 2 are exported</i>)</label><span id='ModuleVersion-fold-impls-items' class="fold-items"><span>
			 T : expvar.<a href="../../../../expvar.html#name-Var">Var</a></span><span>
			 T : fmt.<a href="../../../../fmt.html#name-Stringer">Stringer</a></span>
			<input type='checkbox' class="showhide" id="ModuleVersion-showhide-impls"><i><label for="ModuleVersion-showhide-impls" class="show-inline">/* 2+ unexporteds ... */</label><label for="ModuleVersion-showhide-impls" class="hide-inline">/* 2+ unexporteds: */</label></i><span class="hidden"><i>
			 T : context.<a href="../../../../context.html#name-stringer">stringer</a></i></span><span class="hidden"><i>
			 T : runtime.<a href="../../../../runtime.html#name-stringer">stringer</a></i></span></span>
		<input type='checkbox' class="fold" id="ModuleVersion-fold-results"><label for="ModuleVersion-fold-results">As Outputs Of (<i>at least one exported</i>)</label><span id='ModuleVersion-fold-results-items' class="fold-items"><span>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-29">GetModuleVersionsToClean</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, daysOld, limit <a href="../../../../builtin.html#name-int">int</a>) (modvers []<b>ModuleVersion</b>, err <a href="../../../../builtin.html#name-error">error</a>)</span></span>
		<input type='checkbox' class="fold" id="ModuleVersion-fold-params"><label for="ModuleVersion-fold-params">As Inputs Of (<i>at least one exported</i>)</label><span id='ModuleVersion-fold-params-items' class="fold-items"><span>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/clean.go.html#line-76">CleanModuleVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, mvs []<b>ModuleVersion</b>, reason <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></span>

</span></div><div class="anchor type-res" id="name-ModuleVersionStateForUpsert" data-popularity="70">	<input type='checkbox' class="fold" id="ModuleVersionStateForUpsert-fold-content"><label for="ModuleVersionStateForUpsert-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..ModuleVersionStateForUpsert.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-45">ModuleVersionStateForUpsert</a> <i>(struct)</i></label><span id='ModuleVersionStateForUpsert-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="ModuleVersionStateForUpsert-fold-fields"><label for="ModuleVersionStateForUpsert-fold-fields">Fields (<i>total 9, all are exported</i>)</label><span id='ModuleVersionStateForUpsert-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-48">AppVersion</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-53">FetchErr</a> <i><a href="../../../../builtin.html#name-error">error</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-52">GoModPath</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-51">HasGoMod</a> <i><a href="../../../../builtin.html#name-bool">bool</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-46">ModulePath</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-54">PackageVersionStates</a> <i>[]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-PackageVersionState">PackageVersionState</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-50">Status</a> <i><a href="../../../../builtin.html#name-int">int</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-49">Timestamp</a> <i><a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Time">Time</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-47">Version</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span></span>
		<input type='checkbox' class="fold" id="ModuleVersionStateForUpsert-fold-params"><label for="ModuleVersionStateForUpsert-fold-params">As Inputs Of (<i>at least 2, in which 1 are exported</i>)</label><span id='ModuleVersionStateForUpsert-fold-params-items' class="fold-items"><span>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-59">UpsertModuleVersionState</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, mvs *<b>ModuleVersionStateForUpsert</b>) (err <a href="../../../../builtin.html#name-error">error</a>)</span>
			<input type='checkbox' class="showhide" id="ModuleVersionStateForUpsert-showhide-outputofs"><i><label for="ModuleVersionStateForUpsert-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="ModuleVersionStateForUpsert-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-upsertModuleVersionState">upsertModuleVersionState</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, numPackages *<a href="../../../../builtin.html#name-int">int</a>, mvs *<b>ModuleVersionStateForUpsert</b>) (err <a href="../../../../builtin.html#name-error">error</a>)</i></span></span>

</span></div><div class="anchor type-res" id="name-UpsertSearchDocumentArgs" data-popularity="145">	<input type='checkbox' class="fold" id="UpsertSearchDocumentArgs-fold-content"><label for="UpsertSearchDocumentArgs-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..UpsertSearchDocumentArgs.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-660">UpsertSearchDocumentArgs</a> <i>(struct)</i></label><span id='UpsertSearchDocumentArgs-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="UpsertSearchDocumentArgs-fold-fields"><label for="UpsertSearchDocumentArgs-fold-fields">Fields (<i>total 6, all are exported</i>)</label><span id='UpsertSearchDocumentArgs-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-662">ModulePath</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-661">PackagePath</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-666">ReadmeContents</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-665">ReadmeFilePath</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-664">Synopsis</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-663">Version</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></span></span>
		<input type='checkbox' class="fold" id="UpsertSearchDocumentArgs-fold-results"><label for="UpsertSearchDocumentArgs-fold-results">As Outputs Of (<i>at least one exported</i>)</label><span id='UpsertSearchDocumentArgs-fold-results-items' class="fold-items"><span>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-689">GetPackagesForSearchDocumentUpsert</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, before <a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Time">Time</a>, limit <a href="../../../../builtin.html#name-int">int</a>) (argsList []<b>UpsertSearchDocumentArgs</b>, err <a href="../../../../builtin.html#name-error">error</a>)</span></span>
		<input type='checkbox' class="fold" id="UpsertSearchDocumentArgs-fold-params"><label for="UpsertSearchDocumentArgs-fold-params">As Inputs Of (<i>at least 2, both are exported</i>)</label><span id='UpsertSearchDocumentArgs-fold-params-items' class="fold-items"><span>
			func <a href="#name-UpsertSearchDocument">UpsertSearchDocument</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, args <b>UpsertSearchDocumentArgs</b>) (err <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-1060">UpsertSearchDocumentWithImportedByCount</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, args <b>UpsertSearchDocumentArgs</b>, importedByCount <a href="../../../../builtin.html#name-int">int</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></span>

</span></div><div class="anchor type-res" id="name-VersionStats" data-popularity="75">	<input type='checkbox' class="fold" id="VersionStats-fold-content"><label for="VersionStats-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..VersionStats.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-417">VersionStats</a> <i>(struct)</i></label><span id='VersionStats-fold-content-docs' class="fold-docs">
		VersionStats holds statistics extracted from the module_version_states
		table.

		<input type='checkbox' class="fold" id="VersionStats-fold-fields"><label for="VersionStats-fold-fields">Fields (<i>total 2, both are exported</i>)</label><span id='VersionStats-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-418">LatestTimestamp</a> <i><a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Time">Time</a></i></span></span><span>
			<input type='checkbox' class="fold" id="VersionStats-fold-field-VersionCounts"><label for="VersionStats-fold-field-VersionCounts"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-419">VersionCounts</a> <i>map[<a href="../../../../builtin.html#name-int">int</a>]<a href="../../../../builtin.html#name-int">int</a></i></label><span id='VersionStats-fold-field-VersionCounts-docs' class="fold-docs">
				// from status to number of rows
</span></span></span>
		<input type='checkbox' class="fold" id="VersionStats-fold-results"><label for="VersionStats-fold-results">As Outputs Of (<i>at least one exported</i>)</label><span id='VersionStats-fold-results-items' class="fold-items"><span>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-425">GetVersionStats</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>) (_ *<b>VersionStats</b>, err <a href="../../../../builtin.html#name-error">error</a>)</span></span>

</span></div></div><div>	<input type='checkbox' class="showhide" id="unexported-typenames-showhide"><i><label for="unexported-typenames-showhide" class="show-inline">/* 6 unexporteds ... */</label><label for="unexported-typenames-showhide" class="hide-inline">/* 6 unexporteds: */</label></i><div class="anchor type-res hidden" id="name-dbPath" data-popularity="75">	<input type='checkbox' class="fold" id="dbPath-fold-content"><label for="dbPath-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..dbPath*dc86c.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-575">dbPath</a> <i>(struct)</i></label><span id='dbPath-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="dbPath-fold-fields"><label for="dbPath-fold-fields">Fields (<i>total 7, none are exported</i>)</label><span id='dbPath-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="dbPath-showhide-fields"><i><label for="dbPath-showhide-fields" class="show-inline">/* 7 unexporteds ... */</label><label for="dbPath-showhide-fields" class="hide-inline">/* 7 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-576">id</a> <i><a href="../../../../builtin.html#name-int64">int64</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-581">licensePaths</a> <i>[]<a href="../../../../builtin.html#name-string">string</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-580">licenseTypes</a> <i>[]<a href="../../../../builtin.html#name-string">string</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-578">moduleID</a> <i><a href="../../../../builtin.html#name-int64">int64</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-579">name</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-577">path</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-582">redistributable</a> <i><a href="../../../../builtin.html#name-bool">bool</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="dbPath-fold-results"><label for="dbPath-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='dbPath-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="dbPath-showhide-inputofs"><i><label for="dbPath-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="dbPath-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-585">getPathsInModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ []*<b>dbPath</b>, err <a href="../../../../builtin.html#name-error">error</a>)</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-jsonbScanner" data-popularity="100">	<input type='checkbox' class="fold" id="jsonbScanner-fold-content"><label for="jsonbScanner-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..jsonbScanner*7bc5a.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-164">jsonbScanner</a> <i>(struct)</i></label><span id='jsonbScanner-fold-content-docs' class="fold-docs">
		jsonbScanner scans a jsonb value into a Go value.

		<input type='checkbox' class="fold" id="jsonbScanner-fold-fields"><label for="jsonbScanner-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='jsonbScanner-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="jsonbScanner-showhide-fields"><i><label for="jsonbScanner-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="jsonbScanner-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="jsonbScanner-fold-field-ptr"><label for="jsonbScanner-fold-field-ptr"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-165">ptr</a> <i>interface{}</i></label><span id='jsonbScanner-fold-field-ptr-docs' class="fold-docs">
				// a pointer to a Go struct or other JSON-serializable value
</span></i></span></span>
		<input type='checkbox' class="fold" id="jsonbScanner-fold-methods"><label for="jsonbScanner-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='jsonbScanner-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">( T) <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-168">Scan</a>(value interface{}) (err <a href="../../../../builtin.html#name-error">error</a>)</span></span></span>
		<input type='checkbox' class="fold" id="jsonbScanner-fold-impls"><label for="jsonbScanner-fold-impls">Implements (<i>at least one exported</i>)</label><span id='jsonbScanner-fold-impls-items' class="fold-items"><span>
			 T : database/sql.<a href="../../../../database/sql.html#name-Scanner">Scanner</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-packageSymbol" data-popularity="180">	<input type='checkbox' class="fold" id="packageSymbol-fold-content"><label for="packageSymbol-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..packageSymbol*3e60e.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-38">packageSymbol</a> <i>(struct)</i></label><span id='packageSymbol-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="packageSymbol-fold-fields"><label for="packageSymbol-fold-fields">Fields (<i>total 3, none are exported</i>)</label><span id='packageSymbol-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="packageSymbol-showhide-fields"><i><label for="packageSymbol-showhide-fields" class="show-inline">/* 3 unexporteds ... */</label><label for="packageSymbol-showhide-fields" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-39">name</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="packageSymbol-fold-field-parentName"><label for="packageSymbol-fold-field-parentName"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-53">parentName</a> <i><a href="../../../../builtin.html#name-string">string</a></i></label><span id='packageSymbol-fold-field-parentName-docs' class="fold-docs">
				parentName is a unique key in packageSymbol because the section can change
				with the name and synopsis remaining the same. For example:
				https://pkg.go.dev/go/types@go1.8#Universe is in the Variables section,
				with parentName Universe.
				https://pkg.go.dev/go/types@go1.16#Universe is in the Types section,
				with parentName Scope.

				https://pkg.go.dev/github.com/89z/page@v1.2.1#Help is in the Types
				section under type InputMode.
				https://pkg.go.dev/github.com/89z/page@v1.1.3#Help is in the Types
				section under ScreenMode.
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-40">synopsis</a> <i><a href="../../../../builtin.html#name-string">string</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="packageSymbol-fold-results"><label for="packageSymbol-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='packageSymbol-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="packageSymbol-showhide-inputofs"><i><label for="packageSymbol-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="packageSymbol-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-upsertPackageSymbolsReturningIDs">upsertPackageSymbolsReturningIDs</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>, pathToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, nameToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocIDToDoc map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (_ map[<a href="../../../../builtin.html#name-string">string</a>]map[<b>packageSymbol</b>]<a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</i></span></span>
		<input type='checkbox' class="fold" id="packageSymbol-fold-params"><label for="packageSymbol-fold-params">As Inputs Of (<i>at least 3, none are exported</i>)</label><span id='packageSymbol-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="packageSymbol-showhide-outputofs"><i><label for="packageSymbol-showhide-outputofs" class="show-inline">/* 3+ unexporteds ... */</label><label for="packageSymbol-showhide-outputofs" class="hide-inline">/* 3+ unexporteds: */</label></i><span class="hidden"><i>
			func <a href="#name-appendSymbolHistoryRow">appendSymbolHistoryRow</a>(sm *<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolMeta">SymbolMeta</a>, values []interface{}, packagePath, modulePath, ver <a href="../../../../builtin.html#name-string">string</a>, build <a href="../internal.html">internal</a>.<a href="../internal.html#name-BuildContext">BuildContext</a>, pathToID, symToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToPkgsymID map[<a href="../../../../builtin.html#name-string">string</a>]map[<b>packageSymbol</b>]<a href="../../../../builtin.html#name-int">int</a>) (_ []interface{}, err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func <a href="#name-upsertDocumentationSymbols">upsertDocumentationSymbols</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, pathToPkgsymID map[<a href="../../../../builtin.html#name-string">string</a>]map[<b>packageSymbol</b>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocIDToDoc map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func <a href="#name-upsertSymbolHistory">upsertSymbolHistory</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath, ver <a href="../../../../builtin.html#name-string">string</a>, nameToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToPkgsymID map[<a href="../../../../builtin.html#name-string">string</a>]map[<b>packageSymbol</b>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocIDToDoc map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-searcher" data-popularity="35">	<input type='checkbox' class="fold" id="searcher-fold-content"><label for="searcher-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..searcher*c067f.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-85">searcher</a> <i>(func)</i></label><span id='searcher-fold-content-docs' class="fold-docs">
		A searcher is used to execute a single search request.

		<input type='checkbox' class="fold" id="searcher-fold-params"><label for="searcher-fold-params">As Inputs Of (<i>at least one unexported</i>)</label><span id='searcher-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="searcher-showhide-outputofs"><i><label for="searcher-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="searcher-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-194">hedgedSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, q <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>, searchers map[<a href="../../../../builtin.html#name-string">string</a>]<b>searcher</b>, guardTestResult func(<a href="../../../../builtin.html#name-string">string</a>) func()) (_ *<a href="#name-searchResponse">searchResponse</a>, err <a href="../../../../builtin.html#name-error">error</a>)</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-searchEvent" data-popularity="0">	<input type='checkbox' class="fold" id="searchEvent-fold-content"><label for="searchEvent-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..searchEvent*be3f9.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-75">searchEvent</a> <i>(struct)</i></label><span id='searchEvent-fold-content-docs' class="fold-docs">
		searchEvent is used to log structured information about search events for
		later analysis. A 'search event' occurs when a searcher or count estimate
		returns.

		<input type='checkbox' class="fold" id="searchEvent-fold-fields"><label for="searchEvent-fold-fields">Fields (<i>total 3, all are exported</i>)</label><span id='searchEvent-fold-fields-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="searchEvent-fold-field-Err"><label for="searchEvent-fold-field-Err"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-81">Err</a> <i><a href="../../../../builtin.html#name-error">error</a></i></label><span id='searchEvent-fold-field-Err-docs' class="fold-docs">
				Err is the error returned by the operation, if any.
</span></span><span>
			<input type='checkbox' class="fold" id="searchEvent-fold-field-Latency"><label for="searchEvent-fold-field-Latency"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-79">Latency</a> <i><a href="../../../../time.html">time</a>.<a href="../../../../time.html#name-Duration">Duration</a></i></label><span id='searchEvent-fold-field-Latency-docs' class="fold-docs">
				Latency is the duration that that the operation took.
</span></span><span>
			<input type='checkbox' class="fold" id="searchEvent-fold-field-Type"><label for="searchEvent-fold-field-Type"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-77">Type</a> <i><a href="../../../../builtin.html#name-string">string</a></i></label><span id='searchEvent-fold-field-Type-docs' class="fold-docs">
				Type is either the searcher name or 'estimate' (the count estimate).
</span></span></span>

</span></div><div class="anchor type-res hidden" id="name-searchResponse" data-popularity="300">	<input type='checkbox' class="fold" id="searchResponse-fold-content"><label for="searchResponse-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..searchResponse*cbae0.html">type</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-61">searchResponse</a> <i>(struct)</i></label><span id='searchResponse-fold-content-docs' class="fold-docs">
		searchResponse is used for internal bookkeeping when fanning-out search
		request to multiple different search queries.

		<input type='checkbox' class="fold" id="searchResponse-fold-fields"><label for="searchResponse-fold-fields">Fields (<i>total 3, none are exported</i>)</label><span id='searchResponse-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="searchResponse-showhide-fields"><i><label for="searchResponse-showhide-fields" class="show-inline">/* 3 unexporteds ... */</label><label for="searchResponse-showhide-fields" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="searchResponse-fold-field-err"><label for="searchResponse-fold-field-err"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-69">err</a> <i><a href="../../../../builtin.html#name-error">error</a></i></label><span id='searchResponse-fold-field-err-docs' class="fold-docs">
				err indicates a technical failure of the search query, or that results are
				not provably complete.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="searchResponse-fold-field-results"><label for="searchResponse-fold-field-results"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-66">results</a> <i>[]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-SearchResult">SearchResult</a></i></label><span id='searchResponse-fold-field-results-docs' class="fold-docs">
				results are partially filled out from only the search_documents table.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="searchResponse-fold-field-source"><label for="searchResponse-fold-field-source"><a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-64">source</a> <i><a href="../../../../builtin.html#name-string">string</a></i></label><span id='searchResponse-fold-field-source-docs' class="fold-docs">
				source is a unique identifier for the search query type (e.g. 'deep',
				'popular'), to be used in logging and reporting.
</span></i></span></span>
		<input type='checkbox' class="fold" id="searchResponse-fold-results"><label for="searchResponse-fold-results">As Outputs Of (<i>at least 4, none are exported</i>)</label><span id='searchResponse-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="searchResponse-showhide-inputofs"><i><label for="searchResponse-showhide-inputofs" class="show-inline">/* 4+ unexporteds ... */</label><label for="searchResponse-showhide-inputofs" class="hide-inline">/* 4+ unexporteds: */</label></i><span class="hidden"><i>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-252">deepSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, q <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>) <b>searchResponse</b></i></span><span class="hidden"><i>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-194">hedgedSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, q <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>, searchers map[<a href="../../../../builtin.html#name-string">string</a>]<a href="#name-searcher">searcher</a>, guardTestResult func(<a href="../../../../builtin.html#name-string">string</a>) func()) (_ *<b>searchResponse</b>, err <a href="../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-300">popularSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, searchQuery <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>) <b>searchResponse</b></i></span><span class="hidden"><i>
			func (*<a href="#name-DB">DB</a>).<a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-347">symbolSearch</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, q <a href="../../../../builtin.html#name-string">string</a>, limit, offset, maxResultCount <a href="../../../../builtin.html#name-int">int</a>) <b>searchResponse</b></i></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 93, in which 19 are exported)</i></span></span>

<div class="anchor value-res" id="name-GeneratePathTokens">	<input type='checkbox' class="fold" id="GeneratePathTokens-fold-content"><label for="GeneratePathTokens-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..GeneratePathTokens.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-958">GeneratePathTokens</a>(packagePath <a href="../../../../builtin.html#name-string">string</a>) []<a href="../../../../builtin.html#name-string">string</a></label><span id='GeneratePathTokens-fold-content-docs' class="fold-docs">
		GeneratePathTokens returns the subPaths and path token parts that will be
		indexed for search, which includes (1) the packagePath (2) all sub-paths of
		the packagePath (3) all parts for a path element that is delimited by a dash
		and (4) all parts of a path element that is delimited by a dot, except for
		the last element.

</span></div><div class="anchor value-res" id="name-GetFromSearchDocuments">	<input type='checkbox' class="fold" id="GetFromSearchDocuments-fold-content"><label for="GetFromSearchDocuments-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..GetFromSearchDocuments.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-325">GetFromSearchDocuments</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<a href="#name-DB">DB</a>, packagePath <a href="../../../../builtin.html#name-string">string</a>) (modulePath, version <a href="../../../../builtin.html#name-string">string</a>, found <a href="../../../../builtin.html#name-bool">bool</a>)</label><span id='GetFromSearchDocuments-fold-content-docs' class="fold-docs">
		GetFromSearchDocuments retrieves the module path and version for the given
		package path from the search_documents table. If the path is not in the table,
		the third return value is false.

</span></div><div class="anchor value-res" id="name-GetPathID">	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..GetPathID.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/path.go.html#line-155">GetPathID</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, path <a href="../../../../builtin.html#name-string">string</a>) (id <a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></div><div class="anchor value-res" id="name-GetSymbolHistoryForBuildContext">	<input type='checkbox' class="fold" id="GetSymbolHistoryForBuildContext-fold-content"><label for="GetSymbolHistoryForBuildContext-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..GetSymbolHistoryForBuildContext.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol_history.go.html#line-94">GetSymbolHistoryForBuildContext</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, pathID <a href="../../../../builtin.html#name-int">int</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>, bc <a href="../internal.html">internal</a>.<a href="../internal.html#name-BuildContext">BuildContext</a>) (_ map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-string">string</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='GetSymbolHistoryForBuildContext-fold-content-docs' class="fold-docs">
		GetSymbolHistoryForBuildContext returns a map of the first version when a symbol name is
		added to the API for the specified build context, to the symbol name, to the
		UnitSymbol struct. The UnitSymbol.Children field will always be empty, as
		children names are also tracked.

</span></div><div class="anchor value-res" id="name-GetSymbolHistoryFromTable">	<input type='checkbox' class="fold" id="GetSymbolHistoryFromTable-fold-content"><label for="GetSymbolHistoryFromTable-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..GetSymbolHistoryFromTable.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol_history.go.html#line-41">GetSymbolHistoryFromTable</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, packagePath, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolHistory">SymbolHistory</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='GetSymbolHistoryFromTable-fold-content-docs' class="fold-docs">
		GetSymbolHistoryFromTable returns a SymbolHistory, which is a representation of the
		first version when a symbol is added to an API. It reads data from the
		symbol_history table.

</span></div><div class="anchor value-res" id="name-GetSymbolHistoryWithPackageSymbols">	<input type='checkbox' class="fold" id="GetSymbolHistoryWithPackageSymbols-fold-content"><label for="GetSymbolHistoryWithPackageSymbols-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..GetSymbolHistoryWithPackageSymbols.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol_history.go.html#line-79">GetSymbolHistoryWithPackageSymbols</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, packagePath, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolHistory">SymbolHistory</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='GetSymbolHistoryWithPackageSymbols-fold-content-docs' class="fold-docs">
		GetSymbolHistoryWithPackageSymbols fetches symbol history data by using data
		from package_symbols and documentation_symbols, and computed using
		symbol.IntroducedHistory.

		GetSymbolHistoryWithPackageSymbols is exported for use in tests.

</span></div><div class="anchor value-res" id="name-InsertSampleDirectoryTree">	<input type='checkbox' class="fold" id="InsertSampleDirectoryTree-fold-content"><label for="InsertSampleDirectoryTree-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..InsertSampleDirectoryTree.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-248">InsertSampleDirectoryTree</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, testDB *<a href="#name-DB">DB</a>)</label><span id='InsertSampleDirectoryTree-fold-content-docs' class="fold-docs">
		InsertSampleDirectory tree inserts a set of packages for testing
		GetUnit and frontend.FetchDirectoryDetails.

</span></div><div class="anchor value-res" id="name-MustInsertModule">	<input type='checkbox' class="fold" id="MustInsertModule-fold-content"><label for="MustInsertModule-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..MustInsertModule.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-204">MustInsertModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<a href="#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>)</label><span id='MustInsertModule-fold-content-docs' class="fold-docs">
		MustInsertModule inserts m into db, calling t.Fatal on error.
		It also updates the latest-version information for m.

</span></div><div class="anchor value-res" id="name-MustInsertModuleGoMod">	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..MustInsertModuleGoMod.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-208">MustInsertModuleGoMod</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<a href="#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>, goMod <a href="../../../../builtin.html#name-string">string</a>)</span></div><div class="anchor value-res" id="name-MustInsertModuleNotLatest">	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..MustInsertModuleNotLatest.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-212">MustInsertModuleNotLatest</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<a href="#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>)</span></div><div class="anchor value-res" id="name-New">	<input type='checkbox' class="fold" id="New-fold-content"><label for="New-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..New.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-28">New</a>(db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>) *<a href="#name-DB">DB</a></label><span id='New-fold-content-docs' class="fold-docs">
		New returns a new postgres DB.

</span></div><div class="anchor value-res" id="name-NewBypassingLicenseCheck">	<input type='checkbox' class="fold" id="NewBypassingLicenseCheck-fold-content"><label for="NewBypassingLicenseCheck-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..NewBypassingLicenseCheck.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-35">NewBypassingLicenseCheck</a>(db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>) *<a href="#name-DB">DB</a></label><span id='NewBypassingLicenseCheck-fold-content-docs' class="fold-docs">
		NewBypassingLicenseCheck returns a new postgres DB that bypasses license
		checks. That means all data will be inserted and returned for
		non-redistributable modules, packages and directories.

</span></div><div class="anchor value-res" id="name-NewHTMLRenderer">	<input type='checkbox' class="fold" id="NewHTMLRenderer-fold-content"><label for="NewHTMLRenderer-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..NewHTMLRenderer.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/goldmark.go.html#line-45">NewHTMLRenderer</a>(opts ...<a href="../../../../github.com/yuin/goldmark/renderer/html.html">html</a>.<a href="../../../../github.com/yuin/goldmark/renderer/html.html#name-Option">Option</a>) <a href="../../../../github.com/yuin/goldmark/renderer.html">renderer</a>.<a href="../../../../github.com/yuin/goldmark/renderer.html#name-NodeRenderer">NodeRenderer</a></label><span id='NewHTMLRenderer-fold-content-docs' class="fold-docs">
		NewHTMLRenderer creates a new HTMLRenderer for a readme.

</span></div><div class="anchor value-res" id="name-ResetTestDB">	<input type='checkbox' class="fold" id="ResetTestDB-fold-content"><label for="ResetTestDB-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..ResetTestDB.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-107">ResetTestDB</a>(db *<a href="#name-DB">DB</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>)</label><span id='ResetTestDB-fold-content-docs' class="fold-docs">
		ResetTestDB truncates all data from the given test DB.  It should be called
		after every test that mutates the database.

</span></div><div class="anchor value-res" id="name-RunDBTests">	<input type='checkbox' class="fold" id="RunDBTests-fold-content"><label for="RunDBTests-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..RunDBTests.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-137">RunDBTests</a>(dbName <a href="../../../../builtin.html#name-string">string</a>, m *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-M">M</a>, testDB **<a href="#name-DB">DB</a>)</label><span id='RunDBTests-fold-content-docs' class="fold-docs">
		RunDBTests is a wrapper that runs the given testing suite in a test database
		named dbName.  The given *DB reference will be set to the instantiated test
		database.

</span></div><div class="anchor value-res" id="name-RunDBTestsInParallel">	<input type='checkbox' class="fold" id="RunDBTestsInParallel-fold-content"><label for="RunDBTestsInParallel-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..RunDBTestsInParallel.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-163">RunDBTestsInParallel</a>(dbBaseName <a href="../../../../builtin.html#name-string">string</a>, numDBs <a href="../../../../builtin.html#name-int">int</a>, m *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-M">M</a>, acquirep *func(*<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>) (*<a href="#name-DB">DB</a>, func()))</label><span id='RunDBTestsInParallel-fold-content-docs' class="fold-docs">
		RunDBTestsInParallel sets up numDBs databases, then runs the tests. Before it runs them,
		it sets acquirep to a function that tests should use to acquire a database. The second
		return value of the function should be called in a defer statement to release the database.
		For example:

		   func Test(t *testing.T) {
		       db, release := acquire(t)
		       defer release()

</span></div><div class="anchor value-res" id="name-SearchDocumentSections">	<input type='checkbox' class="fold" id="SearchDocumentSections-fold-content"><label for="SearchDocumentSections-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..SearchDocumentSections.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-32">SearchDocumentSections</a>(synopsis, readmeFilename, readme <a href="../../../../builtin.html#name-string">string</a>) (b, c, d <a href="../../../../builtin.html#name-string">string</a>)</label><span id='SearchDocumentSections-fold-content-docs' class="fold-docs">
		SearchDocumentSections computes the B and C sections of a Postgres search
		document from a package synopsis and a README.
		By "B section" and "C section" we mean the portion of the tsvector with weight
		"B" and "C", respectively.

		The B section consists of the synopsis.
		The C section consists of the first sentence of the README.
		The D section consists of the remainder of the README.
		All sections are split into words and processed for replacements.
		Each section is limited to maxSectionWords words, and in addition the
		D section is limited to an initial fraction of the README, determined
		by maxReadmeFraction.

</span></div><div class="anchor value-res" id="name-SetupTestDB">	<input type='checkbox' class="fold" id="SetupTestDB-fold-content"><label for="SetupTestDB-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..SetupTestDB.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-75">SetupTestDB</a>(dbName <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="#name-DB">DB</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='SetupTestDB-fold-content-docs' class="fold-docs">
		SetupTestDB creates a test database named dbName if it does not already
		exist, and migrates it to the latest schema from the migrations directory.

</span></div><div class="anchor value-res" id="name-UpsertSearchDocument">	<input type='checkbox' class="fold" id="UpsertSearchDocument-fold-content"><label for="UpsertSearchDocument-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..UpsertSearchDocument.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-672">UpsertSearchDocument</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, args <a href="#name-UpsertSearchDocumentArgs">UpsertSearchDocumentArgs</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='UpsertSearchDocument-fold-content-docs' class="fold-docs">
		UpsertSearchDocument inserts a row in search_documents for the given package.
		The given module should have already been validated via a call to
		validateModule.

</span></div>	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* 74 unexporteds ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* 74 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-addLatest"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..addLatest*3d3b8.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-231">addLatest</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<a href="#name-DB">DB</a>, modulePath, version, modFile <a href="../../../../builtin.html#name-string">string</a>) *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a></span></i></div><div class="anchor value-res hidden" id="name-appendSymbolHistoryRow"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..appendSymbolHistoryRow*1c4cd.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_symbol_history.go.html#line-123">appendSymbolHistoryRow</a>(sm *<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolMeta">SymbolMeta</a>, values []interface{}, packagePath, modulePath, ver <a href="../../../../builtin.html#name-string">string</a>, build <a href="../internal.html">internal</a>.<a href="../internal.html#name-BuildContext">BuildContext</a>, pathToID, symToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToPkgsymID map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="#name-packageSymbol">packageSymbol</a>]<a href="../../../../builtin.html#name-int">int</a>) (_ []interface{}, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-collectLicenses"><i>	<input type='checkbox' class="fold" id="collectLicenses-fold-content"><label for="collectLicenses-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..collectLicenses*81c1b.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/licenses.go.html#line-106">collectLicenses</a>(rows *<a href="../../../../database/sql.html">sql</a>.<a href="../../../../database/sql.html#name-Rows">Rows</a>, bypassLicenseCheck <a href="../../../../builtin.html#name-bool">bool</a>) ([]*<a href="licenses.html">licenses</a>.<a href="licenses.html#name-License">License</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='collectLicenses-fold-content-docs' class="fold-docs">
		collectLicenses converts the sql rows to a list of licenses. The columns
		must be types, file_path and contents, in that order.

</span></i></div><div class="anchor value-res hidden" id="name-collectStrings"><i>	<input type='checkbox' class="fold" id="collectStrings-fold-content"><label for="collectStrings-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..collectStrings*da413.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-117">collectStrings</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, query <a href="../../../../builtin.html#name-string">string</a>, args ...interface{}) (ss []<a href="../../../../builtin.html#name-string">string</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='collectStrings-fold-content-docs' class="fold-docs">
		collectStrings runs the query, which must select for a single string column, and returns
		a slice of the resulting strings.

</span></i></div><div class="anchor value-res hidden" id="name-collectSymbolHistory"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..collectSymbolHistory*ca3f4.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/package_symbol.go.html#line-74">collectSymbolHistory</a>(check func(sh *<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolHistory">SymbolHistory</a>, sm <a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolMeta">SymbolMeta</a>, v <a href="../../../../builtin.html#name-string">string</a>, build <a href="../internal.html">internal</a>.<a href="../internal.html#name-BuildContext">BuildContext</a>) <a href="../../../../builtin.html#name-error">error</a>) (*<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolHistory">SymbolHistory</a>, func(rows *<a href="../../../../database/sql.html">sql</a>.<a href="../../../../database/sql.html#name-Rows">Rows</a>) <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-compareImportedByCounts"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..compareImportedByCounts*ca759.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-849">compareImportedByCounts</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-compareLicenses"><i>	<input type='checkbox' class="fold" id="compareLicenses-fold-content"><label for="compareLicenses-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..compareLicenses*157a3.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/licenses.go.html#line-189">compareLicenses</a>(i, j *<a href="licenses.html">licenses</a>.<a href="licenses.html#name-Metadata">Metadata</a>) <a href="../../../../builtin.html#name-bool">bool</a></label><span id='compareLicenses-fold-content-docs' class="fold-docs">
		compareLicenses reports whether i &lt; j according to our license sorting
		semantics.

</span></i></div><div class="anchor value-res hidden" id="name-getDocIDsForPath"><i>	<input type='checkbox' class="fold" id="getDocIDsForPath-fold-content"><label for="getDocIDsForPath-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getDocIDsForPath*79681.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-529">getDocIDsForPath</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, pathToUnitID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocs map[<a href="../../../../builtin.html#name-string">string</a>][]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (_ map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='getDocIDsForPath-fold-content-docs' class="fold-docs">
		getDocIDsForPath returns a map of the unit path to documentation.id to
		documentation, for all of the docs in pathToDocs. This will be used to
		insert data into the documentation_symbols.documentation_id column.

</span></i></div><div class="anchor value-res hidden" id="name-getExcludedPrefixes"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getExcludedPrefixes*b21fb.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/excluded.go.html#line-59">getExcludedPrefixes</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>) ([]<a href="../../../../builtin.html#name-string">string</a>, <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-getLatestGoodVersion"><i>	<input type='checkbox' class="fold" id="getLatestGoodVersion-fold-content"><label for="getLatestGoodVersion-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getLatestGoodVersion*04d3e.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-368">getLatestGoodVersion</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, tx *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>, lmv *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>) (_ <a href="../../../../builtin.html#name-string">string</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='getLatestGoodVersion-fold-content-docs' class="fold-docs">
		getLatestGoodVersion returns the latest version of a module in the modules
		table, respecting the retractions and other information in the given
		LatestModuleVersions. If lmv is nil, it finds the latest version, favoring
		release over pre-release, including incompatible versions, and ignoring
		retractions.

</span></i></div><div class="anchor value-res hidden" id="name-getLatestModuleVersions"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getLatestModuleVersions*1a556.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-413">getLatestModuleVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>, id <a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-getModuleReadme"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getModuleReadme*29716.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-632">getModuleReadme</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Readme">Readme</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-getPackagesInUnit"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getPackagesInUnit*920ff.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/unit.go.html#line-331">getPackagesInUnit</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, fullPath, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>, moduleID <a href="../../../../builtin.html#name-int">int</a>, bypassLicenseCheck <a href="../../../../builtin.html#name-bool">bool</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-PackageMeta">PackageMeta</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-getPackageSymbols"><i>	<input type='checkbox' class="fold" id="getPackageSymbols-fold-content"><label for="getPackageSymbols-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getPackageSymbols*d5abd.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/package_symbol.go.html#line-22">getPackageSymbols</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, packagePath, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ *<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolHistory">SymbolHistory</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='getPackageSymbols-fold-content-docs' class="fold-docs">
		getPackageSymbols returns all of the symbols for a given package path and module path.

</span></i></div><div class="anchor value-res hidden" id="name-getPathVersions"><i>	<input type='checkbox' class="fold" id="getPathVersions-fold-content"><label for="getPathVersions-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getPathVersions*42259.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-50">getPathVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="#name-DB">DB</a>, path <a href="../../../../builtin.html#name-string">string</a>, versionTypes ...<a href="version.html">version</a>.<a href="version.html#name-Type">Type</a>) (_ []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='getPathVersions-fold-content-docs' class="fold-docs">
		getPathVersions returns a list of versions sorted in descending semver
		order. The version types included in the list are specified by a list of
		VersionTypes.

</span></i></div><div class="anchor value-res hidden" id="name-getUnitSymbols"><i>	<input type='checkbox' class="fold" id="getUnitSymbols-fold-content"><label for="getUnitSymbols-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..getUnitSymbols*3e324.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-353">getUnitSymbols</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, unitID <a href="../../../../builtin.html#name-int">int</a>) (_ map[<a href="../internal.html">internal</a>.<a href="../internal.html#name-BuildContext">BuildContext</a>][]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Symbol">Symbol</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='getUnitSymbols-fold-content-docs' class="fold-docs">
		getUnitSymbols returns all of the symbols for the given unitID.

</span></i></div><div class="anchor value-res hidden" id="name-groupSearchResults"><i>	<input type='checkbox' class="fold" id="groupSearchResults-fold-content"><label for="groupSearchResults-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..groupSearchResults*149a1.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-519">groupSearchResults</a>(rs []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-SearchResult">SearchResult</a>) []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-SearchResult">SearchResult</a></label><span id='groupSearchResults-fold-content-docs' class="fold-docs">
		groupSearchResults groups and re-orders the list of SearchResults by module
		and series path and returns a new list of SearchResults.

		The second and later packages from a module are grouped under the first package,
		and removed from the top-level list.

		Higher major versions of a module are put before lower ones.

		Packages from lower major versions of the module are grouped under the first
		package of the highest major version. But they are not removed from the
		top-level list.

</span></i></div><div class="anchor value-res hidden" id="name-hyphenSplit"><i>	<input type='checkbox' class="fold" id="hyphenSplit-fold-content"><label for="hyphenSplit-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..hyphenSplit*e72b2.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-169">hyphenSplit</a>(s <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-bool">bool</a></label><span id='hyphenSplit-fold-content-docs' class="fold-docs">
		hyphenSplit reports whether s should be split on hyphens.

</span></i></div><div class="anchor value-res hidden" id="name-insertDocs"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertDocs*33fb7.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-497">insertDocs</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, paths []<a href="../../../../builtin.html#name-string">string</a>, pathToUnitID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocs map[<a href="../../../../builtin.html#name-string">string</a>][]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-insertImportedByCounts"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertImportedByCounts*5a624.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-829">insertImportedByCounts</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, counts map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-insertImports"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertImports*4a8f3.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-569">insertImports</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, paths []<a href="../../../../builtin.html#name-string">string</a>, pathToUnitID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToImports map[<a href="../../../../builtin.html#name-string">string</a>][]<a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-insertImportsUnique"><i>	<input type='checkbox' class="fold" id="insertImportsUnique-fold-content"><label for="insertImportsUnique-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertImportsUnique*298c2.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-299">insertImportsUnique</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, tx *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='insertImportsUnique-fold-content-docs' class="fold-docs">
		insertImportsUnique inserts and removes rows from the imports_unique table. It should only
		be called if the given module's version is the latest.

</span></i></div><div class="anchor value-res hidden" id="name-insertLicenses"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertLicenses*a8214.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-261">insertLicenses</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>, moduleID <a href="../../../../builtin.html#name-int">int</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-insertModule"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertModule*1e18d.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-212">insertModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>) (_ <a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-insertPaths"><i>	<input type='checkbox' class="fold" id="insertPaths-fold-content"><label for="insertPaths-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertPaths*7256f.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-433">insertPaths</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, tx *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>) (pathToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='insertPaths-fold-content-docs' class="fold-docs">
		insertPaths inserts all paths in m that aren't already there, and returns a map from each path to its
		ID in the paths table.
		Should be run inside a transaction.

</span></i></div><div class="anchor value-res hidden" id="name-insertReadmes"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertReadmes*0743b.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-590">insertReadmes</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, paths []<a href="../../../../builtin.html#name-string">string</a>, pathToUnitID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToReadme map[<a href="../../../../builtin.html#name-string">string</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Readme">Readme</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-insertSymbols"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertSymbols*02b5a.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-19">insertSymbols</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath, version <a href="../../../../builtin.html#name-string">string</a>, pathToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocIDToDoc map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-insertUnits"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..insertUnits*11150.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-450">insertUnits</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, unitValues []interface{}) (pathIDToUnitID map[<a href="../../../../builtin.html#name-int">int</a>]<a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-isAlternativeModulePath"><i>	<input type='checkbox' class="fold" id="isAlternativeModulePath-fold-content"><label for="isAlternativeModulePath-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..isAlternativeModulePath*23d66.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-189">isAlternativeModulePath</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>) (_ <a href="../../../../builtin.html#name-bool">bool</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='isAlternativeModulePath-fold-content-docs' class="fold-docs">
		isAlternativeModulePath reports whether the module path is "alternative,"
		that is, it disagrees with the module path in the go.mod file. This can
		happen when someone forks a repo and does not change the go.mod file, or when
		the path used to get a module is a case variant of the correct one (e.g.
		github.com/Sirupsen/logrus vs. github.com/sirupsen/logrus).

</span></i></div><div class="anchor value-res hidden" id="name-isInternalPackage"><i>	<input type='checkbox' class="fold" id="isInternalPackage-fold-content"><label for="isInternalPackage-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..isInternalPackage*d765d.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-1006">isInternalPackage</a>(path <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-bool">bool</a></label><span id='isInternalPackage-fold-content-docs' class="fold-docs">
		isInternalPackage reports whether the path represents an internal directory.

</span></i></div><div class="anchor value-res hidden" id="name-isMarkdown"><i>	<input type='checkbox' class="fold" id="isMarkdown-fold-content"><label for="isMarkdown-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..isMarkdown*9e38f.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-174">isMarkdown</a>(filename <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-bool">bool</a></label><span id='isMarkdown-fold-content-docs' class="fold-docs">
		isMarkdown reports whether filename says that the file contains markdown.

</span></i></div><div class="anchor value-res hidden" id="name-lock"><i>	<input type='checkbox' class="fold" id="lock-fold-content"><label for="lock-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..lock*0c030.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-730">lock</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, tx *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='lock-fold-content-docs' class="fold-docs">
		lock obtains an exclusive, transaction-scoped advisory lock on modulePath.

</span></i></div><div class="anchor value-res hidden" id="name-makeValidUnicode"><i>	<input type='checkbox' class="fold" id="makeValidUnicode-fold-content"><label for="makeValidUnicode-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..makeValidUnicode*4bb2d.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-877">makeValidUnicode</a>(s <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-string">string</a></label><span id='makeValidUnicode-fold-content-docs' class="fold-docs">
		makeValidUnicode removes null runes from a string that will be saved in a
		column of type TEXT, because pq doesn't like them. It also replaces non-unicode
		characters with the Unicode replacement character, which is the behavior of
		for ... range on strings.

</span></i></div><div class="anchor value-res hidden" id="name-migrationsSource"><i>	<input type='checkbox' class="fold" id="migrationsSource-fold-content"><label for="migrationsSource-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..migrationsSource*1d38e.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-47">migrationsSource</a>() <a href="../../../../builtin.html#name-string">string</a></label><span id='migrationsSource-fold-content-docs' class="fold-docs">
		migrationsSource returns a uri pointing to the migrations directory.  It
		returns an error if unable to determine this path.

</span></i></div><div class="anchor value-res hidden" id="name-mustHaveColumns"><i>	<input type='checkbox' class="fold" id="mustHaveColumns-fold-content"><label for="mustHaveColumns-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..mustHaveColumns*86403.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/licenses.go.html#line-148">mustHaveColumns</a>(rows *<a href="../../../../database/sql.html">sql</a>.<a href="../../../../database/sql.html#name-Rows">Rows</a>, wantColumns ...<a href="../../../../builtin.html#name-string">string</a>)</label><span id='mustHaveColumns-fold-content-docs' class="fold-docs">
		mustHaveColumns panics if the columns of rows does not match wantColumns.

</span></i></div><div class="anchor value-res hidden" id="name-mustInsertModule"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..mustInsertModule*5b904.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-216">mustInsertModule</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, t *<a href="../../../../testing.html">testing</a>.<a href="../../../../testing.html#name-T">T</a>, db *<a href="#name-DB">DB</a>, m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>, goMod <a href="../../../../builtin.html#name-string">string</a>, latest <a href="../../../../builtin.html#name-bool">bool</a>)</span></i></div><div class="anchor value-res hidden" id="name-newdb"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..newdb*8ac67.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-42">newdb</a>(db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, bypass <a href="../../../../builtin.html#name-bool">bool</a>) *<a href="#name-DB">DB</a></span></i></div><div class="anchor value-res hidden" id="name-packageSymbolQueryJoin"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..packageSymbolQueryJoin*86d8f.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/package_symbol.go.html#line-59">packageSymbolQueryJoin</a>(query <a href="../../../../github.com/Masterminds*f9830/squirrel.html">squirrel</a>.<a href="../../../../github.com/Masterminds*f9830/squirrel.html#name-SelectBuilder">SelectBuilder</a>, pkgPath, modulePath <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../github.com/Masterminds*f9830/squirrel.html">squirrel</a>.<a href="../../../../github.com/Masterminds*f9830/squirrel.html#name-SelectBuilder">SelectBuilder</a></span></i></div><div class="anchor value-res hidden" id="name-populateLatestInfo"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..populateLatestInfo*c2d54.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-114">populateLatestInfo</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="#name-DB">DB</a>, mi *<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-populateLatestInfos"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..populateLatestInfos*71644.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-128">populateLatestInfos</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="#name-DB">DB</a>, mis []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-processMarkdown"><i>	<input type='checkbox' class="fold" id="processMarkdown-fold-content"><label for="processMarkdown-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..processMarkdown*efa98.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-182">processMarkdown</a>(s <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-string">string</a></label><span id='processMarkdown-fold-content-docs' class="fold-docs">
		processMarkdown returns the text of a markdown document.
		It omits all formatting and images.

</span></i></div><div class="anchor value-res hidden" id="name-processWord"><i>	<input type='checkbox' class="fold" id="processWord-fold-content"><label for="processWord-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..processWord*b18d9.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-142">processWord</a>(s <a href="../../../../builtin.html#name-string">string</a>) []<a href="../../../../builtin.html#name-string">string</a></label><span id='processWord-fold-content-docs' class="fold-docs">
		processWord performs processing on s, returning zero or more words.
		Its main purpose is to apply summaryReplacements to replace
		certain words with synonyms or additional search terms.

</span></i></div><div class="anchor value-res hidden" id="name-processWords"><i>	<input type='checkbox' class="fold" id="processWords-fold-content"><label for="processWords-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..processWords*b6328.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-111">processWords</a>(s <a href="../../../../builtin.html#name-string">string</a>) []<a href="../../../../builtin.html#name-string">string</a></label><span id='processWords-fold-content-docs' class="fold-docs">
		processWords splits s into words at whitespace, then processes each word.

</span></i></div><div class="anchor value-res hidden" id="name-rawIsMoreRecent"><i>	<input type='checkbox' class="fold" id="rawIsMoreRecent-fold-content"><label for="rawIsMoreRecent-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..rawIsMoreRecent*bed51.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-452">rawIsMoreRecent</a>(v1, v2 <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-bool">bool</a></label><span id='rawIsMoreRecent-fold-content-docs' class="fold-docs">
		rawIsMoreRecent reports whether raw version v1 is more recent than v2.
		v1 is more recent if it is later according to the go command (higher semver,
		preferring release to prerelease). However, the raw latest version can go
		backwards if it was an incompatible version, but then a compatible version
		with a go.mod file is published. For example, the module starts with a
		v2.0.0+incompatible, but then the author adds a v1.0.0 with a go.mod file,
		making v1.0.0 the new latest.

</span></i></div><div class="anchor value-res hidden" id="name-recreateDB"><i>	<input type='checkbox' class="fold" id="recreateDB-fold-content"><label for="recreateDB-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..recreateDB*c3ced.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-36">recreateDB</a>(dbName <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-error">error</a></label><span id='recreateDB-fold-content-docs' class="fold-docs">
		recreateDB drops and recreates the database named dbName.

</span></i></div><div class="anchor value-res hidden" id="name-removePkgPrefix"><i>	<input type='checkbox' class="fold" id="removePkgPrefix-fold-content"><label for="removePkgPrefix-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..removePkgPrefix*335e5.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-221">removePkgPrefix</a>(docHTML <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-string">string</a></label><span id='removePkgPrefix-fold-content-docs' class="fold-docs">
		removePkgPrefix removes the /pkg path prefix from links in docHTML.
		See documentation for packageLinkRegexp for explanation and
		TestRemovePkgPrefix for examples. It preserves the safety of its argument.
		That is, if docHTML is safe from XSS attacks, so is
		removePkgPrefix(docHTML).

		Although we don't add "/pkg" to links after https://golang.org/cl/259101,
		do not remove this function until all databases have been reprocessed.

</span></i></div><div class="anchor value-res hidden" id="name-scanModuleInfo"><i>	<input type='checkbox' class="fold" id="scanModuleInfo-fold-content"><label for="scanModuleInfo-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..scanModuleInfo*b298e.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-193">scanModuleInfo</a>(scan func(dest ...interface{}) <a href="../../../../builtin.html#name-error">error</a>) (*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleInfo">ModuleInfo</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='scanModuleInfo-fold-content-docs' class="fold-docs">
		scanModuleInfo constructs an *internal.ModuleInfo from the given scanner.

</span></i></div><div class="anchor value-res hidden" id="name-scanModuleVersionState"><i>	<input type='checkbox' class="fold" id="scanModuleVersionState-fold-content"><label for="scanModuleVersionState-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..scanModuleVersionState*da0dd.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-247">scanModuleVersionState</a>(scan func(dest ...interface{}) <a href="../../../../builtin.html#name-error">error</a>) (*<a href="../internal.html">internal</a>.<a href="../internal.html#name-ModuleVersionState">ModuleVersionState</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='scanModuleVersionState-fold-content-docs' class="fold-docs">
		scanModuleVersionState constructs an *internal.ModuleModuleVersionState from the given
		scanner. It expects columns to be in the order of moduleVersionStateColumns.

</span></i></div><div class="anchor value-res hidden" id="name-searchDocumentSections"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..searchDocumentSections*9c838.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-36">searchDocumentSections</a>(synopsis, readmeFilename, readme <a href="../../../../builtin.html#name-string">string</a>, maxSecWords <a href="../../../../builtin.html#name-int">int</a>, maxReadmeFrac <a href="../../../../builtin.html#name-float64">float64</a>) (b, c, d <a href="../../../../builtin.html#name-string">string</a>)</span></i></div><div class="anchor value-res hidden" id="name-sentenceEndIndex"><i>	<input type='checkbox' class="fold" id="sentenceEndIndex-fold-content"><label for="sentenceEndIndex-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..sentenceEndIndex*7093c.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-90">sentenceEndIndex</a>(s <a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-int">int</a></label><span id='sentenceEndIndex-fold-content-docs' class="fold-docs">
		sentenceEndIndex returns the index in s of the end of the first sentence, or
		-1 if no end can be found. A sentence ends at a '.', '!' or '?' that is
		followed by a space (or ends the string), and is not preceded by an
		uppercase letter.

</span></i></div><div class="anchor value-res hidden" id="name-shouldUpdateSymbolHistory"><i>	<input type='checkbox' class="fold" id="shouldUpdateSymbolHistory-fold-content"><label for="shouldUpdateSymbolHistory-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..shouldUpdateSymbolHistory*85999.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_symbol_history.go.html#line-166">shouldUpdateSymbolHistory</a>(symbolName, newVersion <a href="../../../../builtin.html#name-string">string</a>, oldHist map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-string">string</a>) <a href="../../../../builtin.html#name-bool">bool</a></label><span id='shouldUpdateSymbolHistory-fold-content-docs' class="fold-docs">
		shouldUpdateSymbolHistory reports whether the row for the given symbolName
		should be updated. oldHist contains all of the current symbols in the
		database for the same package and GOOS/GOARCH.

		shouldUpdateSymbolHistory reports true if the symbolName does not currently
		exist, or if the newVersion is older than or equal to the current database version.

</span></i></div><div class="anchor value-res hidden" id="name-sortAndDedup"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..sortAndDedup*4ce6c.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-495">sortAndDedup</a>(s []<a href="../../../../builtin.html#name-string">string</a>) []<a href="../../../../builtin.html#name-string">string</a></span></i></div><div class="anchor value-res hidden" id="name-split"><i>	<input type='checkbox' class="fold" id="split-fold-content"><label for="split-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..split*ad1a6.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-79">split</a>(a []<a href="../../../../builtin.html#name-string">string</a>, n <a href="../../../../builtin.html#name-int">int</a>) ([]<a href="../../../../builtin.html#name-string">string</a>, []<a href="../../../../builtin.html#name-string">string</a>)</label><span id='split-fold-content-docs' class="fold-docs">
		split splits a slice of strings into two parts. The first has length &lt;= n,
		and the second is the rest of the slice. If n is negative, the first part is nil and
		the second part is the entire slice.

</span></i></div><div class="anchor value-res hidden" id="name-tryToMigrate"><i>	<input type='checkbox' class="fold" id="tryToMigrate-fold-content"><label for="tryToMigrate-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..tryToMigrate*d0793.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/test_helper.go.html#line-55">tryToMigrate</a>(dbName <a href="../../../../builtin.html#name-string">string</a>) (isMigrationError <a href="../../../../builtin.html#name-bool">bool</a>, outerErr <a href="../../../../builtin.html#name-error">error</a>)</label><span id='tryToMigrate-fold-content-docs' class="fold-docs">
		tryToMigrate attempts to migrate the database named dbName to the latest
		migration. If this operation fails in the migration step, it returns
		isMigrationError=true to signal that the database should be recreated.

</span></i></div><div class="anchor value-res hidden" id="name-updateImportedByCounts"><i>	<input type='checkbox' class="fold" id="updateImportedByCounts-fold-content"><label for="updateImportedByCounts-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..updateImportedByCounts*839d3.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-905">updateImportedByCounts</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>) (<a href="../../../../builtin.html#name-int64">int64</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='updateImportedByCounts-fold-content-docs' class="fold-docs">
		updateImportedByCounts updates the imported_by_count column in search_documents
		for every package in computed_imported_by_counts.

		A row is updated even if the value doesn't change, so that the imported_by_count_updated_at
		column is set.

		Note that if a package is never imported, its imported_by_count column will
		be the default (0) and its imported_by_count_updated_at column will never be set.

</span></i></div><div class="anchor value-res hidden" id="name-updateLatestGoodVersion"><i>	<input type='checkbox' class="fold" id="updateLatestGoodVersion-fold-content"><label for="updateLatestGoodVersion-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..updateLatestGoodVersion*ab8dc.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-585">updateLatestGoodVersion</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, tx *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath, version <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='updateLatestGoodVersion-fold-content-docs' class="fold-docs">
		updateLatestGoodVersion updates latest_module_versions.good_version for modulePath to version.

</span></i></div><div class="anchor value-res hidden" id="name-updateModulesStatus"><i>	<input type='checkbox' class="fold" id="updateModulesStatus-fold-content"><label for="updateModulesStatus-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..updateModulesStatus*66935.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-145">updateModulesStatus</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath, resolvedVersion <a href="../../../../builtin.html#name-string">string</a>, status <a href="../../../../builtin.html#name-int">int</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='updateModulesStatus-fold-content-docs' class="fold-docs">
		updateModulesStatus updates the status of the module with the given modulePath
		and version, if it exists, in the modules table.

</span></i></div><div class="anchor value-res hidden" id="name-updateSymbols"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..updateSymbols*d5003.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-432">updateSymbols</a>(symbols []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Symbol">Symbol</a>, updateFunc func(sm *<a href="../internal.html">internal</a>.<a href="../internal.html#name-SymbolMeta">SymbolMeta</a>) <a href="../../../../builtin.html#name-error">error</a>) <a href="../../../../builtin.html#name-error">error</a></span></i></div><div class="anchor value-res hidden" id="name-upsertDocumentationSymbols"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertDocumentationSymbols*d5e56.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-56">upsertDocumentationSymbols</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, pathToPkgsymID map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="#name-packageSymbol">packageSymbol</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocIDToDoc map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-upsertLatestModuleVersions"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertLatestModuleVersions*9ac0d.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-533">upsertLatestModuleVersions</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, tx *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>, id <a href="../../../../builtin.html#name-int">int</a>, lmv *<a href="../internal.html">internal</a>.<a href="../internal.html#name-LatestModuleVersions">LatestModuleVersions</a>, status <a href="../../../../builtin.html#name-int">int</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-upsertModuleVersionState"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertModuleVersionState*78f34.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-87">upsertModuleVersionState</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, numPackages *<a href="../../../../builtin.html#name-int">int</a>, mvs *<a href="#name-ModuleVersionStateForUpsert">ModuleVersionStateForUpsert</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-upsertPackageSymbolsReturningIDs"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertPackageSymbolsReturningIDs*5292b.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-165">upsertPackageSymbolsReturningIDs</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath <a href="../../../../builtin.html#name-string">string</a>, pathToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, nameToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocIDToDoc map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (_ map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="#name-packageSymbol">packageSymbol</a>]<a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-upsertPackageVersionStates"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertPackageVersionStates*30801.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-177">upsertPackageVersionStates</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, packageVersionStates []*<a href="../internal.html">internal</a>.<a href="../internal.html#name-PackageVersionState">PackageVersionState</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-upsertPath"><i>	<input type='checkbox' class="fold" id="upsertPath-fold-content"><label for="upsertPath-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertPath*7ef94.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/path.go.html#line-79">upsertPath</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, tx *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, path <a href="../../../../builtin.html#name-string">string</a>) (id <a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='upsertPath-fold-content-docs' class="fold-docs">
		upsertPath adds path into the paths table if it does not exist, and returns
		its ID either way.
		It assumes it is running inside a transaction.

</span></i></div><div class="anchor value-res hidden" id="name-upsertPaths"><i>	<input type='checkbox' class="fold" id="upsertPaths-fold-content"><label for="upsertPaths-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertPaths*3ba52.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/path.go.html#line-113">upsertPaths</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, paths []<a href="../../../../builtin.html#name-string">string</a>) (pathToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='upsertPaths-fold-content-docs' class="fold-docs">
		upsertPaths adds all the paths to the paths table if they aren't already
		there, and returns their ID either way.
		It assumes it is running inside a transaction.

</span></i></div><div class="anchor value-res hidden" id="name-upsertSearchDocuments"><i>	<input type='checkbox' class="fold" id="upsertSearchDocuments-fold-content"><label for="upsertSearchDocuments-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertSearchDocuments*eb480.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-629">upsertSearchDocuments</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, mod *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='upsertSearchDocuments-fold-content-docs' class="fold-docs">
		upsertSearchDocuments adds search information for mod to the search_documents table.
		It assumes that all non-redistributable data has been removed from mod.

</span></i></div><div class="anchor value-res hidden" id="name-upsertSearchDocumentSymbols"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertSearchDocumentSymbols*c1895.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/package_symbol.go.html#line-103">upsertSearchDocumentSymbols</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, packagePath, modulePath, v <a href="../../../../builtin.html#name-string">string</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-upsertSymbolHistory"><i>	<input type='checkbox' class="fold" id="upsertSymbolHistory-fold-content"><label for="upsertSymbolHistory-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertSymbolHistory*20da2.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_symbol_history.go.html#line-19">upsertSymbolHistory</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, ddb *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, modulePath, ver <a href="../../../../builtin.html#name-string">string</a>, nameToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToID map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToPkgsymID map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="#name-packageSymbol">packageSymbol</a>]<a href="../../../../builtin.html#name-int">int</a>, pathToDocIDToDoc map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='upsertSymbolHistory-fold-content-docs' class="fold-docs">
		upsertSymbolHistory upserts data into the symbol_history table.

</span></i></div><div class="anchor value-res hidden" id="name-upsertSymbolNamesReturningIDs"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertSymbolNamesReturningIDs*7bf53.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/symbol.go.html#line-301">upsertSymbolNamesReturningIDs</a>(ctx <a href="../../../../context.html">context</a>.<a href="../../../../context.html#name-Context">Context</a>, db *<a href="database.html">database</a>.<a href="database.html#name-DB">DB</a>, pathToDocIDToDocs map[<a href="../../../../builtin.html#name-string">string</a>]map[<a href="../../../../builtin.html#name-int">int</a>]*<a href="../internal.html">internal</a>.<a href="../internal.html#name-Documentation">Documentation</a>) (_ map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-int">int</a>, err <a href="../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-validateModule"><i>	<input type='checkbox' class="fold" id="validateModule-fold-content"><label for="validateModule-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..validateModule*ae7da.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/insert_module.go.html#line-765">validateModule</a>(m *<a href="../internal.html">internal</a>.<a href="../internal.html#name-Module">Module</a>) (err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='validateModule-fold-content-docs' class="fold-docs">
		validateModule checks that fields needed to insert a module into the database
		are present. Otherwise, it returns an error listing the reasons the module
		cannot be inserted. Since the problems it looks for are most likely on our
		end, the underlying error it returns is always DBModuleInsertInvalid, meaning
		that this module should be reprocessed.

</span></i></div><div class="anchor value-res hidden" id="name-versionMapSelect"><i>	<span class="nodocs"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..versionMapSelect*3c5b4.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version_map.go.html#line-131">versionMapSelect</a>() <a href="../../../../github.com/Masterminds*f9830/squirrel.html">squirrel</a>.<a href="../../../../github.com/Masterminds*f9830/squirrel.html#name-SelectBuilder">SelectBuilder</a></span></i></div><div class="anchor value-res hidden" id="name-versionTypeExpr"><i>	<input type='checkbox' class="fold" id="versionTypeExpr-fold-content"><label for="versionTypeExpr-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..versionTypeExpr*053fb.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/version.go.html#line-106">versionTypeExpr</a>(vts []<a href="version.html">version</a>.<a href="version.html#name-Type">Type</a>) <a href="../../../../builtin.html#name-string">string</a></label><span id='versionTypeExpr-fold-content-docs' class="fold-docs">
		versionTypeExpr returns a comma-separated list of version types,
		for use in a clause like "WHERE version_type IN (%s)"

</span></i></div><div class="anchor value-res hidden" id="name-walkMarkdown"><i>	<input type='checkbox' class="fold" id="walkMarkdown-fold-content"><label for="walkMarkdown-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..walkMarkdown*339d0.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-190">walkMarkdown</a>(n *<a href="../../../../github.com/russross/blackfriday/v2.html">blackfriday</a>.<a href="../../../../github.com/russross/blackfriday/v2.html#name-Node">Node</a>, buf []<a href="../../../../builtin.html#name-byte">byte</a>, level <a href="../../../../builtin.html#name-int">int</a>) []<a href="../../../../builtin.html#name-byte">byte</a></label><span id='walkMarkdown-fold-content-docs' class="fold-docs">
		walkMarkdown traverses a blackfriday parse tree, extracting text.

</span></i></div><div class="anchor value-res hidden" id="name-zipLicenseMetadata"><i>	<input type='checkbox' class="fold" id="zipLicenseMetadata-fold-content"><label for="zipLicenseMetadata-fold-content"> <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..zipLicenseMetadata*bd70e.html">func</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/licenses.go.html#line-160">zipLicenseMetadata</a>(licenseTypes []<a href="../../../../builtin.html#name-string">string</a>, licensePaths []<a href="../../../../builtin.html#name-string">string</a>) (_ []*<a href="licenses.html">licenses</a>.<a href="licenses.html#name-Metadata">Metadata</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='zipLicenseMetadata-fold-content-docs' class="fold-docs">
		zipLicenseMetadata constructs licenses.Metadata from the given license types
		and paths, by zipping and then sorting.

</span></i></div></div>
<div id="exported-variables"><span class="title">Package-Level Variables<span class="title-stat"><i> (total 15, in which 2 are exported)</i></span></span>

<div class="anchor value-res" id="name-SearchLatencyDistribution">	<input type='checkbox' class="fold" id="SearchLatencyDistribution-fold-content"><label for="SearchLatencyDistribution-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..SearchLatencyDistribution.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-42">SearchLatencyDistribution</a> *<a href="../../../../go.opencensus.io/stats/view.html">view</a>.<a href="../../../../go.opencensus.io/stats/view.html#name-View">View</a></label><span id='SearchLatencyDistribution-fold-content-docs' class="fold-docs">
		SearchLatencyDistribution aggregates search request latency by search
		query type.

</span></div><div class="anchor value-res" id="name-SearchResponseCount">	<input type='checkbox' class="fold" id="SearchResponseCount-fold-content"><label for="SearchResponseCount-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..SearchResponseCount.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-50">SearchResponseCount</a> *<a href="../../../../go.opencensus.io/stats/view.html">view</a>.<a href="../../../../go.opencensus.io/stats/view.html#name-View">View</a></label><span id='SearchResponseCount-fold-content-docs' class="fold-docs">
		SearchResponseCount counts search responses by search query type.

</span></div>	<input type='checkbox' class="showhide" id="unexported-variables-showhide"><i><label for="unexported-variables-showhide" class="show-inline">/* 13 unexporteds ... */</label><label for="unexported-variables-showhide" class="hide-inline">/* 13 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-commonHostnames"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..commonHostnames*94b7a.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-930">commonHostnames</a> map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-bool">bool</a></span></i></div><div class="anchor value-res hidden" id="name-commonHostParts"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..commonHostParts*541fb.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-943">commonHostParts</a> map[<a href="../../../../builtin.html#name-string">string</a>]<a href="../../../../builtin.html#name-bool">bool</a></span></i></div><div class="anchor value-res hidden" id="name-keySearchSource"><i>	<input type='checkbox' class="fold" id="keySearchSource-fold-content"><label for="keySearchSource-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..keySearchSource*516c2.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-39">keySearchSource</a> <a href="../../../../go.opencensus.io/tag.html">tag</a>.<a href="../../../../go.opencensus.io/tag.html#name-Key">Key</a></label><span id='keySearchSource-fold-content-docs' class="fold-docs">
		keySearchSource is a census tag for search query types.

</span></i></div><div class="anchor value-res hidden" id="name-largeModulesLimit"><i>	<input type='checkbox' class="fold" id="largeModulesLimit-fold-content"><label for="largeModulesLimit-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..largeModulesLimit*08dcc.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html#line-126">largeModulesLimit</a> <a href="../../../../builtin.html#name-int">int</a></label><span id='largeModulesLimit-fold-content-docs' class="fold-docs">
		largeModulesLimit represents the number of large modules that we are
		willing to enqueue at a given time.
		var for testing.

</span></i></div><div class="anchor value-res hidden" id="name-packageLinkRegexp"><i>	<input type='checkbox' class="fold" id="packageLinkRegexp-fold-content"><label for="packageLinkRegexp-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..packageLinkRegexp*639bc.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/details.go.html#line-211">packageLinkRegexp</a> *<a href="../../../../regexp.html">regexp</a>.<a href="../../../../regexp.html#name-Regexp">Regexp</a></label><span id='packageLinkRegexp-fold-content-docs' class="fold-docs">
		packageLinkRegexp matches cross-package identifier links that have been
		generated by the dochtml package. At the time this hack was added, these
		links are all constructed to have either the form
		  &lt;a href="/pkg/[path]"&gt;[name]&lt;/a&gt;
		or the form
		  &lt;a href="/pkg/[path]#identifier"&gt;[name]&lt;/a&gt;

		The packageLinkRegexp mutates these links as follows:
		  - remove the now unnecessary '/pkg' path prefix

</span></i></div><div class="anchor value-res hidden" id="name-pkgSearchers"><i>	<input type='checkbox' class="fold" id="pkgSearchers-fold-content"><label for="pkgSearchers-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..pkgSearchers*75641.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-88">pkgSearchers</a> map[<a href="../../../../builtin.html#name-string">string</a>]<a href="#name-searcher">searcher</a></label><span id='pkgSearchers-fold-content-docs' class="fold-docs">
		The pkgSearchers used by Search.

</span></i></div><div class="anchor value-res hidden" id="name-scoreExpr"><i>	<input type='checkbox' class="fold" id="scoreExpr-fold-content"><label for="scoreExpr-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..scoreExpr*27cd0.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-183">scoreExpr</a> <a href="../../../../builtin.html#name-string">string</a></label><span id='scoreExpr-fold-content-docs' class="fold-docs">
		scoreExpr is the expression that computes the search score.
		It is the product of:
		- The Postgres ts_rank score, based the relevance of the document to the query.
		- The log of the module's popularity, estimated by the number of importing packages.
		  The log factor contains exp(1) so that it is always &gt;= 1. Taking the log
		  of imported_by_count instead of using it directly makes the effect less
		  dramatic: being 2x as popular only has an additive effect.
		- A penalty factor for non-redistributable modules, since a lot of
		  details cannot be displayed.
		The first argument to ts_rank is an array of weights for the four tsvector sections,
		in the order D, C, B, A.
		The weights below match the defaults except for B.

</span></i></div><div class="anchor value-res hidden" id="name-searchLatency"><i>	<input type='checkbox' class="fold" id="searchLatency-fold-content"><label for="searchLatency-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..searchLatency*ac1ec.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-33">searchLatency</a> *<a href="../../../../go.opencensus.io/stats.html">stats</a>.<a href="../../../../go.opencensus.io/stats.html#name-Float64Measure">Float64Measure</a></label><span id='searchLatency-fold-content-docs' class="fold-docs">
		searchLatency holds observed latency in individual search queries.

</span></i></div><div class="anchor value-res hidden" id="name-startPoller"><i>	<input type='checkbox' class="fold" id="startPoller-fold-content"><label for="startPoller-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..startPoller*c919c.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/postgres.go.html#line-40">startPoller</a> <a href="../../../../builtin.html#name-bool">bool</a></label><span id='startPoller-fold-content-docs' class="fold-docs">
		For testing.

</span></i></div><div class="anchor value-res hidden" id="name-summaryReplacements"><i>	<input type='checkbox' class="fold" id="summaryReplacements-fold-content"><label for="summaryReplacements-fold-content">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..summaryReplacements*9b2a5.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-126">summaryReplacements</a> map[<a href="../../../../builtin.html#name-string">string</a>][]<a href="../../../../builtin.html#name-string">string</a></label><span id='summaryReplacements-fold-content-docs' class="fold-docs">
		summaryReplacements is used to replace words with other words.
		It is used by processWord, below.
		Example key-value pairs:
		  "deleteMe": nil					 // removes "deleteMe"
		  "rand": []string{"random"}			 // replace "rand" with "random"
		  "utf-8": []string{"utf-8", "utf8"}  // add "utf8" whenever "utf-8" is seen

</span></i></div><div class="anchor value-res hidden" id="name-symbolScoreExpr"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..symbolScoreExpr*19f7e.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-421">symbolScoreExpr</a> <a href="../../../../builtin.html#name-string">string</a></span></i></div><div class="anchor value-res hidden" id="name-symbolSearchers"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..symbolSearchers*5ceb0.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-93">symbolSearchers</a> map[<a href="../../../../builtin.html#name-string">string</a>]<a href="#name-searcher">searcher</a></span></i></div><div class="anchor value-res hidden" id="name-upsertSearchStatement"><i>	<span class="nodocs">  <a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..upsertSearchStatement*2ea65.html">var</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-558">upsertSearchStatement</a> <a href="../../../../builtin.html#name-string">string</a></span></i></div></div>
<div id="exported-constants"><span class="title">Package-Level Constants<span class="title-stat"><i> (total 8, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-constants-showhide"><i><label for="unexported-constants-showhide" class="show-inline">/* 8 unexporteds ... */</label><label for="unexported-constants-showhide" class="hide-inline">/* 8 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-hllRegisterCount"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..hllRegisterCount*704bc.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-248">hllRegisterCount</a> = 128</span></i></div><div class="anchor value-res hidden" id="name-largeModulePackageThreshold"><i>	<input type='checkbox' class="fold" id="largeModulePackageThreshold-fold-content"><label for="largeModulePackageThreshold-fold-content"><a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..largeModulePackageThreshold*dddcc.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html#line-121">largeModulePackageThreshold</a> = 1500</label><span id='largeModulePackageThreshold-fold-content-docs' class="fold-docs">
		largeModulePackageThresold represents the package threshold at which it
		becomes difficult to process packages. Modules with more than this number
		of packages are generally different versions or forks of kubernetes,
		aws-sdk-go, azure-sdk-go, and bilibili.

</span></i></div><div class="anchor value-res hidden" id="name-maxReadmeFraction"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..maxReadmeFraction*934ac.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-17">maxReadmeFraction</a> = 0.5</span></i></div><div class="anchor value-res hidden" id="name-maxSectionWords"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..maxSectionWords*b174f.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/searchdoc.go.html#line-16">maxSectionWords</a> = 50</span></i></div><div class="anchor value-res hidden" id="name-moduleVersionStateColumns"><i>	<span class="nodocs"><a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..moduleVersionStateColumns*81f27.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/versionstate.go.html#line-230">moduleVersionStateColumns</a> = "\n\t\t\tmodule_path,\n\t\t\tversion,\n\t\t\tindex_timestamp,\n\t\t\t...</span></i></div><div class="anchor value-res hidden" id="name-nextModulesToProcessQuery"><i>	<input type='checkbox' class="fold" id="nextModulesToProcessQuery-fold-content"><label for="nextModulesToProcessQuery-fold-content"><a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..nextModulesToProcessQuery*7c63c.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/requeue.go.html#line-200">nextModulesToProcessQuery</a> = "\n\t-- Make a table of the latest versions of each module.\n\tWITH l...</label><span id='nextModulesToProcessQuery-fold-content-docs' class="fold-docs">
		This query prioritizes latest versions, but other than that, it tries
		to avoid grouping modules in any way except by latest and status code:
		processing is much smoother when they are enqueued in random order.

		To make the result deterministic for testing, we hash the module path and version
		rather than actually choosing a random number. md5 is built in to postgres and
		is an adequate hash for this purpose.

</span></i></div><div class="anchor value-res hidden" id="name-noGoModPenalty"><i>	<input type='checkbox' class="fold" id="noGoModPenalty-fold-content"><label for="noGoModPenalty-fold-content"><a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..noGoModPenalty*2abd5.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-168">noGoModPenalty</a> = 0.8</label><span id='noGoModPenalty-fold-content-docs' class="fold-docs">
		Module does not have a go.mod file.
		Start this off gently (close to 1), but consider lowering
		it as time goes by and more of the ecosystem converts to modules.

</span></i></div><div class="anchor value-res hidden" id="name-nonRedistributablePenalty"><i>	<input type='checkbox' class="fold" id="nonRedistributablePenalty-fold-content"><label for="nonRedistributablePenalty-fold-content"><a href="../../../../../use/golang.org/x/pkgsite/internal/postgres..nonRedistributablePenalty*7b74a.html">const</a> <a href="../../../../../src/golang.org/x/pkgsite/internal/postgres/search.go.html#line-164">nonRedistributablePenalty</a> = 0.5</label><span id='nonRedistributablePenalty-fold-content-docs' class="fold-docs">
		Module license is non-redistributable.

</span></i></div></div></code></pre><pre id="footer">
<table><tr><td><img src="../../../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>