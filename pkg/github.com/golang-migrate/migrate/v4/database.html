<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: github.com/golang-migrate/migrate/v4/database</title>
<link href="../../../../../css/light-v0.3.2-preview.css" rel="stylesheet">
<script src="../../../../../jvs/golds-v0.3.2-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>database</b></span>

<span class="title">Import Path</span>
	<a href="../../../../../index.html#pkg-github.com/golang-migrate/migrate/v4/database">github.com/golang-migrate/migrate/v4/database</a><i> (on <a href="https://pkg.go.dev/github.com/golang-migrate/migrate/v4/database" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../../../../dep/github.com/golang-migrate/migrate/v4/database.html">6 packages</a>, and imported by <a href="../../../../../dep/github.com/golang-migrate/migrate/v4/database.html#imported-by">2 packages</a>

<div id="files"><span class="title">Involved Source Files</span>

	<input type='checkbox' checked class="fold" id="file-0-fold-content"><label for="file-0-fold-content">   <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#doc">dâžœ</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html">driver.go</a></label><span id='file-0-fold-content-items' class="fold-items">
		Package database provides the Database interface.
		All database drivers must implement this interface, register themselves,
		optionally provide a `WithInstance` function and pass the tests
		in package database/testing.
</span>
	<span class="nodocs">      <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/error.go.html">error.go</a></span>
	<span class="nodocs">      <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/util.go.html">util.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (total 2, both are exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-Driver" data-popularity="1005">	<input type='checkbox' class="fold" id="Driver-fold-content"><label for="Driver-fold-content"> <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..Driver.html">type</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-44">Driver</a> <b><i>(interface)</i></b></label><span id='Driver-fold-content-docs' class="fold-docs">
		Driver is the interface every database driver must implement.

		How to implement a database driver?
		  1. Implement this interface.
		  2. Optionally, add a function named `WithInstance`.
		     This function should accept an existing DB instance and a Config{} struct
		     and return a driver instance.
		  3. Add a test that calls database/testing.go:Test()
		  4. Add own tests for Open(), WithInstance() (when provided) and Close().
		     All other functions are tested by tests in database/testing.
		     Saves you some time and makes sure all database drivers behave the same way.
		  5. Call Register in init().
		  6. Create a migrate/cli/build_&lt;driver-name&gt;.go file
		  7. Add driver name in 'DATABASE' variable in Makefile

		Guidelines:
		  * Don't try to correct user input. Don't assume things.
		    When in doubt, return an error and explain the situation to the user.
		  * All configuration input must come from the URL string in func Open()
		    or the Config{} struct in WithInstance. Don't os.Getenv().

		<input type='checkbox' class="fold" id="Driver-fold-methods"><label for="Driver-fold-methods">Methods (<i>total 8, all are exported</i>)</label><span id='Driver-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Driver-fold-method-Close"><label for="Driver-fold-method-Close">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-52">Close</a>() <a href="../../../../builtin.html#name-error">error</a></label><span id='Driver-fold-method-Close-docs' class="fold-docs">
				Close closes the underlying database instance managed by the driver.
				Migrate will call this function only once per instance.
</span></span><span>
			<input type='checkbox' class="fold" id="Driver-fold-method-Drop"><label for="Driver-fold-method-Drop">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-80">Drop</a>() <a href="../../../../builtin.html#name-error">error</a></label><span id='Driver-fold-method-Drop-docs' class="fold-docs">
				Drop deletes everything in the database.
				Note that this is a breaking action, a new call to Open() is necessary to
				ensure subsequent calls work as expected.
</span></span><span>
			<input type='checkbox' class="fold" id="Driver-fold-method-Lock"><label for="Driver-fold-method-Lock">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-58">Lock</a>() <a href="../../../../builtin.html#name-error">error</a></label><span id='Driver-fold-method-Lock-docs' class="fold-docs">
				Lock should acquire a database lock so that only one migration process
				can run at a time. Migrate will call this function before Run is called.
				If the implementation can't provide this functionality, return nil.
				Return database.ErrLocked if database is already locked.
</span></span><span>
			<input type='checkbox' class="fold" id="Driver-fold-method-Open"><label for="Driver-fold-method-Open">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-48">Open</a>(url <a href="../../../../builtin.html#name-string">string</a>) (<b>Driver</b>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='Driver-fold-method-Open-docs' class="fold-docs">
				Open returns a new driver instance configured with parameters
				coming from the URL string. Migrate will call this function
				only once per instance.
</span></span><span>
			<input type='checkbox' class="fold" id="Driver-fold-method-Run"><label for="Driver-fold-method-Run">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-65">Run</a>(migration <a href="../../../../io.html">io</a>.<a href="../../../../io.html#name-Reader">Reader</a>) <a href="../../../../builtin.html#name-error">error</a></label><span id='Driver-fold-method-Run-docs' class="fold-docs">
				Run applies a migration to the database. migration is garantueed to be not nil.
</span></span><span>
			<input type='checkbox' class="fold" id="Driver-fold-method-SetVersion"><label for="Driver-fold-method-SetVersion">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-70">SetVersion</a>(version <a href="../../../../builtin.html#name-int">int</a>, dirty <a href="../../../../builtin.html#name-bool">bool</a>) <a href="../../../../builtin.html#name-error">error</a></label><span id='Driver-fold-method-SetVersion-docs' class="fold-docs">
				SetVersion saves version and dirty state.
				Migrate will call this function before and after each call to Run.
				version must be &gt;= -1. -1 means NilVersion.
</span></span><span>
			<input type='checkbox' class="fold" id="Driver-fold-method-Unlock"><label for="Driver-fold-method-Unlock">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-62">Unlock</a>() <a href="../../../../builtin.html#name-error">error</a></label><span id='Driver-fold-method-Unlock-docs' class="fold-docs">
				Unlock should release the lock. Migrate will call this function after
				all migrations have been run.
</span></span><span>
			<input type='checkbox' class="fold" id="Driver-fold-method-Version"><label for="Driver-fold-method-Version">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-75">Version</a>() (version <a href="../../../../builtin.html#name-int">int</a>, dirty <a href="../../../../builtin.html#name-bool">bool</a>, err <a href="../../../../builtin.html#name-error">error</a>)</label><span id='Driver-fold-method-Version-docs' class="fold-docs">
				Version returns the currently active version and if the database is dirty.
				When no migration has been applied, it must return version -1.
				Dirty means, a previous migration failed and user interaction is required.
</span></span></span>
		<input type='checkbox' class="fold" id="Driver-fold-impledby"><label for="Driver-fold-impledby">Implemented By (<i>at least one exported</i>)</label><span id='Driver-fold-impledby-items' class="fold-items"><span>
			*github.com/golang-migrate/migrate/v4/database/postgres.<a href="database/postgres.html#name-Postgres">Postgres</a></span></span>
		<input type='checkbox' class="fold" id="Driver-fold-impls"><label for="Driver-fold-impls">Implements (<i>at least one exported</i>)</label><span id='Driver-fold-impls-items' class="fold-items"><span>
			 T : io.<a href="../../../../io.html#name-Closer">Closer</a></span></span>
		<input type='checkbox' class="fold" id="Driver-fold-results"><label for="Driver-fold-results">As Outputs Of (<i>at least 4, all are exported</i>)</label><span id='Driver-fold-results-items' class="fold-items"><span>
			func <a href="#name-Open">Open</a>(url <a href="../../../../builtin.html#name-string">string</a>) (<b>Driver</b>, <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func Driver.<a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-48">Open</a>(url <a href="../../../../builtin.html#name-string">string</a>) (<b>Driver</b>, <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func github.com/golang-migrate/migrate/v4/database/postgres.<a href="database/postgres.html#name-WithInstance">WithInstance</a>(instance *<a href="../../../../database/sql.html">sql</a>.<a href="../../../../database/sql.html#name-DB">DB</a>, config *<a href="database/postgres.html">postgres</a>.<a href="database/postgres.html#name-Config">Config</a>) (<b>Driver</b>, <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func github.com/golang-migrate/migrate/v4/database/postgres.(*<a href="database/postgres.html#name-Postgres">Postgres</a>).<a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/postgres/postgres.go.html#line-108">Open</a>(url <a href="../../../../builtin.html#name-string">string</a>) (<b>Driver</b>, <a href="../../../../builtin.html#name-error">error</a>)</span></span>
		<input type='checkbox' class="fold" id="Driver-fold-params"><label for="Driver-fold-params">As Inputs Of (<i>at least 3, all are exported</i>)</label><span id='Driver-fold-params-items' class="fold-items"><span>
			func <a href="#name-Register">Register</a>(name <a href="../../../../builtin.html#name-string">string</a>, driver <b>Driver</b>)</span><span>
			func github.com/golang-migrate/migrate/v4.<a href="../v4.html#name-NewWithDatabaseInstance">NewWithDatabaseInstance</a>(sourceURL <a href="../../../../builtin.html#name-string">string</a>, databaseName <a href="../../../../builtin.html#name-string">string</a>, databaseInstance <b>Driver</b>) (*<a href="../v4.html">migrate</a>.<a href="../v4.html#name-Migrate">Migrate</a>, <a href="../../../../builtin.html#name-error">error</a>)</span><span>
			func github.com/golang-migrate/migrate/v4.<a href="../v4.html#name-NewWithInstance">NewWithInstance</a>(sourceName <a href="../../../../builtin.html#name-string">string</a>, sourceInstance <a href="source.html">source</a>.<a href="source.html#name-Driver">Driver</a>, databaseName <a href="../../../../builtin.html#name-string">string</a>, databaseInstance <b>Driver</b>) (*<a href="../v4.html">migrate</a>.<a href="../v4.html#name-Migrate">Migrate</a>, <a href="../../../../builtin.html#name-error">error</a>)</span></span>

</span></div><div class="anchor type-res" id="name-Error" data-popularity="100">	<input type='checkbox' class="fold" id="Error-fold-content"><label for="Error-fold-content"> <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..Error.html">type</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/error.go.html#line-8">Error</a> <i>(struct)</i></label><span id='Error-fold-content-docs' class="fold-docs">
		Error should be used for errors involving queries ran against the database

		<input type='checkbox' class="fold" id="Error-fold-fields"><label for="Error-fold-fields">Fields (<i>total 4, all are exported</i>)</label><span id='Error-fold-fields-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Error-fold-field-Err"><label for="Error-fold-field-Err"><a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/error.go.html#line-16">Err</a> <i><a href="../../../../builtin.html#name-string">string</a></i></label><span id='Error-fold-field-Err-docs' class="fold-docs">
				Err is a useful/helping error message for humans
</span></span><span>
			<input type='checkbox' class="fold" id="Error-fold-field-Line"><label for="Error-fold-field-Line"><a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/error.go.html#line-10">Line</a> <i><a href="../../../../builtin.html#name-uint">uint</a></i></label><span id='Error-fold-field-Line-docs' class="fold-docs">
				Optional: the line number
</span></span><span>
			<input type='checkbox' class="fold" id="Error-fold-field-OrigErr"><label for="Error-fold-field-OrigErr"><a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/error.go.html#line-19">OrigErr</a> <i><a href="../../../../builtin.html#name-error">error</a></i></label><span id='Error-fold-field-OrigErr-docs' class="fold-docs">
				OrigErr is the underlying error
</span></span><span>
			<input type='checkbox' class="fold" id="Error-fold-field-Query"><label for="Error-fold-field-Query"><a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/error.go.html#line-13">Query</a> <i>[]<a href="../../../../builtin.html#name-byte">byte</a></i></label><span id='Error-fold-field-Query-docs' class="fold-docs">
				Query is a query excerpt
</span></span></span>
		<input type='checkbox' class="fold" id="Error-fold-methods"><label for="Error-fold-methods">Methods (<i>only one, which is exported</i>)</label><span id='Error-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">( T) <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/error.go.html#line-22">Error</a>() <a href="../../../../builtin.html#name-string">string</a></span></span></span>
		<input type='checkbox' class="fold" id="Error-fold-impls"><label for="Error-fold-impls">Implements (<i>at least one exported</i>)</label><span id='Error-fold-impls-items' class="fold-items"><span>
			 T : <a href="../../../../builtin.html#name-error">error</a></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 4, all are exported)</i></span></span>

<div class="anchor value-res" id="name-GenerateAdvisoryLockId">	<input type='checkbox' class="fold" id="GenerateAdvisoryLockId-fold-content"><label for="GenerateAdvisoryLockId-fold-content"> <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..GenerateAdvisoryLockId.html">func</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/util.go.html#line-12">GenerateAdvisoryLockId</a>(databaseName <a href="../../../../builtin.html#name-string">string</a>, additionalNames ...<a href="../../../../builtin.html#name-string">string</a>) (<a href="../../../../builtin.html#name-string">string</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='GenerateAdvisoryLockId-fold-content-docs' class="fold-docs">
		GenerateAdvisoryLockId inspired by rails migrations, see https://goo.gl/8o9bCT

</span></div><div class="anchor value-res" id="name-List">	<input type='checkbox' class="fold" id="List-fold-content"><label for="List-fold-content"> <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..List.html">func</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-114">List</a>() []<a href="../../../../builtin.html#name-string">string</a></label><span id='List-fold-content-docs' class="fold-docs">
		List lists the registered drivers

</span></div><div class="anchor value-res" id="name-Open">	<input type='checkbox' class="fold" id="Open-fold-content"><label for="Open-fold-content"> <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..Open.html">func</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-84">Open</a>(url <a href="../../../../builtin.html#name-string">string</a>) (<a href="#name-Driver">Driver</a>, <a href="../../../../builtin.html#name-error">error</a>)</label><span id='Open-fold-content-docs' class="fold-docs">
		Open returns a new driver instance.

</span></div><div class="anchor value-res" id="name-Register">	<input type='checkbox' class="fold" id="Register-fold-content"><label for="Register-fold-content"> <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..Register.html">func</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-101">Register</a>(name <a href="../../../../builtin.html#name-string">string</a>, driver <a href="#name-Driver">Driver</a>)</label><span id='Register-fold-content-docs' class="fold-docs">
		Register globally registers a driver.

</span></div></div>
<div id="exported-variables"><span class="title">Package-Level Variables<span class="title-stat"><i> (total 3, in which 1 are exported)</i></span></span>

<div class="anchor value-res" id="name-ErrLocked">	<span class="nodocs">  <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..ErrLocked.html">var</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-16">ErrLocked</a> <a href="../../../../builtin.html#name-error">error</a></span></div>	<input type='checkbox' class="showhide" id="unexported-variables-showhide"><i><label for="unexported-variables-showhide" class="show-inline">/* 2 unexporteds ... */</label><label for="unexported-variables-showhide" class="hide-inline">/* 2 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-drivers"><i>	<span class="nodocs">  <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..drivers*a7151.html">var</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-22">drivers</a> map[<a href="../../../../builtin.html#name-string">string</a>]<a href="#name-Driver">Driver</a></span></i></div><div class="anchor value-res hidden" id="name-driversMu"><i>	<span class="nodocs">  <a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..driversMu*29057.html">var</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-21">driversMu</a> <a href="../../../../sync.html">sync</a>.<a href="../../../../sync.html#name-RWMutex">RWMutex</a></span></i></div></div>
<div id="exported-constants"><span class="title">Package-Level Constants<span class="title-stat"><i> (total 2, in which 1 are exported)</i></span></span>

<div class="anchor value-res" id="name-NilVersion">	<span class="nodocs"><a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..NilVersion.html">const</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/driver.go.html#line-19">NilVersion</a> <a href="../../../../builtin.html#name-int">int</a> = -1</span></div>	<input type='checkbox' class="showhide" id="unexported-constants-showhide"><i><label for="unexported-constants-showhide" class="show-inline">/* one unexported ... */</label><label for="unexported-constants-showhide" class="hide-inline">/* one unexported: */</label></i><div class="anchor value-res hidden" id="name-advisoryLockIDSalt"><i>	<span class="nodocs"><a href="../../../../../use/github.com/golang-migrate/migrate/v4/database..advisoryLockIDSalt*09fa8.html">const</a> <a href="../../../../../src/github.com/golang-migrate/migrate/v4/database/util.go.html#line-9">advisoryLockIDSalt</a> <a href="../../../../builtin.html#name-uint">uint</a> = 1486364155</span></i></div></div></code></pre><pre id="footer">
<table><tr><td><img src="../../../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.2-preview</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>